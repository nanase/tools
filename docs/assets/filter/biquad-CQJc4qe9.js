var In=Object.defineProperty;var Tn=(t,e,n)=>e in t?In(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var X=(t,e,n)=>Tn(t,typeof e!="symbol"?e+"":e,n);import{d as Dn,v as On,r as M,l as Mt,w as Re,a as V,o as Ie,c as Te,b as y,e as d,u as A,R as I,m as qn,q as zn,f as p,k as _,t as R,_ as jn,x as Fn,y as En,z as Vn,g as Bn}from"../tools-SIValueInput.vue_vue_type_script_setup_true_lang-BTbVBeTJ.js";import{d as Ln,C as re,i as xe,a as te,c as Wn,u as Nn,b as le,e as rt,f as Kt,g as N,v as we,E as de,t as H,h as We,j as lt,k as Hn,P as E,A as Yn,l as Ve,m as $n,n as Xn,Q as me,H as De,T as Ct,o as Qn,p as kt,R as Zt,_ as St}from"../tools-ChartBase.vue_vue_type_script_setup_true_lang-CCXih-DI.js";import{S as Pt,o as en,a as tn,T as Un,b as Ge,c as At,P as Oe,d as Gn,_ as Je,s as Jn,M as Kn}from"../tools-vue-DyssL-Uu.js";import{_ as P}from"../tools-MathJax.vue_vue_type_style_index_0_lang-OW60nBH6.js";import{_ as ae}from"../tools-InputRow.vue_vue_type_script_setup_true_lang-U2npj9cw.js";import{d as qe,R as Zn}from"../tools-object-DXBQZyn3.js";import{W as eo}from"../tools-worker-DEQy9XtV.js";function Rt(t,e){if(typeof e>"u"){const n=Array(t);let o=0;for(;o<t;)n[o]=o++;return n}else{const n=Array(e-t);let o=0,s=t;for(;s<e;)n[o++]=s++;return n}}function to(t,e){const n=Array(e);let o=0;for(;o<e;)n[o]=t/e*o++;return n}function It(t){let e=-1/0,n=1/0,o=-1,s=-1,i=0;for(const a of t)a>e&&(e=a,o=i),a<n&&(n=a,s=i),i++;return{max:e,min:n,maxIndex:o,minIndex:s}}function Be(t,e){const n=t.length;if(n!=e.length)throw new RangeError("Mismatched lengths");n!=0&&(n&n-1?so(t,e):oo(t,e))}function no(t,e){Be(e,t)}function oo(t,e){const n=t.length;if(n!=e.length)throw new RangeError("Mismatched lengths");if(n==1)return;let o=-1;for(let r=0;r<32;r++)1<<r==n&&(o=r);if(o==-1)throw new RangeError("Length is not a power of 2");const s=new Array(n/2),i=new Array(n/2);for(let r=0;r<n/2;r++)s[r]=Math.cos(2*Math.PI*r/n),i[r]=Math.sin(2*Math.PI*r/n);for(let r=0;r<n;r++){const l=a(r,o);if(l>r){let u=t[r];t[r]=t[l],t[l]=u,u=e[r],e[r]=e[l],e[l]=u}}for(let r=2;r<=n;r*=2){const l=r/2,u=n/r;for(let h=0;h<n;h+=r)for(let f=h,c=0;f<h+l;f++,c+=u){const m=f+l,x=t[m]*s[c]+e[m]*i[c],T=-t[m]*i[c]+e[m]*s[c];t[m]=t[f]-x,e[m]=e[f]-T,t[f]+=x,e[f]+=T}}function a(r,l){let u=0;for(let h=0;h<l;h++)u=u<<1|r&1,r>>>=1;return u}}function so(t,e){const n=t.length;if(n!=e.length)throw new RangeError("Mismatched lengths");let o=1;for(;o<n*2+1;)o*=2;const s=new Array(n),i=new Array(n);for(let c=0;c<n;c++){const m=c*c%(n*2);s[c]=Math.cos(Math.PI*m/n),i[c]=Math.sin(Math.PI*m/n)}const a=ze(o),r=ze(o);for(let c=0;c<n;c++)a[c]=t[c]*s[c]+e[c]*i[c],r[c]=-t[c]*i[c]+e[c]*s[c];const l=ze(o),u=ze(o);l[0]=s[0],u[0]=i[0];for(let c=1;c<n;c++)l[c]=l[o-c]=s[c],u[c]=u[o-c]=i[c];const h=new Array(o),f=new Array(o);ao(a,r,l,u,h,f);for(let c=0;c<n;c++)t[c]=h[c]*s[c]+f[c]*i[c],e[c]=-h[c]*i[c]+f[c]*s[c]}function ao(t,e,n,o,s,i){const a=t.length;if(a!=e.length||a!=n.length||a!=o.length||a!=s.length||a!=i.length)throw new RangeError("Mismatched lengths");t=t.slice(),e=e.slice(),n=n.slice(),o=o.slice(),Be(t,e),Be(n,o);for(let r=0;r<a;r++){const l=t[r]*n[r]-e[r]*o[r];e[r]=e[r]*n[r]+t[r]*o[r],t[r]=l}no(t,e);for(let r=0;r<a;r++)s[r]=t[r]/a,i[r]=e[r]/a}function ze(t){const e=[];for(let n=0;n<t;n++)e.push(0);return e}let io=class j{constructor(e){X(this,"_coefficients",new Float64Array(6));X(this,"_normalizedCoefficients",new Float64Array(5));X(this,"_impluseResponse");X(this,"_real");X(this,"_imag");X(this,"_phaseResponse");X(this,"_frequencyResponse");this.impulseLength=e,this._impluseResponse=new Float64Array(this.impulseLength),this._real=new Float64Array(this.impulseLength),this._imag=new Float64Array(this.impulseLength),this._phaseResponse=new Float64Array(this.impulseLength/2),this._frequencyResponse=new Float64Array(this.impulseLength/2)}setFilter(e,n,o,s){j[e](this._coefficients,n,o,s),j.normalizeCoefficients(this._coefficients,this._normalizedCoefficients),j.calcImpulseResponse(this._impluseResponse,this._normalizedCoefficients)}transform(){for(let e=0;e<this.impulseLength;e++)this._real[e]=this._impluseResponse[e],this._imag[e]=0;Be(this._real,this._imag);for(let e=0;e<this.impulseLength/2;e++)this._phaseResponse[e]=Math.atan2(this._imag[e],this._real[e])*180/Math.PI,this._frequencyResponse[e]=Math.log10(Math.sqrt(this._real[e]*this._real[e]+this._imag[e]*this._imag[e]))*20}get coefficients(){return this._coefficients}get normalizedCoefficients(){return this._normalizedCoefficients}get impluseResponse(){return this._impluseResponse}get phaseResponse(){return this._phaseResponse}get frequencyResponse(){return this._frequencyResponse}static normalizeCoefficients(e,n){const o=n??new Float64Array(5);return o[0]=e[0]/e[3],o[1]=e[1]/e[3],o[2]=e[2]/e[3],o[3]=-e[4]/e[3],o[4]=-e[5]/e[3],o}static calcImpulseResponse(e,n){if(n.length!==5)throw new Error("Coefficients must to be normalized.");let[o,s,i,a,r]=[0,0,1,0,0];for(let l=0;l<e.length;l++)e[l]=n[0]*i+n[1]*a+n[2]*r+n[3]*o+n[4]*s,r=a,a=i,s=o,o=e[l],i=0}static calcOmega(e,n){return 2*Math.PI*n/e}static lowpass(e,n,o,s){const i=(s==null?void 0:s.q)??Math.SQRT1_2,a=j.calcOmega(n,o),r=Math.sin(a)/(2*i);return e[0]=(1-Math.cos(a))/2,e[1]=1-Math.cos(a),e[2]=(1-Math.cos(a))/2,e[3]=1+r,e[4]=-2*Math.cos(a),e[5]=1-r,e}static highpass(e,n,o,s){const i=(s==null?void 0:s.q)??Math.SQRT1_2,a=j.calcOmega(n,o),r=Math.sin(a)/(2*i);return e[0]=(1+Math.cos(a))/2,e[1]=-(1+Math.cos(a)),e[2]=(1+Math.cos(a))/2,e[3]=1+r,e[4]=-2*Math.cos(a),e[5]=1-r,e}static bandpass(e,n,o,s){const i=(s==null?void 0:s.q)??Math.SQRT1_2,a=j.calcOmega(n,o),r=Math.sin(a)/(2*i);return e[0]=r,e[1]=0,e[2]=-r,e[3]=1+r,e[4]=-2*Math.cos(a),e[5]=1-r,e}static bandstop(e,n,o,s){const i=(s==null?void 0:s.q)??Math.SQRT1_2,a=j.calcOmega(n,o),r=Math.sin(a)/(2*i);return e[0]=1,e[1]=-2*Math.cos(a),e[2]=1,e[3]=1+r,e[4]=-2*Math.cos(a),e[5]=1-r,e}static lowshelf(e,n,o,s){const i=(s==null?void 0:s.gain)??0,a=(s==null?void 0:s.q)??Math.SQRT1_2,r=j.calcOmega(n,o),l=Math.pow(10,i/40),u=Math.sqrt(l)/a;return e[0]=l*(l+1-(l-1)*Math.cos(r)+u*Math.sin(r)),e[1]=2*l*(l-1-(l+1)*Math.cos(r)),e[2]=l*(l+1-(l-1)*Math.cos(r)-u*Math.sin(r)),e[3]=l+1+(l-1)*Math.cos(r)+u*Math.sin(r),e[4]=-2*(l-1+(l+1)*Math.cos(r)),e[5]=l+1+(l-1)*Math.cos(r)-u*Math.sin(r),e}static highshelf(e,n,o,s){const i=(s==null?void 0:s.gain)??0,a=(s==null?void 0:s.q)??Math.SQRT1_2,r=j.calcOmega(n,o),l=Math.pow(10,i/40),u=Math.sqrt(l)/a;return e[0]=l*(l+1+(l-1)*Math.cos(r)+u*Math.sin(r)),e[1]=-2*l*(l-1+(l+1)*Math.cos(r)),e[2]=l*(l+1+(l-1)*Math.cos(r)-u*Math.sin(r)),e[3]=l+1-(l-1)*Math.cos(r)+u*Math.sin(r),e[4]=2*(l-1-(l+1)*Math.cos(r)),e[5]=l+1-(l-1)*Math.cos(r)-u*Math.sin(r),e}static peaking(e,n,o,s){const i=(s==null?void 0:s.gain)??0,a=(s==null?void 0:s.q)??Math.SQRT1_2,r=j.calcOmega(n,o),l=Math.sin(r)/(2*a),u=Math.pow(10,i/40);return e[0]=1+l*u,e[1]=-2*Math.cos(r),e[2]=1-l*u,e[3]=1+l/u,e[4]=-2*Math.cos(r),e[5]=1-l/u,e}static allpass(e,n,o,s){const i=(s==null?void 0:s.q)??Math.SQRT1_2,a=j.calcOmega(n,o),r=Math.sin(a)/(2*i);return e[0]=1-r,e[1]=-2*Math.cos(a),e[2]=1+r,e[3]=1+r,e[4]=-2*Math.cos(a),e[5]=1-r,e}};/*!
* chartjs-plugin-annotation v3.0.1
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2023 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const Tt={modes:{point(t,e){return Ee(t,e,{intersect:!0})},nearest(t,e,n){return uo(t,e,n)},x(t,e,n){return Ee(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return Ee(t,e,{intersect:n.intersect,axis:"y"})}}};function ut(t,e,n){return(Tt.modes[n.mode]||Tt.modes.nearest)(t,e,n)}function ro(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function lo(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function Ee(t,e,n){return t.visibleElements.filter(o=>n.intersect?o.inRange(e.x,e.y):ro(o,e,n.axis))}function uo(t,e,n){let o=Number.POSITIVE_INFINITY;return Ee(t,e,n).reduce((s,i)=>{const a=i.getCenterPoint(),r=lo(e,a,n.axis),l=lt(e,r);return l<o?(s=[i],o=l):l===o&&s.push(i),s},[]).sort((s,i)=>s._index-i._index).slice(0,1)}const co=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,ee=.001,Ne=(t,e,n)=>Math.min(n,Math.max(e,t));function ho(t,e,n){for(const o of Object.keys(t))t[o]=Ne(t[o],e,n);return t}function fo(t,e,n,o){if(!t||!e||n<=0)return!1;const s=o/2;return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+s,2)}function nn(t,{x:e,y:n,x2:o,y2:s},i,a){const r=a/2,l=t.x>=e-r-ee&&t.x<=o+r+ee,u=t.y>=n-r-ee&&t.y<=s+r+ee;return i==="x"?l:(i==="y"||l)&&u}function ce(t,e){const{centerX:n,centerY:o}=t.getProps(["centerX","centerY"],e);return{x:n,y:o}}function go(t,e,n,o=!0){const s=n.split(".");let i=0;for(const a of e.split(".")){const r=s[i++];if(parseInt(a,10)<parseInt(r,10))break;if(co(r,a)){if(o)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const on=t=>typeof t=="string"&&t.endsWith("%"),sn=t=>parseFloat(t)/100,an=t=>Ne(sn(t),0,1),je=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),yo={box:t=>je(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>je(t.centerX,t.centerY),line:t=>je(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>je(t.centerX,t.centerY)};function dt(t,e){return e==="start"?0:e==="end"?t:on(e)?an(e)*t:t/2}function G(t,e,n=!0){return typeof e=="number"?e:on(e)?(n?an(e):sn(e))*t:t}function po(t,e){const{x:n,width:o}=t,s=e.textAlign;return s==="center"?n+o/2:s==="end"||s==="right"?n+o:n}function ct(t,e="center"){return xe(t)?{x:we(t.x,e),y:we(t.y,e)}:(t=we(t,e),{x:t,y:t})}function rn(t){return t&&(N(t.xValue)||N(t.yValue))}function _e(t,e,n){const o=n.init;if(o){if(o===!0)return un(e,n)}else return;return bo(t,e,n)}function ln(t,e,n){let o=!1;return e.forEach(s=>{le(t[s])?(o=!0,n[s]=t[s]):N(n[s])&&delete n[s]}),o}function un(t,e){const n=e.type||"line";return yo[n](t)}function bo(t,e,n){const o=rt(n.init,[{chart:t,properties:e,options:n}]);if(o===!0)return un(e,n);if(xe(o))return o}const Ke=new Map,mo=t=>isNaN(t)||t<=0,vo=t=>t.reduce(function(e,n){return e+=n.string,e},"");function He(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function ht(t,{x:e,y:n},o){o&&(t.translate(e,n),t.rotate(H(o)),t.translate(-e,-n))}function J(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle,t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle,t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function he(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function ft(t,e){const n=e.content;if(He(n))return{width:G(n.width,e.width),height:G(n.height,e.height)};const o=e.font,s=te(o)?o.map(l=>Ve(l)):[Ve(o)],i=e.textStrokeWidth,a=te(n)?n:[n],r=a.join()+vo(s)+i+(t._measureText?"-spriting":"");return Ke.has(r)||Ke.set(r,Co(t,a,s,i)),Ke.get(r)}function dn(t,e,n){const{x:o,y:s,width:i,height:a}=e;t.save(),he(t,n);const r=J(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),$n(t,{x:o,y:s,w:i,h:a,radius:ho(Xn(n.borderRadius),0,Math.min(i,a)/2)}),t.closePath(),t.fill(),r&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function wo(t,e,n){const o=n.content;if(He(o)){t.save(),t.globalAlpha=Po(n.opacity,o.style.opacity),t.drawImage(o,e.x,e.y,e.width,e.height),t.restore();return}const s=te(o)?o:[o],i=n.font,a=te(i)?i.map(f=>Ve(f)):[Ve(i)],r=n.color,l=te(r)?r:[r],u=po(e,n),h=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,xo(t,n)&&ko(t,{x:u,y:h},s,a),So(t,{x:u,y:h},s,{fonts:a,colors:l}),t.restore()}function xo(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function _o(t,e,n,o){const{radius:s,options:i}=e,a=i.pointStyle,r=i.rotation;let l=(r||0)*Zt;if(He(a)){t.save(),t.translate(n,o),t.rotate(l),t.drawImage(a,-a.width/2,-a.height/2,a.width,a.height),t.restore();return}mo(s)||Mo(t,{x:n,y:o,radius:s,rotation:r,style:a,rad:l})}function Mo(t,{x:e,y:n,radius:o,rotation:s,style:i,rad:a}){let r,l,u,h;switch(t.beginPath(),i){default:t.arc(e,n,o,0,Qn),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(a)*o,n-Math.cos(a)*o),a+=Ct,t.lineTo(e+Math.sin(a)*o,n-Math.cos(a)*o),a+=Ct,t.lineTo(e+Math.sin(a)*o,n-Math.cos(a)*o),t.closePath();break;case"rectRounded":h=o*.516,u=o-h,r=Math.cos(a+me)*u,l=Math.sin(a+me)*u,t.arc(e-r,n-l,h,a-E,a-De),t.arc(e+l,n-r,h,a-De,a),t.arc(e+r,n+l,h,a,a+De),t.arc(e-l,n+r,h,a+De,a+E),t.closePath();break;case"rect":if(!s){u=Math.SQRT1_2*o,t.rect(e-u,n-u,2*u,2*u);break}a+=me;case"rectRot":r=Math.cos(a)*o,l=Math.sin(a)*o,t.moveTo(e-r,n-l),t.lineTo(e+l,n-r),t.lineTo(e+r,n+l),t.lineTo(e-l,n+r),t.closePath();break;case"crossRot":a+=me;case"cross":r=Math.cos(a)*o,l=Math.sin(a)*o,t.moveTo(e-r,n-l),t.lineTo(e+r,n+l),t.moveTo(e+l,n-r),t.lineTo(e-l,n+r);break;case"star":r=Math.cos(a)*o,l=Math.sin(a)*o,t.moveTo(e-r,n-l),t.lineTo(e+r,n+l),t.moveTo(e+l,n-r),t.lineTo(e-l,n+r),a+=me,r=Math.cos(a)*o,l=Math.sin(a)*o,t.moveTo(e-r,n-l),t.lineTo(e+r,n+l),t.moveTo(e+l,n-r),t.lineTo(e-l,n+r);break;case"line":r=Math.cos(a)*o,l=Math.sin(a)*o,t.moveTo(e-r,n-l),t.lineTo(e+r,n+l);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(a)*o,n+Math.sin(a)*o);break}t.fill()}function Co(t,e,n,o){t.save();const s=e.length;let i=0,a=o;for(let r=0;r<s;r++){const l=n[Math.min(r,n.length-1)];t.font=l.string;const u=e[r];i=Math.max(i,t.measureText(u).width+o),a+=l.lineHeight}return t.restore(),{width:i,height:a}}function ko(t,{x:e,y:n},o,s){t.beginPath();let i=0;o.forEach(function(a,r){const l=s[Math.min(r,s.length-1)],u=l.lineHeight;t.font=l.string,t.strokeText(a,e,n+u/2+i),i+=u}),t.stroke()}function So(t,{x:e,y:n},o,{fonts:s,colors:i}){let a=0;o.forEach(function(r,l){const u=i[Math.min(l,i.length-1)],h=s[Math.min(l,s.length-1)],f=h.lineHeight;t.beginPath(),t.font=h.string,t.fillStyle=u,t.fillText(r,e,n+f/2+a),a+=f,t.fill()})}function Po(t,e){const n=kt(t)?t:e;return kt(n)?Ne(n,0,1):1}const Dt={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function ue(t,e,n){return e=typeof e=="number"?e:t.parse(e),Kt(e)?t.getPixelForValue(e):n}function ne(t,e,n){const o=e[n];if(o||n==="scaleID")return o;const s=n.charAt(0),i=Object.values(t).filter(a=>a.axis&&a.axis===s);return i.length?i[0].id:s}function cn(t,e){if(t){const n=t.options.reverse,o=ue(t,e.min,n?e.end:e.start),s=ue(t,e.max,n?e.start:e.end);return{start:o,end:s}}}function hn(t,e){const{chartArea:n,scales:o}=t,s=o[ne(o,e,"xScaleID")],i=o[ne(o,e,"yScaleID")];let a=n.width/2,r=n.height/2;return s&&(a=ue(s,e.xValue,s.left+s.width/2)),i&&(r=ue(i,e.yValue,i.top+i.height/2)),{x:a,y:r}}function gt(t,e){const n=t.scales,o=n[ne(n,e,"xScaleID")],s=n[ne(n,e,"yScaleID")];if(!o&&!s)return{};let{left:i,right:a}=o||t.chartArea,{top:r,bottom:l}=s||t.chartArea;const u=Ot(o,{min:e.xMin,max:e.xMax,start:i,end:a});i=u.start,a=u.end;const h=Ot(s,{min:e.yMin,max:e.yMax,start:l,end:r});return r=h.start,l=h.end,{x:i,y:r,x2:a,y2:l,width:a-i,height:l-r,centerX:i+(a-i)/2,centerY:r+(l-r)/2}}function fn(t,e){if(!rn(e)){const n=gt(t,e);let o=e.radius;(!o||isNaN(o))&&(o=Math.min(n.width,n.height)/2,e.radius=o);const s=o*2,i=n.centerX+e.xAdjust,a=n.centerY+e.yAdjust;return{x:i-o,y:a-o,x2:i+o,y2:a+o,centerX:i,centerY:a,width:s,height:s,radius:o}}return Ro(t,e)}function Ao(t,e){const{scales:n,chartArea:o}=t,s=n[e.scaleID],i={x:o.left,y:o.top,x2:o.right,y2:o.bottom};return s?Io(s,i,e):To(n,i,e),i}function gn(t,e){const n=gt(t,e);return n.initProperties=_e(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:qo(t,n,e),initProperties:n.initProperties}],n}function Ro(t,e){const n=hn(t,e),o=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:o,height:o}}function Ot(t,e){const n=cn(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function Io(t,e,n){const o=ue(t,n.value,NaN),s=ue(t,n.endValue,o);t.isHorizontal()?(e.x=o,e.x2=s):(e.y=o,e.y2=s)}function To(t,e,n){for(const o of Object.keys(Dt)){const s=t[ne(t,n,o)];if(s){const{min:i,max:a,start:r,end:l,startProp:u,endProp:h}=Dt[o],f=cn(s,{min:n[i],max:n[a],start:s[r],end:s[l]});e[u]=f.start,e[h]=f.end}}}function Do({properties:t,options:e},n,o,s){const{x:i,x2:a,width:r}=t;return yn({start:i,end:a,size:r,borderWidth:e.borderWidth},{position:o.x,padding:{start:s.left,end:s.right},adjust:e.label.xAdjust,size:n.width})}function Oo({properties:t,options:e},n,o,s){const{y:i,y2:a,height:r}=t;return yn({start:i,end:a,size:r,borderWidth:e.borderWidth},{position:o.y,padding:{start:s.top,end:s.bottom},adjust:e.label.yAdjust,size:n.height})}function yn(t,e){const{start:n,end:o,borderWidth:s}=t,{position:i,padding:{start:a,end:r},adjust:l}=e,u=o-s-n-a-r-e.size;return n+s/2+l+dt(u,i)}function qo(t,e,n){const o=n.label;o.backgroundColor="transparent",o.callout.display=!1;const s=ct(o.position),i=We(o.padding),a=ft(t.ctx,o),r=Do({properties:e,options:n},a,s,i),l=Oo({properties:e,options:n},a,s,i),u=a.width+i.width,h=a.height+i.height;return{x:r,y:l,x2:r+u,y2:l+h,width:u,height:h,centerX:r+u/2,centerY:l+h/2,rotation:o.rotation}}function oe(t,e,n){const o=Math.cos(n),s=Math.sin(n),i=e.x,a=e.y;return{x:i+o*(t.x-i)-s*(t.y-a),y:a+s*(t.x-i)+o*(t.y-a)}}const et=["enter","leave"],yt=et.concat("click");function zo(t,e,n){e.listened=ln(n,yt,e.listeners),e.moveListened=!1,e._getElements=ut,et.forEach(o=>{le(n[o])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(o=>{!e.listened&&le(o.click)&&(e.listened=!0),e.moveListened||et.forEach(s=>{le(o[s])&&(e.listened=!0,e.moveListened=!0)})})}function jo(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return Fo(t,e,n);case"click":return Eo(t,e,n)}}function Fo(t,e,n){if(!t.moveListened)return;let o;e.type==="mousemove"?o=ut(t,e,n.interaction):o=[];const s=t.hovered;t.hovered=o;const i={state:t,event:e};let a=qt(i,"leave",s,o);return qt(i,"enter",o,s)||a}function qt({state:t,event:e},n,o,s){let i;for(const a of o)s.indexOf(a)<0&&(i=pn(a.options[n]||t.listeners[n],a,e)||i);return i}function Eo(t,e,n){const o=t.listeners,s=ut(t,e,n.interaction);let i;for(const a of s)i=pn(a.options.click||o.click,a,e)||i;return i}function pn(t,e,n){return rt(t,[e.$context,n])===!0}const Le=["afterDraw","beforeDraw"];function Vo(t,e,n){const o=e.visibleElements;e.hooked=ln(n,Le,e.hooks),e.hooked||o.forEach(s=>{e.hooked||Le.forEach(i=>{le(s.options[i])&&(e.hooked=!0)})})}function zt(t,e,n){if(t.hooked){const o=e.options[n]||t.hooks[n];return rt(o,[e.$context])}}function Bo(t,e,n){const o=Yo(t.scales,e,n);let s=jt(e,o,"min","suggestedMin");s=jt(e,o,"max","suggestedMax")||s,s&&le(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function Lo(t,e){for(const n of t)No(n,e)}function jt(t,e,n,o){if(Kt(e[n])&&!Wo(t.options,n,o)){const s=t[n]!==e[n];return t[n]=e[n],s}}function Wo(t,e,n){return N(t[e])||N(t[n])}function No(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const o=ne(e,t,n);o&&!e[o]&&Ho(t,n)&&console.warn(`No scale found with id '${o}' for annotation '${t.id}'`)}}function Ho(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const o of["Min","Max","Value"])if(N(t[n+o]))return!0;return!1}function Yo(t,e,n){const o=e.axis,s=e.id,i=o+"ScaleID",a={min:we(e.min,Number.NEGATIVE_INFINITY),max:we(e.max,Number.POSITIVE_INFINITY)};for(const r of n)r.scaleID===s?Ft(r,e,["value","endValue"],a):ne(t,r,i)===s&&Ft(r,e,[o+"Min",o+"Max",o+"Value"],a);return a}function Ft(t,e,n,o){for(const s of n){const i=t[s];if(N(i)){const a=e.parse(i);o.min=Math.min(o.min,a),o.max=Math.max(o.max,a)}}}class fe extends de{inRange(e,n,o,s){const{x:i,y:a}=oe({x:e,y:n},this.getCenterPoint(s),H(-this.options.rotation));return nn({x:i,y:a},this.getProps(["x","y","x2","y2"],s),o,this.options.borderWidth)}getCenterPoint(e){return ce(this,e)}draw(e){e.save(),ht(e,this.getCenterPoint(),this.options.rotation),dn(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return gn(e,n)}}fe.id="boxAnnotation";fe.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};fe.defaultRoutes={borderColor:"color",backgroundColor:"color"};fe.descriptors={label:{_fallback:!0}};const bn=["left","bottom","top","right"];class Me extends de{inRange(e,n,o,s){const{x:i,y:a}=oe({x:e,y:n},this.getCenterPoint(s),H(-this.rotation));return nn({x:i,y:a},this.getProps(["x","y","x2","y2"],s),o,this.options.borderWidth)}getCenterPoint(e){return ce(this,e)}draw(e){const n=this.options,o=!N(this._visible)||this._visible;!n.display||!n.content||!o||(e.save(),ht(e,this.getCenterPoint(),this.rotation),Xo(e,this),dn(e,this,n),wo(e,es(this),n),e.restore())}resolveElementProperties(e,n){let o;if(rn(n))o=hn(e,n);else{const{centerX:r,centerY:l}=gt(e,n);o={x:r,y:l}}const s=We(n.padding),i=ft(e.ctx,n),a=$o(o,i,n,s);return{initProperties:_e(e,a,n),pointX:o.x,pointY:o.y,...a,rotation:n.rotation}}}Me.id="labelAnnotation";Me.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Me.defaultRoutes={borderColor:"color"};function $o(t,e,n,o){const s=e.width+o.width+n.borderWidth,i=e.height+o.height+n.borderWidth,a=ct(n.position,"center"),r=Et(t.x,s,n.xAdjust,a.x),l=Et(t.y,i,n.yAdjust,a.y);return{x:r,y:l,x2:r+s,y2:l+i,width:s,height:i,centerX:r+s/2,centerY:l+i/2}}function Et(t,e,n=0,o){return t-dt(e,o)+n}function Xo(t,e){const{pointX:n,pointY:o,options:s}=e,i=s.callout,a=i&&i.display&&Ko(e,i);if(!a||ts(e,i,a))return;if(t.save(),t.beginPath(),!J(t,i))return t.restore();const{separatorStart:l,separatorEnd:u}=Qo(e,a),{sideStart:h,sideEnd:f}=Go(e,a,l);(i.margin>0||s.borderWidth===0)&&(t.moveTo(l.x,l.y),t.lineTo(u.x,u.y)),t.moveTo(h.x,h.y),t.lineTo(f.x,f.y);const c=oe({x:n,y:o},e.getCenterPoint(),H(-e.rotation));t.lineTo(c.x,c.y),t.stroke(),t.restore()}function Qo(t,e){const{x:n,y:o,x2:s,y2:i}=t,a=Uo(t,e);let r,l;return e==="left"||e==="right"?(r={x:n+a,y:o},l={x:r.x,y:i}):(r={x:n,y:o+a},l={x:s,y:r.y}),{separatorStart:r,separatorEnd:l}}function Uo(t,e){const{width:n,height:o,options:s}=t,i=s.callout.margin+s.borderWidth/2;return e==="right"?n+i:e==="bottom"?o+i:-i}function Go(t,e,n){const{y:o,width:s,height:i,options:a}=t,r=a.callout.start,l=Jo(e,a.callout);let u,h;return e==="left"||e==="right"?(u={x:n.x,y:o+G(i,r)},h={x:u.x+l,y:u.y}):(u={x:n.x+G(s,r),y:n.y},h={x:u.x,y:u.y+l}),{sideStart:u,sideEnd:h}}function Jo(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function Ko(t,e){const n=e.position;return bn.includes(n)?n:Zo(t,e)}function Zo(t,e){const{x:n,y:o,x2:s,y2:i,width:a,height:r,pointX:l,pointY:u,centerX:h,centerY:f,rotation:c}=t,m={x:h,y:f},x=e.start,T=G(a,x),C=G(r,x),D=[n,n+T,n+T,s],O=[o+C,i,o,i],z=[];for(let F=0;F<4;F++){const Z=oe({x:D[F],y:O[F]},m,H(c));z.push({position:bn[F],distance:lt(Z,{x:l,y:u})})}return z.sort((F,Z)=>F.distance-Z.distance)[0].position}function es({x:t,y:e,width:n,height:o,options:s}){const i=s.borderWidth/2,a=We(s.padding);return{x:t+a.left+i,y:e+a.top+i,width:n-a.left-a.right-s.borderWidth,height:o-a.top-a.bottom-s.borderWidth}}function ts(t,e,n){const{pointX:o,pointY:s}=t,i=e.margin;let a=o,r=s;return n==="left"?a+=i:n==="right"?a-=i:n==="top"?r+=i:n==="bottom"&&(r-=i),t.inRange(a,r)}const pt=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),tt=(t,e,n)=>pt(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,Vt=(t,e,n)=>pt(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,ve=t=>t*t,ns=(t,e,{x:n,y:o,x2:s,y2:i},a)=>a==="y"?{start:Math.min(o,i),end:Math.max(o,i),value:e}:{start:Math.min(n,s),end:Math.max(n,s),value:t},Bt=(t,e,n,o)=>(1-o)*(1-o)*t+2*(1-o)*o*e+o*o*n,nt=(t,e,n,o)=>({x:Bt(t.x,e.x,n.x,o),y:Bt(t.y,e.y,n.y,o)}),Lt=(t,e,n,o)=>2*(1-o)*(e-t)+2*o*(n-e),Wt=(t,e,n,o)=>-Math.atan2(Lt(t.x,e.x,n.x,o),Lt(t.y,e.y,n.y,o))+.5*E;class Ce extends de{inRange(e,n,o,s){const i=this.options.borderWidth/2;if(o!=="x"&&o!=="y"){const a={mouseX:e,mouseY:n},{path:r,ctx:l}=this;if(r){J(l,this.options);const{chart:h}=this.$context,f=e*h.currentDevicePixelRatio,c=n*h.currentDevicePixelRatio,m=l.isPointInStroke(r,f,c)||ot(this,a,s);return l.restore(),m}const u=ve(i);return is(this,a,u,s)||ot(this,a,s)}return os(this,{mouseX:e,mouseY:n},o,{hBorderWidth:i,useFinalPosition:s})}getCenterPoint(e){return ce(this,e)}draw(e){const{x:n,y:o,x2:s,y2:i,cp:a,options:r}=this;if(e.save(),!J(e,r))return e.restore();he(e,r);const l=Math.sqrt(Math.pow(s-n,2)+Math.pow(i-o,2));if(r.curve&&a)return gs(e,this,a,l),e.restore();const{startOpts:u,endOpts:h,startAdjust:f,endAdjust:c}=mn(this),m=Math.atan2(i-o,s-n);e.translate(n,o),e.rotate(m),e.beginPath(),e.moveTo(0+f,0),e.lineTo(l-c,0),e.shadowColor=r.borderShadowColor,e.stroke(),st(e,0,f,u),st(e,l,-c,h),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const o=Ao(e,n),{x:s,y:i,x2:a,y2:r}=o,l=ss(o,e.chartArea),u=l?as({x:s,y:i},{x:a,y:r},e.chartArea):{x:s,y:i,x2:a,y2:r,width:Math.abs(a-s),height:Math.abs(r-i)};if(u.centerX=(a+s)/2,u.centerY=(r+i)/2,u.initProperties=_e(e,u,n),n.curve){const f={x:u.x,y:u.y},c={x:u.x2,y:u.y2};u.cp=fs(u,n,lt(f,c))}const h=rs(e,u,n.label);return h._visible=l,u.elements=[{type:"label",optionScope:"label",properties:h,initProperties:u.initProperties}],u}}Ce.id="lineAnnotation";const Nt={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};Ce.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},Nt),fill:!1,length:12,start:Object.assign({},Nt),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},Me.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Ce.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};Ce.defaultRoutes={borderColor:"color"};function os(t,{mouseX:e,mouseY:n},o,{hBorderWidth:s,useFinalPosition:i}){const a=ns(e,n,t.getProps(["x","y","x2","y2"],i),o);return a.value>=a.start-s&&a.value<=a.end+s||ot(t,{mouseX:e,mouseY:n},i,o)}function ss({x:t,y:e,x2:n,y2:o},{top:s,right:i,bottom:a,left:r}){return!(t<r&&n<r||t>i&&n>i||e<s&&o<s||e>a&&o>a)}function Ht({x:t,y:e},n,{top:o,right:s,bottom:i,left:a}){return t<a&&(e=Vt(a,{x:t,y:e},n),t=a),t>s&&(e=Vt(s,{x:t,y:e},n),t=s),e<o&&(t=tt(o,{x:t,y:e},n),e=o),e>i&&(t=tt(i,{x:t,y:e},n),e=i),{x:t,y:e}}function as(t,e,n){const{x:o,y:s}=Ht(t,e,n),{x:i,y:a}=Ht(e,t,n);return{x:o,y:s,x2:i,y2:a,width:Math.abs(i-o),height:Math.abs(a-s)}}function is(t,{mouseX:e,mouseY:n},o=ee,s){const{x:i,y:a,x2:r,y2:l}=t.getProps(["x","y","x2","y2"],s),u=r-i,h=l-a,f=ve(u)+ve(h),c=f===0?-1:((e-i)*u+(n-a)*h)/f;let m,x;return c<0?(m=i,x=a):c>1?(m=r,x=l):(m=i+c*u,x=a+c*h),ve(e-m)+ve(n-x)<=o}function ot(t,{mouseX:e,mouseY:n},o,s){const i=t.label;return i.options.display&&i.inRange(e,n,s,o)}function rs(t,e,n){const o=n.borderWidth,s=We(n.padding),i=ft(t.ctx,n),a=i.width+s.width+o,r=i.height+s.height+o;return us(e,n,{width:a,height:r,padding:s},t.chartArea)}function ls(t){const{x:e,y:n,x2:o,y2:s}=t,i=Math.atan2(s-n,o-e);return i>E/2?i-E:i<E/-2?i+E:i}function us(t,e,n,o){const{width:s,height:i,padding:a}=n,{xAdjust:r,yAdjust:l}=e,u={x:t.x,y:t.y},h={x:t.x2,y:t.y2},f=e.rotation==="auto"?ls(t):H(e.rotation),c=ds(s,i,f),m=cs(t,e,{labelSize:c,padding:a},o),x=t.cp?nt(u,t.cp,h,m):pt(u,h,m),T={size:c.w,min:o.left,max:o.right,padding:a.left},C={size:c.h,min:o.top,max:o.bottom,padding:a.top},D=$t(x.x,T)+r,O=$t(x.y,C)+l;return{x:D-s/2,y:O-i/2,x2:D+s/2,y2:O+i/2,centerX:D,centerY:O,pointX:x.x,pointY:x.y,width:s,height:i,rotation:Hn(f)}}function ds(t,e,n){const o=Math.cos(n),s=Math.sin(n);return{w:Math.abs(t*o)+Math.abs(e*s),h:Math.abs(t*s)+Math.abs(e*o)}}function cs(t,e,n,o){let s;const i=hs(t,o);return e.position==="start"?s=Yt({w:t.x2-t.x,h:t.y2-t.y},n,e,i):e.position==="end"?s=1-Yt({w:t.x-t.x2,h:t.y-t.y2},n,e,i):s=dt(1,e.position),s}function Yt(t,e,n,o){const{labelSize:s,padding:i}=e,a=t.w*o.dx,r=t.h*o.dy,l=a>0&&(s.w/2+i.left-o.x)/a,u=r>0&&(s.h/2+i.top-o.y)/r;return Ne(Math.max(l,u),0,.25)}function hs(t,e){const{x:n,x2:o,y:s,y2:i}=t,a=Math.min(s,i)-e.top,r=Math.min(n,o)-e.left,l=e.bottom-Math.max(s,i),u=e.right-Math.max(n,o);return{x:Math.min(r,u),y:Math.min(a,l),dx:r<=u?1:-1,dy:a<=l?1:-1}}function $t(t,e){const{size:n,min:o,max:s,padding:i}=e,a=n/2;return n>s-o?(s+o)/2:(o>=t-i-a&&(t=o+i+a),s<=t+i+a&&(t=s-i-a),t)}function mn(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,o=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:o,startAdjust:Xt(t,n),endAdjust:Xt(t,o)}}function Xt(t,e){if(!e||!e.display)return 0;const{length:n,width:o}=e,s=t.options.borderWidth/2,i={x:n,y:o+s};return Math.abs(tt(0,i,{x:0,y:s}))}function st(t,e,n,o){if(!o||!o.display)return;const{length:s,width:i,fill:a,backgroundColor:r,borderColor:l}=o,u=Math.abs(e-s)+n;t.beginPath(),he(t,o),J(t,o),t.moveTo(u,-i),t.lineTo(e+n,0),t.lineTo(u,i),a===!0?(t.fillStyle=r||l,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=o.borderShadowColor,t.stroke()}function fs(t,e,n){const{x:o,y:s,x2:i,y2:a,centerX:r,centerY:l}=t,u=Math.atan2(a-s,i-o),h=ct(e.controlPoint,0),f={x:r+G(n,h.x,!1),y:l+G(n,h.y,!1)};return oe(f,{x:r,y:l},u)}function Qt(t,{x:e,y:n},{angle:o,adjust:s},i){!i||!i.display||(t.save(),t.translate(e,n),t.rotate(o),st(t,0,-s,i),t.restore())}function gs(t,e,n,o){const{x:s,y:i,x2:a,y2:r,options:l}=e,{startOpts:u,endOpts:h,startAdjust:f,endAdjust:c}=mn(e),m={x:s,y:i},x={x:a,y:r},T=Wt(m,n,x,0),C=Wt(m,n,x,1)-E,D=nt(m,n,x,f/o),O=nt(m,n,x,1-c/o),z=new Path2D;t.beginPath(),z.moveTo(D.x,D.y),z.quadraticCurveTo(n.x,n.y,O.x,O.y),t.shadowColor=l.borderShadowColor,t.stroke(z),e.path=z,e.ctx=t,Qt(t,D,{angle:T,adjust:f},u),Qt(t,O,{angle:C,adjust:c},h)}class ke extends de{inRange(e,n,o,s){const i=this.options.rotation,a=this.options.borderWidth;if(o!=="x"&&o!=="y")return ys({x:e,y:n},this.getProps(["width","height","centerX","centerY"],s),i,a);const{x:r,y:l,x2:u,y2:h}=this.getProps(["x","y","x2","y2"],s),f=a/2,c=o==="y"?{start:l,end:h}:{start:r,end:u},m=oe({x:e,y:n},this.getCenterPoint(s),H(-i));return m[o]>=c.start-f-ee&&m[o]<=c.end+f+ee}getCenterPoint(e){return ce(this,e)}draw(e){const{width:n,height:o,centerX:s,centerY:i,options:a}=this;e.save(),ht(e,this.getCenterPoint(),a.rotation),he(e,this.options),e.beginPath(),e.fillStyle=a.backgroundColor;const r=J(e,a);e.ellipse(s,i,o/2,n/2,E/2,0,2*E),e.fill(),r&&(e.shadowColor=a.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return gn(e,n)}}ke.id="ellipseAnnotation";ke.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,label:Object.assign({},fe.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};ke.defaultRoutes={borderColor:"color",backgroundColor:"color"};ke.descriptors={label:{_fallback:!0}};function ys(t,e,n,o){const{width:s,height:i,centerX:a,centerY:r}=e,l=s/2,u=i/2;if(l<=0||u<=0)return!1;const h=H(n||0),f=o/2||0,c=Math.cos(h),m=Math.sin(h),x=Math.pow(c*(t.x-a)+m*(t.y-r),2),T=Math.pow(m*(t.x-a)-c*(t.y-r),2);return x/Math.pow(l+f,2)+T/Math.pow(u+f,2)<=1.0001}class Ye extends de{inRange(e,n,o,s){const{x:i,y:a,x2:r,y2:l,width:u}=this.getProps(["x","y","x2","y2","width"],s),h=this.options.borderWidth;if(o!=="x"&&o!=="y")return fo({x:e,y:n},this.getCenterPoint(s),u/2,h);const f=h/2,c=o==="y"?{start:a,end:l,value:n}:{start:i,end:r,value:e};return c.value>=c.start-f&&c.value<=c.end+f}getCenterPoint(e){return ce(this,e)}draw(e){const n=this.options,o=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,he(e,n);const s=J(e,n);_o(e,this,this.centerX,this.centerY),s&&!He(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=o}resolveElementProperties(e,n){const o=fn(e,n);return o.initProperties=_e(e,o,n),o}}Ye.id="pointAnnotation";Ye.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Ye.defaultRoutes={borderColor:"color",backgroundColor:"color"};class $e extends de{inRange(e,n,o,s){if(o!=="x"&&o!=="y")return this.options.radius>=.1&&this.elements.length>1&&bs(this.elements,e,n,s);const i=oe({x:e,y:n},this.getCenterPoint(s),H(-this.options.rotation)),a=this.elements.map(u=>o==="y"?u.bY:u.bX),r=Math.min(...a),l=Math.max(...a);return i[o]>=r&&i[o]<=l}getCenterPoint(e){return ce(this,e)}draw(e){const{elements:n,options:o}=this;e.save(),e.beginPath(),e.fillStyle=o.backgroundColor,he(e,o);const s=J(e,o);let i=!0;for(const a of n)i?(e.moveTo(a.x,a.y),i=!1):e.lineTo(a.x,a.y);e.closePath(),e.fill(),s&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const o=fn(e,n),{sides:s,rotation:i}=n,a=[],r=2*E/s;let l=i*Zt;for(let u=0;u<s;u++,l+=r){const h=ps(o,n,l);h.initProperties=_e(e,o,n),a.push(h)}return o.elements=a,o}}$e.id="polygonAnnotation";$e.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};$e.defaultRoutes={borderColor:"color",backgroundColor:"color"};function ps({centerX:t,centerY:e},{radius:n,borderWidth:o},s){const i=o/2,a=Math.sin(s),r=Math.cos(s),l={x:t+a*n,y:e-r*n};return{type:"point",optionScope:"point",properties:{x:l.x,y:l.y,centerX:l.x,centerY:l.y,bX:t+a*(n+i),bY:e-r*(n+i)}}}function bs(t,e,n,o){let s=!1,i=t[t.length-1].getProps(["bX","bY"],o);for(const a of t){const r=a.getProps(["bX","bY"],o);r.bY>n!=i.bY>n&&e<(i.bX-r.bX)*(n-r.bY)/(i.bY-r.bY)+r.bX&&(s=!s),i=r}return s}const U={box:fe,ellipse:ke,label:Me,line:Ce,point:Ye,polygon:$e};Object.keys(U).forEach(t=>{Ln.describe(`elements.${U[t].id}`,{_fallback:"plugins.annotation.common"})});const ms={update:Object.assign},vs=yt.concat(Le),Ut=(t,e)=>xe(e)?it(t,e):t,at=t=>t==="color"||t==="font";function bt(t="line"){return U[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function ws(t,e,n,o){const s=_s(t,n.animations,o),i=e.annotations,a=ks(e.elements,i);for(let r=0;r<i.length;r++){const l=i[r],u=vn(a,r,l.type),h=l.setContext(Cs(t,u,l)),f=u.resolveElementProperties(t,h);f.skip=xs(f),"elements"in f&&(Ms(u,f.elements,h,s),delete f.elements),N(u.x)||Object.assign(u,f),Object.assign(u,f.initProperties),f.options=wn(h),s.update(u,f)}}function xs(t){return isNaN(t.x)||isNaN(t.y)}function _s(t,e,n){return n==="reset"||n==="none"||n==="resize"?ms:new Yn(t,e)}function Ms(t,e,n,o){const s=t.elements||(t.elements=[]);s.length=e.length;for(let i=0;i<e.length;i++){const a=e[i],r=a.properties,l=vn(s,i,a.type,a.initProperties),u=n[a.optionScope].override(a);r.options=wn(u),o.update(l,r)}}function vn(t,e,n,o){const s=U[bt(n)];let i=t[e];return(!i||!(i instanceof s))&&(i=t[e]=new s,Object.assign(i,o)),i}function wn(t){const e=U[bt(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,it(t,e.defaults),it(t,e.defaultRoutes));for(const o of vs)n[o]=t[o];return n}function it(t,e){const n={};for(const o of Object.keys(e)){const s=e[o],i=t[o];at(o)&&te(i)?n[o]=i.map(a=>Ut(a,s)):n[o]=Ut(i,s)}return n}function Cs(t,e,n){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,id:n.id,type:"annotation"}))}function ks(t,e){const n=e.length,o=t.length;if(o<n){const s=n-o;t.splice(o,0,...new Array(s))}else o>n&&t.splice(n,o-n);return t}var Ss="3.0.1";const Q=new Map,Ps=yt.concat(Le);var As={id:"annotation",version:Ss,beforeRegister(){go("chart.js","4.0",re.version)},afterRegister(){re.register(U)},afterUnregister(){re.unregister(U)},beforeInit(t){Q.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const o=Q.get(t),s=o.annotations=[];let i=n.annotations;xe(i)?Object.keys(i).forEach(a=>{const r=i[a];xe(r)&&(r.id=a,s.push(r))}):te(i)&&s.push(...i),Lo(s,t.scales)},afterDataLimits(t,e){const n=Q.get(t);Bo(t,e.scale,n.annotations.filter(o=>o.display&&o.adjustScaleRange))},afterUpdate(t,e,n){const o=Q.get(t);zo(t,o,n),ws(t,o,n,e.mode),o.visibleElements=o.elements.filter(s=>!s.skip&&s.options.display),Vo(t,o,n)},beforeDatasetsDraw(t,e,n){Fe(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){Fe(t,"afterDatasetsDraw",n.clip)},beforeDraw(t,e,n){Fe(t,"beforeDraw",n.clip)},afterDraw(t,e,n){Fe(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const o=Q.get(t);jo(o,e.event,n)&&(e.changed=!0)},afterDestroy(t){Q.delete(t)},_getState(t){return Q.get(t)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!Ps.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${U[bt(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:at,_fallback:!0},_indexable:at}},additionalOptionScopes:[""]};function Fe(t,e,n){const{ctx:o,chartArea:s}=t,i=Q.get(t);n&&Wn(o,s);const a=Rs(i.visibleElements,e).sort((r,l)=>r.element.options.z-l.element.options.z);for(const r of a)Is(o,s,i,r);n&&Nn(o)}function Rs(t,e){const n=[];for(const o of t)if(o.options.drawTime===e&&n.push({element:o,main:!0}),o.elements&&o.elements.length)for(const s of o.elements)s.options.display&&s.options.drawTime===e&&n.push({element:s});return n}function Is(t,e,n,o){const s=o.element;o.main?(zt(n,s,"beforeDraw"),s.draw(t,e),zt(n,s,"afterDraw")):s.draw(t,e)}class mt extends Pt{constructor(){const e=en(mt.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Pt.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(tn(e in Gt,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const n=this.now();this._stop(n),this._start(n)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const n=Gt[this._type];this._source=new Un({url:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(n.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const ie=44100*5,Ze=2,W={brown:null,pink:null,white:null},Gt={get brown(){if(!W.brown){const t=[];for(let e=0;e<Ze;e++){const n=new Float32Array(ie);t[e]=n;let o=0;for(let s=0;s<ie;s++){const i=Math.random()*2-1;n[s]=(o+.02*i)/1.02,o=n[s],n[s]*=3.5}}W.brown=new Ge().fromArray(t)}return W.brown},get pink(){if(!W.pink){const t=[];for(let e=0;e<Ze;e++){const n=new Float32Array(ie);t[e]=n;let o,s,i,a,r,l,u;o=s=i=a=r=l=u=0;for(let h=0;h<ie;h++){const f=Math.random()*2-1;o=.99886*o+f*.0555179,s=.99332*s+f*.0750759,i=.969*i+f*.153852,a=.8665*a+f*.3104856,r=.55*r+f*.5329522,l=-.7616*l-f*.016898,n[h]=o+s+i+a+r+l+u+f*.5362,n[h]*=.11,u=f*.115926}}W.pink=new Ge().fromArray(t)}return W.pink},get white(){if(!W.white){const t=[];for(let e=0;e<Ze;e++){const n=new Float32Array(ie);t[e]=n;for(let o=0;o<ie;o++)n[o]=Math.random()*2-1}W.white=new Ge().fromArray(t)}return W.white}};class vt extends At{constructor(){const e=en(vt.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Oe({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Oe({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Oe({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Oe({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(At.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){tn(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const n=new Float32Array(e);for(let a=0;a<e;a++){const l=Math.pow(a/e,2)*19980+20;n[a]=l}const o=new Float32Array(e),s=new Float32Array(e),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(n,o,s),o}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}function Ts(t){return new Worker("/tools/assets/biquadWorker-0U8kjE0g.js",{name:t==null?void 0:t.name})}const Jt=[{title:"ローパスフィルタ (LPF)",value:"lowpass",requiredParameter:["q"],toneFilterType:"lowpass"},{title:"ハイパスフィルタ (HPF)",value:"highpass",requiredParameter:["q"],toneFilterType:"highpass"},{title:"バンドパスフィルタ (BPF)",value:"bandpass",requiredParameter:["q"],toneFilterType:"bandpass"},{title:"バンドストップフィルタ (BSF, Notch)",value:"bandstop",requiredParameter:["q"],toneFilterType:"notch"},{title:"ローシェルフフィルタ (LSF)",value:"lowshelf",requiredParameter:["q","gain"],toneFilterType:"lowshelf"},{title:"ハイシェルフフィルタ (HSF)",value:"highshelf",requiredParameter:["q","gain"],toneFilterType:"highshelf"},{title:"ピーキングフィルタ (Peaking)",value:"peaking",requiredParameter:["q","gain"],toneFilterType:"peaking"},{title:"オールパスフィルタ (Allpass)",value:"allpass",requiredParameter:["q"],toneFilterType:"allpass"}],Ds={type:"line",data:{datasets:[],labels:[]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{},parsing:{xAxisKey:"x",yAxisKey:"y"},scales:{x:{type:"logarithmic",min:20},y:{type:"linear",min:-60},y1:{type:"linear",position:"right",max:180,min:-180,ticks:{stepSize:90},grid:{drawOnChartArea:!1}}}}},Os={type:"bar",data:{datasets:[]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{type:"linear"}},plugins:{legend:{labels:{usePointStyle:!0}}}}},qs={type:"line",borderColor:"#aaa",borderWidth:2,borderDash:[5]},K=t=>(En("data-v-1892cdb7"),t=t(),Vn(),t),zs={style:{height:"250px"}},js={style:{height:"250px"}},Fs=K(()=>p("h4",{class:"mb-3"},"フィルタ係数",-1)),Es={class:"ml-3"},Vs={class:"text-right"},Bs={class:"text-right"},Ls={class:"text-right"},Ws={class:"text-right"},Ns={class:"text-right"},Hs={class:"text-right"},Ys=K(()=>p("h4",{class:"mb-3"},"正規化フィルタ係数",-1)),$s={class:"ml-3"},Xs={class:"text-right"},Qs={class:"text-right"},Us={class:"text-right"},Gs={class:"text-right"},Js={class:"text-right"},Ks=K(()=>p("h4",{class:"mb-5"},"インパルス長",-1)),Zs=K(()=>p("h4",{class:"mb-3"},"カットオフ周波数の振幅",-1)),ea={class:"text-right"},ta=K(()=>p("h4",{class:"mb-3"},"最大と最小振幅",-1)),na={class:"text-right"},oa=K(()=>p("h4",{class:"mb-3"},"インパルス応答の総和",-1)),sa=K(()=>p("h4",null,"参考文献",-1)),aa=K(()=>p("ul",null,[p("li",null,[p("a",{href:"https://webaudio.github.io/Audio-EQ-Cookbook/audio-eq-cookbook.html",target:"_blank"},"Cookbook formulae for audio equalizer biquad filter coefficients")]),p("li",null,[p("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode/type",target:"_blank"},"BiquadFilterNode: type property"),_(" - Web APIs | MDN ")])],-1)),ia=Dn({__name:"BiquadApp",setup(t){re.register(As);const e=On(),n=M(),o=M(Jt[0]),s=M(),i=M(),a=M(-60),r=M(!1),l=M(1e3),u=M(.707106781),h=M(6),f=M(48e3),c=M(1024),m=M(1024/4),x=M(1024),T=M(2**16),C=Mt(()=>new io(c.value)),D=M([1,0,0,0,0,0]),O=M([1,0,0,0,0]),z=M(0),F=M(0),Z=M(0),Xe=M(0),Qe=M(0),Ue=M(0),Se=Mt(()=>to(f.value/2,c.value/2)),Y=M(),ge=M(-30),Pe=M(-1/0);let B=null,Ae=null,ye=null;const xn=new eo(Ts);function _n(){function v(S,k,q){qe(S==null?void 0:S.getElementById(k),{textContent:q})}const g=window.document.querySelector(".diagram");if(g){const S=g.contentDocument;v(S,"b0",C.value.normalizedCoefficients[0].toFixed(9)),v(S,"b1",C.value.normalizedCoefficients[1].toFixed(9)),v(S,"b2",C.value.normalizedCoefficients[2].toFixed(9)),v(S,"a1",C.value.normalizedCoefficients[3].toFixed(9)),v(S,"a2",C.value.normalizedCoefficients[4].toFixed(9))}}function wt(){var S,k,q,w,pe;const v=(S=s.value)==null?void 0:S.getChart();if(!v||!v.ready)return;function g(){const se=[];let $=C.value.phaseResponse[0];for(let L=1;L<c.value;L++){const be=C.value.phaseResponse[L];Math.abs(be-$)>=180&&L<c.value-1&&se.push({x:(Se.value[L]+Se.value[L+1])/2,y:Number.NaN}),se.push({x:Se.value[L],y:be}),$=be}return se}qe((q=(k=v.chart.options.plugins)==null?void 0:k.annotation)==null?void 0:q.annotations,{cutoffFreqLine:new Zn(Object.assign({xMax:l.value,xMin:l.value},qs))}),qe(v.chart,{data:{datasets:[{label:"振幅 (dB)",data:C.value.frequencyResponse,pointStyle:!1,yAxisID:"y",hidden:typeof((w=v.chart.data.datasets[0])==null?void 0:w.hidden)>"u"?!1:!v.chart.isDatasetVisible(0)},{label:"位相 (deg)",data:g(),pointStyle:!1,yAxisID:"y1",hidden:typeof((pe=v.chart.data.datasets[1])==null?void 0:pe.hidden)>"u"?!1:!v.chart.isDatasetVisible(1)}],labels:Se.value},scales:{x:{options:{max:f.value/2,min:200/2**(Math.log2(c.value)-8)}},y:{options:{max:Math.round(Math.max(It(C.value.frequencyResponse).max,0)+10),min:a.value}}}}).update("none")}function xt(){var g,S;const v=(g=i.value)==null?void 0:g.getChart();!v||!v.ready||qe(v.chart,{data:{datasets:[{label:"インパルス応答",data:C.value.impluseResponse.slice(0,m.value),pointStyle:"rect",borderWidth:0,backgroundColor:"rgb(54, 162, 235)",barPercentage:1.2,hidden:typeof((S=v.chart.data.datasets[0])==null?void 0:S.hidden)>"u"?!1:!v.chart.isDatasetVisible(0)}],labels:Rt(m.value)}}).update("none")}function _t(){x.value=c.value,C.value.setFilter(o.value.value,f.value,l.value,{q:u.value,gain:h.value}),D.value=[...C.value.coefficients],O.value=[...C.value.normalizedCoefficients],C.value.transform(),z.value=(C.value.frequencyResponse[Math.floor(l.value/f.value*c.value)]+C.value.frequencyResponse[Math.floor(l.value/f.value*c.value+1)])/2;const v=It(C.value.frequencyResponse);F.value=v.max,Z.value=v.min,Xe.value=f.value/c.value*v.maxIndex,Qe.value=f.value/c.value*v.minIndex,Ue.value=C.value.impluseResponse.reduce((g,S)=>g+S,0),_n(),wt(),xt()}Re(()=>[c.value,o.value,l.value,u.value,h.value,f.value],()=>{m.value>c.value&&(m.value=c.value),_t(),ye&&ye.set({frequency:l.value,Q:u.value,gain:h.value,type:o.value.toneFilterType})}),Re(()=>a.value,wt),Re(()=>m.value,xt);function Mn(){Fn(e),_t(),n.value&&(n.value.style.opacity="1")}function Cn(v){return new re(v,Ds)}function kn(v){return new re(v,Os)}async function Sn(){Y.value?B==null||B.stop():(B==null&&(await Jn(),ye=new vt({frequency:l.value,Q:u.value,gain:h.value}).toDestination(),B=new mt().connect(ye),Ae=new Kn({smoothing:0}),ye.connect(Ae)),B.volume.value=ge.value,B.start())}Re(()=>ge.value,()=>{B&&(B.volume.value=ge.value)}),Gn(async()=>{if(Ae==null)return .2;const v=Ae.getValue();return Pe.value=Array.isArray(v)?v[0]:v,.2});async function Pn(){if(r.value)return;r.value=!0;const v=await xn.invoke({impulseLength:T.value,filterType:o.value.value,samplingFreq:f.value,cutoffFreq:l.value,q:u.value,gain:h.value});z.value=v.magnitudeOnCutoff,F.value=v.maxMagnitude,Z.value=v.minMagnitude,Xe.value=v.maxMagnitudeFrequency,Qe.value=v.minMagnitudeFrequency,Ue.value=v.sumImpulse,x.value=T.value,r.value=!1}return(v,g)=>{const S=V("v-select"),k=V("v-col"),q=V("v-row"),w=V("v-list-item"),pe=V("v-icon"),se=V("v-btn"),$=V("v-divider"),L=V("v-checkbox"),be=V("v-container"),An=V("v-footer");return Ie(),Te(jn,{"page-id":"filter/biquad","toolbar-title":"双2次フィルタ"},{footer:y(()=>[d($),d(An,null,{default:y(()=>[d(be,null,{default:y(()=>[sa,aa]),_:1})]),_:1})]),default:y(()=>[d(q,null,{default:y(()=>[d(k,{cols:"12",md:"7"},{default:y(()=>[d(q,null,{default:y(()=>[d(k,{cols:"12"},{default:y(()=>[d(S,{label:"フィルタタイプ",density:"compact",variant:"underlined",modelValue:o.value,"onUpdate:modelValue":g[0]||(g[0]=b=>o.value=b),items:A(Jt),"hide-details":"","return-object":""},null,8,["modelValue","items"])]),_:1})]),_:1}),d(ae,{modelValue:l.value,"onUpdate:modelValue":g[5]||(g[5]=b=>l.value=b),label:"カットオフ周波数",variant:"underlined",density:"compact",unit:"Hz",scale:"log",max:f.value/2,min:10,"fraction-digits":3,"prefix-symbols":["G","M","k",""],rule:[A(I).required,A(I).value,A(I).notNegative,A(I).notZero],cols:"4","hide-details":""},{"menu-list":y(()=>[d(w,{title:"10 kHz",onClick:g[1]||(g[1]=b=>l.value=1e4)}),d(w,{title:"1 kHz",onClick:g[2]||(g[2]=b=>l.value=1e3)}),d(w,{title:"100 Hz",onClick:g[3]||(g[3]=b=>l.value=100)}),d(w,{title:"10 Hz",onClick:g[4]||(g[4]=b=>l.value=10)})]),_:1},8,["modelValue","max","rule"]),d(ae,{modelValue:u.value,"onUpdate:modelValue":g[14]||(g[14]=b=>u.value=b),label:"Q",variant:"underlined",density:"compact",scale:"log",max:128,min:.01,"fraction-digits":4,rule:[A(I).required,A(I).value,A(I).notNegative,A(I).notZero],cols:"4","hide-details":""},{"menu-button":y(({props:b})=>[d(se,qn(b,{icon:"",variant:"plain",density:"compact"}),{default:y(()=>[(o.value.value==="lowshelf"||o.value.value==="highshelf")&&Y.value?(Ie(),Te(pe,{key:0,color:"warning",icon:"mdi-alert"})):(Ie(),Te(pe,{key:1,icon:"mdi-dots-horizontal"}))]),_:2},1040)]),"menu-list":y(()=>[(o.value.value==="lowshelf"||o.value.value==="highshelf")&&Y.value?(Ie(),Te(w,{key:0,title:"再生される音には Q のパラメータは反映されません",color:"warning",active:"",density:"compact"})):zn("",!0),d(w,{title:"16.0000",onClick:g[6]||(g[6]=b=>u.value=Math.pow(Math.SQRT2,8))}),d(w,{title:"8.0000",onClick:g[7]||(g[7]=b=>u.value=Math.pow(Math.SQRT2,6))}),d(w,{title:"4.0000",onClick:g[8]||(g[8]=b=>u.value=Math.pow(Math.SQRT2,4))}),d(w,{title:"2.0000",onClick:g[9]||(g[9]=b=>u.value=Math.pow(Math.SQRT2,2))}),d(w,{title:"1.4142",onClick:g[10]||(g[10]=b=>u.value=Math.SQRT2)}),d(w,{title:"1.0000",onClick:g[11]||(g[11]=b=>u.value=1)}),d(w,{title:"0.7071 (デフォルト)",onClick:g[12]||(g[12]=b=>u.value=Math.SQRT1_2)}),d(w,{title:"0.5000",onClick:g[13]||(g[13]=b=>u.value=.5)})]),_:1},8,["modelValue","rule"]),d(ae,{modelValue:h.value,"onUpdate:modelValue":g[22]||(g[22]=b=>h.value=b),label:"増幅量",variant:"underlined",density:"compact",unit:"dB",max:40,min:-40,step:.1,"fraction-digits":2,rule:[A(I).required,A(I).value],cols:"4","hide-details":"",disabled:!o.value.requiredParameter.includes("gain")},{"menu-list":y(()=>[d(w,{title:"+ 9.00 dB",onClick:g[15]||(g[15]=b=>h.value=9)}),d(w,{title:"+ 6.00 dB",onClick:g[16]||(g[16]=b=>h.value=6)}),d(w,{title:"+ 3.00 dB",onClick:g[17]||(g[17]=b=>h.value=3)}),d(w,{title:" 0.00 dB",onClick:g[18]||(g[18]=b=>h.value=0)}),d(w,{title:"- 3.00 dB",onClick:g[19]||(g[19]=b=>h.value=-3)}),d(w,{title:"- 6.00 dB",onClick:g[20]||(g[20]=b=>h.value=-6)}),d(w,{title:"- 9.00 dB",onClick:g[21]||(g[21]=b=>h.value=-9)})]),_:1},8,["modelValue","rule","disabled"]),d(ae,{modelValue:f.value,"onUpdate:modelValue":g[30]||(g[30]=b=>f.value=b),label:"サンプリング周波数",variant:"underlined",density:"compact",unit:"Hz",scale:"log",max:192e3,min:10,"fraction-digits":3,"prefix-symbols":["G","M","k",""],rule:[A(I).required,A(I).value,A(I).notNegative,A(I).notZero],cols:"4","hide-details":""},{"menu-list":y(()=>[d(w,{title:"192.000 kHz",onClick:g[23]||(g[23]=b=>f.value=192e3)}),d(w,{title:"96.000 kHz",onClick:g[24]||(g[24]=b=>f.value=96e3)}),d(w,{title:"88.200 kHz",onClick:g[25]||(g[25]=b=>f.value=88200)}),d(w,{title:"48.000 kHz",onClick:g[26]||(g[26]=b=>f.value=48e3)}),d(w,{title:"44.100 kHz",onClick:g[27]||(g[27]=b=>f.value=44100)}),d(w,{title:"32.000 kHz",onClick:g[28]||(g[28]=b=>f.value=32e3)}),d(w,{title:"22.050 Hz",onClick:g[29]||(g[29]=b=>f.value=22050)})]),_:1},8,["modelValue","rule"]),d(q,null,{default:y(()=>[d($,{class:"mt-3"}),d(k,{cols:"4"},{default:y(()=>[d(L,{modelValue:Y.value,"onUpdate:modelValue":g[31]||(g[31]=b=>Y.value=b),label:"音の再生","hide-details":"",onClick:Sn,density:"compact"},null,8,["modelValue"])]),_:1}),d(k,{cols:"8","align-self":"center"},{default:y(()=>[d(Je,{style:{height:"16px"},value:Pe.value,max:-30,min:-50,disabled:!Y.value},null,8,["value","disabled"]),d(Je,{style:{height:"16px"},value:Pe.value,max:-9,min:-30,disabled:!Y.value,fillColor:"orange",strokeColor:"orange"},null,8,["value","disabled"]),d(Je,{style:{height:"16px"},value:Pe.value,max:0,min:-9,disabled:!Y.value,fillColor:"red",strokeColor:"red"},null,8,["value","disabled"])]),_:1})]),_:1}),d(ae,{modelValue:ge.value,"onUpdate:modelValue":g[32]||(g[32]=b=>ge.value=b),label:"ボリューム",variant:"underlined",density:"compact",unit:"dB",min:-80,max:30,"fraction-digits":2,rule:[A(I).required,A(I).value],cols:"4","hide-details":""},null,8,["modelValue","rule"]),d(q,null,{default:y(()=>[d($,{class:"mb-3"}),d(k,{cols:"6"},{default:y(()=>[d(S,{label:"インパルス長",density:"compact",variant:"underlined",modelValue:c.value,"onUpdate:modelValue":g[33]||(g[33]=b=>c.value=b),items:[256,512,1024,2048,4096,8192,16384,32768],"hide-details":""},null,8,["modelValue"])]),_:1}),d(k,{cols:"6"},{default:y(()=>[d(S,{label:"インパルス応答のグラフ長",density:"compact",variant:"underlined",modelValue:m.value,"onUpdate:modelValue":g[34]||(g[34]=b=>m.value=b),items:Array.from({length:Math.log2(c.value)-2},(b,Rn)=>8<<Rn),"hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),d(ae,{modelValue:a.value,"onUpdate:modelValue":g[35]||(g[35]=b=>a.value=b),label:"周波数応答の最小振幅",variant:"underlined",density:"compact",unit:"dB",max:0,min:-150,step:10,rule:[A(I).required,A(I).value],cols:"4","hide-details":""},null,8,["modelValue","rule"])]),_:1}),d(k,{cols:"12",md:"5",class:"text-center"},{default:y(()=>[d(q,null,{default:y(()=>[d(k,{cols:"12"},{default:y(()=>[p("object",{ref_key:"diagram",ref:n,class:"diagram color-responsive",type:"image/svg+xml",data:"/tools/filter/biquad.svg",onLoad:Mn},null,544)]),_:1}),d(k,{cols:"12"},{default:y(()=>[p("div",zs,[d(St,{ref_key:"chart",ref:s,initializer:Cn},null,512)])]),_:1}),d(k,{cols:"12"},{default:y(()=>[p("div",js,[d(St,{ref_key:"impulseChart",ref:i,initializer:kn},null,512)])]),_:1})]),_:1})]),_:1})]),_:1}),d(q,null,{default:y(()=>[d($),d(k,{cols:"6"},{default:y(()=>[Fs,d(P,{tag:"p",class:"mb-3"},{default:y(()=>[_(" H(z) = \\displaystyle\\frac{b_0 + b_1 z^{-1} + b_2 z^{-2}}{a_0 + a_1 z^{-1} + a_2 z^{-2}} ")]),_:1}),p("table",Es,[p("tbody",null,[p("tr",null,[d(P,{tag:"td"},{default:y(()=>[_("b_0 =")]),_:1}),p("td",Vs,R(D.value[0].toFixed(9)),1)]),p("tr",null,[d(P,{tag:"td"},{default:y(()=>[_("b_1 =")]),_:1}),p("td",Bs,R(D.value[1].toFixed(9)),1)]),p("tr",null,[d(P,{tag:"td"},{default:y(()=>[_("b_2 =")]),_:1}),p("td",Ls,R(D.value[2].toFixed(9)),1)]),p("tr",null,[d(P,{tag:"td"},{default:y(()=>[_("a_0 =")]),_:1}),p("td",Ws,R(D.value[3].toFixed(9)),1)]),p("tr",null,[d(P,{tag:"td"},{default:y(()=>[_("a_1 =")]),_:1}),p("td",Ns,R(D.value[4].toFixed(9)),1)]),p("tr",null,[d(P,{tag:"td"},{default:y(()=>[_("a_2 =")]),_:1}),p("td",Hs,R(D.value[5].toFixed(9)),1)])])])]),_:1}),d(k,{cols:"6"},{default:y(()=>[Ys,d(P,{tag:"p",class:"mb-3"},{default:y(()=>[_(" H(z) = \\displaystyle\\frac{b_0 + b_1 z^{-1} + b_2 z^{-2}}{1 + a_1 z^{-1} + a_2 z^{-2}} ")]),_:1}),p("table",$s,[p("tbody",null,[p("tr",null,[d(P,{tag:"td"},{default:y(()=>[_("b_0 =")]),_:1}),p("td",Xs,R(O.value[0].toFixed(9)),1)]),p("tr",null,[d(P,{tag:"td"},{default:y(()=>[_("b_1 =")]),_:1}),p("td",Qs,R(O.value[1].toFixed(9)),1)]),p("tr",null,[d(P,{tag:"td"},{default:y(()=>[_("b_2 =")]),_:1}),p("td",Us,R(O.value[2].toFixed(9)),1)]),p("tr",null,[d(P,{tag:"td"},{default:y(()=>[_("a_1 =")]),_:1}),p("td",Gs,R(O.value[3].toFixed(9)),1)]),p("tr",null,[d(P,{tag:"td"},{default:y(()=>[_("a_2 =")]),_:1}),p("td",Js,R(O.value[4].toFixed(9)),1)])])])]),_:1})]),_:1}),d(q,null,{default:y(()=>[d($),d(k,{cols:"12"},{default:y(()=>[Ks,d(q,null,{default:y(()=>[d(k,{cols:"4"},{default:y(()=>[d(S,{label:"インパルス長",density:"compact",variant:"underlined",modelValue:T.value,"onUpdate:modelValue":g[36]||(g[36]=b=>T.value=b),items:A(Rt)(16,25).map(b=>2**b),"hide-details":"",disabled:r.value,loading:r.value},null,8,["modelValue","items","disabled","loading"])]),_:1}),d(k,{cols:"auto"},{default:y(()=>[d(se,{variant:"outlined",onClick:Pn,disabled:r.value||T.value===x.value,loading:r.value},{default:y(()=>[_("再計算")]),_:1},8,["disabled","loading"])]),_:1}),d(k,{cols:"12"},{default:y(()=>[_(" 計算時のインパルス長 "),d(P,null,{default:y(()=>[_("N = ")]),_:1}),_(" "+R(x.value)+"（周波数分解能 ",1),d(P,null,{default:y(()=>[_("\\frac{f_c}{N} = ")]),_:1}),_(" "+R((f.value/x.value).toFixed(3))+" [Hz]） ",1)]),_:1})]),_:1})]),_:1}),d(k,{cols:"6"},{default:y(()=>[Zs,p("table",ea,[p("tbody",null,[p("tr",null,[d(P,{tag:"td"},{default:y(()=>[_("f_c =")]),_:1}),p("td",null,R(l.value.toFixed(3))+" [Hz]",1)]),p("tr",null,[d(P,{tag:"td"},{default:y(()=>[_("A_{f_c} =")]),_:1}),p("td",null,R(Number.isNaN(z.value)?"---":z.value.toFixed(3))+" [dB]",1)])])])]),_:1}),d(k,{cols:"6"},{default:y(()=>[ta,p("table",na,[p("tbody",null,[p("tr",null,[d(P,{tag:"td"},{default:y(()=>[_("\\max A =")]),_:1}),p("td",null,R(F.value.toFixed(3))+" [dB]",1)]),p("tr",null,[d(P,{tag:"td"},{default:y(()=>[_("f_{\\max A} =")]),_:1}),p("td",null,R(Xe.value.toFixed(3))+" [Hz]",1)]),p("tr",null,[d(P,{tag:"td",class:"mb-2"},{default:y(()=>[_("\\min A =")]),_:1}),p("td",null,R(Z.value.toFixed(3))+" [dB]",1)]),p("tr",null,[d(P,{tag:"td"},{default:y(()=>[_("f_{\\min A} =")]),_:1}),p("td",null,R(Qe.value.toFixed(3))+" [Hz]",1)])])])]),_:1}),d(k,{cols:"6"},{default:y(()=>[oa,d(P,null,{default:y(()=>[_("\\displaystyle\\sum^{N-1}_{n=0} y[n] =")]),_:1}),_(" "+R(Ue.value.toFixed(6)),1)]),_:1})]),_:1})]),_:1})}}}),ra=(t,e)=>{const n=t.__vccOpts||t;for(const[o,s]of e)n[o]=s;return n},la=ra(ia,[["__scopeId","data-v-1892cdb7"]]);Bn("#app",la);
