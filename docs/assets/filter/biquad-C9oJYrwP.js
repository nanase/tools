var Pn=Object.defineProperty;var An=(t,e,n)=>e in t?Pn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var W=(t,e,n)=>An(t,typeof e!="symbol"?e+"":e,n);import{d as Rn,h as In,r as k,i as wt,w as Pe,a as B,o as Ae,c as Re,b as y,e as h,u as A,m as Tn,j as Dn,f as p,k as x,t as R,_ as On,l as qn,p as zn,n as jn,g as Fn}from"../tools-AppBase.vue_vue_type_script_setup_true_lang-eFFrt3uz.js";import{c as En,C as ae,i as we,e as ee,f as Bn,u as Ln,g as re,h as st,j as Ut,k as H,v as ve,E as ue,t as Y,l as Le,m as it,n as Vn,P as E,A as Wn,o as Fe,p as Nn,q as Hn,Q as be,H as Ie,T as _t,r as Yn,s as xt,w as Gt,_ as se,R as I,a as Mt,d as Te,x as Xn}from"../tools-InputRow.vue_vue_type_script_setup_true_lang-ClZjpbSS.js";import{S as kt,o as Jt,a as Kt,T as $n,b as Qe,c as Ct,P as De,s as Qn}from"../tools-index-DFWBQmQS.js";import{_ as P}from"../tools-MathJax.vue_vue_type_style_index_0_lang-CfFxDfZd.js";function Ee(t,e){const n=t.length;if(n!=e.length)throw new RangeError("Mismatched lengths");n!=0&&(n&n-1?Jn(t,e):Gn(t,e))}function Un(t,e){Ee(e,t)}function Gn(t,e){const n=t.length;if(n!=e.length)throw new RangeError("Mismatched lengths");if(n==1)return;let o=-1;for(let r=0;r<32;r++)1<<r==n&&(o=r);if(o==-1)throw new RangeError("Length is not a power of 2");const s=new Array(n/2),a=new Array(n/2);for(let r=0;r<n/2;r++)s[r]=Math.cos(2*Math.PI*r/n),a[r]=Math.sin(2*Math.PI*r/n);for(let r=0;r<n;r++){const l=i(r,o);if(l>r){let u=t[r];t[r]=t[l],t[l]=u,u=e[r],e[r]=e[l],e[l]=u}}for(let r=2;r<=n;r*=2){const l=r/2,u=n/r;for(let c=0;c<n;c+=r)for(let f=c,d=0;f<c+l;f++,d+=u){const m=f+l,_=t[m]*s[d]+e[m]*a[d],T=-t[m]*a[d]+e[m]*s[d];t[m]=t[f]-_,e[m]=e[f]-T,t[f]+=_,e[f]+=T}}function i(r,l){let u=0;for(let c=0;c<l;c++)u=u<<1|r&1,r>>>=1;return u}}function Jn(t,e){const n=t.length;if(n!=e.length)throw new RangeError("Mismatched lengths");let o=1;for(;o<n*2+1;)o*=2;const s=new Array(n),a=new Array(n);for(let d=0;d<n;d++){const m=d*d%(n*2);s[d]=Math.cos(Math.PI*m/n),a[d]=Math.sin(Math.PI*m/n)}const i=Oe(o),r=Oe(o);for(let d=0;d<n;d++)i[d]=t[d]*s[d]+e[d]*a[d],r[d]=-t[d]*a[d]+e[d]*s[d];const l=Oe(o),u=Oe(o);l[0]=s[0],u[0]=a[0];for(let d=1;d<n;d++)l[d]=l[o-d]=s[d],u[d]=u[o-d]=a[d];const c=new Array(o),f=new Array(o);Kn(i,r,l,u,c,f);for(let d=0;d<n;d++)t[d]=c[d]*s[d]+f[d]*a[d],e[d]=-c[d]*a[d]+f[d]*s[d]}function Kn(t,e,n,o,s,a){const i=t.length;if(i!=e.length||i!=n.length||i!=o.length||i!=s.length||i!=a.length)throw new RangeError("Mismatched lengths");t=t.slice(),e=e.slice(),n=n.slice(),o=o.slice(),Ee(t,e),Ee(n,o);for(let r=0;r<i;r++){const l=t[r]*n[r]-e[r]*o[r];e[r]=e[r]*n[r]+t[r]*o[r],t[r]=l}Un(t,e);for(let r=0;r<i;r++)s[r]=t[r]/i,a[r]=e[r]/i}function Oe(t){const e=[];for(let n=0;n<t;n++)e.push(0);return e}let Zn=class j{constructor(e){W(this,"_coefficients",new Float64Array(6));W(this,"_normalizedCoefficients",new Float64Array(5));W(this,"_impluseResponse");W(this,"_real");W(this,"_imag");W(this,"_phaseResponse");W(this,"_frequencyResponse");this.impulseLength=e,this._impluseResponse=new Float64Array(this.impulseLength),this._real=new Float64Array(this.impulseLength),this._imag=new Float64Array(this.impulseLength),this._phaseResponse=new Float64Array(this.impulseLength/2),this._frequencyResponse=new Float64Array(this.impulseLength/2)}setFilter(e,n,o,s){j[e](this._coefficients,n,o,s),j.normalizeCoefficients(this._coefficients,this._normalizedCoefficients),j.calcImpulseResponse(this._impluseResponse,this._normalizedCoefficients)}transform(){for(let e=0;e<this.impulseLength;e++)this._real[e]=this._impluseResponse[e],this._imag[e]=0;Ee(this._real,this._imag);for(let e=0;e<this.impulseLength/2;e++)this._phaseResponse[e]=Math.atan2(this._imag[e],this._real[e])*180/Math.PI,this._frequencyResponse[e]=Math.log10(Math.sqrt(this._real[e]*this._real[e]+this._imag[e]*this._imag[e]))*20}get coefficients(){return this._coefficients}get normalizedCoefficients(){return this._normalizedCoefficients}get impluseResponse(){return this._impluseResponse}get phaseResponse(){return this._phaseResponse}get frequencyResponse(){return this._frequencyResponse}static normalizeCoefficients(e,n){const o=n??new Float64Array(5);return o[0]=e[0]/e[3],o[1]=e[1]/e[3],o[2]=e[2]/e[3],o[3]=-e[4]/e[3],o[4]=-e[5]/e[3],o}static calcImpulseResponse(e,n){if(n.length!==5)throw new Error("Coefficients must to be normalized.");let[o,s,a,i,r]=[0,0,1,0,0];for(let l=0;l<e.length;l++)e[l]=n[0]*a+n[1]*i+n[2]*r+n[3]*o+n[4]*s,r=i,i=a,s=o,o=e[l],a=0}static calcOmega(e,n){return 2*Math.PI*n/e}static lowpass(e,n,o,s){const a=(s==null?void 0:s.q)??Math.SQRT1_2,i=j.calcOmega(n,o),r=Math.sin(i)/(2*a);return e[0]=(1-Math.cos(i))/2,e[1]=1-Math.cos(i),e[2]=(1-Math.cos(i))/2,e[3]=1+r,e[4]=-2*Math.cos(i),e[5]=1-r,e}static highpass(e,n,o,s){const a=(s==null?void 0:s.q)??Math.SQRT1_2,i=j.calcOmega(n,o),r=Math.sin(i)/(2*a);return e[0]=(1+Math.cos(i))/2,e[1]=-(1+Math.cos(i)),e[2]=(1+Math.cos(i))/2,e[3]=1+r,e[4]=-2*Math.cos(i),e[5]=1-r,e}static bandpass(e,n,o,s){const a=(s==null?void 0:s.q)??Math.SQRT1_2,i=j.calcOmega(n,o),r=Math.sin(i)/(2*a);return e[0]=r,e[1]=0,e[2]=-r,e[3]=1+r,e[4]=-2*Math.cos(i),e[5]=1-r,e}static bandstop(e,n,o,s){const a=(s==null?void 0:s.q)??Math.SQRT1_2,i=j.calcOmega(n,o),r=Math.sin(i)/(2*a);return e[0]=1,e[1]=-2*Math.cos(i),e[2]=1,e[3]=1+r,e[4]=-2*Math.cos(i),e[5]=1-r,e}static lowshelf(e,n,o,s){const a=(s==null?void 0:s.gain)??0,i=(s==null?void 0:s.q)??Math.SQRT1_2,r=j.calcOmega(n,o),l=Math.pow(10,a/40),u=Math.sqrt(l)/i;return e[0]=l*(l+1-(l-1)*Math.cos(r)+u*Math.sin(r)),e[1]=2*l*(l-1-(l+1)*Math.cos(r)),e[2]=l*(l+1-(l-1)*Math.cos(r)-u*Math.sin(r)),e[3]=l+1+(l-1)*Math.cos(r)+u*Math.sin(r),e[4]=-2*(l-1+(l+1)*Math.cos(r)),e[5]=l+1+(l-1)*Math.cos(r)-u*Math.sin(r),e}static highshelf(e,n,o,s){const a=(s==null?void 0:s.gain)??0,i=(s==null?void 0:s.q)??Math.SQRT1_2,r=j.calcOmega(n,o),l=Math.pow(10,a/40),u=Math.sqrt(l)/i;return e[0]=l*(l+1+(l-1)*Math.cos(r)+u*Math.sin(r)),e[1]=-2*l*(l-1+(l+1)*Math.cos(r)),e[2]=l*(l+1+(l-1)*Math.cos(r)-u*Math.sin(r)),e[3]=l+1-(l-1)*Math.cos(r)+u*Math.sin(r),e[4]=2*(l-1-(l+1)*Math.cos(r)),e[5]=l+1-(l-1)*Math.cos(r)-u*Math.sin(r),e}static peaking(e,n,o,s){const a=(s==null?void 0:s.gain)??0,i=(s==null?void 0:s.q)??Math.SQRT1_2,r=j.calcOmega(n,o),l=Math.sin(r)/(2*i),u=Math.pow(10,a/40);return e[0]=1+l*u,e[1]=-2*Math.cos(r),e[2]=1-l*u,e[3]=1+l/u,e[4]=-2*Math.cos(r),e[5]=1-l/u,e}static allpass(e,n,o,s){const a=(s==null?void 0:s.q)??Math.SQRT1_2,i=j.calcOmega(n,o),r=Math.sin(i)/(2*a);return e[0]=1-r,e[1]=-2*Math.cos(i),e[2]=1+r,e[3]=1+r,e[4]=-2*Math.cos(i),e[5]=1-r,e}};/*!
* chartjs-plugin-annotation v3.0.1
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2023 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const St={modes:{point(t,e){return je(t,e,{intersect:!0})},nearest(t,e,n){return no(t,e,n)},x(t,e,n){return je(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return je(t,e,{intersect:n.intersect,axis:"y"})}}};function at(t,e,n){return(St.modes[n.mode]||St.modes.nearest)(t,e,n)}function eo(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function to(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function je(t,e,n){return t.visibleElements.filter(o=>n.intersect?o.inRange(e.x,e.y):eo(o,e,n.axis))}function no(t,e,n){let o=Number.POSITIVE_INFINITY;return je(t,e,n).reduce((s,a)=>{const i=a.getCenterPoint(),r=to(e,i,n.axis),l=it(e,r);return l<o?(s=[a],o=l):l===o&&s.push(a),s},[]).sort((s,a)=>s._index-a._index).slice(0,1)}const oo=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,Z=.001,Ve=(t,e,n)=>Math.min(n,Math.max(e,t));function so(t,e,n){for(const o of Object.keys(t))t[o]=Ve(t[o],e,n);return t}function io(t,e,n,o){if(!t||!e||n<=0)return!1;const s=o/2;return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+s,2)}function Zt(t,{x:e,y:n,x2:o,y2:s},a,i){const r=i/2,l=t.x>=e-r-Z&&t.x<=o+r+Z,u=t.y>=n-r-Z&&t.y<=s+r+Z;return a==="x"?l:(a==="y"||l)&&u}function de(t,e){const{centerX:n,centerY:o}=t.getProps(["centerX","centerY"],e);return{x:n,y:o}}function ao(t,e,n,o=!0){const s=n.split(".");let a=0;for(const i of e.split(".")){const r=s[a++];if(parseInt(i,10)<parseInt(r,10))break;if(oo(r,i)){if(o)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const en=t=>typeof t=="string"&&t.endsWith("%"),tn=t=>parseFloat(t)/100,nn=t=>Ve(tn(t),0,1),qe=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),ro={box:t=>qe(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>qe(t.centerX,t.centerY),line:t=>qe(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>qe(t.centerX,t.centerY)};function rt(t,e){return e==="start"?0:e==="end"?t:en(e)?nn(e)*t:t/2}function U(t,e,n=!0){return typeof e=="number"?e:en(e)?(n?nn(e):tn(e))*t:t}function lo(t,e){const{x:n,width:o}=t,s=e.textAlign;return s==="center"?n+o/2:s==="end"||s==="right"?n+o:n}function lt(t,e="center"){return we(t)?{x:ve(t.x,e),y:ve(t.y,e)}:(t=ve(t,e),{x:t,y:t})}function on(t){return t&&(H(t.xValue)||H(t.yValue))}function _e(t,e,n){const o=n.init;if(o){if(o===!0)return an(e,n)}else return;return uo(t,e,n)}function sn(t,e,n){let o=!1;return e.forEach(s=>{re(t[s])?(o=!0,n[s]=t[s]):H(n[s])&&delete n[s]}),o}function an(t,e){const n=e.type||"line";return ro[n](t)}function uo(t,e,n){const o=st(n.init,[{chart:t,properties:e,options:n}]);if(o===!0)return an(e,n);if(we(o))return o}const Ue=new Map,co=t=>isNaN(t)||t<=0,ho=t=>t.reduce(function(e,n){return e+=n.string,e},"");function We(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function ut(t,{x:e,y:n},o){o&&(t.translate(e,n),t.rotate(Y(o)),t.translate(-e,-n))}function G(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle,t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle,t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function ce(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function dt(t,e){const n=e.content;if(We(n))return{width:U(n.width,e.width),height:U(n.height,e.height)};const o=e.font,s=ee(o)?o.map(l=>Fe(l)):[Fe(o)],a=e.textStrokeWidth,i=ee(n)?n:[n],r=i.join()+ho(s)+a+(t._measureText?"-spriting":"");return Ue.has(r)||Ue.set(r,bo(t,i,s,a)),Ue.get(r)}function rn(t,e,n){const{x:o,y:s,width:a,height:i}=e;t.save(),ce(t,n);const r=G(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),Nn(t,{x:o,y:s,w:a,h:i,radius:so(Hn(n.borderRadius),0,Math.min(a,i)/2)}),t.closePath(),t.fill(),r&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function fo(t,e,n){const o=n.content;if(We(o)){t.save(),t.globalAlpha=wo(n.opacity,o.style.opacity),t.drawImage(o,e.x,e.y,e.width,e.height),t.restore();return}const s=ee(o)?o:[o],a=n.font,i=ee(a)?a.map(f=>Fe(f)):[Fe(a)],r=n.color,l=ee(r)?r:[r],u=lo(e,n),c=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,go(t,n)&&mo(t,{x:u,y:c},s,i),vo(t,{x:u,y:c},s,{fonts:i,colors:l}),t.restore()}function go(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function yo(t,e,n,o){const{radius:s,options:a}=e,i=a.pointStyle,r=a.rotation;let l=(r||0)*Gt;if(We(i)){t.save(),t.translate(n,o),t.rotate(l),t.drawImage(i,-i.width/2,-i.height/2,i.width,i.height),t.restore();return}co(s)||po(t,{x:n,y:o,radius:s,rotation:r,style:i,rad:l})}function po(t,{x:e,y:n,radius:o,rotation:s,style:a,rad:i}){let r,l,u,c;switch(t.beginPath(),a){default:t.arc(e,n,o,0,Yn),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(i)*o,n-Math.cos(i)*o),i+=_t,t.lineTo(e+Math.sin(i)*o,n-Math.cos(i)*o),i+=_t,t.lineTo(e+Math.sin(i)*o,n-Math.cos(i)*o),t.closePath();break;case"rectRounded":c=o*.516,u=o-c,r=Math.cos(i+be)*u,l=Math.sin(i+be)*u,t.arc(e-r,n-l,c,i-E,i-Ie),t.arc(e+l,n-r,c,i-Ie,i),t.arc(e+r,n+l,c,i,i+Ie),t.arc(e-l,n+r,c,i+Ie,i+E),t.closePath();break;case"rect":if(!s){u=Math.SQRT1_2*o,t.rect(e-u,n-u,2*u,2*u);break}i+=be;case"rectRot":r=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-r,n-l),t.lineTo(e+l,n-r),t.lineTo(e+r,n+l),t.lineTo(e-l,n+r),t.closePath();break;case"crossRot":i+=be;case"cross":r=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-r,n-l),t.lineTo(e+r,n+l),t.moveTo(e+l,n-r),t.lineTo(e-l,n+r);break;case"star":r=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-r,n-l),t.lineTo(e+r,n+l),t.moveTo(e+l,n-r),t.lineTo(e-l,n+r),i+=be,r=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-r,n-l),t.lineTo(e+r,n+l),t.moveTo(e+l,n-r),t.lineTo(e-l,n+r);break;case"line":r=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-r,n-l),t.lineTo(e+r,n+l);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(i)*o,n+Math.sin(i)*o);break}t.fill()}function bo(t,e,n,o){t.save();const s=e.length;let a=0,i=o;for(let r=0;r<s;r++){const l=n[Math.min(r,n.length-1)];t.font=l.string;const u=e[r];a=Math.max(a,t.measureText(u).width+o),i+=l.lineHeight}return t.restore(),{width:a,height:i}}function mo(t,{x:e,y:n},o,s){t.beginPath();let a=0;o.forEach(function(i,r){const l=s[Math.min(r,s.length-1)],u=l.lineHeight;t.font=l.string,t.strokeText(i,e,n+u/2+a),a+=u}),t.stroke()}function vo(t,{x:e,y:n},o,{fonts:s,colors:a}){let i=0;o.forEach(function(r,l){const u=a[Math.min(l,a.length-1)],c=s[Math.min(l,s.length-1)],f=c.lineHeight;t.beginPath(),t.font=c.string,t.fillStyle=u,t.fillText(r,e,n+f/2+i),i+=f,t.fill()})}function wo(t,e){const n=xt(t)?t:e;return xt(n)?Ve(n,0,1):1}const Pt={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function le(t,e,n){return e=typeof e=="number"?e:t.parse(e),Ut(e)?t.getPixelForValue(e):n}function te(t,e,n){const o=e[n];if(o||n==="scaleID")return o;const s=n.charAt(0),a=Object.values(t).filter(i=>i.axis&&i.axis===s);return a.length?a[0].id:s}function ln(t,e){if(t){const n=t.options.reverse,o=le(t,e.min,n?e.end:e.start),s=le(t,e.max,n?e.start:e.end);return{start:o,end:s}}}function un(t,e){const{chartArea:n,scales:o}=t,s=o[te(o,e,"xScaleID")],a=o[te(o,e,"yScaleID")];let i=n.width/2,r=n.height/2;return s&&(i=le(s,e.xValue,s.left+s.width/2)),a&&(r=le(a,e.yValue,a.top+a.height/2)),{x:i,y:r}}function ct(t,e){const n=t.scales,o=n[te(n,e,"xScaleID")],s=n[te(n,e,"yScaleID")];if(!o&&!s)return{};let{left:a,right:i}=o||t.chartArea,{top:r,bottom:l}=s||t.chartArea;const u=At(o,{min:e.xMin,max:e.xMax,start:a,end:i});a=u.start,i=u.end;const c=At(s,{min:e.yMin,max:e.yMax,start:l,end:r});return r=c.start,l=c.end,{x:a,y:r,x2:i,y2:l,width:i-a,height:l-r,centerX:a+(i-a)/2,centerY:r+(l-r)/2}}function dn(t,e){if(!on(e)){const n=ct(t,e);let o=e.radius;(!o||isNaN(o))&&(o=Math.min(n.width,n.height)/2,e.radius=o);const s=o*2,a=n.centerX+e.xAdjust,i=n.centerY+e.yAdjust;return{x:a-o,y:i-o,x2:a+o,y2:i+o,centerX:a,centerY:i,width:s,height:s,radius:o}}return xo(t,e)}function _o(t,e){const{scales:n,chartArea:o}=t,s=n[e.scaleID],a={x:o.left,y:o.top,x2:o.right,y2:o.bottom};return s?Mo(s,a,e):ko(n,a,e),a}function cn(t,e){const n=ct(t,e);return n.initProperties=_e(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:Po(t,n,e),initProperties:n.initProperties}],n}function xo(t,e){const n=un(t,e),o=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:o,height:o}}function At(t,e){const n=ln(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function Mo(t,e,n){const o=le(t,n.value,NaN),s=le(t,n.endValue,o);t.isHorizontal()?(e.x=o,e.x2=s):(e.y=o,e.y2=s)}function ko(t,e,n){for(const o of Object.keys(Pt)){const s=t[te(t,n,o)];if(s){const{min:a,max:i,start:r,end:l,startProp:u,endProp:c}=Pt[o],f=ln(s,{min:n[a],max:n[i],start:s[r],end:s[l]});e[u]=f.start,e[c]=f.end}}}function Co({properties:t,options:e},n,o,s){const{x:a,x2:i,width:r}=t;return hn({start:a,end:i,size:r,borderWidth:e.borderWidth},{position:o.x,padding:{start:s.left,end:s.right},adjust:e.label.xAdjust,size:n.width})}function So({properties:t,options:e},n,o,s){const{y:a,y2:i,height:r}=t;return hn({start:a,end:i,size:r,borderWidth:e.borderWidth},{position:o.y,padding:{start:s.top,end:s.bottom},adjust:e.label.yAdjust,size:n.height})}function hn(t,e){const{start:n,end:o,borderWidth:s}=t,{position:a,padding:{start:i,end:r},adjust:l}=e,u=o-s-n-i-r-e.size;return n+s/2+l+rt(u,a)}function Po(t,e,n){const o=n.label;o.backgroundColor="transparent",o.callout.display=!1;const s=lt(o.position),a=Le(o.padding),i=dt(t.ctx,o),r=Co({properties:e,options:n},i,s,a),l=So({properties:e,options:n},i,s,a),u=i.width+a.width,c=i.height+a.height;return{x:r,y:l,x2:r+u,y2:l+c,width:u,height:c,centerX:r+u/2,centerY:l+c/2,rotation:o.rotation}}function ne(t,e,n){const o=Math.cos(n),s=Math.sin(n),a=e.x,i=e.y;return{x:a+o*(t.x-a)-s*(t.y-i),y:i+s*(t.x-a)+o*(t.y-i)}}const Je=["enter","leave"],ht=Je.concat("click");function Ao(t,e,n){e.listened=sn(n,ht,e.listeners),e.moveListened=!1,e._getElements=at,Je.forEach(o=>{re(n[o])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(o=>{!e.listened&&re(o.click)&&(e.listened=!0),e.moveListened||Je.forEach(s=>{re(o[s])&&(e.listened=!0,e.moveListened=!0)})})}function Ro(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return Io(t,e,n);case"click":return To(t,e,n)}}function Io(t,e,n){if(!t.moveListened)return;let o;e.type==="mousemove"?o=at(t,e,n.interaction):o=[];const s=t.hovered;t.hovered=o;const a={state:t,event:e};let i=Rt(a,"leave",s,o);return Rt(a,"enter",o,s)||i}function Rt({state:t,event:e},n,o,s){let a;for(const i of o)s.indexOf(i)<0&&(a=fn(i.options[n]||t.listeners[n],i,e)||a);return a}function To(t,e,n){const o=t.listeners,s=at(t,e,n.interaction);let a;for(const i of s)a=fn(i.options.click||o.click,i,e)||a;return a}function fn(t,e,n){return st(t,[e.$context,n])===!0}const Be=["afterDraw","beforeDraw"];function Do(t,e,n){const o=e.visibleElements;e.hooked=sn(n,Be,e.hooks),e.hooked||o.forEach(s=>{e.hooked||Be.forEach(a=>{re(s.options[a])&&(e.hooked=!0)})})}function It(t,e,n){if(t.hooked){const o=e.options[n]||t.hooks[n];return st(o,[e.$context])}}function Oo(t,e,n){const o=Eo(t.scales,e,n);let s=Tt(e,o,"min","suggestedMin");s=Tt(e,o,"max","suggestedMax")||s,s&&re(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function qo(t,e){for(const n of t)jo(n,e)}function Tt(t,e,n,o){if(Ut(e[n])&&!zo(t.options,n,o)){const s=t[n]!==e[n];return t[n]=e[n],s}}function zo(t,e,n){return H(t[e])||H(t[n])}function jo(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const o=te(e,t,n);o&&!e[o]&&Fo(t,n)&&console.warn(`No scale found with id '${o}' for annotation '${t.id}'`)}}function Fo(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const o of["Min","Max","Value"])if(H(t[n+o]))return!0;return!1}function Eo(t,e,n){const o=e.axis,s=e.id,a=o+"ScaleID",i={min:ve(e.min,Number.NEGATIVE_INFINITY),max:ve(e.max,Number.POSITIVE_INFINITY)};for(const r of n)r.scaleID===s?Dt(r,e,["value","endValue"],i):te(t,r,a)===s&&Dt(r,e,[o+"Min",o+"Max",o+"Value"],i);return i}function Dt(t,e,n,o){for(const s of n){const a=t[s];if(H(a)){const i=e.parse(a);o.min=Math.min(o.min,i),o.max=Math.max(o.max,i)}}}class he extends ue{inRange(e,n,o,s){const{x:a,y:i}=ne({x:e,y:n},this.getCenterPoint(s),Y(-this.options.rotation));return Zt({x:a,y:i},this.getProps(["x","y","x2","y2"],s),o,this.options.borderWidth)}getCenterPoint(e){return de(this,e)}draw(e){e.save(),ut(e,this.getCenterPoint(),this.options.rotation),rn(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return cn(e,n)}}he.id="boxAnnotation";he.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};he.defaultRoutes={borderColor:"color",backgroundColor:"color"};he.descriptors={label:{_fallback:!0}};const gn=["left","bottom","top","right"];class xe extends ue{inRange(e,n,o,s){const{x:a,y:i}=ne({x:e,y:n},this.getCenterPoint(s),Y(-this.rotation));return Zt({x:a,y:i},this.getProps(["x","y","x2","y2"],s),o,this.options.borderWidth)}getCenterPoint(e){return de(this,e)}draw(e){const n=this.options,o=!H(this._visible)||this._visible;!n.display||!n.content||!o||(e.save(),ut(e,this.getCenterPoint(),this.rotation),Lo(e,this),rn(e,this,n),fo(e,$o(this),n),e.restore())}resolveElementProperties(e,n){let o;if(on(n))o=un(e,n);else{const{centerX:r,centerY:l}=ct(e,n);o={x:r,y:l}}const s=Le(n.padding),a=dt(e.ctx,n),i=Bo(o,a,n,s);return{initProperties:_e(e,i,n),pointX:o.x,pointY:o.y,...i,rotation:n.rotation}}}xe.id="labelAnnotation";xe.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};xe.defaultRoutes={borderColor:"color"};function Bo(t,e,n,o){const s=e.width+o.width+n.borderWidth,a=e.height+o.height+n.borderWidth,i=lt(n.position,"center"),r=Ot(t.x,s,n.xAdjust,i.x),l=Ot(t.y,a,n.yAdjust,i.y);return{x:r,y:l,x2:r+s,y2:l+a,width:s,height:a,centerX:r+s/2,centerY:l+a/2}}function Ot(t,e,n=0,o){return t-rt(e,o)+n}function Lo(t,e){const{pointX:n,pointY:o,options:s}=e,a=s.callout,i=a&&a.display&&Yo(e,a);if(!i||Qo(e,a,i))return;if(t.save(),t.beginPath(),!G(t,a))return t.restore();const{separatorStart:l,separatorEnd:u}=Vo(e,i),{sideStart:c,sideEnd:f}=No(e,i,l);(a.margin>0||s.borderWidth===0)&&(t.moveTo(l.x,l.y),t.lineTo(u.x,u.y)),t.moveTo(c.x,c.y),t.lineTo(f.x,f.y);const d=ne({x:n,y:o},e.getCenterPoint(),Y(-e.rotation));t.lineTo(d.x,d.y),t.stroke(),t.restore()}function Vo(t,e){const{x:n,y:o,x2:s,y2:a}=t,i=Wo(t,e);let r,l;return e==="left"||e==="right"?(r={x:n+i,y:o},l={x:r.x,y:a}):(r={x:n,y:o+i},l={x:s,y:r.y}),{separatorStart:r,separatorEnd:l}}function Wo(t,e){const{width:n,height:o,options:s}=t,a=s.callout.margin+s.borderWidth/2;return e==="right"?n+a:e==="bottom"?o+a:-a}function No(t,e,n){const{y:o,width:s,height:a,options:i}=t,r=i.callout.start,l=Ho(e,i.callout);let u,c;return e==="left"||e==="right"?(u={x:n.x,y:o+U(a,r)},c={x:u.x+l,y:u.y}):(u={x:n.x+U(s,r),y:n.y},c={x:u.x,y:u.y+l}),{sideStart:u,sideEnd:c}}function Ho(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function Yo(t,e){const n=e.position;return gn.includes(n)?n:Xo(t,e)}function Xo(t,e){const{x:n,y:o,x2:s,y2:a,width:i,height:r,pointX:l,pointY:u,centerX:c,centerY:f,rotation:d}=t,m={x:c,y:f},_=e.start,T=U(i,_),M=U(r,_),D=[n,n+T,n+T,s],O=[o+M,a,o,a],z=[];for(let F=0;F<4;F++){const K=ne({x:D[F],y:O[F]},m,Y(d));z.push({position:gn[F],distance:it(K,{x:l,y:u})})}return z.sort((F,K)=>F.distance-K.distance)[0].position}function $o({x:t,y:e,width:n,height:o,options:s}){const a=s.borderWidth/2,i=Le(s.padding);return{x:t+i.left+a,y:e+i.top+a,width:n-i.left-i.right-s.borderWidth,height:o-i.top-i.bottom-s.borderWidth}}function Qo(t,e,n){const{pointX:o,pointY:s}=t,a=e.margin;let i=o,r=s;return n==="left"?i+=a:n==="right"?i-=a:n==="top"?r+=a:n==="bottom"&&(r-=a),t.inRange(i,r)}const ft=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),Ke=(t,e,n)=>ft(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,qt=(t,e,n)=>ft(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,me=t=>t*t,Uo=(t,e,{x:n,y:o,x2:s,y2:a},i)=>i==="y"?{start:Math.min(o,a),end:Math.max(o,a),value:e}:{start:Math.min(n,s),end:Math.max(n,s),value:t},zt=(t,e,n,o)=>(1-o)*(1-o)*t+2*(1-o)*o*e+o*o*n,Ze=(t,e,n,o)=>({x:zt(t.x,e.x,n.x,o),y:zt(t.y,e.y,n.y,o)}),jt=(t,e,n,o)=>2*(1-o)*(e-t)+2*o*(n-e),Ft=(t,e,n,o)=>-Math.atan2(jt(t.x,e.x,n.x,o),jt(t.y,e.y,n.y,o))+.5*E;class Me extends ue{inRange(e,n,o,s){const a=this.options.borderWidth/2;if(o!=="x"&&o!=="y"){const i={mouseX:e,mouseY:n},{path:r,ctx:l}=this;if(r){G(l,this.options);const{chart:c}=this.$context,f=e*c.currentDevicePixelRatio,d=n*c.currentDevicePixelRatio,m=l.isPointInStroke(r,f,d)||et(this,i,s);return l.restore(),m}const u=me(a);return Zo(this,i,u,s)||et(this,i,s)}return Go(this,{mouseX:e,mouseY:n},o,{hBorderWidth:a,useFinalPosition:s})}getCenterPoint(e){return de(this,e)}draw(e){const{x:n,y:o,x2:s,y2:a,cp:i,options:r}=this;if(e.save(),!G(e,r))return e.restore();ce(e,r);const l=Math.sqrt(Math.pow(s-n,2)+Math.pow(a-o,2));if(r.curve&&i)return rs(e,this,i,l),e.restore();const{startOpts:u,endOpts:c,startAdjust:f,endAdjust:d}=yn(this),m=Math.atan2(a-o,s-n);e.translate(n,o),e.rotate(m),e.beginPath(),e.moveTo(0+f,0),e.lineTo(l-d,0),e.shadowColor=r.borderShadowColor,e.stroke(),tt(e,0,f,u),tt(e,l,-d,c),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const o=_o(e,n),{x:s,y:a,x2:i,y2:r}=o,l=Jo(o,e.chartArea),u=l?Ko({x:s,y:a},{x:i,y:r},e.chartArea):{x:s,y:a,x2:i,y2:r,width:Math.abs(i-s),height:Math.abs(r-a)};if(u.centerX=(i+s)/2,u.centerY=(r+a)/2,u.initProperties=_e(e,u,n),n.curve){const f={x:u.x,y:u.y},d={x:u.x2,y:u.y2};u.cp=as(u,n,it(f,d))}const c=es(e,u,n.label);return c._visible=l,u.elements=[{type:"label",optionScope:"label",properties:c,initProperties:u.initProperties}],u}}Me.id="lineAnnotation";const Et={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};Me.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},Et),fill:!1,length:12,start:Object.assign({},Et),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},xe.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Me.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};Me.defaultRoutes={borderColor:"color"};function Go(t,{mouseX:e,mouseY:n},o,{hBorderWidth:s,useFinalPosition:a}){const i=Uo(e,n,t.getProps(["x","y","x2","y2"],a),o);return i.value>=i.start-s&&i.value<=i.end+s||et(t,{mouseX:e,mouseY:n},a,o)}function Jo({x:t,y:e,x2:n,y2:o},{top:s,right:a,bottom:i,left:r}){return!(t<r&&n<r||t>a&&n>a||e<s&&o<s||e>i&&o>i)}function Bt({x:t,y:e},n,{top:o,right:s,bottom:a,left:i}){return t<i&&(e=qt(i,{x:t,y:e},n),t=i),t>s&&(e=qt(s,{x:t,y:e},n),t=s),e<o&&(t=Ke(o,{x:t,y:e},n),e=o),e>a&&(t=Ke(a,{x:t,y:e},n),e=a),{x:t,y:e}}function Ko(t,e,n){const{x:o,y:s}=Bt(t,e,n),{x:a,y:i}=Bt(e,t,n);return{x:o,y:s,x2:a,y2:i,width:Math.abs(a-o),height:Math.abs(i-s)}}function Zo(t,{mouseX:e,mouseY:n},o=Z,s){const{x:a,y:i,x2:r,y2:l}=t.getProps(["x","y","x2","y2"],s),u=r-a,c=l-i,f=me(u)+me(c),d=f===0?-1:((e-a)*u+(n-i)*c)/f;let m,_;return d<0?(m=a,_=i):d>1?(m=r,_=l):(m=a+d*u,_=i+d*c),me(e-m)+me(n-_)<=o}function et(t,{mouseX:e,mouseY:n},o,s){const a=t.label;return a.options.display&&a.inRange(e,n,s,o)}function es(t,e,n){const o=n.borderWidth,s=Le(n.padding),a=dt(t.ctx,n),i=a.width+s.width+o,r=a.height+s.height+o;return ns(e,n,{width:i,height:r,padding:s},t.chartArea)}function ts(t){const{x:e,y:n,x2:o,y2:s}=t,a=Math.atan2(s-n,o-e);return a>E/2?a-E:a<E/-2?a+E:a}function ns(t,e,n,o){const{width:s,height:a,padding:i}=n,{xAdjust:r,yAdjust:l}=e,u={x:t.x,y:t.y},c={x:t.x2,y:t.y2},f=e.rotation==="auto"?ts(t):Y(e.rotation),d=os(s,a,f),m=ss(t,e,{labelSize:d,padding:i},o),_=t.cp?Ze(u,t.cp,c,m):ft(u,c,m),T={size:d.w,min:o.left,max:o.right,padding:i.left},M={size:d.h,min:o.top,max:o.bottom,padding:i.top},D=Vt(_.x,T)+r,O=Vt(_.y,M)+l;return{x:D-s/2,y:O-a/2,x2:D+s/2,y2:O+a/2,centerX:D,centerY:O,pointX:_.x,pointY:_.y,width:s,height:a,rotation:Vn(f)}}function os(t,e,n){const o=Math.cos(n),s=Math.sin(n);return{w:Math.abs(t*o)+Math.abs(e*s),h:Math.abs(t*s)+Math.abs(e*o)}}function ss(t,e,n,o){let s;const a=is(t,o);return e.position==="start"?s=Lt({w:t.x2-t.x,h:t.y2-t.y},n,e,a):e.position==="end"?s=1-Lt({w:t.x-t.x2,h:t.y-t.y2},n,e,a):s=rt(1,e.position),s}function Lt(t,e,n,o){const{labelSize:s,padding:a}=e,i=t.w*o.dx,r=t.h*o.dy,l=i>0&&(s.w/2+a.left-o.x)/i,u=r>0&&(s.h/2+a.top-o.y)/r;return Ve(Math.max(l,u),0,.25)}function is(t,e){const{x:n,x2:o,y:s,y2:a}=t,i=Math.min(s,a)-e.top,r=Math.min(n,o)-e.left,l=e.bottom-Math.max(s,a),u=e.right-Math.max(n,o);return{x:Math.min(r,u),y:Math.min(i,l),dx:r<=u?1:-1,dy:i<=l?1:-1}}function Vt(t,e){const{size:n,min:o,max:s,padding:a}=e,i=n/2;return n>s-o?(s+o)/2:(o>=t-a-i&&(t=o+a+i),s<=t+a+i&&(t=s-a-i),t)}function yn(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,o=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:o,startAdjust:Wt(t,n),endAdjust:Wt(t,o)}}function Wt(t,e){if(!e||!e.display)return 0;const{length:n,width:o}=e,s=t.options.borderWidth/2,a={x:n,y:o+s};return Math.abs(Ke(0,a,{x:0,y:s}))}function tt(t,e,n,o){if(!o||!o.display)return;const{length:s,width:a,fill:i,backgroundColor:r,borderColor:l}=o,u=Math.abs(e-s)+n;t.beginPath(),ce(t,o),G(t,o),t.moveTo(u,-a),t.lineTo(e+n,0),t.lineTo(u,a),i===!0?(t.fillStyle=r||l,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=o.borderShadowColor,t.stroke()}function as(t,e,n){const{x:o,y:s,x2:a,y2:i,centerX:r,centerY:l}=t,u=Math.atan2(i-s,a-o),c=lt(e.controlPoint,0),f={x:r+U(n,c.x,!1),y:l+U(n,c.y,!1)};return ne(f,{x:r,y:l},u)}function Nt(t,{x:e,y:n},{angle:o,adjust:s},a){!a||!a.display||(t.save(),t.translate(e,n),t.rotate(o),tt(t,0,-s,a),t.restore())}function rs(t,e,n,o){const{x:s,y:a,x2:i,y2:r,options:l}=e,{startOpts:u,endOpts:c,startAdjust:f,endAdjust:d}=yn(e),m={x:s,y:a},_={x:i,y:r},T=Ft(m,n,_,0),M=Ft(m,n,_,1)-E,D=Ze(m,n,_,f/o),O=Ze(m,n,_,1-d/o),z=new Path2D;t.beginPath(),z.moveTo(D.x,D.y),z.quadraticCurveTo(n.x,n.y,O.x,O.y),t.shadowColor=l.borderShadowColor,t.stroke(z),e.path=z,e.ctx=t,Nt(t,D,{angle:T,adjust:f},u),Nt(t,O,{angle:M,adjust:d},c)}class ke extends ue{inRange(e,n,o,s){const a=this.options.rotation,i=this.options.borderWidth;if(o!=="x"&&o!=="y")return ls({x:e,y:n},this.getProps(["width","height","centerX","centerY"],s),a,i);const{x:r,y:l,x2:u,y2:c}=this.getProps(["x","y","x2","y2"],s),f=i/2,d=o==="y"?{start:l,end:c}:{start:r,end:u},m=ne({x:e,y:n},this.getCenterPoint(s),Y(-a));return m[o]>=d.start-f-Z&&m[o]<=d.end+f+Z}getCenterPoint(e){return de(this,e)}draw(e){const{width:n,height:o,centerX:s,centerY:a,options:i}=this;e.save(),ut(e,this.getCenterPoint(),i.rotation),ce(e,this.options),e.beginPath(),e.fillStyle=i.backgroundColor;const r=G(e,i);e.ellipse(s,a,o/2,n/2,E/2,0,2*E),e.fill(),r&&(e.shadowColor=i.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return cn(e,n)}}ke.id="ellipseAnnotation";ke.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,label:Object.assign({},he.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};ke.defaultRoutes={borderColor:"color",backgroundColor:"color"};ke.descriptors={label:{_fallback:!0}};function ls(t,e,n,o){const{width:s,height:a,centerX:i,centerY:r}=e,l=s/2,u=a/2;if(l<=0||u<=0)return!1;const c=Y(n||0),f=o/2||0,d=Math.cos(c),m=Math.sin(c),_=Math.pow(d*(t.x-i)+m*(t.y-r),2),T=Math.pow(m*(t.x-i)-d*(t.y-r),2);return _/Math.pow(l+f,2)+T/Math.pow(u+f,2)<=1.0001}class Ne extends ue{inRange(e,n,o,s){const{x:a,y:i,x2:r,y2:l,width:u}=this.getProps(["x","y","x2","y2","width"],s),c=this.options.borderWidth;if(o!=="x"&&o!=="y")return io({x:e,y:n},this.getCenterPoint(s),u/2,c);const f=c/2,d=o==="y"?{start:i,end:l,value:n}:{start:a,end:r,value:e};return d.value>=d.start-f&&d.value<=d.end+f}getCenterPoint(e){return de(this,e)}draw(e){const n=this.options,o=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,ce(e,n);const s=G(e,n);yo(e,this,this.centerX,this.centerY),s&&!We(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=o}resolveElementProperties(e,n){const o=dn(e,n);return o.initProperties=_e(e,o,n),o}}Ne.id="pointAnnotation";Ne.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Ne.defaultRoutes={borderColor:"color",backgroundColor:"color"};class He extends ue{inRange(e,n,o,s){if(o!=="x"&&o!=="y")return this.options.radius>=.1&&this.elements.length>1&&ds(this.elements,e,n,s);const a=ne({x:e,y:n},this.getCenterPoint(s),Y(-this.options.rotation)),i=this.elements.map(u=>o==="y"?u.bY:u.bX),r=Math.min(...i),l=Math.max(...i);return a[o]>=r&&a[o]<=l}getCenterPoint(e){return de(this,e)}draw(e){const{elements:n,options:o}=this;e.save(),e.beginPath(),e.fillStyle=o.backgroundColor,ce(e,o);const s=G(e,o);let a=!0;for(const i of n)a?(e.moveTo(i.x,i.y),a=!1):e.lineTo(i.x,i.y);e.closePath(),e.fill(),s&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const o=dn(e,n),{sides:s,rotation:a}=n,i=[],r=2*E/s;let l=a*Gt;for(let u=0;u<s;u++,l+=r){const c=us(o,n,l);c.initProperties=_e(e,o,n),i.push(c)}return o.elements=i,o}}He.id="polygonAnnotation";He.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};He.defaultRoutes={borderColor:"color",backgroundColor:"color"};function us({centerX:t,centerY:e},{radius:n,borderWidth:o},s){const a=o/2,i=Math.sin(s),r=Math.cos(s),l={x:t+i*n,y:e-r*n};return{type:"point",optionScope:"point",properties:{x:l.x,y:l.y,centerX:l.x,centerY:l.y,bX:t+i*(n+a),bY:e-r*(n+a)}}}function ds(t,e,n,o){let s=!1,a=t[t.length-1].getProps(["bX","bY"],o);for(const i of t){const r=i.getProps(["bX","bY"],o);r.bY>n!=a.bY>n&&e<(a.bX-r.bX)*(n-r.bY)/(a.bY-r.bY)+r.bX&&(s=!s),a=r}return s}const Q={box:he,ellipse:ke,label:xe,line:Me,point:Ne,polygon:He};Object.keys(Q).forEach(t=>{En.describe(`elements.${Q[t].id}`,{_fallback:"plugins.annotation.common"})});const cs={update:Object.assign},hs=ht.concat(Be),Ht=(t,e)=>we(e)?ot(t,e):t,nt=t=>t==="color"||t==="font";function gt(t="line"){return Q[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function fs(t,e,n,o){const s=ys(t,n.animations,o),a=e.annotations,i=ms(e.elements,a);for(let r=0;r<a.length;r++){const l=a[r],u=pn(i,r,l.type),c=l.setContext(bs(t,u,l)),f=u.resolveElementProperties(t,c);f.skip=gs(f),"elements"in f&&(ps(u,f.elements,c,s),delete f.elements),H(u.x)||Object.assign(u,f),Object.assign(u,f.initProperties),f.options=bn(c),s.update(u,f)}}function gs(t){return isNaN(t.x)||isNaN(t.y)}function ys(t,e,n){return n==="reset"||n==="none"||n==="resize"?cs:new Wn(t,e)}function ps(t,e,n,o){const s=t.elements||(t.elements=[]);s.length=e.length;for(let a=0;a<e.length;a++){const i=e[a],r=i.properties,l=pn(s,a,i.type,i.initProperties),u=n[i.optionScope].override(i);r.options=bn(u),o.update(l,r)}}function pn(t,e,n,o){const s=Q[gt(n)];let a=t[e];return(!a||!(a instanceof s))&&(a=t[e]=new s,Object.assign(a,o)),a}function bn(t){const e=Q[gt(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,ot(t,e.defaults),ot(t,e.defaultRoutes));for(const o of hs)n[o]=t[o];return n}function ot(t,e){const n={};for(const o of Object.keys(e)){const s=e[o],a=t[o];nt(o)&&ee(a)?n[o]=a.map(i=>Ht(i,s)):n[o]=Ht(a,s)}return n}function bs(t,e,n){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,id:n.id,type:"annotation"}))}function ms(t,e){const n=e.length,o=t.length;if(o<n){const s=n-o;t.splice(o,0,...new Array(s))}else o>n&&t.splice(n,o-n);return t}var vs="3.0.1";const $=new Map,ws=ht.concat(Be);var _s={id:"annotation",version:vs,beforeRegister(){ao("chart.js","4.0",ae.version)},afterRegister(){ae.register(Q)},afterUnregister(){ae.unregister(Q)},beforeInit(t){$.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const o=$.get(t),s=o.annotations=[];let a=n.annotations;we(a)?Object.keys(a).forEach(i=>{const r=a[i];we(r)&&(r.id=i,s.push(r))}):ee(a)&&s.push(...a),qo(s,t.scales)},afterDataLimits(t,e){const n=$.get(t);Oo(t,e.scale,n.annotations.filter(o=>o.display&&o.adjustScaleRange))},afterUpdate(t,e,n){const o=$.get(t);Ao(t,o,n),fs(t,o,n,e.mode),o.visibleElements=o.elements.filter(s=>!s.skip&&s.options.display),Do(t,o,n)},beforeDatasetsDraw(t,e,n){ze(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){ze(t,"afterDatasetsDraw",n.clip)},beforeDraw(t,e,n){ze(t,"beforeDraw",n.clip)},afterDraw(t,e,n){ze(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const o=$.get(t);Ro(o,e.event,n)&&(e.changed=!0)},afterDestroy(t){$.delete(t)},_getState(t){return $.get(t)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!ws.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${Q[gt(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:nt,_fallback:!0},_indexable:nt}},additionalOptionScopes:[""]};function ze(t,e,n){const{ctx:o,chartArea:s}=t,a=$.get(t);n&&Bn(o,s);const i=xs(a.visibleElements,e).sort((r,l)=>r.element.options.z-l.element.options.z);for(const r of i)Ms(o,s,a,r);n&&Ln(o)}function xs(t,e){const n=[];for(const o of t)if(o.options.drawTime===e&&n.push({element:o,main:!0}),o.elements&&o.elements.length)for(const s of o.elements)s.options.display&&s.options.drawTime===e&&n.push({element:s});return n}function Ms(t,e,n,o){const s=o.element;o.main?(It(n,s,"beforeDraw"),s.draw(t,e),It(n,s,"afterDraw")):s.draw(t,e)}class yt extends kt{constructor(){const e=Jt(yt.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(kt.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(Kt(e in Yt,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const n=this.now();this._stop(n),this._start(n)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const n=Yt[this._type];this._source=new $n({url:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(n.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const ie=44100*5,Ge=2,N={brown:null,pink:null,white:null},Yt={get brown(){if(!N.brown){const t=[];for(let e=0;e<Ge;e++){const n=new Float32Array(ie);t[e]=n;let o=0;for(let s=0;s<ie;s++){const a=Math.random()*2-1;n[s]=(o+.02*a)/1.02,o=n[s],n[s]*=3.5}}N.brown=new Qe().fromArray(t)}return N.brown},get pink(){if(!N.pink){const t=[];for(let e=0;e<Ge;e++){const n=new Float32Array(ie);t[e]=n;let o,s,a,i,r,l,u;o=s=a=i=r=l=u=0;for(let c=0;c<ie;c++){const f=Math.random()*2-1;o=.99886*o+f*.0555179,s=.99332*s+f*.0750759,a=.969*a+f*.153852,i=.8665*i+f*.3104856,r=.55*r+f*.5329522,l=-.7616*l-f*.016898,n[c]=o+s+a+i+r+l+u+f*.5362,n[c]*=.11,u=f*.115926}}N.pink=new Qe().fromArray(t)}return N.pink},get white(){if(!N.white){const t=[];for(let e=0;e<Ge;e++){const n=new Float32Array(ie);t[e]=n;for(let o=0;o<ie;o++)n[o]=Math.random()*2-1}N.white=new Qe().fromArray(t)}return N.white}};class pt extends Ct{constructor(){const e=Jt(pt.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new De({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new De({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new De({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new De({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(Ct.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){Kt(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const n=new Float32Array(e);for(let i=0;i<e;i++){const l=Math.pow(i/e,2)*19980+20;n[i]=l}const o=new Float32Array(e),s=new Float32Array(e),a=this.context.createBiquadFilter();return a.type=this.type,a.Q.value=this.Q.value,a.frequency.value=this.frequency.value,a.gain.value=this.gain.value,a.getFrequencyResponse(n,o,s),o}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}function ks(t){return new Worker("/tools/assets/biquadWorker-0U8kjE0g.js",{name:t==null?void 0:t.name})}const Xt=[{title:"ローパスフィルタ (LPF)",value:"lowpass",requiredParameter:["q"],toneFilterType:"lowpass"},{title:"ハイパスフィルタ (HPF)",value:"highpass",requiredParameter:["q"],toneFilterType:"highpass"},{title:"バンドパスフィルタ (BPF)",value:"bandpass",requiredParameter:["q"],toneFilterType:"bandpass"},{title:"バンドストップフィルタ (BSF, Notch)",value:"bandstop",requiredParameter:["q"],toneFilterType:"notch"},{title:"ローシェルフフィルタ (LSF)",value:"lowshelf",requiredParameter:["q","gain"],toneFilterType:"lowshelf"},{title:"ハイシェルフフィルタ (HSF)",value:"highshelf",requiredParameter:["q","gain"],toneFilterType:"highshelf"},{title:"ピーキングフィルタ (Peaking)",value:"peaking",requiredParameter:["q","gain"],toneFilterType:"peaking"},{title:"オールパスフィルタ (Allpass)",value:"allpass",requiredParameter:["q"],toneFilterType:"allpass"}],Cs={type:"line",data:{datasets:[],labels:[]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{},parsing:{xAxisKey:"x",yAxisKey:"y"},scales:{x:{type:"logarithmic",min:20},y:{type:"linear",min:-60},y1:{type:"linear",position:"right",max:180,min:-180,ticks:{stepSize:90},grid:{drawOnChartArea:!1}}}}},Ss={type:"bar",data:{datasets:[]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{type:"linear"}},plugins:{legend:{labels:{usePointStyle:!0}}}}},Ps={type:"line",borderColor:"#aaa",borderWidth:2,borderDash:[5]};function $t(t,e){if(typeof e>"u"){const n=Array(t);let o=0;for(;o<t;)n[o]=o++;return n}else{const n=Array(e-t);let o=0,s=t;for(;s<e;)n[o++]=s++;return n}}function As(t,e){const n=Array(e);let o=0;for(;o<e;)n[o]=t/e*o++;return n}function Qt(t){let e=-1/0,n=1/0,o=-1,s=-1,a=0;for(const i of t)i>e&&(e=i,o=a),i<n&&(n=i,s=a),a++;return{max:e,min:n,maxIndex:o,minIndex:s}}class Rs{constructor(e,n){W(this,"_worker",null);this.workerConstructor=e,this.options=n}async invoke(e){return this._worker==null&&(this._worker=new this.workerConstructor(this.options)),await new Promise((n,o)=>{if(this._worker==null){o("worker is not initialized");return}this._worker.onmessage=function(s){n(s.data)},this._worker.onmessageerror=function(s){o(s)},this._worker.postMessage(e)})}get worker(){return this._worker}}const J=t=>(zn("data-v-89d057c2"),t=t(),jn(),t),Is={style:{height:"250px"}},Ts={style:{height:"250px"}},Ds=J(()=>p("h4",{class:"mb-3"},"フィルタ係数",-1)),Os={class:"ml-3"},qs={class:"text-right"},zs={class:"text-right"},js={class:"text-right"},Fs={class:"text-right"},Es={class:"text-right"},Bs={class:"text-right"},Ls=J(()=>p("h4",{class:"mb-3"},"正規化フィルタ係数",-1)),Vs={class:"ml-3"},Ws={class:"text-right"},Ns={class:"text-right"},Hs={class:"text-right"},Ys={class:"text-right"},Xs={class:"text-right"},$s=J(()=>p("h4",{class:"mb-5"},"インパルス長",-1)),Qs=J(()=>p("h4",{class:"mb-3"},"カットオフ周波数の振幅",-1)),Us={class:"text-right"},Gs=J(()=>p("h4",{class:"mb-3"},"最大と最小振幅",-1)),Js={class:"text-right"},Ks=J(()=>p("h4",{class:"mb-3"},"インパルス応答の総和",-1)),Zs=J(()=>p("h4",null,"参考文献",-1)),ei=J(()=>p("ul",null,[p("li",null,[p("a",{href:"https://webaudio.github.io/Audio-EQ-Cookbook/audio-eq-cookbook.html",target:"_blank"},"Cookbook formulae for audio equalizer biquad filter coefficients")]),p("li",null,[p("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode/type",target:"_blank"},"BiquadFilterNode: type property"),x(" - Web APIs | MDN ")])],-1)),ti=Rn({__name:"BiquadApp",setup(t){ae.register(_s);const e=In(),n=k(),o=k(Xt[0]),s=k(),a=k(),i=k(-60),r=k(!1),l=k(1e3),u=k(.707106781),c=k(6),f=k(48e3),d=k(1024),m=k(1024/4),_=k(1024),T=k(2**16),M=wt(()=>new Zn(d.value)),D=k([1,0,0,0,0,0]),O=k([1,0,0,0,0]),z=k(0),F=k(0),K=k(0),Ye=k(0),Xe=k(0),$e=k(0),Ce=wt(()=>As(f.value/2,d.value/2)),fe=k(),ge=k(-30);let L=null,Se=null;const mn=new Rs(ks);function vn(){function v(S,C,q){Te(S==null?void 0:S.getElementById(C),{textContent:q})}const g=window.document.querySelector(".diagram");if(g){const S=g.contentDocument;v(S,"b0",M.value.normalizedCoefficients[0].toFixed(9)),v(S,"b1",M.value.normalizedCoefficients[1].toFixed(9)),v(S,"b2",M.value.normalizedCoefficients[2].toFixed(9)),v(S,"a1",M.value.normalizedCoefficients[3].toFixed(9)),v(S,"a2",M.value.normalizedCoefficients[4].toFixed(9))}}function bt(){var S,C,q,w,ye;const v=(S=s.value)==null?void 0:S.getChart();if(!v||!v.ready)return;function g(){const oe=[];let X=M.value.phaseResponse[0];for(let V=1;V<d.value;V++){const pe=M.value.phaseResponse[V];Math.abs(pe-X)>=180&&V<d.value-1&&oe.push({x:(Ce.value[V]+Ce.value[V+1])/2,y:Number.NaN}),oe.push({x:Ce.value[V],y:pe}),X=pe}return oe}Te((q=(C=v.chart.options.plugins)==null?void 0:C.annotation)==null?void 0:q.annotations,{cutoffFreqLine:new Xn(Object.assign({xMax:l.value,xMin:l.value},Ps))}),Te(v.chart,{data:{datasets:[{label:"振幅 (dB)",data:M.value.frequencyResponse,pointStyle:!1,yAxisID:"y",hidden:typeof((w=v.chart.data.datasets[0])==null?void 0:w.hidden)>"u"?!1:!v.chart.isDatasetVisible(0)},{label:"位相 (deg)",data:g(),pointStyle:!1,yAxisID:"y1",hidden:typeof((ye=v.chart.data.datasets[1])==null?void 0:ye.hidden)>"u"?!1:!v.chart.isDatasetVisible(1)}],labels:Ce.value},scales:{x:{options:{max:f.value/2,min:200/2**(Math.log2(d.value)-8)}},y:{options:{max:Math.round(Math.max(Qt(M.value.frequencyResponse).max,0)+10),min:i.value}}}}).update("none")}function mt(){var g,S;const v=(g=a.value)==null?void 0:g.getChart();!v||!v.ready||Te(v.chart,{data:{datasets:[{label:"インパルス応答",data:M.value.impluseResponse.slice(0,m.value),pointStyle:"rect",borderWidth:0,backgroundColor:"rgb(54, 162, 235)",barPercentage:1.2,hidden:typeof((S=v.chart.data.datasets[0])==null?void 0:S.hidden)>"u"?!1:!v.chart.isDatasetVisible(0)}],labels:$t(m.value)}}).update("none")}function vt(){_.value=d.value,M.value.setFilter(o.value.value,f.value,l.value,{q:u.value,gain:c.value}),D.value=[...M.value.coefficients],O.value=[...M.value.normalizedCoefficients],M.value.transform(),z.value=(M.value.frequencyResponse[Math.floor(l.value/f.value*d.value)]+M.value.frequencyResponse[Math.floor(l.value/f.value*d.value+1)])/2;const v=Qt(M.value.frequencyResponse);F.value=v.max,K.value=v.min,Ye.value=f.value/d.value*v.maxIndex,Xe.value=f.value/d.value*v.minIndex,$e.value=M.value.impluseResponse.reduce((g,S)=>g+S,0),vn(),bt(),mt()}Pe(()=>[d.value,o.value,l.value,u.value,c.value,f.value],()=>{m.value>d.value&&(m.value=d.value),vt(),Se&&Se.set({frequency:l.value,Q:u.value,gain:c.value,type:o.value.toneFilterType})}),Pe(()=>i.value,bt),Pe(()=>m.value,mt);function wn(){qn(e),vt(),n.value&&(n.value.style.opacity="1")}function _n(v){return new ae(v,Cs)}function xn(v){return new ae(v,Ss)}async function Mn(){fe.value?L==null||L.stop():(L==null&&(await Qn(),Se=new pt({frequency:l.value,Q:u.value,gain:c.value}).toDestination(),L=new yt().connect(Se)),L.volume.value=ge.value,L.start())}Pe(()=>ge.value,()=>{L&&(L.volume.value=ge.value)});async function kn(){if(r.value)return;r.value=!0;const v=await mn.invoke({impulseLength:T.value,filterType:o.value.value,samplingFreq:f.value,cutoffFreq:l.value,q:u.value,gain:c.value});z.value=v.magnitudeOnCutoff,F.value=v.maxMagnitude,K.value=v.minMagnitude,Ye.value=v.maxMagnitudeFrequency,Xe.value=v.minMagnitudeFrequency,$e.value=v.sumImpulse,_.value=T.value,r.value=!1}return(v,g)=>{const S=B("v-select"),C=B("v-col"),q=B("v-row"),w=B("v-list-item"),ye=B("v-icon"),oe=B("v-btn"),X=B("v-divider"),V=B("v-checkbox"),pe=B("v-container"),Cn=B("v-footer");return Ae(),Re(On,{"page-id":"filter/biquad","toolbar-title":"双2次フィルタ"},{footer:y(()=>[h(X),h(Cn,null,{default:y(()=>[h(pe,null,{default:y(()=>[Zs,ei]),_:1})]),_:1})]),default:y(()=>[h(q,null,{default:y(()=>[h(C,{cols:"12",md:"7"},{default:y(()=>[h(q,null,{default:y(()=>[h(C,{cols:"12"},{default:y(()=>[h(S,{label:"フィルタタイプ",density:"compact",variant:"underlined",modelValue:o.value,"onUpdate:modelValue":g[0]||(g[0]=b=>o.value=b),items:A(Xt),"hide-details":"","return-object":""},null,8,["modelValue","items"])]),_:1})]),_:1}),h(se,{modelValue:l.value,"onUpdate:modelValue":g[5]||(g[5]=b=>l.value=b),label:"カットオフ周波数",variant:"underlined",density:"compact",unit:"Hz",scale:"log",max:f.value/2,min:10,"fraction-digits":3,"prefix-symbols":["G","M","k",""],rule:[A(I).required,A(I).value,A(I).notNegative,A(I).notZero],cols:"4","hide-details":""},{"menu-list":y(()=>[h(w,{title:"10 kHz",onClick:g[1]||(g[1]=b=>l.value=1e4)}),h(w,{title:"1 kHz",onClick:g[2]||(g[2]=b=>l.value=1e3)}),h(w,{title:"100 Hz",onClick:g[3]||(g[3]=b=>l.value=100)}),h(w,{title:"10 Hz",onClick:g[4]||(g[4]=b=>l.value=10)})]),_:1},8,["modelValue","max","rule"]),h(se,{modelValue:u.value,"onUpdate:modelValue":g[14]||(g[14]=b=>u.value=b),label:"Q",variant:"underlined",density:"compact",scale:"log",max:128,min:.01,"fraction-digits":4,rule:[A(I).required,A(I).value,A(I).notNegative,A(I).notZero],cols:"4","hide-details":""},{"menu-button":y(({props:b})=>[h(oe,Tn(b,{icon:"",variant:"plain",density:"compact"}),{default:y(()=>[(o.value.value==="lowshelf"||o.value.value==="highshelf")&&fe.value?(Ae(),Re(ye,{key:0,color:"warning",icon:"mdi-alert"})):(Ae(),Re(ye,{key:1,icon:"mdi-dots-horizontal"}))]),_:2},1040)]),"menu-list":y(()=>[(o.value.value==="lowshelf"||o.value.value==="highshelf")&&fe.value?(Ae(),Re(w,{key:0,title:"再生される音には Q のパラメータは反映されません",color:"warning",active:"",density:"compact"})):Dn("",!0),h(w,{title:"16.0000",onClick:g[6]||(g[6]=b=>u.value=Math.pow(Math.SQRT2,8))}),h(w,{title:"8.0000",onClick:g[7]||(g[7]=b=>u.value=Math.pow(Math.SQRT2,6))}),h(w,{title:"4.0000",onClick:g[8]||(g[8]=b=>u.value=Math.pow(Math.SQRT2,4))}),h(w,{title:"2.0000",onClick:g[9]||(g[9]=b=>u.value=Math.pow(Math.SQRT2,2))}),h(w,{title:"1.4142",onClick:g[10]||(g[10]=b=>u.value=Math.SQRT2)}),h(w,{title:"1.0000",onClick:g[11]||(g[11]=b=>u.value=1)}),h(w,{title:"0.7071 (デフォルト)",onClick:g[12]||(g[12]=b=>u.value=Math.SQRT1_2)}),h(w,{title:"0.5000",onClick:g[13]||(g[13]=b=>u.value=.5)})]),_:1},8,["modelValue","rule"]),h(se,{modelValue:c.value,"onUpdate:modelValue":g[22]||(g[22]=b=>c.value=b),label:"増幅量",variant:"underlined",density:"compact",unit:"dB",max:40,min:-40,step:.1,"fraction-digits":2,rule:[A(I).required,A(I).value],cols:"4","hide-details":"",disabled:!o.value.requiredParameter.includes("gain")},{"menu-list":y(()=>[h(w,{title:"+ 9.00 dB",onClick:g[15]||(g[15]=b=>c.value=9)}),h(w,{title:"+ 6.00 dB",onClick:g[16]||(g[16]=b=>c.value=6)}),h(w,{title:"+ 3.00 dB",onClick:g[17]||(g[17]=b=>c.value=3)}),h(w,{title:" 0.00 dB",onClick:g[18]||(g[18]=b=>c.value=0)}),h(w,{title:"- 3.00 dB",onClick:g[19]||(g[19]=b=>c.value=-3)}),h(w,{title:"- 6.00 dB",onClick:g[20]||(g[20]=b=>c.value=-6)}),h(w,{title:"- 9.00 dB",onClick:g[21]||(g[21]=b=>c.value=-9)})]),_:1},8,["modelValue","rule","disabled"]),h(se,{modelValue:f.value,"onUpdate:modelValue":g[30]||(g[30]=b=>f.value=b),label:"サンプリング周波数",variant:"underlined",density:"compact",unit:"Hz",scale:"log",max:192e3,min:10,"fraction-digits":3,"prefix-symbols":["G","M","k",""],rule:[A(I).required,A(I).value,A(I).notNegative,A(I).notZero],cols:"4","hide-details":""},{"menu-list":y(()=>[h(w,{title:"192.000 kHz",onClick:g[23]||(g[23]=b=>f.value=192e3)}),h(w,{title:"96.000 kHz",onClick:g[24]||(g[24]=b=>f.value=96e3)}),h(w,{title:"88.200 kHz",onClick:g[25]||(g[25]=b=>f.value=88200)}),h(w,{title:"48.000 kHz",onClick:g[26]||(g[26]=b=>f.value=48e3)}),h(w,{title:"44.100 kHz",onClick:g[27]||(g[27]=b=>f.value=44100)}),h(w,{title:"32.000 kHz",onClick:g[28]||(g[28]=b=>f.value=32e3)}),h(w,{title:"22.050 Hz",onClick:g[29]||(g[29]=b=>f.value=22050)})]),_:1},8,["modelValue","rule"]),h(q,null,{default:y(()=>[h(X,{class:"mt-3"}),h(C,{cols:"4"},{default:y(()=>[h(V,{modelValue:fe.value,"onUpdate:modelValue":g[31]||(g[31]=b=>fe.value=b),label:"音の再生","hide-details":"",onClick:Mn,density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),h(se,{modelValue:ge.value,"onUpdate:modelValue":g[32]||(g[32]=b=>ge.value=b),label:"ボリューム",variant:"underlined",density:"compact",unit:"dB",min:-80,max:30,"fraction-digits":2,rule:[A(I).required,A(I).value],cols:"4","hide-details":""},null,8,["modelValue","rule"]),h(q,null,{default:y(()=>[h(X,{class:"mb-3"}),h(C,{cols:"6"},{default:y(()=>[h(S,{label:"インパルス長",density:"compact",variant:"underlined",modelValue:d.value,"onUpdate:modelValue":g[33]||(g[33]=b=>d.value=b),items:[256,512,1024,2048,4096,8192,16384,32768],"hide-details":""},null,8,["modelValue"])]),_:1}),h(C,{cols:"6"},{default:y(()=>[h(S,{label:"インパルス応答のグラフ長",density:"compact",variant:"underlined",modelValue:m.value,"onUpdate:modelValue":g[34]||(g[34]=b=>m.value=b),items:Array.from({length:Math.log2(d.value)-2},(b,Sn)=>8<<Sn),"hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),h(se,{modelValue:i.value,"onUpdate:modelValue":g[35]||(g[35]=b=>i.value=b),label:"周波数応答の最小振幅",variant:"underlined",density:"compact",unit:"dB",max:0,min:-150,step:10,rule:[A(I).required,A(I).value],cols:"4","hide-details":""},null,8,["modelValue","rule"])]),_:1}),h(C,{cols:"12",md:"5",class:"text-center"},{default:y(()=>[h(q,null,{default:y(()=>[h(C,{cols:"12"},{default:y(()=>[p("object",{ref_key:"diagram",ref:n,class:"diagram color-responsive",type:"image/svg+xml",data:"/tools/filter/biquad.svg",onLoad:wn},null,544)]),_:1}),h(C,{cols:"12"},{default:y(()=>[p("div",Is,[h(Mt,{ref_key:"chart",ref:s,initializer:_n},null,512)])]),_:1}),h(C,{cols:"12"},{default:y(()=>[p("div",Ts,[h(Mt,{ref_key:"impulseChart",ref:a,initializer:xn},null,512)])]),_:1})]),_:1})]),_:1})]),_:1}),h(q,null,{default:y(()=>[h(X),h(C,{cols:"6"},{default:y(()=>[Ds,h(P,{tag:"p",class:"mb-3"},{default:y(()=>[x(" H(z) = \\displaystyle\\frac{b_0 + b_1 z^{-1} + b_2 z^{-2}}{a_0 + a_1 z^{-1} + a_2 z^{-2}} ")]),_:1}),p("table",Os,[p("tbody",null,[p("tr",null,[h(P,{tag:"td"},{default:y(()=>[x("b_0 =")]),_:1}),p("td",qs,R(D.value[0].toFixed(9)),1)]),p("tr",null,[h(P,{tag:"td"},{default:y(()=>[x("b_1 =")]),_:1}),p("td",zs,R(D.value[1].toFixed(9)),1)]),p("tr",null,[h(P,{tag:"td"},{default:y(()=>[x("b_2 =")]),_:1}),p("td",js,R(D.value[2].toFixed(9)),1)]),p("tr",null,[h(P,{tag:"td"},{default:y(()=>[x("a_0 =")]),_:1}),p("td",Fs,R(D.value[3].toFixed(9)),1)]),p("tr",null,[h(P,{tag:"td"},{default:y(()=>[x("a_1 =")]),_:1}),p("td",Es,R(D.value[4].toFixed(9)),1)]),p("tr",null,[h(P,{tag:"td"},{default:y(()=>[x("a_2 =")]),_:1}),p("td",Bs,R(D.value[5].toFixed(9)),1)])])])]),_:1}),h(C,{cols:"6"},{default:y(()=>[Ls,h(P,{tag:"p",class:"mb-3"},{default:y(()=>[x(" H(z) = \\displaystyle\\frac{b_0 + b_1 z^{-1} + b_2 z^{-2}}{1 + a_1 z^{-1} + a_2 z^{-2}} ")]),_:1}),p("table",Vs,[p("tbody",null,[p("tr",null,[h(P,{tag:"td"},{default:y(()=>[x("b_0 =")]),_:1}),p("td",Ws,R(O.value[0].toFixed(9)),1)]),p("tr",null,[h(P,{tag:"td"},{default:y(()=>[x("b_1 =")]),_:1}),p("td",Ns,R(O.value[1].toFixed(9)),1)]),p("tr",null,[h(P,{tag:"td"},{default:y(()=>[x("b_2 =")]),_:1}),p("td",Hs,R(O.value[2].toFixed(9)),1)]),p("tr",null,[h(P,{tag:"td"},{default:y(()=>[x("a_1 =")]),_:1}),p("td",Ys,R(O.value[3].toFixed(9)),1)]),p("tr",null,[h(P,{tag:"td"},{default:y(()=>[x("a_2 =")]),_:1}),p("td",Xs,R(O.value[4].toFixed(9)),1)])])])]),_:1})]),_:1}),h(q,null,{default:y(()=>[h(X),h(C,{cols:"12"},{default:y(()=>[$s,h(q,null,{default:y(()=>[h(C,{cols:"4"},{default:y(()=>[h(S,{label:"インパルス長",density:"compact",variant:"underlined",modelValue:T.value,"onUpdate:modelValue":g[36]||(g[36]=b=>T.value=b),items:A($t)(16,25).map(b=>2**b),"hide-details":"",disabled:r.value,loading:r.value},null,8,["modelValue","items","disabled","loading"])]),_:1}),h(C,{cols:"auto"},{default:y(()=>[h(oe,{variant:"outlined",onClick:kn,disabled:r.value||T.value===_.value,loading:r.value},{default:y(()=>[x("再計算")]),_:1},8,["disabled","loading"])]),_:1}),h(C,{cols:"12"},{default:y(()=>[x(" 計算時のインパルス長 "),h(P,null,{default:y(()=>[x("N = ")]),_:1}),x(" "+R(_.value)+"（周波数分解能 ",1),h(P,null,{default:y(()=>[x("\\frac{f_c}{N} = ")]),_:1}),x(" "+R((f.value/_.value).toFixed(3))+" [Hz]） ",1)]),_:1})]),_:1})]),_:1}),h(C,{cols:"6"},{default:y(()=>[Qs,p("table",Us,[p("tbody",null,[p("tr",null,[h(P,{tag:"td"},{default:y(()=>[x("f_c =")]),_:1}),p("td",null,R(l.value.toFixed(3))+" [Hz]",1)]),p("tr",null,[h(P,{tag:"td"},{default:y(()=>[x("A_{f_c} =")]),_:1}),p("td",null,R(Number.isNaN(z.value)?"---":z.value.toFixed(3))+" [dB]",1)])])])]),_:1}),h(C,{cols:"6"},{default:y(()=>[Gs,p("table",Js,[p("tbody",null,[p("tr",null,[h(P,{tag:"td"},{default:y(()=>[x("\\max A =")]),_:1}),p("td",null,R(F.value.toFixed(3))+" [dB]",1)]),p("tr",null,[h(P,{tag:"td"},{default:y(()=>[x("f_{\\max A} =")]),_:1}),p("td",null,R(Ye.value.toFixed(3))+" [Hz]",1)]),p("tr",null,[h(P,{tag:"td",class:"mb-2"},{default:y(()=>[x("\\min A =")]),_:1}),p("td",null,R(K.value.toFixed(3))+" [dB]",1)]),p("tr",null,[h(P,{tag:"td"},{default:y(()=>[x("f_{\\min A} =")]),_:1}),p("td",null,R(Xe.value.toFixed(3))+" [Hz]",1)])])])]),_:1}),h(C,{cols:"6"},{default:y(()=>[Ks,h(P,null,{default:y(()=>[x("\\displaystyle\\sum^{N-1}_{n=0} y[n] =")]),_:1}),x(" "+R($e.value.toFixed(6)),1)]),_:1})]),_:1})]),_:1})}}}),ni=(t,e)=>{const n=t.__vccOpts||t;for(const[o,s]of e)n[o]=s;return n},oi=ni(ti,[["__scopeId","data-v-89d057c2"]]);Fn("#app",oi);
