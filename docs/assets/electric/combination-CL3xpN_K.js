var Ua=Object.defineProperty;var Za=(e,t,n)=>t in e?Ua(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ee=(e,t,n)=>Za(e,typeof t!="symbol"?t+"":t,n);import{p as xn,d as _e,t as xe,r as se,h as ae,i as et,j as ei,o as te,k as ce,l as lt,u as V,n as gt,m as ti,w as ye,q as Ka,s as Ct,e as H,b as J,v as Wt,x as Qe,y as Tt,z as qa,A as ni,B as Qa,f as Me,C as Te,D as ze,F as Re,E as vt,G as Ae,H as oi,I as Ja,c as $e,J as xo,K as el,L as tl,M as pe,N as ri,P as ln,a as me,Q as we,R as xt,S as nl,T as ol,U as rl,V as it,W as So,Y as ii,Z as ai,$ as il,a0 as al,X as Ne,a1 as ll,a2 as sl,_ as ul,g as cl}from"../tools-AppBase.vue_vue_type_script_setup_true_lang-D3a-CPUg.js";import{_ as Kt}from"../tools-SIValueInput.vue_vue_type_script_setup_true_lang-B6rsi961.js";import{g as dl}from"../tools-_commonjsHelpers-Cpj98o6Y.js";import{_ as fl}from"../tools-_plugin-vue_export-helper-DlAUqK2U.js";const Fo={E1:[100],E3:[100,220,470],E6:[100,150,220,330,470,680],E12:[100,120,150,180,220,270,330,390,470,560,680,820],E24:[100,110,120,130,150,160,180,200,220,240,270,300,330,360,390,430,470,510,560,620,680,750,820,910],E48:[100,105,110,115,121,127,133,140,147,154,162,169,178,187,196,205,215,226,237,249,261,274,287,301,316,332,348,365,383,402,422,442,464,487,511,536,562,590,619,649,681,715,750,787,825,866,909,953],E96:[100,102,105,107,110,113,115,118,121,124,127,130,133,137,140,143,147,150,154,158,162,165,169,174,178,182,187,191,196,200,205,210,215,221,226,232,237,243,249,261,267,274,280,287,294,301,309,316,324,332,340,348,357,365,374,383,392,402,412,422,432,442,453,464,475,487,499,511,523,536,549,562,576,590,604,619,634,649,681,698,715,732,750,768,787,806,825,845,866,887,909,931,953,976],E192:[100,101,102,104,105,106,107,109,110,111,113,114,115,117,118,120,121,123,124,126,127,129,130,132,133,135,137,138,140,142,143,145,147,149,150,152,154,156,158,160,162,164,165,167,169,172,174,176,178,180,182,184,187,189,191,193,196,198,200,203,205,208,210,213,215,218,221,223,226,229,232,234,237,240,243,246,249,252,255,258,261,264,267,271,274,277,280,284,287,291,294,298,301,305,309,312,316,320,324,328,332,336,340,344,348,352,357,361,365,370,374,379,383,388,392,397,402,407,412,417,422,427,432,437,442,448,453,459,464,470,475,481,487,493,499,505,511,517,523,530,536,542,549,556,562,569,576,583,590,597,604,612,619,626,634,642,649,657,665,673,681,690,698,706,715,723,732,741,750,759,768,777,787,796,806,816,825,835,845,856,866,876,887,898,909,920,931,942,953,965,976,988]},$t=[{figure:null,name:"None",code:null,color:{hex:"#00000000",luster:!1},multiplier:null,tolerance:{percent:20,letter:"M"}},{figure:null,name:"Pink",code:"PK",color:{hex:"#ccceccff",luster:!1},multiplier:.001,tolerance:null},{figure:null,name:"Silver",code:"SR",color:{hex:"#ccceccff",luster:!0},multiplier:.01,tolerance:{percent:10,letter:"K"}},{figure:null,name:"Gold",code:"GD",color:{hex:"#cc9a34ff",luster:!0},multiplier:.1,tolerance:{percent:5,letter:"J"}},{figure:"0",name:"Black",code:"BK",color:{hex:"#0b0000ff",luster:!1},multiplier:1,tolerance:null},{figure:"1",name:"Brown",code:"BN",color:{hex:"#643234ff",luster:!1},multiplier:10,tolerance:{percent:1,letter:"F"}},{figure:"2",name:"Red",code:"RD",color:{hex:"#ff0000ff",luster:!1},multiplier:100,tolerance:{percent:2,letter:"G"}},{figure:"3",name:"Orange",code:"OG",color:{hex:"#fc6604ff",luster:!1},multiplier:1e3,tolerance:{percent:.05,letter:"W"}},{figure:"4",name:"Yellow",code:"YE",color:{hex:"#fcfe04ff",luster:!1},multiplier:1e4,tolerance:{percent:.02,letter:"P"}},{figure:"5",name:"Green",code:"GN",color:{hex:"#34ce34ff",luster:!1},multiplier:1e5,tolerance:{percent:.5,letter:"D"}},{figure:"6",name:"Blue",code:"BU",color:{hex:"#6466fcff",luster:!1},multiplier:1e6,tolerance:{percent:.25,letter:"C"}},{figure:"7",name:"Violet",code:"VT",color:{hex:"#cc66fcff",luster:!1},multiplier:1e7,tolerance:{percent:.1,letter:"B"}},{figure:"8",name:"Gray",code:"GY",color:{hex:"#949294ff",luster:!1},multiplier:1e8,tolerance:{percent:.01,letter:"L(A)"}},{figure:"9",name:"White",code:"WH",color:{hex:"#ffffffff",luster:!1},multiplier:1e9,tolerance:null}];function Go(e,t,n){const o=n==="4-band"?1:2,r=Math.floor(Math.log10(e))-o,i=Math.round(e/10**r);return[...(n==="4-band"?[Math.floor(i/10),i%10]:[Math.floor(i/100),i/10%10,i%10]).map(l=>$t[l+4]),$t.find(l=>l.multiplier===10**r)??$t[0],$t.find(l=>{var s;return((s=l.tolerance)==null?void 0:s.percent)===t})??$t[0]]}class Pe{constructor(t){Ee(this,"componentNodes");Ee(this,"nodes");this.componentNodes=structuredClone(t),this.nodes=Pe.generateSyntaxTree(t)}get numberOfTypes(){return this.componentNodes.filter(t=>typeof t=="object").map(t=>t.value).filter((t,n,o)=>o.indexOf(t)===n).length}equals(t){return Pe.equalsInternal(this.nodes,t.nodes)}toString(t=["T","G","M","k","","m","Î¼","n","p","f"],n=3){return Pe.toStringInternal(this.nodes,t,n)}calcValue(t){return t==="capacitor"?Pe.calcValueForCapacitorInternal(this.componentNodes):Pe.calcValueInternal(this.componentNodes)}static calcValue(t,n){return n==="capacitor"?Pe.calcValueForCapacitorInternal(t):Pe.calcValueInternal(t)}static equalsInternal(t,n){if(t.type!==n.type||t.children.length!==n.children.length)return!1;const o=[...t.children].sort(Pe.compareNodes),r=[...n.children].sort(Pe.compareNodes);return o.every((i,a)=>Pe.deepCompare(i,r[a]))}static compareNodes(t,n){return t.type==="term"&&n.type==="term"?t.children-n.children:t.type==="term"?-1:n.type==="term"?1:t.type.localeCompare(n.type)}static deepCompare(t,n){return t.type!==n.type?!1:t.type==="term"&&n.type==="term"?t.children===n.children:t.type!=="term"&&n.type!=="term"?Pe.equalsInternal(t,n):!1}static generateSyntaxTree(t){const n=[];for(let o=t.length-1;o>=0;o--){const r=t[o],i=[];if(r==="+"){const a=n.pop(),l=n.pop();a.type==="series"?i.push(...a.children):i.push(a),l.type==="series"?i.push(...l.children):i.push(l),n.push({type:"series",children:i})}else if(r==="|"){const a=n.pop(),l=n.pop();a.type==="parallel"?i.push(...a.children):i.push(a),l.type==="parallel"?i.push(...l.children):i.push(l),n.push({type:"parallel",children:i})}else n.push({type:"term",children:r.value})}if(n[0].type!=="term")return n[0];throw new Error("invalid nodes")}static toStringInternal(t,n,o){return t.children.map(r=>r.type==="term"?xn.fit(r.children,n).toSimpleString(o):`(${Pe.toStringInternal(r,n,o)})`).join(t.type==="series"?" + ":" | ")}static calcValueInternal(t){const n=[];for(let o=t.length-1;o>=0;o--){const r=t[o];if(r==="+"){const i=n.pop(),a=n.pop();n.push(i+a)}else if(r==="|"){const i=n.pop(),a=n.pop();n.push(i*a/(i+a))}else n.push(r.value)}return n[0]}static calcValueForCapacitorInternal(t){const n=[];for(let o=t.length-1;o>=0;o--){const r=t[o];if(r==="+"){const i=n.pop(),a=n.pop();n.push(i*a/(i+a))}else if(r==="|"){const i=n.pop(),a=n.pop();n.push(i+a)}else n.push(r.value)}return n[0]}}function Sn(e){return ri()?(ln(e),!0):!1}function Ze(e){return typeof e=="function"?e():V(e)}const hl=typeof window<"u"&&typeof document<"u",pl=e=>typeof e<"u",gl=Object.prototype.toString,vl=e=>gl.call(e)==="[object Object]",ml=()=>{};function yl(e,t){function n(...o){return new Promise((r,i)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(i)})}return n}const li=e=>e();function wl(e=li){const t=se(!0);function n(){t.value=!1}function o(){t.value=!0}const r=(...i)=>{t.value&&e(...i)};return{isActive:nl(t),pause:n,resume:o,eventFilter:r}}function Ho(e,t=!1,n="Timeout"){return new Promise((o,r)=>{setTimeout(t?()=>r(n):o,e)})}function _l(e,t,n={}){const{eventFilter:o=li,...r}=n;return ye(e,yl(o,t),r)}function Et(e,t,n={}){const{eventFilter:o,...r}=n,{eventFilter:i,pause:a,resume:l,isActive:s}=wl(o);return{stop:_l(e,t,{...r,eventFilter:i}),pause:a,resume:l,isActive:s}}function bl(e,t={}){if(!xo(e))return el(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=tl(()=>({get(){return e.value[o]},set(r){var i;if((i=Ze(t.replaceRef))!=null?i:!0)if(Array.isArray(e.value)){const l=[...e.value];l[o]=r,e.value=l}else{const l={...e.value,[o]:r};Object.setPrototypeOf(l,Object.getPrototypeOf(e.value)),e.value=l}else e.value[o]=r}}));return n}function ro(e,t=!1){function n(d,{flush:h="sync",deep:p=!1,timeout:b,throwOnTimeout:w}={}){let y=null;const g=[new Promise(S=>{y=ye(e,N=>{d(N)!==t&&(y==null||y(),S(N))},{flush:h,deep:p,immediate:!0})})];return b!=null&&g.push(Ho(b,w).then(()=>Ze(e)).finally(()=>y==null?void 0:y())),Promise.race(g)}function o(d,h){if(!xo(d))return n(N=>N===d,h);const{flush:p="sync",deep:b=!1,timeout:w,throwOnTimeout:y}=h??{};let m=null;const S=[new Promise(N=>{m=ye([e,d],([D,R])=>{t!==(D===R)&&(m==null||m(),N(D))},{flush:p,deep:b,immediate:!0})})];return w!=null&&S.push(Ho(w,y).then(()=>Ze(e)).finally(()=>(m==null||m(),Ze(e)))),Promise.race(S)}function r(d){return n(h=>!!h,d)}function i(d){return o(null,d)}function a(d){return o(void 0,d)}function l(d){return n(Number.isNaN,d)}function s(d,h){return n(p=>{const b=Array.from(p);return b.includes(d)||b.includes(Ze(d))},h)}function u(d){return c(1,d)}function c(d=1,h){let p=-1;return n(()=>(p+=1,p>=d),h)}return Array.isArray(Ze(e))?{toMatch:n,toContains:s,changed:u,changedTimes:c,get not(){return ro(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:r,toBeNull:i,toBeNaN:l,toBeUndefined:a,changed:u,changedTimes:c,get not(){return ro(e,!t)}}}function io(e){return ro(e)}function El(e){var t;const n=Ze(e);return(t=n==null?void 0:n.$el)!=null?t:n}const si=hl?window:void 0;function ui(...e){let t,n,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,r]=e,t=si):[t,n,o,r]=e,!t)return ml;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const i=[],a=()=>{i.forEach(c=>c()),i.length=0},l=(c,d,h,p)=>(c.addEventListener(d,h,p),()=>c.removeEventListener(d,h,p)),s=ye(()=>[El(t),Ze(r)],([c,d])=>{if(a(),!c)return;const h=vl(d)?{...d}:d;i.push(...n.flatMap(p=>o.map(b=>l(c,p,b,h))))},{immediate:!0,flush:"post"}),u=()=>{s(),a()};return Sn(u),u}function xl(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Yo(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:r=si,eventName:i="keydown",passive:a=!1,dedupe:l=!1}=o,s=xl(t);return ui(r,i,c=>{c.repeat&&Ze(l)||s(c)&&n(c)},a)}function Sl(e){return JSON.parse(JSON.stringify(e))}function zn(e,t,n,o={}){var r,i,a;const{clone:l=!1,passive:s=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:h}=o,p=Wt(),b=n||(p==null?void 0:p.emit)||((r=p==null?void 0:p.$emit)==null?void 0:r.bind(p))||((a=(i=p==null?void 0:p.proxy)==null?void 0:i.$emit)==null?void 0:a.bind(p==null?void 0:p.proxy));let w=u;t||(t="modelValue"),w=w||`update:${t.toString()}`;const y=S=>l?typeof l=="function"?l(S):Sl(S):S,m=()=>pl(e[t])?y(e[t]):d,g=S=>{h?h(S)&&b(w,S):b(w,S)};if(s){const S=m(),N=se(S);let D=!1;return ye(()=>e[t],R=>{D||(D=!0,N.value=y(R),Qe(()=>D=!1))}),ye(N,R=>{!D&&(R!==e[t]||c)&&g(R)},{deep:c}),N}else return ae({get(){return m()},set(S){g(S)}})}var Nl={value:()=>{}};function Nn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new sn(n)}function sn(e){this._=e}function kl(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}sn.prototype=Nn.prototype={constructor:sn,on:function(e,t){var n=this._,o=kl(e+"",n),r,i=-1,a=o.length;if(arguments.length<2){for(;++i<a;)if((r=(e=o[i]).type)&&(r=Cl(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(r=(e=o[i]).type)n[r]=Xo(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Xo(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new sn(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function Cl(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function Xo(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=Nl,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var ao="http://www.w3.org/1999/xhtml";const jo={svg:"http://www.w3.org/2000/svg",xhtml:ao,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),jo.hasOwnProperty(t)?{space:jo[t],local:e}:e}function Il(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ao&&t.documentElement.namespaceURI===ao?t.createElement(e):t.createElementNS(n,e)}}function Ml(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ci(e){var t=kn(e);return(t.local?Ml:Il)(t)}function Ol(){}function No(e){return e==null?Ol:function(){return this.querySelector(e)}}function Tl(e){typeof e!="function"&&(e=No(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,l=o[r]=new Array(a),s,u,c=0;c<a;++c)(s=i[c])&&(u=e.call(s,s.__data__,c,i))&&("__data__"in s&&(u.__data__=s.__data__),l[c]=u);return new Ve(o,this._parents)}function $l(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Pl(){return[]}function di(e){return e==null?Pl:function(){return this.querySelectorAll(e)}}function Dl(e){return function(){return $l(e.apply(this,arguments))}}function Al(e){typeof e=="function"?e=Dl(e):e=di(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a=t[i],l=a.length,s,u=0;u<l;++u)(s=a[u])&&(o.push(e.call(s,s.__data__,u,a)),r.push(s));return new Ve(o,r)}function fi(e){return function(){return this.matches(e)}}function hi(e){return function(t){return t.matches(e)}}var Vl=Array.prototype.find;function Rl(e){return function(){return Vl.call(this.children,e)}}function zl(){return this.firstElementChild}function Bl(e){return this.select(e==null?zl:Rl(typeof e=="function"?e:hi(e)))}var Ll=Array.prototype.filter;function Fl(){return Array.from(this.children)}function Gl(e){return function(){return Ll.call(this.children,e)}}function Hl(e){return this.selectAll(e==null?Fl:Gl(typeof e=="function"?e:hi(e)))}function Yl(e){typeof e!="function"&&(e=fi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,l=o[r]=[],s,u=0;u<a;++u)(s=i[u])&&e.call(s,s.__data__,u,i)&&l.push(s);return new Ve(o,this._parents)}function pi(e){return new Array(e.length)}function Xl(){return new Ve(this._enter||this._groups.map(pi),this._parents)}function fn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}fn.prototype={constructor:fn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function jl(e){return function(){return e}}function Wl(e,t,n,o,r,i){for(var a=0,l,s=t.length,u=i.length;a<u;++a)(l=t[a])?(l.__data__=i[a],o[a]=l):n[a]=new fn(e,i[a]);for(;a<s;++a)(l=t[a])&&(r[a]=l)}function Ul(e,t,n,o,r,i,a){var l,s,u=new Map,c=t.length,d=i.length,h=new Array(c),p;for(l=0;l<c;++l)(s=t[l])&&(h[l]=p=a.call(s,s.__data__,l,t)+"",u.has(p)?r[l]=s:u.set(p,s));for(l=0;l<d;++l)p=a.call(e,i[l],l,i)+"",(s=u.get(p))?(o[l]=s,s.__data__=i[l],u.delete(p)):n[l]=new fn(e,i[l]);for(l=0;l<c;++l)(s=t[l])&&u.get(h[l])===s&&(r[l]=s)}function Zl(e){return e.__data__}function Kl(e,t){if(!arguments.length)return Array.from(this,Zl);var n=t?Ul:Wl,o=this._parents,r=this._groups;typeof e!="function"&&(e=jl(e));for(var i=r.length,a=new Array(i),l=new Array(i),s=new Array(i),u=0;u<i;++u){var c=o[u],d=r[u],h=d.length,p=ql(e.call(c,c&&c.__data__,u,o)),b=p.length,w=l[u]=new Array(b),y=a[u]=new Array(b),m=s[u]=new Array(h);n(c,d,w,y,m,p,t);for(var g=0,S=0,N,D;g<b;++g)if(N=w[g]){for(g>=S&&(S=g+1);!(D=y[S])&&++S<b;);N._next=D||null}}return a=new Ve(a,o),a._enter=l,a._exit=s,a}function ql(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ql(){return new Ve(this._exit||this._groups.map(pi),this._parents)}function Jl(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function es(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),l=new Array(r),s=0;s<a;++s)for(var u=n[s],c=o[s],d=u.length,h=l[s]=new Array(d),p,b=0;b<d;++b)(p=u[b]||c[b])&&(h[b]=p);for(;s<r;++s)l[s]=n[s];return new Ve(l,this._parents)}function ts(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],a;--r>=0;)(a=o[r])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function ns(e){e||(e=os);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a=n[i],l=a.length,s=r[i]=new Array(l),u,c=0;c<l;++c)(u=a[c])&&(s[c]=u);s.sort(t)}return new Ve(r,this._parents).order()}function os(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function rs(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function is(){return Array.from(this)}function as(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null}function ls(){let e=0;for(const t of this)++e;return e}function ss(){return!this.node()}function us(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,a=r.length,l;i<a;++i)(l=r[i])&&e.call(l,l.__data__,i,r);return this}function cs(e){return function(){this.removeAttribute(e)}}function ds(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fs(e,t){return function(){this.setAttribute(e,t)}}function hs(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ps(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function gs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function vs(e,t){var n=kn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?ds:cs:typeof t=="function"?n.local?gs:ps:n.local?hs:fs)(n,t))}function gi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ms(e){return function(){this.style.removeProperty(e)}}function ys(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ws(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function _s(e,t,n){return arguments.length>1?this.each((t==null?ms:typeof t=="function"?ws:ys)(e,t,n??"")):It(this.node(),e)}function It(e,t){return e.style.getPropertyValue(t)||gi(e).getComputedStyle(e,null).getPropertyValue(t)}function bs(e){return function(){delete this[e]}}function Es(e,t){return function(){this[e]=t}}function xs(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ss(e,t){return arguments.length>1?this.each((t==null?bs:typeof t=="function"?xs:Es)(e,t)):this.node()[e]}function vi(e){return e.trim().split(/^|\s+/)}function ko(e){return e.classList||new mi(e)}function mi(e){this._node=e,this._names=vi(e.getAttribute("class")||"")}mi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function yi(e,t){for(var n=ko(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function wi(e,t){for(var n=ko(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function Ns(e){return function(){yi(this,e)}}function ks(e){return function(){wi(this,e)}}function Cs(e,t){return function(){(t.apply(this,arguments)?yi:wi)(this,e)}}function Is(e,t){var n=vi(e+"");if(arguments.length<2){for(var o=ko(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Cs:t?Ns:ks)(n,t))}function Ms(){this.textContent=""}function Os(e){return function(){this.textContent=e}}function Ts(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function $s(e){return arguments.length?this.each(e==null?Ms:(typeof e=="function"?Ts:Os)(e)):this.node().textContent}function Ps(){this.innerHTML=""}function Ds(e){return function(){this.innerHTML=e}}function As(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Vs(e){return arguments.length?this.each(e==null?Ps:(typeof e=="function"?As:Ds)(e)):this.node().innerHTML}function Rs(){this.nextSibling&&this.parentNode.appendChild(this)}function zs(){return this.each(Rs)}function Bs(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ls(){return this.each(Bs)}function Fs(e){var t=typeof e=="function"?e:ci(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Gs(){return null}function Hs(e,t){var n=typeof e=="function"?e:ci(e),o=t==null?Gs:typeof t=="function"?t:No(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Ys(){var e=this.parentNode;e&&e.removeChild(this)}function Xs(){return this.each(Ys)}function js(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ws(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Us(e){return this.select(e?Ws:js)}function Zs(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ks(e){return function(t){e.call(this,t,this.__data__)}}function qs(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Qs(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function Js(e,t,n){return function(){var o=this.__on,r,i=Ks(t);if(o){for(var a=0,l=o.length;a<l;++a)if((r=o[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function eu(e,t,n){var o=qs(e+""),r,i=o.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,c;s<u;++s)for(r=0,c=l[s];r<i;++r)if((a=o[r]).type===c.type&&a.name===c.name)return c.value}return}for(l=t?Js:Qs,r=0;r<i;++r)this.each(l(o[r],t,n));return this}function _i(e,t,n){var o=gi(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function tu(e,t){return function(){return _i(this,e,t)}}function nu(e,t){return function(){return _i(this,e,t.apply(this,arguments))}}function ou(e,t){return this.each((typeof t=="function"?nu:tu)(e,t))}function*ru(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,a;r<i;++r)(a=o[r])&&(yield a)}var bi=[null];function Ve(e,t){this._groups=e,this._parents=t}function Ut(){return new Ve([[document.documentElement]],bi)}function iu(){return this}Ve.prototype=Ut.prototype={constructor:Ve,select:Tl,selectAll:Al,selectChild:Bl,selectChildren:Hl,filter:Yl,data:Kl,enter:Xl,exit:Ql,join:Jl,merge:es,selection:iu,order:ts,sort:ns,call:rs,nodes:is,node:as,size:ls,empty:ss,each:us,attr:vs,style:_s,property:Ss,classed:Is,text:$s,html:Vs,raise:zs,lower:Ls,append:Fs,insert:Hs,remove:Xs,clone:Us,datum:Zs,on:eu,dispatch:ou,[Symbol.iterator]:ru};function Le(e){return typeof e=="string"?new Ve([[document.querySelector(e)]],[document.documentElement]):new Ve([[e]],bi)}function au(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ye(e,t){if(e=au(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const lu={passive:!1},Ft={capture:!0,passive:!1};function Bn(e){e.stopImmediatePropagation()}function St(e){e.preventDefault(),e.stopImmediatePropagation()}function Ei(e){var t=e.document.documentElement,n=Le(e).on("dragstart.drag",St,Ft);"onselectstart"in t?n.on("selectstart.drag",St,Ft):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function xi(e,t){var n=e.document.documentElement,o=Le(e).on("dragstart.drag",null);t&&(o.on("click.drag",St,Ft),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const qt=e=>()=>e;function lo(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:a,y:l,dx:s,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}lo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function su(e){return!e.ctrlKey&&!e.button}function uu(){return this.parentNode}function cu(e,t){return t??{x:e.x,y:e.y}}function du(){return navigator.maxTouchPoints||"ontouchstart"in this}function fu(){var e=su,t=uu,n=cu,o=du,r={},i=Nn("start","drag","end"),a=0,l,s,u,c,d=0;function h(N){N.on("mousedown.drag",p).filter(o).on("touchstart.drag",y).on("touchmove.drag",m,lu).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(N,D){if(!(c||!e.call(this,N,D))){var R=S(this,t.call(this,N,D),N,D,"mouse");R&&(Le(N.view).on("mousemove.drag",b,Ft).on("mouseup.drag",w,Ft),Ei(N.view),Bn(N),u=!1,l=N.clientX,s=N.clientY,R("start",N))}}function b(N){if(St(N),!u){var D=N.clientX-l,R=N.clientY-s;u=D*D+R*R>d}r.mouse("drag",N)}function w(N){Le(N.view).on("mousemove.drag mouseup.drag",null),xi(N.view,u),St(N),r.mouse("end",N)}function y(N,D){if(e.call(this,N,D)){var R=N.changedTouches,T=t.call(this,N,D),X=R.length,U,A;for(U=0;U<X;++U)(A=S(this,T,N,D,R[U].identifier,R[U]))&&(Bn(N),A("start",N,R[U]))}}function m(N){var D=N.changedTouches,R=D.length,T,X;for(T=0;T<R;++T)(X=r[D[T].identifier])&&(St(N),X("drag",N,D[T]))}function g(N){var D=N.changedTouches,R=D.length,T,X;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),T=0;T<R;++T)(X=r[D[T].identifier])&&(Bn(N),X("end",N,D[T]))}function S(N,D,R,T,X,U){var A=i.copy(),E=Ye(U||R,D),ee,ne,_;if((_=n.call(N,new lo("beforestart",{sourceEvent:R,target:h,identifier:X,active:a,x:E[0],y:E[1],dx:0,dy:0,dispatch:A}),T))!=null)return ee=_.x-E[0]||0,ne=_.y-E[1]||0,function M(C,I,O){var $=E,B;switch(C){case"start":r[X]=M,B=a++;break;case"end":delete r[X],--a;case"drag":E=Ye(O||I,D),B=a;break}A.call(C,N,new lo(C,{sourceEvent:I,subject:_,target:h,identifier:X,active:B,x:E[0]+ee,y:E[1]+ne,dx:E[0]-$[0],dy:E[1]-$[1],dispatch:A}),T)}}return h.filter=function(N){return arguments.length?(e=typeof N=="function"?N:qt(!!N),h):e},h.container=function(N){return arguments.length?(t=typeof N=="function"?N:qt(N),h):t},h.subject=function(N){return arguments.length?(n=typeof N=="function"?N:qt(N),h):n},h.touchable=function(N){return arguments.length?(o=typeof N=="function"?N:qt(!!N),h):o},h.on=function(){var N=i.on.apply(i,arguments);return N===i?h:N},h.clickDistance=function(N){return arguments.length?(d=(N=+N)*N,h):Math.sqrt(d)},h}function Co(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Si(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Zt(){}var Gt=.7,hn=1/Gt,Nt="\\s*([+-]?\\d+)\\s*",Ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",je="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hu=/^#([0-9a-f]{3,8})$/,pu=new RegExp(`^rgb\\(${Nt},${Nt},${Nt}\\)$`),gu=new RegExp(`^rgb\\(${je},${je},${je}\\)$`),vu=new RegExp(`^rgba\\(${Nt},${Nt},${Nt},${Ht}\\)$`),mu=new RegExp(`^rgba\\(${je},${je},${je},${Ht}\\)$`),yu=new RegExp(`^hsl\\(${Ht},${je},${je}\\)$`),wu=new RegExp(`^hsla\\(${Ht},${je},${je},${Ht}\\)$`),Wo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Co(Zt,Yt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Uo,formatHex:Uo,formatHex8:_u,formatHsl:bu,formatRgb:Zo,toString:Zo});function Uo(){return this.rgb().formatHex()}function _u(){return this.rgb().formatHex8()}function bu(){return Ni(this).formatHsl()}function Zo(){return this.rgb().formatRgb()}function Yt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=hu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ko(t):n===3?new De(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Qt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Qt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=pu.exec(e))?new De(t[1],t[2],t[3],1):(t=gu.exec(e))?new De(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vu.exec(e))?Qt(t[1],t[2],t[3],t[4]):(t=mu.exec(e))?Qt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=yu.exec(e))?Jo(t[1],t[2]/100,t[3]/100,1):(t=wu.exec(e))?Jo(t[1],t[2]/100,t[3]/100,t[4]):Wo.hasOwnProperty(e)?Ko(Wo[e]):e==="transparent"?new De(NaN,NaN,NaN,0):null}function Ko(e){return new De(e>>16&255,e>>8&255,e&255,1)}function Qt(e,t,n,o){return o<=0&&(e=t=n=NaN),new De(e,t,n,o)}function Eu(e){return e instanceof Zt||(e=Yt(e)),e?(e=e.rgb(),new De(e.r,e.g,e.b,e.opacity)):new De}function so(e,t,n,o){return arguments.length===1?Eu(e):new De(e,t,n,o??1)}function De(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Co(De,so,Si(Zt,{brighter(e){return e=e==null?hn:Math.pow(hn,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Gt:Math.pow(Gt,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new De(ht(this.r),ht(this.g),ht(this.b),pn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qo,formatHex:qo,formatHex8:xu,formatRgb:Qo,toString:Qo}));function qo(){return`#${ft(this.r)}${ft(this.g)}${ft(this.b)}`}function xu(){return`#${ft(this.r)}${ft(this.g)}${ft(this.b)}${ft((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qo(){const e=pn(this.opacity);return`${e===1?"rgb(":"rgba("}${ht(this.r)}, ${ht(this.g)}, ${ht(this.b)}${e===1?")":`, ${e})`}`}function pn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ht(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ft(e){return e=ht(e),(e<16?"0":"")+e.toString(16)}function Jo(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Fe(e,t,n,o)}function Ni(e){if(e instanceof Fe)return new Fe(e.h,e.s,e.l,e.opacity);if(e instanceof Zt||(e=Yt(e)),!e)return new Fe;if(e instanceof Fe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,l=i-r,s=(i+r)/2;return l?(t===i?a=(n-o)/l+(n<o)*6:n===i?a=(o-t)/l+2:a=(t-n)/l+4,l/=s<.5?i+r:2-i-r,a*=60):l=s>0&&s<1?0:a,new Fe(a,l,s,e.opacity)}function Su(e,t,n,o){return arguments.length===1?Ni(e):new Fe(e,t,n,o??1)}function Fe(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Co(Fe,Su,Si(Zt,{brighter(e){return e=e==null?hn:Math.pow(hn,e),new Fe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Gt:Math.pow(Gt,e),new Fe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new De(Ln(e>=240?e-240:e+120,r,o),Ln(e,r,o),Ln(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new Fe(er(this.h),Jt(this.s),Jt(this.l),pn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=pn(this.opacity);return`${e===1?"hsl(":"hsla("}${er(this.h)}, ${Jt(this.s)*100}%, ${Jt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function er(e){return e=(e||0)%360,e<0?e+360:e}function Jt(e){return Math.max(0,Math.min(1,e||0))}function Ln(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ki=e=>()=>e;function Nu(e,t){return function(n){return e+n*t}}function ku(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Cu(e){return(e=+e)==1?Ci:function(t,n){return n-t?ku(t,n,e):ki(isNaN(t)?n:t)}}function Ci(e,t){var n=t-e;return n?Nu(e,n):ki(isNaN(e)?t:e)}const tr=function e(t){var n=Cu(t);function o(r,i){var a=n((r=so(r)).r,(i=so(i)).r),l=n(r.g,i.g),s=n(r.b,i.b),u=Ci(r.opacity,i.opacity);return function(c){return r.r=a(c),r.g=l(c),r.b=s(c),r.opacity=u(c),r+""}}return o.gamma=e,o}(1);function ot(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var uo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fn=new RegExp(uo.source,"g");function Iu(e){return function(){return e}}function Mu(e){return function(t){return e(t)+""}}function Ou(e,t){var n=uo.lastIndex=Fn.lastIndex=0,o,r,i,a=-1,l=[],s=[];for(e=e+"",t=t+"";(o=uo.exec(e))&&(r=Fn.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),l[a]?l[a]+=i:l[++a]=i),(o=o[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,s.push({i:a,x:ot(o,r)})),n=Fn.lastIndex;return n<t.length&&(i=t.slice(n),l[a]?l[a]+=i:l[++a]=i),l.length<2?s[0]?Mu(s[0].x):Iu(t):(t=s.length,function(u){for(var c=0,d;c<t;++c)l[(d=s[c]).i]=d.x(u);return l.join("")})}var nr=180/Math.PI,co={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ii(e,t,n,o,r,i){var a,l,s;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,s/=l),e*o<t*n&&(e=-e,t=-t,s=-s,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*nr,skewX:Math.atan(s)*nr,scaleX:a,scaleY:l}}var en;function Tu(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?co:Ii(t.a,t.b,t.c,t.d,t.e,t.f)}function $u(e){return e==null||(en||(en=document.createElementNS("http://www.w3.org/2000/svg","g")),en.setAttribute("transform",e),!(e=en.transform.baseVal.consolidate()))?co:(e=e.matrix,Ii(e.a,e.b,e.c,e.d,e.e,e.f))}function Mi(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,c,d,h,p,b){if(u!==d||c!==h){var w=p.push("translate(",null,t,null,n);b.push({i:w-4,x:ot(u,d)},{i:w-2,x:ot(c,h)})}else(d||h)&&p.push("translate("+d+t+h+n)}function a(u,c,d,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:d.push(r(d)+"rotate(",null,o)-2,x:ot(u,c)})):c&&d.push(r(d)+"rotate("+c+o)}function l(u,c,d,h){u!==c?h.push({i:d.push(r(d)+"skewX(",null,o)-2,x:ot(u,c)}):c&&d.push(r(d)+"skewX("+c+o)}function s(u,c,d,h,p,b){if(u!==d||c!==h){var w=p.push(r(p)+"scale(",null,",",null,")");b.push({i:w-4,x:ot(u,d)},{i:w-2,x:ot(c,h)})}else(d!==1||h!==1)&&p.push(r(p)+"scale("+d+","+h+")")}return function(u,c){var d=[],h=[];return u=e(u),c=e(c),i(u.translateX,u.translateY,c.translateX,c.translateY,d,h),a(u.rotate,c.rotate,d,h),l(u.skewX,c.skewX,d,h),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,h),u=c=null,function(p){for(var b=-1,w=h.length,y;++b<w;)d[(y=h[b]).i]=y.x(p);return d.join("")}}}var Pu=Mi(Tu,"px, ","px)","deg)"),Du=Mi($u,", ",")",")"),Au=1e-12;function or(e){return((e=Math.exp(e))+1/e)/2}function Vu(e){return((e=Math.exp(e))-1/e)/2}function Ru(e){return((e=Math.exp(2*e))-1)/(e+1)}const zu=function e(t,n,o){function r(i,a){var l=i[0],s=i[1],u=i[2],c=a[0],d=a[1],h=a[2],p=c-l,b=d-s,w=p*p+b*b,y,m;if(w<Au)m=Math.log(h/u)/t,y=function(T){return[l+T*p,s+T*b,u*Math.exp(t*T*m)]};else{var g=Math.sqrt(w),S=(h*h-u*u+o*w)/(2*u*n*g),N=(h*h-u*u-o*w)/(2*h*n*g),D=Math.log(Math.sqrt(S*S+1)-S),R=Math.log(Math.sqrt(N*N+1)-N);m=(R-D)/t,y=function(T){var X=T*m,U=or(D),A=u/(n*g)*(U*Ru(t*X+D)-Vu(D));return[l+A*p,s+A*b,u*U/or(t*X+D)]}}return y.duration=m*1e3*t/Math.SQRT2,y}return r.rho=function(i){var a=Math.max(.001,+i),l=a*a,s=l*l;return e(a,l,s)},r}(Math.SQRT2,2,4);var Mt=0,At=0,Pt=0,Oi=1e3,gn,Vt,vn=0,mt=0,Cn=0,Xt=typeof performance=="object"&&performance.now?performance:Date,Ti=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Io(){return mt||(Ti(Bu),mt=Xt.now()+Cn)}function Bu(){mt=0}function mn(){this._call=this._time=this._next=null}mn.prototype=$i.prototype={constructor:mn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Io():+n)+(t==null?0:+t),!this._next&&Vt!==this&&(Vt?Vt._next=this:gn=this,Vt=this),this._call=e,this._time=n,fo()},stop:function(){this._call&&(this._call=null,this._time=1/0,fo())}};function $i(e,t,n){var o=new mn;return o.restart(e,t,n),o}function Lu(){Io(),++Mt;for(var e=gn,t;e;)(t=mt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Mt}function rr(){mt=(vn=Xt.now())+Cn,Mt=At=0;try{Lu()}finally{Mt=0,Gu(),mt=0}}function Fu(){var e=Xt.now(),t=e-vn;t>Oi&&(Cn-=t,vn=e)}function Gu(){for(var e,t=gn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:gn=n);Vt=e,fo(o)}function fo(e){if(!Mt){At&&(At=clearTimeout(At));var t=e-mt;t>24?(e<1/0&&(At=setTimeout(rr,e-Xt.now()-Cn)),Pt&&(Pt=clearInterval(Pt))):(Pt||(vn=Xt.now(),Pt=setInterval(Fu,Oi)),Mt=1,Ti(rr))}}function ir(e,t,n){var o=new mn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Hu=Nn("start","end","cancel","interrupt"),Yu=[],Pi=0,ar=1,ho=2,un=3,lr=4,po=5,cn=6;function In(e,t,n,o,r,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Xu(e,n,{name:t,index:o,group:r,on:Hu,tween:Yu,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Pi})}function Mo(e,t){var n=Ge(e,t);if(n.state>Pi)throw new Error("too late; already scheduled");return n}function We(e,t){var n=Ge(e,t);if(n.state>un)throw new Error("too late; already running");return n}function Ge(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Xu(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=$i(i,0,n.time);function i(u){n.state=ar,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,d,h,p;if(n.state!==ar)return s();for(c in o)if(p=o[c],p.name===n.name){if(p.state===un)return ir(a);p.state===lr?(p.state=cn,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[c]):+c<t&&(p.state=cn,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete o[c])}if(ir(function(){n.state===un&&(n.state=lr,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=ho,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ho){for(n.state=un,r=new Array(h=n.tween.length),c=0,d=-1;c<h;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=p);r.length=d+1}}function l(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=po,1),d=-1,h=r.length;++d<h;)r[d].call(e,c);n.state===po&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=cn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function dn(e,t){var n=e.__transition,o,r,i=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((o=n[a]).name!==t){i=!1;continue}r=o.state>ho&&o.state<po,o.state=cn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[a]}i&&delete e.__transition}}function ju(e){return this.each(function(){dn(this,e)})}function Wu(e,t){var n,o;return function(){var r=We(this,e),i=r.tween;if(i!==n){o=n=i;for(var a=0,l=o.length;a<l;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}r.tween=o}}function Uu(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=We(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var l={name:t,value:n},s=0,u=r.length;s<u;++s)if(r[s].name===t){r[s]=l;break}s===u&&r.push(l)}i.tween=r}}function Zu(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Ge(this.node(),n).tween,r=0,i=o.length,a;r<i;++r)if((a=o[r]).name===e)return a.value;return null}return this.each((t==null?Wu:Uu)(n,e,t))}function Oo(e,t,n){var o=e._id;return e.each(function(){var r=We(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Ge(r,o).value[t]}}function Di(e,t){var n;return(typeof t=="number"?ot:t instanceof Yt?tr:(n=Yt(t))?(t=n,tr):Ou)(e,t)}function Ku(e){return function(){this.removeAttribute(e)}}function qu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Qu(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttribute(e);return a===r?null:a===o?i:i=t(o=a,n)}}function Ju(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===o?i:i=t(o=a,n)}}function ec(e,t,n){var o,r,i;return function(){var a,l=n(this),s;return l==null?void this.removeAttribute(e):(a=this.getAttribute(e),s=l+"",a===s?null:a===o&&s===r?i:(r=s,i=t(o=a,l)))}}function tc(e,t,n){var o,r,i;return function(){var a,l=n(this),s;return l==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),s=l+"",a===s?null:a===o&&s===r?i:(r=s,i=t(o=a,l)))}}function nc(e,t){var n=kn(e),o=n==="transform"?Du:Di;return this.attrTween(e,typeof t=="function"?(n.local?tc:ec)(n,o,Oo(this,"attr."+e,t)):t==null?(n.local?qu:Ku)(n):(n.local?Ju:Qu)(n,o,t))}function oc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function rc(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ic(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&rc(e,i)),n}return r._value=t,r}function ac(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&oc(e,i)),n}return r._value=t,r}function lc(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=kn(e);return this.tween(n,(o.local?ic:ac)(o,t))}function sc(e,t){return function(){Mo(this,e).delay=+t.apply(this,arguments)}}function uc(e,t){return t=+t,function(){Mo(this,e).delay=t}}function cc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sc:uc)(t,e)):Ge(this.node(),t).delay}function dc(e,t){return function(){We(this,e).duration=+t.apply(this,arguments)}}function fc(e,t){return t=+t,function(){We(this,e).duration=t}}function hc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?dc:fc)(t,e)):Ge(this.node(),t).duration}function pc(e,t){if(typeof t!="function")throw new Error;return function(){We(this,e).ease=t}}function gc(e){var t=this._id;return arguments.length?this.each(pc(t,e)):Ge(this.node(),t).ease}function vc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;We(this,e).ease=n}}function mc(e){if(typeof e!="function")throw new Error;return this.each(vc(this._id,e))}function yc(e){typeof e!="function"&&(e=fi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,l=o[r]=[],s,u=0;u<a;++u)(s=i[u])&&e.call(s,s.__data__,u,i)&&l.push(s);return new Je(o,this._parents,this._name,this._id)}function wc(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),l=0;l<i;++l)for(var s=t[l],u=n[l],c=s.length,d=a[l]=new Array(c),h,p=0;p<c;++p)(h=s[p]||u[p])&&(d[p]=h);for(;l<o;++l)a[l]=t[l];return new Je(a,this._parents,this._name,this._id)}function _c(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function bc(e,t,n){var o,r,i=_c(t)?Mo:We;return function(){var a=i(this,e),l=a.on;l!==o&&(r=(o=l).copy()).on(t,n),a.on=r}}function Ec(e,t){var n=this._id;return arguments.length<2?Ge(this.node(),n).on.on(e):this.each(bc(n,e,t))}function xc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Sc(){return this.on("end.remove",xc(this._id))}function Nc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=No(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var l=o[a],s=l.length,u=i[a]=new Array(s),c,d,h=0;h<s;++h)(c=l[h])&&(d=e.call(c,c.__data__,h,l))&&("__data__"in c&&(d.__data__=c.__data__),u[h]=d,In(u[h],t,n,h,u,Ge(c,n)));return new Je(i,this._parents,t,n)}function kc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=di(e));for(var o=this._groups,r=o.length,i=[],a=[],l=0;l<r;++l)for(var s=o[l],u=s.length,c,d=0;d<u;++d)if(c=s[d]){for(var h=e.call(c,c.__data__,d,s),p,b=Ge(c,n),w=0,y=h.length;w<y;++w)(p=h[w])&&In(p,t,n,w,h,b);i.push(h),a.push(c)}return new Je(i,a,t,n)}var Cc=Ut.prototype.constructor;function Ic(){return new Cc(this._groups,this._parents)}function Mc(e,t){var n,o,r;return function(){var i=It(this,e),a=(this.style.removeProperty(e),It(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}function Ai(e){return function(){this.style.removeProperty(e)}}function Oc(e,t,n){var o,r=n+"",i;return function(){var a=It(this,e);return a===r?null:a===o?i:i=t(o=a,n)}}function Tc(e,t,n){var o,r,i;return function(){var a=It(this,e),l=n(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(e),It(this,e))),a===s?null:a===o&&s===r?i:(r=s,i=t(o=a,l))}}function $c(e,t){var n,o,r,i="style."+t,a="end."+i,l;return function(){var s=We(this,e),u=s.on,c=s.value[i]==null?l||(l=Ai(t)):void 0;(u!==n||r!==c)&&(o=(n=u).copy()).on(a,r=c),s.on=o}}function Pc(e,t,n){var o=(e+="")=="transform"?Pu:Di;return t==null?this.styleTween(e,Mc(e,o)).on("end.style."+e,Ai(e)):typeof t=="function"?this.styleTween(e,Tc(e,o,Oo(this,"style."+e,t))).each($c(this._id,e)):this.styleTween(e,Oc(e,o,t),n).on("end.style."+e,null)}function Dc(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Ac(e,t,n){var o,r;function i(){var a=t.apply(this,arguments);return a!==r&&(o=(r=a)&&Dc(e,a,n)),o}return i._value=t,i}function Vc(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Ac(e,t,n??""))}function Rc(e){return function(){this.textContent=e}}function zc(e){return function(){var t=e(this);this.textContent=t??""}}function Bc(e){return this.tween("text",typeof e=="function"?zc(Oo(this,"text",e)):Rc(e==null?"":e+""))}function Lc(e){return function(t){this.textContent=e.call(this,t)}}function Fc(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Lc(r)),t}return o._value=e,o}function Gc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Fc(e))}function Hc(){for(var e=this._name,t=this._id,n=Vi(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],l=a.length,s,u=0;u<l;++u)if(s=a[u]){var c=Ge(s,t);In(s,e,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Je(o,this._parents,e,n)}function Yc(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,a){var l={value:a},s={value:function(){--r===0&&i()}};n.each(function(){var u=We(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(s)),u.on=t}),r===0&&i()})}var Xc=0;function Je(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Vi(){return++Xc}var Ue=Ut.prototype;Je.prototype={constructor:Je,select:Nc,selectAll:kc,selectChild:Ue.selectChild,selectChildren:Ue.selectChildren,filter:yc,merge:wc,selection:Ic,transition:Hc,call:Ue.call,nodes:Ue.nodes,node:Ue.node,size:Ue.size,empty:Ue.empty,each:Ue.each,on:Ec,attr:nc,attrTween:lc,style:Pc,styleTween:Vc,text:Bc,textTween:Gc,remove:Sc,tween:Zu,delay:cc,duration:hc,ease:gc,easeVarying:mc,end:Yc,[Symbol.iterator]:Ue[Symbol.iterator]};function jc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Wc={time:null,delay:0,duration:250,ease:jc};function Uc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Zc(e){var t,n;e instanceof Je?(t=e._id,e=e._name):(t=Vi(),(n=Wc).time=Io(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],l=a.length,s,u=0;u<l;++u)(s=a[u])&&In(s,e,t,u,a,n||Uc(s,t));return new Je(o,this._parents,e,t)}Ut.prototype.interrupt=ju;Ut.prototype.transition=Zc;const tn=e=>()=>e;function Kc(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function qe(e,t,n){this.k=e,this.x=t,this.y=n}qe.prototype={constructor:qe,scale:function(e){return e===1?this:new qe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new qe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ot=new qe(1,0,0);qe.prototype;function Gn(e){e.stopImmediatePropagation()}function Dt(e){e.preventDefault(),e.stopImmediatePropagation()}function qc(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Qc(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function sr(){return this.__zoom||Ot}function Jc(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ed(){return navigator.maxTouchPoints||"ontouchstart"in this}function td(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function nd(){var e=qc,t=Qc,n=td,o=Jc,r=ed,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,s=zu,u=Nn("start","zoom","end"),c,d,h,p=500,b=150,w=0,y=10;function m(_){_.property("__zoom",sr).on("wheel.zoom",X,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",A).filter(r).on("touchstart.zoom",E).on("touchmove.zoom",ee).on("touchend.zoom touchcancel.zoom",ne).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(_,M,C,I){var O=_.selection?_.selection():_;O.property("__zoom",sr),_!==O?D(_,M,C,I):O.interrupt().each(function(){R(this,arguments).event(I).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},m.scaleBy=function(_,M,C,I){m.scaleTo(_,function(){var O=this.__zoom.k,$=typeof M=="function"?M.apply(this,arguments):M;return O*$},C,I)},m.scaleTo=function(_,M,C,I){m.transform(_,function(){var O=t.apply(this,arguments),$=this.__zoom,B=C==null?N(O):typeof C=="function"?C.apply(this,arguments):C,G=$.invert(B),oe=typeof M=="function"?M.apply(this,arguments):M;return n(S(g($,oe),B,G),O,a)},C,I)},m.translateBy=function(_,M,C,I){m.transform(_,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof C=="function"?C.apply(this,arguments):C),t.apply(this,arguments),a)},null,I)},m.translateTo=function(_,M,C,I,O){m.transform(_,function(){var $=t.apply(this,arguments),B=this.__zoom,G=I==null?N($):typeof I=="function"?I.apply(this,arguments):I;return n(Ot.translate(G[0],G[1]).scale(B.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof C=="function"?-C.apply(this,arguments):-C),$,a)},I,O)};function g(_,M){return M=Math.max(i[0],Math.min(i[1],M)),M===_.k?_:new qe(M,_.x,_.y)}function S(_,M,C){var I=M[0]-C[0]*_.k,O=M[1]-C[1]*_.k;return I===_.x&&O===_.y?_:new qe(_.k,I,O)}function N(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function D(_,M,C,I){_.on("start.zoom",function(){R(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(I).end()}).tween("zoom",function(){var O=this,$=arguments,B=R(O,$).event(I),G=t.apply(O,$),oe=C==null?N(G):typeof C=="function"?C.apply(O,$):C,j=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),L=O.__zoom,K=typeof M=="function"?M.apply(O,$):M,fe=s(L.invert(oe).concat(j/L.k),K.invert(oe).concat(j/K.k));return function(ue){if(ue===1)ue=K;else{var he=fe(ue),re=j/he[2];ue=new qe(re,oe[0]-he[0]*re,oe[1]-he[1]*re)}B.zoom(null,ue)}})}function R(_,M,C){return!C&&_.__zooming||new T(_,M)}function T(_,M){this.that=_,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,M),this.taps=0}T.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,M){return this.mouse&&_!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var M=Le(this.that).datum();u.call(_,this.that,new Kc(_,{sourceEvent:this.sourceEvent,target:m,type:_,transform:this.that.__zoom,dispatch:u}),M)}};function X(_,...M){if(!e.apply(this,arguments))return;var C=R(this,M).event(_),I=this.__zoom,O=Math.max(i[0],Math.min(i[1],I.k*Math.pow(2,o.apply(this,arguments)))),$=Ye(_);if(C.wheel)(C.mouse[0][0]!==$[0]||C.mouse[0][1]!==$[1])&&(C.mouse[1]=I.invert(C.mouse[0]=$)),clearTimeout(C.wheel);else{if(I.k===O)return;C.mouse=[$,I.invert($)],dn(this),C.start()}Dt(_),C.wheel=setTimeout(B,b),C.zoom("mouse",n(S(g(I,O),C.mouse[0],C.mouse[1]),C.extent,a));function B(){C.wheel=null,C.end()}}function U(_,...M){if(h||!e.apply(this,arguments))return;var C=_.currentTarget,I=R(this,M,!0).event(_),O=Le(_.view).on("mousemove.zoom",oe,!0).on("mouseup.zoom",j,!0),$=Ye(_,C),B=_.clientX,G=_.clientY;Ei(_.view),Gn(_),I.mouse=[$,this.__zoom.invert($)],dn(this),I.start();function oe(L){if(Dt(L),!I.moved){var K=L.clientX-B,fe=L.clientY-G;I.moved=K*K+fe*fe>w}I.event(L).zoom("mouse",n(S(I.that.__zoom,I.mouse[0]=Ye(L,C),I.mouse[1]),I.extent,a))}function j(L){O.on("mousemove.zoom mouseup.zoom",null),xi(L.view,I.moved),Dt(L),I.event(L).end()}}function A(_,...M){if(e.apply(this,arguments)){var C=this.__zoom,I=Ye(_.changedTouches?_.changedTouches[0]:_,this),O=C.invert(I),$=C.k*(_.shiftKey?.5:2),B=n(S(g(C,$),I,O),t.apply(this,M),a);Dt(_),l>0?Le(this).transition().duration(l).call(D,B,I,_):Le(this).call(m.transform,B,I,_)}}function E(_,...M){if(e.apply(this,arguments)){var C=_.touches,I=C.length,O=R(this,M,_.changedTouches.length===I).event(_),$,B,G,oe;for(Gn(_),B=0;B<I;++B)G=C[B],oe=Ye(G,this),oe=[oe,this.__zoom.invert(oe),G.identifier],O.touch0?!O.touch1&&O.touch0[2]!==oe[2]&&(O.touch1=oe,O.taps=0):(O.touch0=oe,$=!0,O.taps=1+!!c);c&&(c=clearTimeout(c)),$&&(O.taps<2&&(d=oe[0],c=setTimeout(function(){c=null},p)),dn(this),O.start())}}function ee(_,...M){if(this.__zooming){var C=R(this,M).event(_),I=_.changedTouches,O=I.length,$,B,G,oe;for(Dt(_),$=0;$<O;++$)B=I[$],G=Ye(B,this),C.touch0&&C.touch0[2]===B.identifier?C.touch0[0]=G:C.touch1&&C.touch1[2]===B.identifier&&(C.touch1[0]=G);if(B=C.that.__zoom,C.touch1){var j=C.touch0[0],L=C.touch0[1],K=C.touch1[0],fe=C.touch1[1],ue=(ue=K[0]-j[0])*ue+(ue=K[1]-j[1])*ue,he=(he=fe[0]-L[0])*he+(he=fe[1]-L[1])*he;B=g(B,Math.sqrt(ue/he)),G=[(j[0]+K[0])/2,(j[1]+K[1])/2],oe=[(L[0]+fe[0])/2,(L[1]+fe[1])/2]}else if(C.touch0)G=C.touch0[0],oe=C.touch0[1];else return;C.zoom("touch",n(S(B,G,oe),C.extent,a))}}function ne(_,...M){if(this.__zooming){var C=R(this,M).event(_),I=_.changedTouches,O=I.length,$,B;for(Gn(_),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),$=0;$<O;++$)B=I[$],C.touch0&&C.touch0[2]===B.identifier?delete C.touch0:C.touch1&&C.touch1[2]===B.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(B=Ye(B,this),Math.hypot(d[0]-B[0],d[1]-B[1])<y)){var G=Le(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return m.wheelDelta=function(_){return arguments.length?(o=typeof _=="function"?_:tn(+_),m):o},m.filter=function(_){return arguments.length?(e=typeof _=="function"?_:tn(!!_),m):e},m.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:tn(!!_),m):r},m.extent=function(_){return arguments.length?(t=typeof _=="function"?_:tn([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),m):t},m.scaleExtent=function(_){return arguments.length?(i[0]=+_[0],i[1]=+_[1],m):[i[0],i[1]]},m.translateExtent=function(_){return arguments.length?(a[0][0]=+_[0][0],a[1][0]=+_[1][0],a[0][1]=+_[0][1],a[1][1]=+_[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},m.constrain=function(_){return arguments.length?(n=_,m):n},m.duration=function(_){return arguments.length?(l=+_,m):l},m.interpolate=function(_){return arguments.length?(s=_,m):s},m.on=function(){var _=u.on.apply(u,arguments);return _===u?m:_},m.clickDistance=function(_){return arguments.length?(w=(_=+_)*_,m):Math.sqrt(w)},m.tapDistance=function(_){return arguments.length?(y=+_,m):y},m}var Y=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(Y||{}),To=(e=>(e.Partial="partial",e.Full="full",e))(To||{}),ct=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(ct||{}),yt=(e=>(e.Strict="strict",e.Loose="loose",e))(yt||{}),go=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(go||{}),Bt=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Bt||{});function vo(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,r=typeof(o==null?void 0:o.hasAttribute)=="function"?o.hasAttribute("contenteditable"):!1,i=typeof(o==null?void 0:o.closest)=="function"?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(o==null?void 0:o.nodeName)||r||!!i}function od(e){return e.ctrlKey||e.metaKey||e.shiftKey}function ur(e,t,n,o){const r=t.split("+").map(i=>i.trim().toLowerCase());return r.length===1?e.toLowerCase()===t.toLowerCase():(o?n.delete(e.toLowerCase()):n.add(e.toLowerCase()),r.every((i,a)=>n.has(i)&&Array.from(n.values())[a]===r[a]))}function rd(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=id(n.code,e);return Array.isArray(e)?e.some(r=>ur(n[o],r,t,n.type==="keyup")):ur(n[o],e,t,n.type==="keyup")}}function id(e,t){return typeof t=="string"?e===t?"code":"key":t.includes(e)?"code":"key"}function Lt(e,t){const n=xe(()=>pe(t==null?void 0:t.actInsideInputWithModifier)??!1),o=xe(()=>pe(t==null?void 0:t.target)??window),r=se(pe(e)===!0);let i=!1;const a=new Set;let l=u(pe(e));ye(()=>pe(e),(c,d)=>{typeof d=="boolean"&&typeof c!="boolean"&&s(),l=u(c)},{immediate:!0}),et(()=>{ui(window,["blur","contextmenu"],s)}),Yo((...c)=>l(...c),c=>{i=od(c),!((!i||i&&!n.value)&&vo(c))&&(c.preventDefault(),r.value=!0)},{eventName:"keydown",target:o}),Yo((...c)=>l(...c),c=>{if(r.value){if((!i||i&&!n.value)&&vo(c))return;s()}},{eventName:"keyup",target:o});function s(){i=!1,a.clear(),r.value=!1}function u(c){return c===null?(s(),()=>!1):typeof c=="boolean"?(s(),r.value=c,()=>!1):Array.isArray(c)||typeof c=="string"?rd(c,a):c}return r}const Ri="vue-flow__node-desc",zi="vue-flow__edge-desc",ad="vue-flow__aria-live",Bi=["Enter"," ","Escape"],kt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function mo(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function yo(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Mn(e){return{width:e.offsetWidth,height:e.offsetHeight}}function wt(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Li(e,t){return{x:wt(e.x,t[0][0],t[1][0]),y:wt(e.y,t[0][1],t[1][1])}}function cr(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function st(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function pt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!st(e)}function Rt(e){return pt(e)&&"computedPosition"in e}function nn(e){return!Number.isNaN(e)&&Number.isFinite(e)}function ld(e){return nn(e.width)&&nn(e.height)&&nn(e.x)&&nn(e.y)}function sd(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:xt({width:0,height:0}),computedPosition:xt({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:ke(e.data)?e.data:{},events:xt(ke(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function Fi(e,t,n){var o,r;const i={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(r=e.targetHandle)==null?void 0:r.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:ke(e.data)?e.data:{},events:xt(ke(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??i,e,{id:e.id.toString()})}function Gi(e,t,n,o){const r=typeof e=="string"?e:e.id,i=new Set,a=o==="source"?"target":"source";for(const l of n)l[a]===r&&i.add(l[o]);return t.filter(l=>i.has(l.id))}function ud(...e){if(e.length===3){const[i,a,l]=e;return Gi(i,a,l,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>st(i)&&i.source===o).map(i=>n.find(a=>pt(a)&&a.id===i.target))}function cd(...e){if(e.length===3){const[i,a,l]=e;return Gi(i,a,l,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>st(i)&&i.target===o).map(i=>n.find(a=>pt(a)&&a.id===i.source))}function Hi({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function dd(e,t){return t.some(n=>st(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Yi({x:e,y:t},{x:n,y:o,zoom:r}){return{x:e*r+n,y:t*r+o}}function yn({x:e,y:t},{x:n,y:o,zoom:r},i=!1,[a,l]=[1,1]){const s={x:(e-n)/r,y:(t-o)/r};return i?{x:a*Math.round(s.x/a),y:l*Math.round(s.y/l)}:s}function fd(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Xi({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function hd({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function ji(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=fd(t,Xi({...o.computedPosition,...o.dimensions}))}return hd(t)}function Wi(e,t,n={x:0,y:0,zoom:1},o=!1,r=!1){const i={...yn(t,n),width:t.width/n.zoom,height:t.height/n.zoom},a=[];for(const l of e){const{dimensions:s,selectable:u=!0,hidden:c=!1}=l,d=s.width??l.width??null,h=s.height??l.height??null;if(r&&!u||c)continue;const p=yo(i,mo(l)),b=d===null||h===null,w=o&&p>0,y=(d??0)*(h??0);(b||w||p>=y||l.dragging)&&a.push(l)}return a}function Ui(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function dr(e,t,n,o,r,i=.1,a={x:0,y:0}){const l=t/(e.width*(1+i)),s=n/(e.height*(1+i)),u=Math.min(l,s),c=wt(u,o,r),d=e.x+e.width/2,h=e.y+e.height/2,p=t/2-d*c+(a.x??0),b=n/2-h*c+(a.y??0);return{x:p,y:b,zoom:c}}function pd(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function Zi(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:Zi(n,t):!1}function jt(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function fr(e,t,n){return e<t?wt(Math.abs(e-t),1,t)/t:e>n?-wt(Math.abs(e-n),1,t)/t:0}function Ki(e,t,n=15,o=40){const r=fr(e.x,o,t.width-o)*n,i=fr(e.y,o,t.height-o)*n;return[r,i]}function Hn(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let r={};if(typeof t.style=="function"?r={...t.style(t)}:t.style&&(r={...t.style}),r.width=r.width??`${t.dimensions.width}px`,r.height=r.height??`${t.dimensions.height}px`,n>0)if(typeof r.width=="string"){const i=Number(r.width.replace("px",""));r.width=`${i+n}px`}else r.width+=n;if(o>0)if(typeof r.height=="string"){const i=Number(r.height.replace("px",""));r.height=`${i+o}px`}else r.height+=o;if(e.position.x<0){const i=Math.abs(e.position.x);if(t.position.x=t.position.x-i,typeof r.width=="string"){const a=Number(r.width.replace("px",""));r.width=`${a+i}px`}else r.width+=i;e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);if(t.position.y=t.position.y-i,typeof r.height=="string"){const a=Number(r.height.replace("px",""));r.height=`${a+i}px`}else r.height+=i;e.position.y=0}t.dimensions.width=Number(r.width.toString().replace("px","")),t.dimensions.height=Number(r.height.toString().replace("px","")),typeof t.style=="function"?t.style=i=>{const a=t.style;return{...a(i),...r}}:t.style={...t.style,...r}}}}function hr(e,t){var n,o;const r=e.filter(a=>a.type==="add"||a.type==="remove");for(const a of r)if(a.type==="add")t.findIndex(s=>s.id===a.item.id)===-1&&t.push(a.item);else if(a.type==="remove"){const l=t.findIndex(s=>s.id===a.id);l!==-1&&t.splice(l,1)}const i=t.map(a=>a.id);for(const a of t)for(const l of e)if(l.id===a.id)switch(l.type){case"select":a.selected=l.selected;break;case"position":if(Rt(a)&&(typeof l.position<"u"&&(a.position=l.position),typeof l.dragging<"u"&&(a.dragging=l.dragging),a.expandParent&&a.parentNode)){const s=t[i.indexOf(a.parentNode)];s&&Rt(s)&&Hn(a,s)}break;case"dimensions":if(Rt(a)&&(typeof l.dimensions<"u"&&(a.dimensions=l.dimensions),typeof l.updateStyle<"u"&&(a.style={...a.style||{},width:`${(n=l.dimensions)==null?void 0:n.width}px`,height:`${(o=l.dimensions)==null?void 0:o.height}px`}),typeof l.resizing<"u"&&(a.resizing=l.resizing),a.expandParent&&a.parentNode)){const s=t[i.indexOf(a.parentNode)];s&&Rt(s)&&(!!s.dimensions.width&&!!s.dimensions.height?Hn(a,s):Qe(()=>{Hn(a,s)}))}break}return t}function nt(e,t){return{id:e,type:"select",selected:t}}function pr(e){return{item:e,type:"add"}}function gr(e){return{id:e,type:"remove"}}function vr(e,t,n,o,r){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:r||null,type:"remove"}}function rt(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const a=t.has(r);!(i.selected===void 0&&!a)&&i.selected!==a&&(n&&(i.selected=a),o.push(nt(i.id,a)))}return o}function F(e){const t=new Set;let n=!1;const o=()=>t.size>0;e&&(n=!0,t.add(e));const r=l=>{t.delete(l)};return{on:l=>{e&&n&&t.delete(e),t.add(l);const s=()=>{r(l),e&&n&&t.add(e)};return Sn(s),{off:s}},off:r,trigger:l=>Promise.all(Array.from(t).map(s=>s(l))),hasListeners:o,fns:t}}function mr(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function gd(e,t,n,o,r){var i,a;const l=[];for(const s of e)(s.selected||s.id===r)&&(!s.parentNode||!Zi(s,o))&&(s.draggable||t&&typeof s.draggable>"u")&&l.push(xt({id:s.id,position:s.position||{x:0,y:0},distance:{x:n.x-((i=s.computedPosition)==null?void 0:i.x)||0,y:n.y-((a=s.computedPosition)==null?void 0:a.y)||0},from:s.computedPosition,extent:s.extent,parentNode:s.parentNode,dimensions:s.dimensions,expandParent:s.expandParent}));return l}function Yn({id:e,dragItems:t,findNode:n}){const o=[];for(const r of t){const i=n(r.id);i&&o.push(i)}return[e?o.find(r=>r.id===e):o[0],o]}function qi(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function vd(e,t,n){const[o,r,i,a]=typeof e!="string"?qi(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+a,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-r,n.computedPosition.y+n.dimensions.height-i]]:!1}function md(e,t,n,o){let r=e.extent||n;if((r==="parent"||!Array.isArray(r)&&(r==null?void 0:r.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const i=vd(r,e,o);i&&(r=i)}else t(new Oe(Ce.NODE_EXTENT_INVALID,e.id)),r=n;else if(Array.isArray(r)){const i=(o==null?void 0:o.computedPosition.x)||0,a=(o==null?void 0:o.computedPosition.y)||0;r=[[r[0][0]+i,r[0][1]+a],[r[1][0]+i,r[1][1]+a]]}else if(r!=="parent"&&(r!=null&&r.range)&&Array.isArray(r.range)){const[i,a,l,s]=qi(r.padding),u=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;r=[[r.range[0][0]+u+s,r.range[0][1]+c+i],[r.range[1][0]+u-a,r.range[1][1]+c-l]]}return r==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:r}function yd({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function $o(e,t,n,o,r){const i=yd(e.dimensions,md(e,n,o,r)),a=Li(t,i);return{position:{x:a.x-((r==null?void 0:r.computedPosition.x)||0),y:a.y-((r==null?void 0:r.computedPosition.y)||0)},computedPosition:a}}function wn(e,t,n=Y.Left){const o=((t==null?void 0:t.x)??0)+e.computedPosition.x,r=((t==null?void 0:t.y)??0)+e.computedPosition.y,{width:i,height:a}=t??bd(e);switch((t==null?void 0:t.position)??n){case Y.Top:return{x:o+i/2,y:r};case Y.Right:return{x:o+i,y:r+a/2};case Y.Bottom:return{x:o+i/2,y:r+a};case Y.Left:return{x:o,y:r+a/2}}}function yr(e=[],t){return e.length&&(t?e.find(n=>n.id===t):e[0])||null}function wd({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:a,height:l,viewport:s}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Xi({x:(0-s.x)/s.zoom,y:(0-s.y)/s.zoom,width:a/s.zoom,height:l/s.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),h=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*h)>0}function _d(e,t,n=!1){const o=typeof e.zIndex=="number";let r=o?e.zIndex:0;const i=t(e.source),a=t(e.target);return!i||!a?0:(n&&(r=o?e.zIndex:Math.max(i.computedPosition.z||0,a.computedPosition.z||0)),r)}var Ce=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Ce||{});const wr={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class Oe extends Error{constructor(t,...n){var o;super((o=wr[t])==null?void 0:o.call(wr,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function Po(e){return"clientX"in e}function at(e,t){var n,o;const r=Po(e),i=r?e.clientX:(n=e.touches)==null?void 0:n[0].clientX,a=r?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}}const _n=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function bd(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function Qi(){return{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}}function Xn(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function _r(e,t,n,o){const r=[];for(const i of t[n]||[])if(`${e.id}-${i.id}-${n}`!==o){const{x:a,y:l}=wn(e,i);r.push({id:i.id||null,type:n,nodeId:e.id,x:a,y:l})}return r}function Ed(e,t,n,o,r,i){const{x:a,y:l}=at(e),u=t.elementsFromPoint(a,l).find(b=>b.classList.contains("vue-flow__handle"));if(u){const b=u.getAttribute("data-nodeid");if(b){const w=Do(void 0,u),y=u.getAttribute("data-handleid"),m=i({nodeId:b,id:y,type:w});if(m){const g=r.find(S=>S.nodeId===b&&S.type===w&&S.id===y);return{handle:{id:y,type:w,nodeId:b,x:(g==null?void 0:g.x)||n.x,y:(g==null?void 0:g.y)||n.y},validHandleResult:m}}}}let c=[],d=Number.POSITIVE_INFINITY;for(const b of r){const w=Math.sqrt((b.x-n.x)**2+(b.y-n.y)**2);if(w<=o){const y=i(b);w<=d&&(w<d?c=[{handle:b,validHandleResult:y}]:w===d&&c.push({handle:b,validHandleResult:y}),d=w)}}if(!c.length)return{handle:null,validHandleResult:Qi()};if(c.length===1)return c[0];const h=c.some(({validHandleResult:b})=>b.isValid),p=c.some(({handle:b})=>b.type==="target");return c.find(({handle:b,validHandleResult:w})=>p?b.type==="target":h?w.isValid:!0)||c[0]}function br(e,t,n,o,r,i,a,l,s,u,c){const d=i==="target",h=l.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:p,y:b}=at(e),w=l.elementFromPoint(p,b),y=w!=null&&w.classList.contains("vue-flow__handle")?w:h,m=Qi();if(y){m.handleDomNode=y;const g=Do(void 0,y),S=y.getAttribute("data-nodeid"),N=y.getAttribute("data-handleid"),D=y.classList.contains("connectable"),R=y.classList.contains("connectableend"),T={source:d?S:o,sourceHandle:d?N:r,target:d?o:S,targetHandle:d?r:N};m.connection=T,D&&R&&(n===yt.Strict?d&&g==="source"||!d&&g==="target":S!==o||N!==r)&&(m.isValid=a(T,{edges:s,nodes:u,sourceNode:c(T.source),targetNode:c(T.target)}),m.endHandle={nodeId:S,handleId:N,type:g,position:m.isValid?y.getAttribute("data-handlepos"):null})}return m}function xd({nodes:e,nodeId:t,handleId:n,handleType:o}){const r=[];for(let i=0;i<e.length;i++){const a=e[i],{handleBounds:l}=a;let s=[],u=[];l&&(s=_r(a,l,"source",`${t}-${n}-${o}`),u=_r(a,l,"target",`${t}-${n}-${o}`)),r.push(...s,...u)}return r}function Do(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Sd(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const Nd=["production","prod"];function On(e,...t){Ji()&&console.warn(`[Vue Flow]: ${e}`,...t)}function Ji(){return!Nd.includes("production")}function Er(e,t,n,o){const r=t.querySelectorAll(`.vue-flow__handle${e}`);return Array.from(r).map(a=>{const l=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(l.left-n.left)/o,y:(l.top-n.top)/o,...Mn(a)}})}function wo(e,t,n,o,r,i=!1,a){r.value=!1,e.selected?(i||e.selected&&t)&&(o([e]),Qe(()=>{a.blur()})):n([e])}function ke(e){return typeof V(e)<"u"}function kd(e,t,n,o){if(!e||!e.source||!e.target)return n(new Oe(Ce.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let r;return st(e)?r=e:r={...e,id:Hi(e)},r=Fi(r,void 0,o),dd(r,t)?!1:r}function Cd(e,t,n,o,r,i){if(!t.source||!t.target)return i(new Oe(Ce.EDGE_INVALID,e.id)),!1;const a=o(e.id);if(!a)return i(new Oe(Ce.EDGE_NOT_FOUND,e.id)),!1;const{id:l,...s}=e,u={...s,id:r?Hi(t):l,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(a),1,u),u}function xr(e,t,n){const o={},r=[];for(let i=0;i<e.length;++i){const a=e[i];if(!pt(a)){n(new Oe(Ce.NODE_INVALID,a==null?void 0:a.id)||`[ID UNKNOWN|INDEX ${i}]`);continue}const l=sd(a,t(a.id),a.parentNode);a.parentNode&&(o[a.parentNode]=!0),r[i]=l}for(const i of r){const a=t(i.parentNode)||r.find(l=>l.id===i.parentNode);i.parentNode&&!a&&n(new Oe(Ce.NODE_MISSING_PARENT,i.id,i.parentNode)),(i.parentNode||o[i.id])&&(o[i.id]&&(i.isParent=!0),a&&(a.isParent=!0))}return r}function Sr(e,t){e.clear();for(const n of t){const{id:o,source:r,target:i,sourceHandle:a=null,targetHandle:l=null}=n,s=`${r}-source-${a}`,u=`${i}-target-${l}`,c=e.get(s)||new Map,d=e.get(u)||new Map,h=xt({edgeId:o,source:r,target:i,sourceHandle:a,targetHandle:l});e.set(s,c.set(`${i}-${l}`,h)),e.set(u,d.set(`${r}-${a}`,h))}}function Nr(e,t,n,o,r,i,a,l){const s=[];for(const u of e){const c=st(u)?u:kd(u,l,r,i);if(!c)continue;const d=n(c.source),h=n(c.target);if(!d||!h){r(new Oe(Ce.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){r(new Oe(Ce.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!h){r(new Oe(Ce.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:l,nodes:a,sourceNode:d,targetNode:h})){r(new Oe(Ce.EDGE_INVALID,c.id));continue}const p=o(c.id);s.push({...Fi(c,p,i),sourceNode:d,targetNode:h})}return s}const kr=Symbol("vueFlow"),ea=Symbol("nodeId"),ta=Symbol("nodeRef"),Id=Symbol("edgeId"),Md=Symbol("edgeRef"),Tn=Symbol("slots");function na(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:r,nodes:i,nodeExtent:a,nodeDragThreshold:l,viewport:s,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:d,panBy:h,findNode:p,multiSelectionActive:b,nodesSelectionActive:w,selectNodesOnDrag:y,removeSelectedElements:m,addSelectedNodes:g,updateNodePositions:S,emits:N}=Se(),{onStart:D,onDrag:R,onStop:T,onClick:X,el:U,disabled:A,id:E,selectable:ee,dragHandle:ne}=e,_=se(!1);let M=[],C,I=null,O={x:void 0,y:void 0},$={x:0,y:0},B=null,G=!1,oe=0,j=!1;const L=$d(),K=({x:Z,y:q})=>{O={x:Z,y:q};let z=!1;if(M=M.map(f=>{const v={x:Z-f.distance.x,y:q-f.distance.y};n.value&&(v.x=o.value[0]*Math.round(v.x/o.value[0]),v.y=o.value[1]*Math.round(v.y/o.value[1]));const{computedPosition:k}=$o(f,v,N.error,a.value,f.parentNode?p(f.parentNode):void 0);return z=z||f.position.x!==k.x||f.position.y!==k.y,f.position=k,f}),!!z&&(S(M,!0,!0),_.value=!0,B)){const[f,v]=Yn({id:E,dragItems:M,findNode:p});R({event:B,node:f,nodes:v})}},fe=()=>{if(!I)return;const[Z,q]=Ki($,I,c.value);if(Z!==0||q!==0){const z={x:(O.x??0)-Z/s.value.zoom,y:(O.y??0)-q/s.value.zoom};h({x:Z,y:q})&&K(z)}oe=requestAnimationFrame(fe)},ue=(Z,q)=>{G=!0;const z=p(E);!y.value&&!b.value&&z&&(z.selected||m()),z&&pe(ee)&&y.value&&wo(z,b.value,g,m,w,!1,q);const f=L(Z);if(O=f,M=gd(i.value,d.value,f,p,E),M.length){const[v,k]=Yn({id:E,dragItems:M,findNode:p});D({event:Z.sourceEvent,node:v,nodes:k})}},he=(Z,q)=>{var z;Z.sourceEvent.type==="touchmove"&&Z.sourceEvent.touches.length>1||(l.value===0&&ue(Z,q),O=L(Z),I=((z=t.value)==null?void 0:z.getBoundingClientRect())||null,$=at(Z.sourceEvent,I))},re=(Z,q)=>{const z=L(Z);if(!j&&G&&u.value&&(j=!0,fe()),!G){const f=z.xSnapped-(O.x??0),v=z.ySnapped-(O.y??0);Math.sqrt(f*f+v*v)>l.value&&ue(Z,q)}(O.x!==z.xSnapped||O.y!==z.ySnapped)&&M.length&&G&&(B=Z.sourceEvent,$=at(Z.sourceEvent,I),K(z))},le=Z=>{if(!G){const q=L(Z),z=q.xSnapped-(O.x??0),f=q.ySnapped-(O.y??0),v=Math.sqrt(z*z+f*f);v!==0&&v<=l.value&&(X==null||X(Z.sourceEvent));return}if(_.value=!1,j=!1,G=!1,cancelAnimationFrame(oe),M.length){S(M,!1,!1);const[q,z]=Yn({id:E,dragItems:M,findNode:p});T({event:Z.sourceEvent,node:q,nodes:z})}};return ye([()=>pe(A),U],([Z,q],z,f)=>{if(q){const v=Le(q);Z||(C=fu().on("start",k=>he(k,q)).on("drag",k=>re(k,q)).on("end",k=>le(k)).filter(k=>{const x=k.target,P=pe(ne);return!k.button&&(!r.value||!mr(x,`.${r.value}`,q)&&(!P||mr(x,P,q)))}),v.call(C)),f(()=>{v.on(".drag",null),C&&(C.on("start",null),C.on("drag",null),C.on("end",null))})}}),_}function Od(){return{doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),updateStart:F(),update:F(),updateEnd:F()}}function Td(e,t){const n=Od();return n.doubleClick.on(o=>{var r,i;t.edgeDoubleClick(o),(i=(r=e.events)==null?void 0:r.doubleClick)==null||i.call(r,o)}),n.click.on(o=>{var r,i;t.edgeClick(o),(i=(r=e.events)==null?void 0:r.click)==null||i.call(r,o)}),n.mouseEnter.on(o=>{var r,i;t.edgeMouseEnter(o),(i=(r=e.events)==null?void 0:r.mouseEnter)==null||i.call(r,o)}),n.mouseMove.on(o=>{var r,i;t.edgeMouseMove(o),(i=(r=e.events)==null?void 0:r.mouseMove)==null||i.call(r,o)}),n.mouseLeave.on(o=>{var r,i;t.edgeMouseLeave(o),(i=(r=e.events)==null?void 0:r.mouseLeave)==null||i.call(r,o)}),n.contextMenu.on(o=>{var r,i;t.edgeContextMenu(o),(i=(r=e.events)==null?void 0:r.contextMenu)==null||i.call(r,o)}),n.updateStart.on(o=>{var r,i;t.edgeUpdateStart(o),(i=(r=e.events)==null?void 0:r.updateStart)==null||i.call(r,o)}),n.update.on(o=>{var r,i;t.edgeUpdate(o),(i=(r=e.events)==null?void 0:r.update)==null||i.call(r,o)}),n.updateEnd.on(o=>{var r,i;t.edgeUpdateEnd(o),(i=(r=e.events)==null?void 0:r.updateEnd)==null||i.call(r,o)}),Object.entries(n).reduce((o,[r,i])=>(o.emit[r]=i.trigger,o.on[r]=i.on,o),{emit:{},on:{}})}function $d(){const{viewport:e,snapGrid:t,snapToGrid:n}=Se();return({sourceEvent:o})=>{const r=o.touches?o.touches[0].clientX:o.clientX,i=o.touches?o.touches[0].clientY:o.clientY,a={x:(r-e.value.x)/e.value.zoom,y:(i-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(a.x/t.value[0]):a.x,ySnapped:n.value?t.value[1]*Math.round(a.y/t.value[1]):a.y,...a}}}function on(){return!0}function oa({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:r,onEdgeUpdate:i,onEdgeUpdateEnd:a}){const{vueFlowRef:l,connectionMode:s,connectionRadius:u,connectOnClick:c,connectionClickStartHandle:d,nodesConnectable:h,autoPanOnConnect:p,autoPanSpeed:b,findNode:w,panBy:y,startConnection:m,updateConnection:g,endConnection:S,emits:N,viewport:D,edges:R,nodes:T,isValidConnection:X}=Se();let U=null,A=!1,E=null,ee=null;function ne(M){var C;const I=pe(n)==="target",O=Po(M),$=cr(M.target);if(O&&M.button===0||!O){let B=function(k){q=at(k,le);const{handle:x,validHandleResult:P}=Ed(k,$,yn(q,D.value,!1,[1,1]),u.value,f,Q=>br(k,Q,s.value,pe(t),pe(e),I?"target":"source",j,$,R.value,T.value,w));if(L=x,z||(v(),z=!0),U=P.connection,A=P.isValid,E=P.handleDomNode,!(A&&L&&(ee!=null&&ee.endHandle)&&P.endHandle&&ee.endHandle.type===P.endHandle.type&&ee.endHandle.nodeId===P.endHandle.nodeId&&ee.endHandle.handleId===P.endHandle.handleId)){if(g(L&&A?Yi({x:L.x,y:L.y},D.value):q,P.endHandle,Sd(!!L,A)),ee=P,!L&&!A&&!E)return Xn(Z);U&&U.source!==U.target&&E&&(Xn(Z),Z=E,E.classList.add("connecting","vue-flow__handle-connecting"),E.classList.toggle("valid",A),E.classList.toggle("vue-flow__handle-valid",A))}},G=function(k){(L||E)&&U&&A&&(i?i(k,U):N.connect(U)),N.connectEnd(k),r&&(a==null||a(k)),Xn(Z),cancelAnimationFrame(K),S(k),z=!1,A=!1,U=null,E=null,$.removeEventListener("mousemove",B),$.removeEventListener("mouseup",G),$.removeEventListener("touchmove",B),$.removeEventListener("touchend",G)};const oe=w(pe(t));let j=pe(o)||X.value||on;!j&&oe&&(j=(I?oe.isValidSourcePos:oe.isValidTargetPos)||on);let L,K=0;const{x:fe,y:ue}=at(M),he=$==null?void 0:$.elementFromPoint(fe,ue),re=Do(pe(r),he),le=(C=l.value)==null?void 0:C.getBoundingClientRect();if(!le||!re)return;let Z,q=at(M,le),z=!1;const f=xd({nodes:T.value,nodeId:pe(t),handleId:pe(e),handleType:re}),v=()=>{if(!p.value)return;const[k,x]=Ki(q,le,b.value);y({x:k,y:x}),K=requestAnimationFrame(v)};m({nodeId:pe(t),handleId:pe(e),type:re,position:(he==null?void 0:he.getAttribute("data-handlepos"))||Y.Top},{x:fe-le.left,y:ue-le.top}),N.connectStart({event:M,nodeId:pe(t),handleId:pe(e),handleType:re}),$.addEventListener("mousemove",B),$.addEventListener("mouseup",G),$.addEventListener("touchmove",B),$.addEventListener("touchend",G)}}function _(M){if(!c.value)return;const C=pe(n)==="target";if(!d.value)N.clickConnectStart({event:M,nodeId:pe(t),handleId:pe(e)}),m({nodeId:pe(t),type:pe(n),handleId:pe(e)},void 0,!0);else{let I=pe(o)||X.value||on;const O=w(pe(t));if(!I&&O&&(I=(C?O.isValidSourcePos:O.isValidTargetPos)||on),O&&(typeof O.connectable>"u"?h.value:O.connectable)===!1)return;const $=cr(M.target),{connection:B,isValid:G}=br(M,{nodeId:pe(t),id:pe(e),type:pe(n)},s.value,d.value.nodeId,d.value.handleId||null,d.value.type,I,$,R.value,T.value,w),oe=B.source===B.target;G&&!oe&&N.connect(B),N.clickConnectEnd(M),S(M,!0)}}return{handlePointerDown:ne,handleClick:_}}function Pd(){return Tt(ea,"")}function ra(e){const t=e??Pd()??"",n=Tt(ta,se(null)),{findNode:o,edges:r,emits:i}=Se(),a=o(t);return a||i.error(new Oe(Ce.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:a,parentNode:ae(()=>o(a.parentNode)),connectedEdges:ae(()=>Ui([a],r.value))}}function Dd(){return{doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),dragStart:F(),drag:F(),dragStop:F()}}function Ad(e,t){const n=Dd();return n.doubleClick.on(o=>{var r,i;t.nodeDoubleClick(o),(i=(r=e.events)==null?void 0:r.doubleClick)==null||i.call(r,o)}),n.click.on(o=>{var r,i;t.nodeClick(o),(i=(r=e.events)==null?void 0:r.click)==null||i.call(r,o)}),n.mouseEnter.on(o=>{var r,i;t.nodeMouseEnter(o),(i=(r=e.events)==null?void 0:r.mouseEnter)==null||i.call(r,o)}),n.mouseMove.on(o=>{var r,i;t.nodeMouseMove(o),(i=(r=e.events)==null?void 0:r.mouseMove)==null||i.call(r,o)}),n.mouseLeave.on(o=>{var r,i;t.nodeMouseLeave(o),(i=(r=e.events)==null?void 0:r.mouseLeave)==null||i.call(r,o)}),n.contextMenu.on(o=>{var r,i;t.nodeContextMenu(o),(i=(r=e.events)==null?void 0:r.contextMenu)==null||i.call(r,o)}),n.dragStart.on(o=>{var r,i;t.nodeDragStart(o),(i=(r=e.events)==null?void 0:r.dragStart)==null||i.call(r,o)}),n.drag.on(o=>{var r,i;t.nodeDrag(o),(i=(r=e.events)==null?void 0:r.drag)==null||i.call(r,o)}),n.dragStop.on(o=>{var r,i;t.nodeDragStop(o),(i=(r=e.events)==null?void 0:r.dragStop)==null||i.call(r,o)}),Object.entries(n).reduce((o,[r,i])=>(o.emit[r]=i.trigger,o.on[r]=i.on,o),{emit:{},on:{}})}function ia(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:r,snapToGrid:i,nodesDraggable:a,emits:l}=Se();return(s,u=!1)=>{const c=i.value?r.value[0]:5,d=i.value?r.value[1]:5,h=u?4:1,p=s.x*c*h,b=s.y*d*h,w=[];for(const y of e.value)if(y.draggable||a&&typeof y.draggable>"u"){const m={x:y.computedPosition.x+p,y:y.computedPosition.y+b},{computedPosition:g}=$o(y,m,l.error,t.value,y.parentNode?o(y.parentNode):void 0);w.push({id:y.id,position:g,from:y.position,distance:{x:s.x,y:s.y},dimensions:y.dimensions})}n(w,!0,!1)}}const jn=.1;function tt(){return On("Viewport not initialized yet."),Promise.resolve(!1)}const Vd={zoomIn:tt,zoomOut:tt,zoomTo:tt,fitView:tt,setCenter:tt,fitBounds:tt,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:tt,setTransform:tt,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function Rd(e){function t(o,r){return new Promise(i=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleBy(Wn(e.d3Selection,r,()=>{i(!0)}),o):i(!1)})}function n(o,r,i,a){return new Promise(l=>{const{x:s,y:u}=Li({x:-o,y:-r},e.translateExtent),c=Ot.translate(-s,-u).scale(i);e.d3Selection&&e.d3Zoom?e.d3Zoom.transform(Wn(e.d3Selection,a,()=>{l(!0)}),c):l(!1)})}return ae(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:r=>t(1.2,r==null?void 0:r.duration),zoomOut:r=>t(1/1.2,r==null?void 0:r.duration),zoomTo:(r,i)=>new Promise(a=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleTo(Wn(e.d3Selection,i==null?void 0:i.duration,()=>{a(!0)}),r):a(!1)}),setViewport:(r,i)=>n(r.x,r.y,r.zoom,i==null?void 0:i.duration),setTransform:(r,i)=>n(r.x,r.y,r.zoom,i==null?void 0:i.duration),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(r={padding:jn,includeHiddenNodes:!1,duration:0})=>{var i,a;const l=[];for(const h of e.nodes)h.dimensions.width&&h.dimensions.height&&((r==null?void 0:r.includeHiddenNodes)||!h.hidden)&&(!((i=r.nodes)!=null&&i.length)||(a=r.nodes)!=null&&a.length&&r.nodes.includes(h.id))&&l.push(h);if(!l.length)return Promise.resolve(!1);const s=ji(l),{x:u,y:c,zoom:d}=dr(s,e.dimensions.width,e.dimensions.height,r.minZoom??e.minZoom,r.maxZoom??e.maxZoom,r.padding??jn,r.offset);return n(u,c,d,r==null?void 0:r.duration)},setCenter:(r,i,a)=>{const l=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:e.maxZoom,s=e.dimensions.width/2-r*l,u=e.dimensions.height/2-i*l;return n(s,u,l,a==null?void 0:a.duration)},fitBounds:(r,i={padding:jn})=>{const{x:a,y:l,zoom:s}=dr(r,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,i.padding);return n(a,l,s,i==null?void 0:i.duration)},project:r=>yn(r,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:a}=e.vueFlowRef.getBoundingClientRect(),l={x:r.x-i,y:r.y-a};return yn(l,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:a}=e.vueFlowRef.getBoundingClientRect(),l={x:r.x+i,y:r.y+a};return Yi(l,e.viewport)}return{x:0,y:0}}}:Vd)}function Wn(e,t=0,n){return e.transition().duration(t).on("end",n)}function zd(e,t,n){const o=ti(!0);return o.run(()=>{const r=()=>{o.run(()=>{let w,y,m=!!(n.nodes.value.length||n.edges.value.length);w=Et([e.modelValue,()=>{var g,S;return(S=(g=e.modelValue)==null?void 0:g.value)==null?void 0:S.length}],([g])=>{g&&Array.isArray(g)&&(y==null||y.pause(),n.setElements(g),!y&&!m&&g.length?m=!0:y==null||y.resume())}),y=Et([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([g,S])=>{var N;(N=e.modelValue)!=null&&N.value&&Array.isArray(e.modelValue.value)&&(w==null||w.pause(),e.modelValue.value=[...g,...S],Qe(()=>{w==null||w.resume()}))},{immediate:m}),ln(()=>{w==null||w.stop(),y==null||y.stop()})})},i=()=>{o.run(()=>{let w,y,m=!!n.nodes.value.length;w=Et([e.nodes,()=>{var g,S;return(S=(g=e.nodes)==null?void 0:g.value)==null?void 0:S.length}],([g])=>{g&&Array.isArray(g)&&(y==null||y.pause(),n.setNodes(g),!y&&!m&&g.length?m=!0:y==null||y.resume())}),y=Et([n.nodes,()=>n.nodes.value.length],([g])=>{var S;(S=e.nodes)!=null&&S.value&&Array.isArray(e.nodes.value)&&(w==null||w.pause(),e.nodes.value=[...g],Qe(()=>{w==null||w.resume()}))},{immediate:m}),ln(()=>{w==null||w.stop(),y==null||y.stop()})})},a=()=>{o.run(()=>{let w,y,m=!!n.edges.value.length;w=Et([e.edges,()=>{var g,S;return(S=(g=e.edges)==null?void 0:g.value)==null?void 0:S.length}],([g])=>{g&&Array.isArray(g)&&(y==null||y.pause(),n.setEdges(g),!y&&!m&&g.length?m=!0:y==null||y.resume())}),y=Et([n.edges,()=>n.edges.value.length],([g])=>{var S;(S=e.edges)!=null&&S.value&&Array.isArray(e.edges.value)&&(w==null||w.pause(),e.edges.value=[...g],Qe(()=>{w==null||w.resume()}))},{immediate:m}),ln(()=>{w==null||w.stop(),y==null||y.stop()})})},l=()=>{o.run(()=>{ye(()=>t.maxZoom,()=>{t.maxZoom&&ke(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},s=()=>{o.run(()=>{ye(()=>t.minZoom,()=>{t.minZoom&&ke(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{ye(()=>t.translateExtent,()=>{t.translateExtent&&ke(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{ye(()=>t.nodeExtent,()=>{t.nodeExtent&&ke(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{o.run(()=>{ye(()=>t.applyDefault,()=>{ke(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},h=()=>{o.run(()=>{const w=async y=>{let m=y;typeof t.autoConnect=="function"&&(m=await t.autoConnect(y)),m!==!1&&n.addEdges([m])};ye(()=>t.autoConnect,()=>{ke(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),ye(n.autoConnect,(y,m,g)=>{y?n.onConnect(w):n.hooks.value.connect.off(w),g(()=>{n.hooks.value.connect.off(w)})},{immediate:!0})})},p=()=>{const w=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const y of Object.keys(t)){const m=y;if(!w.includes(m)){const g=xe(()=>t[m]),S=n[m];xo(S)&&o.run(()=>{ye(g,N=>{ke(N)&&(S.value=N)},{immediate:!0})})}}};(()=>{r(),i(),a(),s(),l(),u(),c(),d(),h(),p()})()}),()=>o.stop()}function Bd(){return{edgesChange:F(),nodesChange:F(),nodeDoubleClick:F(),nodeClick:F(),nodeMouseEnter:F(),nodeMouseMove:F(),nodeMouseLeave:F(),nodeContextMenu:F(),nodeDragStart:F(),nodeDrag:F(),nodeDragStop:F(),nodesInitialized:F(),miniMapNodeClick:F(),miniMapNodeDoubleClick:F(),miniMapNodeMouseEnter:F(),miniMapNodeMouseMove:F(),miniMapNodeMouseLeave:F(),connect:F(),connectStart:F(),connectEnd:F(),clickConnectStart:F(),clickConnectEnd:F(),paneReady:F(),init:F(),move:F(),moveStart:F(),moveEnd:F(),selectionDragStart:F(),selectionDrag:F(),selectionDragStop:F(),selectionContextMenu:F(),selectionStart:F(),selectionEnd:F(),viewportChangeStart:F(),viewportChange:F(),viewportChangeEnd:F(),paneScroll:F(),paneClick:F(),paneContextMenu:F(),paneMouseEnter:F(),paneMouseMove:F(),paneMouseLeave:F(),edgeContextMenu:F(),edgeMouseEnter:F(),edgeMouseMove:F(),edgeMouseLeave:F(),edgeDoubleClick:F(),edgeClick:F(),edgeUpdateStart:F(),edgeUpdate:F(),edgeUpdateEnd:F(),updateNodeInternals:F(),error:F(e=>On(e.message))}}function Ld(e,t){qa(()=>{for(const[n,o]of Object.entries(t.value)){const r=i=>{e(n,i)};o.fns.add(r),Sn(()=>{o.off(r)})}})}function aa(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:To.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Bt.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:ct.Bezier,style:{}},connectionMode:yt.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:_n()?"Meta":"Control",zoomActivationKeyCode:_n()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Bd(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const Fd=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function Gd(e,t,n){const o=Rd(e),r=f=>{const v=f??[];e.hooks.updateNodeInternals.trigger(v)},i=f=>cd(f,e.nodes,e.edges),a=f=>ud(f,e.nodes,e.edges),l=f=>Ui(f,e.edges),s=({id:f,type:v,nodeId:k})=>{var x;return Array.from(((x=e.connectionLookup.get(`${k}-${v}-${f??null}`))==null?void 0:x.values())??[])},u=f=>{if(f)return t.value.get(f)},c=f=>{if(f)return n.value.get(f)},d=(f,v,k)=>{var x,P;const Q=[];for(const W of f){const ie={id:W.id,type:"position",dragging:k,from:W.from};if(v&&(ie.position=W.position,W.parentNode)){const de=u(W.parentNode);ie.position={x:ie.position.x-(((x=de==null?void 0:de.computedPosition)==null?void 0:x.x)??0),y:ie.position.y-(((P=de==null?void 0:de.computedPosition)==null?void 0:P.y)??0)}}Q.push(ie)}Q!=null&&Q.length&&e.hooks.nodesChange.trigger(Q)},h=f=>{if(!e.vueFlowRef)return;const v=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!v)return;const k=window.getComputedStyle(v),{m22:x}=new window.DOMMatrixReadOnly(k.transform),P=[];for(let Q=0;Q<f.length;++Q){const W=f[Q],ie=u(W.id);if(ie){const de=Mn(W.nodeElement);if(!!(de.width&&de.height&&(ie.dimensions.width!==de.width||ie.dimensions.height!==de.height||W.forceUpdate))){const ve=W.nodeElement.getBoundingClientRect();ie.dimensions=de,ie.handleBounds.source=Er(".source",W.nodeElement,ve,x),ie.handleBounds.target=Er(".target",W.nodeElement,ve,x),P.push({id:ie.id,type:"dimensions",dimensions:de})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),P.length&&e.hooks.nodesChange.trigger(P)},p=(f,v)=>{const k=new Set,x=new Set;for(const W of f)pt(W)?k.add(W.id):st(W)&&x.add(W.id);const P=rt(t.value,k,!0),Q=rt(n.value,x);if(e.multiSelectionActive){for(const W of k)P.push(nt(W,v));for(const W of x)Q.push(nt(W,v))}P.length&&e.hooks.nodesChange.trigger(P),Q.length&&e.hooks.edgesChange.trigger(Q)},b=f=>{if(e.multiSelectionActive){const v=f.map(k=>nt(k.id,!0));e.hooks.nodesChange.trigger(v);return}e.hooks.nodesChange.trigger(rt(t.value,new Set(f.map(v=>v.id)),!0)),e.hooks.edgesChange.trigger(rt(n.value))},w=f=>{if(e.multiSelectionActive){const v=f.map(k=>nt(k.id,!0));e.hooks.edgesChange.trigger(v);return}e.hooks.edgesChange.trigger(rt(n.value,new Set(f.map(v=>v.id)))),e.hooks.nodesChange.trigger(rt(t.value,new Set,!0))},y=f=>{p(f,!0)},m=f=>{const k=(f||e.nodes).map(x=>(x.selected=!1,nt(x.id,!1)));e.hooks.nodesChange.trigger(k)},g=f=>{const k=(f||e.edges).map(x=>(x.selected=!1,nt(x.id,!1)));e.hooks.edgesChange.trigger(k)},S=f=>{if(!f||!f.length)return p([],!1);const v=f.reduce((k,x)=>{const P=nt(x.id,!1);return pt(x)?k.nodes.push(P):k.edges.push(P),k},{nodes:[],edges:[]});v.nodes.length&&e.hooks.nodesChange.trigger(v.nodes),v.edges.length&&e.hooks.edgesChange.trigger(v.edges)},N=f=>{var v;(v=e.d3Zoom)==null||v.scaleExtent([f,e.maxZoom]),e.minZoom=f},D=f=>{var v;(v=e.d3Zoom)==null||v.scaleExtent([e.minZoom,f]),e.maxZoom=f},R=f=>{var v;(v=e.d3Zoom)==null||v.translateExtent(f),e.translateExtent=f},T=f=>{e.nodeExtent=f,r()},X=f=>{var v;(v=e.d3Zoom)==null||v.clickDistance(f)},U=f=>{e.nodesDraggable=f,e.nodesConnectable=f,e.elementsSelectable=f},A=f=>{const v=f instanceof Function?f(e.nodes):f;!e.initialized&&!v.length||(e.nodes=xr(v,u,e.hooks.error.trigger))},E=f=>{const v=f instanceof Function?f(e.edges):f;if(!e.initialized&&!v.length)return;const k=Nr(v,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);Sr(e.connectionLookup,k),e.edges=k},ee=f=>{const v=f instanceof Function?f([...e.nodes,...e.edges]):f;!e.initialized&&!v.length||(A(v.filter(pt)),E(v.filter(st)))},ne=f=>{let v=f instanceof Function?f(e.nodes):f;v=Array.isArray(v)?v:[v];const k=xr(v,u,e.hooks.error.trigger),x=[];for(const P of k)x.push(pr(P));x.length&&e.hooks.nodesChange.trigger(x)},_=f=>{let v=f instanceof Function?f(e.edges):f;v=Array.isArray(v)?v:[v];const k=Nr(v,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),x=[];for(const P of k)x.push(pr(P));x.length&&e.hooks.edgesChange.trigger(x)},M=(f,v=!0,k=!1)=>{const x=f instanceof Function?f(e.nodes):f,P=Array.isArray(x)?x:[x],Q=[],W=[];function ie(ge){const ve=l(ge);for(const be of ve)(!ke(be.deletable)||be.deletable)&&W.push(vr(be.id,be.source,be.target,be.sourceHandle,be.targetHandle))}function de(ge){const ve=[];for(const be of e.nodes)be.parentNode===ge&&ve.push(be);if(ve.length){for(const be of ve)Q.push(gr(be.id));v&&ie(ve);for(const be of ve)de(be.id)}}for(const ge of P){const ve=typeof ge=="string"?u(ge):ge;ve&&(ke(ve.deletable)&&!ve.deletable||(Q.push(gr(ve.id)),v&&ie([ve]),k&&de(ve.id)))}W.length&&e.hooks.edgesChange.trigger(W),Q.length&&e.hooks.nodesChange.trigger(Q)},C=f=>{const v=f instanceof Function?f(e.edges):f,k=Array.isArray(v)?v:[v],x=[];for(const P of k){const Q=typeof P=="string"?c(P):P;Q&&(ke(Q.deletable)&&!Q.deletable||x.push(vr(typeof P=="string"?P:P.id,Q.source,Q.target,Q.sourceHandle,Q.targetHandle)))}e.hooks.edgesChange.trigger(x)},I=(f,v,k=!0)=>Cd(f,v,e.edges,c,k,e.hooks.error.trigger),O=(f,v,k={replace:!1})=>{const x=c(f);if(!x)return;const P=typeof v=="function"?v(x):v;x.data=k.replace?P:{...x.data,...P}},$=f=>hr(f,e.nodes),B=f=>{const v=hr(f,e.edges);return Sr(e.connectionLookup,v),v},G=(f,v,k={replace:!1})=>{const x=u(f);if(!x)return;const P=typeof v=="function"?v(x):v;k.replace?e.nodes.splice(e.nodes.indexOf(x),1,P):Object.assign(x,P)},oe=(f,v,k={replace:!1})=>{const x=u(f);if(!x)return;const P=typeof v=="function"?v(x):v;x.data=k.replace?P:{...x.data,...P}},j=(f,v,k=!1)=>{k?e.connectionClickStartHandle=f:e.connectionStartHandle=f,e.connectionEndHandle=null,e.connectionStatus=null,v&&(e.connectionPosition=v)},L=(f,v=null,k=null)=>{e.connectionStartHandle&&(e.connectionPosition=f,e.connectionEndHandle=v,e.connectionStatus=k)},K=(f,v)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,v?e.connectionClickStartHandle=null:e.connectionStartHandle=null},fe=f=>{const v=ld(f),k=v?null:Rt(f)?f:u(f.id);return!v&&!k?[null,null,v]:[v?f:mo(k),k,v]},ue=(f,v=!0,k=e.nodes)=>{const[x,P,Q]=fe(f);if(!x)return[];const W=[];for(const ie of k||e.nodes){if(!Q&&(ie.id===P.id||!ie.computedPosition))continue;const de=mo(ie),ge=yo(de,x);(v&&ge>0||ge>=Number(x.width)*Number(x.height))&&W.push(ie)}return W},he=(f,v,k=!0)=>{const[x]=fe(f);if(!x)return!1;const P=yo(x,v);return k&&P>0||P>=Number(x.width)*Number(x.height)},re=f=>{const{viewport:v,dimensions:k,d3Zoom:x,d3Selection:P,translateExtent:Q}=e;if(!x||!P||!f.x&&!f.y)return!1;const W=Ot.translate(v.x+f.x,v.y+f.y).scale(v.zoom),ie=[[0,0],[k.width,k.height]],de=x.constrain()(W,ie,Q),ge=e.viewport.x!==de.x||e.viewport.y!==de.y||e.viewport.zoom!==de.k;return x.transform(P,de),ge},le=f=>{const v=f instanceof Function?f(e):f,k=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];ke(v.defaultEdgeOptions)&&(e.defaultEdgeOptions=v.defaultEdgeOptions);const x=v.modelValue||v.nodes||v.edges?[]:void 0;x&&(v.modelValue&&x.push(...v.modelValue),v.nodes&&x.push(...v.nodes),v.edges&&x.push(...v.edges),ee(x));const P=()=>{ke(v.maxZoom)&&D(v.maxZoom),ke(v.minZoom)&&N(v.minZoom),ke(v.translateExtent)&&R(v.translateExtent)};for(const Q of Object.keys(v)){const W=Q,ie=v[W];![...Fd,...k].includes(W)&&ke(ie)&&(e[W]=ie)}io(()=>e.d3Zoom).not.toBeNull().then(P),e.initialized||(e.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:h,setElements:ee,setNodes:A,setEdges:E,addNodes:ne,addEdges:_,removeNodes:M,removeEdges:C,findNode:u,findEdge:c,updateEdge:I,updateEdgeData:O,updateNode:G,updateNodeData:oe,applyEdgeChanges:B,applyNodeChanges:$,addSelectedElements:y,addSelectedNodes:b,addSelectedEdges:w,setMinZoom:N,setMaxZoom:D,setTranslateExtent:R,setNodeExtent:T,setPaneClickDistance:X,removeSelectedElements:S,removeSelectedNodes:m,removeSelectedEdges:g,startConnection:j,updateConnection:L,endConnection:K,setInteractive:U,setState:le,getIntersectingNodes:ue,getIncomers:i,getOutgoers:a,getConnectedEdges:l,getHandleConnections:s,isNodeIntersecting:he,panBy:re,fitView:f=>o.value.fitView(f),zoomIn:f=>o.value.zoomIn(f),zoomOut:f=>o.value.zoomOut(f),zoomTo:(f,v)=>o.value.zoomTo(f,v),setViewport:(f,v)=>o.value.setViewport(f,v),setTransform:(f,v)=>o.value.setTransform(f,v),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(f,v,k)=>o.value.setCenter(f,v,k),fitBounds:(f,v)=>o.value.fitBounds(f,v),project:f=>o.value.project(f),screenToFlowCoordinate:f=>o.value.screenToFlowCoordinate(f),flowToScreenCoordinate:f=>o.value.flowToScreenCoordinate(f),toObject:()=>{const f=[],v=[];for(const k of e.nodes){const{computedPosition:x,handleBounds:P,selected:Q,dimensions:W,isParent:ie,resizing:de,dragging:ge,events:ve,...be}=k;f.push(be)}for(const k of e.edges){const{selected:x,sourceNode:P,targetNode:Q,events:W,...ie}=k;v.push(ie)}return JSON.parse(JSON.stringify({nodes:f,edges:v,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:f=>new Promise(v=>{const{nodes:k,edges:x,position:P,zoom:Q,viewport:W}=f;if(k&&A(k),x&&E(x),W!=null&&W.x&&(W!=null&&W.y)||P){const ie=(W==null?void 0:W.x)||P[0],de=(W==null?void 0:W.y)||P[1],ge=(W==null?void 0:W.zoom)||Q||e.viewport.zoom;return io(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:ie,y:de,zoom:ge}).then(()=>{v(!0)})})}else v(!0)}),updateNodeInternals:r,viewportHelper:o,$reset:()=>{const f=aa();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const v=Ot.translate(f.defaultViewport.x??0,f.defaultViewport.y??0).scale(wt(f.defaultViewport.zoom??1,f.minZoom,f.maxZoom)),k=e.viewportRef.getBoundingClientRect(),x=[[0,0],[k.width,k.height]],P=e.d3Zoom.constrain()(v,x,f.translateExtent);e.d3Zoom.transform(e.d3Selection,P)}le(f)},$destroy:()=>{}}}const Hd=["data-id","data-handleid","data-nodeid","data-handlepos"],Yd={name:"Handle",compatConfig:{MODE:3}},Xe=_e({...Yd,props:{id:{default:null},type:{},position:{default:()=>Y.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=ni(e,["position","connectable","connectableStart","connectableEnd","id"]),o=xe(()=>n.type??"source"),r=xe(()=>n.isValidConnection??null),{connectionStartHandle:i,connectionClickStartHandle:a,connectionEndHandle:l,vueFlowRef:s,nodesConnectable:u,noDragClassName:c,noPanClassName:d}=Se(),{id:h,node:p,nodeEl:b,connectedEdges:w}=ra(),y=se(),m=xe(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),g=xe(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),S=xe(()=>{var A,E,ee,ne,_,M;return((A=i.value)==null?void 0:A.nodeId)===h&&((E=i.value)==null?void 0:E.handleId)===e.id&&((ee=i.value)==null?void 0:ee.type)===o.value||((ne=l.value)==null?void 0:ne.nodeId)===h&&((_=l.value)==null?void 0:_.handleId)===e.id&&((M=l.value)==null?void 0:M.type)===o.value}),N=xe(()=>{var A,E,ee;return((A=a.value)==null?void 0:A.nodeId)===h&&((E=a.value)==null?void 0:E.handleId)===e.id&&((ee=a.value)==null?void 0:ee.type)===o.value}),{handlePointerDown:D,handleClick:R}=oa({nodeId:h,handleId:e.id,isValidConnection:r,type:o}),T=ae(()=>typeof e.connectable=="string"&&e.connectable==="single"?!w.value.some(A=>{const E=A[`${o.value}Handle`];return A[o.value]!==h?!1:E?E===e.id:!0}):typeof e.connectable=="number"?w.value.filter(A=>{const E=A[`${o.value}Handle`];return A[o.value]!==h?!1:E?E===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(p,w.value):ke(e.connectable)?e.connectable:u.value);et(()=>{var A;if(!p.dimensions.width||!p.dimensions.height)return;const E=(A=p.handleBounds[o.value])==null?void 0:A.find(O=>O.id===e.id);if(!s.value||E)return;const ee=s.value.querySelector(".vue-flow__transformationpane");if(!b.value||!y.value||!ee||!e.id)return;const ne=b.value.getBoundingClientRect(),_=y.value.getBoundingClientRect(),M=window.getComputedStyle(ee),{m22:C}=new window.DOMMatrixReadOnly(M.transform),I={id:e.id,position:e.position,x:(_.left-ne.left)/C,y:(_.top-ne.top)/C,...Mn(y.value)};p.handleBounds[o.value]=[...p.handleBounds[o.value]??[],I]}),ei(()=>{const A=p.handleBounds[o.value];A&&(p.handleBounds[o.value]=A.filter(E=>E.id!==e.id))});function X(A){const E=Po(A);T.value&&m.value&&(E&&A.button===0||!E)&&D(A)}function U(A){!h||!a.value&&!m.value||T.value&&R(A)}return t({handleClick:R,handlePointerDown:D,onClick:U,onPointerDown:X}),(A,E)=>(te(),ce("div",{ref_key:"handle",ref:y,"data-id":`${V(h)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":V(h),"data-handlepos":A.position,class:gt(["vue-flow__handle",[`vue-flow__handle-${A.position}`,`vue-flow__handle-${e.id}`,V(c),V(d),o.value,{connectable:T.value,connecting:N.value,connectablestart:m.value,connectableend:g.value,connectionindicator:T.value&&(m.value&&!S.value||g.value&&S.value)}]]),onMousedown:X,onTouchstartPassive:X,onClick:U},[lt(A.$slots,"default",{id:A.id})],42,Hd))}}),$n=function({sourcePosition:e=Y.Bottom,targetPosition:t=Y.Top,label:n,connectable:o=!0,isValidTargetPos:r,isValidSourcePos:i,data:a}){const l=a.label||n;return[we(Xe,{type:"target",position:t,connectable:o,isValidConnection:r}),typeof l!="string"&&l?we(l):we("div",{innerHTML:l}),we(Xe,{type:"source",position:e,connectable:o,isValidConnection:i})]};$n.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];$n.inheritAttrs=!1;$n.compatConfig={MODE:3};const Xd=$n,Pn=function({targetPosition:e=Y.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:r}){const i=r.label||t;return[we(Xe,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof i!="string"&&i?we(i):we("div",{innerHTML:i})]};Pn.props=["targetPosition","label","isValidTargetPos","connectable","data"];Pn.inheritAttrs=!1;Pn.compatConfig={MODE:3};const jd=Pn,Dn=function({sourcePosition:e=Y.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:r}){const i=r.label||t;return[typeof i!="string"&&i?we(i):we("div",{innerHTML:i}),we(Xe,{type:"source",position:e,connectable:n,isValidConnection:o})]};Dn.props=["sourcePosition","label","isValidSourcePos","connectable","data"];Dn.inheritAttrs=!1;Dn.compatConfig={MODE:3};const Wd=Dn,Ud=["transform"],Zd=["width","height","x","y","rx","ry"],Kd=["y"],qd={name:"EdgeText",compatConfig:{MODE:3}},Qd=_e({...qd,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=se({x:0,y:0,width:0,height:0}),n=se(null),o=ae(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);et(r),ye([()=>e.x,()=>e.y,n,()=>e.label],r);function r(){if(!n.value)return;const i=n.value.getBBox();(i.width!==t.value.width||i.height!==t.value.height)&&(t.value=i)}return(i,a)=>(te(),ce("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[i.labelShowBg?(te(),ce("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*i.labelBgPadding[0]}px`,height:`${t.value.height+2*i.labelBgPadding[1]}px`,x:-i.labelBgPadding[0],y:-i.labelBgPadding[1],style:Ae(i.labelBgStyle),rx:i.labelBgBorderRadius,ry:i.labelBgBorderRadius},null,12,Zd)):ze("",!0),Me("text",So(i.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:i.labelStyle}),[lt(i.$slots,"default",{},()=>[typeof i.label!="string"?(te(),$e(rl(i.label),{key:0})):(te(),ce(Re,{key:1},[it(Te(i.label),1)],64))])],16,Kd)],8,Ud))}}),Jd=["id","d","marker-end","marker-start"],ef=["d","stroke-width"],tf={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},An=_e({...tf,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},style:{},labelStyle:{},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=ni(e,["interactionWidth","labelShowBg"]),o=se(null),r=se(null),i=se(null),a=ol();return t({pathEl:o,interactionEl:r,labelEl:i}),(l,s)=>(te(),ce(Re,null,[Me("path",{id:l.id,ref_key:"pathEl",ref:o,d:l.path,style:Ae(n.style),class:gt(["vue-flow__edge-path",V(a).class]),"marker-end":l.markerEnd,"marker-start":l.markerStart},null,14,Jd),l.interactionWidth?(te(),ce("path",{key:0,ref_key:"interactionEl",ref:r,fill:"none",d:l.path,"stroke-width":l.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,ef)):ze("",!0),l.label&&l.labelX&&l.labelY?(te(),$e(Qd,{key:1,ref_key:"labelEl",ref:i,x:l.labelX,y:l.labelY,label:l.label,"label-show-bg":l.labelShowBg,"label-bg-style":l.labelBgStyle,"label-bg-padding":l.labelBgPadding,"label-bg-border-radius":l.labelBgBorderRadius,"label-style":l.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):ze("",!0)],64))}});function la({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,a=Math.abs(o-t)/2,l=o<t?o+a:o-a;return[i,l,r,a]}function sa({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:a,targetControlY:l}){const s=e*.125+r*.375+a*.375+n*.125,u=t*.125+i*.375+l*.375+o*.125,c=Math.abs(s-e),d=Math.abs(u-t);return[s,u,c,d]}function rn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Cr({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){let a,l;switch(e){case Y.Left:a=t-rn(t-o,i),l=n;break;case Y.Right:a=t+rn(o-t,i),l=n;break;case Y.Top:a=t,l=n-rn(n-r,i);break;case Y.Bottom:a=t,l=n+rn(r-n,i);break}return[a,l]}function ua(e){const{sourceX:t,sourceY:n,sourcePosition:o=Y.Bottom,targetX:r,targetY:i,targetPosition:a=Y.Top,curvature:l=.25}=e,[s,u]=Cr({pos:o,x1:t,y1:n,x2:r,y2:i,c:l}),[c,d]=Cr({pos:a,x1:r,y1:i,x2:t,y2:n,c:l}),[h,p,b,w]=sa({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:s,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${s},${u} ${c},${d} ${r},${i}`,h,p,b,w]}function Ir({pos:e,x1:t,y1:n,x2:o,y2:r}){let i,a;switch(e){case Y.Left:case Y.Right:i=.5*(t+o),a=n;break;case Y.Top:case Y.Bottom:i=t,a=.5*(n+r);break}return[i,a]}function ca(e){const{sourceX:t,sourceY:n,sourcePosition:o=Y.Bottom,targetX:r,targetY:i,targetPosition:a=Y.Top}=e,[l,s]=Ir({pos:o,x1:t,y1:n,x2:r,y2:i}),[u,c]=Ir({pos:a,x1:r,y1:i,x2:t,y2:n}),[d,h,p,b]=sa({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:l,sourceControlY:s,targetControlX:u,targetControlY:c});return[`M${t},${n} C${l},${s} ${u},${c} ${r},${i}`,d,h,p,b]}const Mr={[Y.Left]:{x:-1,y:0},[Y.Right]:{x:1,y:0},[Y.Top]:{x:0,y:-1},[Y.Bottom]:{x:0,y:1}};function nf({source:e,sourcePosition:t=Y.Bottom,target:n}){return t===Y.Left||t===Y.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Or(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function of({source:e,sourcePosition:t=Y.Bottom,target:n,targetPosition:o=Y.Top,center:r,offset:i}){const a=Mr[t],l=Mr[o],s={x:e.x+a.x*i,y:e.y+a.y*i},u={x:n.x+l.x*i,y:n.y+l.y*i},c=nf({source:s,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",h=c[d];let p,b,w;const y={x:0,y:0},m={x:0,y:0},[g,S,N,D]=la({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*l[d]===-1){b=r.x??g,w=r.y??S;const T=[{x:b,y:s.y},{x:b,y:u.y}],X=[{x:s.x,y:w},{x:u.x,y:w}];a[d]===h?p=d==="x"?T:X:p=d==="x"?X:T}else{const T=[{x:s.x,y:u.y}],X=[{x:u.x,y:s.y}];if(d==="x"?p=a.x===h?X:T:p=a.y===h?T:X,t===o){const ne=Math.abs(e[d]-n[d]);if(ne<=i){const _=Math.min(i-1,i-ne);a[d]===h?y[d]=(s[d]>e[d]?-1:1)*_:m[d]=(u[d]>n[d]?-1:1)*_}}if(t!==o){const ne=d==="x"?"y":"x",_=a[d]===l[ne],M=s[ne]>u[ne],C=s[ne]<u[ne];(a[d]===1&&(!_&&M||_&&C)||a[d]!==1&&(!_&&C||_&&M))&&(p=d==="x"?T:X)}const U={x:s.x+y.x,y:s.y+y.y},A={x:u.x+m.x,y:u.y+m.y},E=Math.max(Math.abs(U.x-p[0].x),Math.abs(A.x-p[0].x)),ee=Math.max(Math.abs(U.y-p[0].y),Math.abs(A.y-p[0].y));E>=ee?(b=(U.x+A.x)/2,w=p[0].y):(b=p[0].x,w=(U.y+A.y)/2)}return[[e,{x:s.x+y.x,y:s.y+y.y},...p,{x:u.x+m.x,y:u.y+m.y},n],b,w,N,D]}function rf(e,t,n,o){const r=Math.min(Or(e,t)/2,Or(t,n)/2,o),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${i+r*u},${a}Q ${i},${a} ${i},${a+r*c}`}const l=e.x<n.x?1:-1,s=e.y<n.y?-1:1;return`L ${i},${a+r*s}Q ${i},${a} ${i+r*l},${a}`}function _o(e){const{sourceX:t,sourceY:n,sourcePosition:o=Y.Bottom,targetX:r,targetY:i,targetPosition:a=Y.Top,borderRadius:l=5,centerX:s,centerY:u,offset:c=20}=e,[d,h,p,b,w]=of({source:{x:t,y:n},sourcePosition:o,target:{x:r,y:i},targetPosition:a,center:{x:s,y:u},offset:c});return[d.reduce((m,g,S)=>{let N;return S>0&&S<d.length-1?N=rf(d[S-1],g,d[S+1],l):N=`${S===0?"M":"L"}${g.x} ${g.y}`,m+=N,m},""),h,p,b,w]}function af(e){const{sourceX:t,sourceY:n,targetX:o,targetY:r}=e,[i,a,l,s]=la({sourceX:t,sourceY:n,targetX:o,targetY:r});return[`M ${t},${n}L ${o},${r}`,i,a,l,s]}const lf=_e({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=af(e);return we(An,{path:n,labelX:o,labelY:r,...t,...e})}}}),sf=lf,uf=_e({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=_o({...e,sourcePosition:e.sourcePosition??Y.Bottom,targetPosition:e.targetPosition??Y.Top});return we(An,{path:n,labelX:o,labelY:r,...t,...e})}}}),da=uf,cf=_e({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>we(da,{...e,...t,borderRadius:0})}}),df=cf,ff=_e({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=ua({...e,sourcePosition:e.sourcePosition??Y.Bottom,targetPosition:e.targetPosition??Y.Top});return we(An,{path:n,labelX:o,labelY:r,...t,...e})}}}),hf=ff,pf=_e({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=ca({...e,sourcePosition:e.sourcePosition??Y.Bottom,targetPosition:e.targetPosition??Y.Top});return we(An,{path:n,labelX:o,labelY:r,...t,...e})}}}),gf=pf,vf={input:Wd,default:Xd,output:jd},mf={default:hf,straight:sf,step:df,smoothstep:da,simplebezier:gf};function yf(e,t,n){const o=ae(()=>w=>t.value.get(w)),r=ae(()=>w=>n.value.get(w)),i=ae(()=>{const w={...mf,...e.edgeTypes},y=Object.keys(w);for(const m of e.edges)m.type&&!y.includes(m.type)&&(w[m.type]=m.type);return w}),a=ae(()=>{const w={...vf,...e.nodeTypes},y=Object.keys(w);for(const m of e.nodes)m.type&&!y.includes(m.type)&&(w[m.type]=m.type);return w}),l=ae(()=>e.onlyRenderVisibleElements?Wi(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),s=ae(()=>{if(e.onlyRenderVisibleElements){const w=[];for(const y of e.edges){const m=t.value.get(y.source),g=t.value.get(y.target);wd({sourcePos:m.computedPosition||{x:0,y:0},targetPos:g.computedPosition||{x:0,y:0},sourceWidth:m.dimensions.width,sourceHeight:m.dimensions.height,targetWidth:g.dimensions.width,targetHeight:g.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&w.push(y)}return w}return e.edges}),u=ae(()=>[...l.value,...s.value]),c=ae(()=>{const w=[];for(const y of e.nodes)y.selected&&w.push(y);return w}),d=ae(()=>{const w=[];for(const y of e.edges)y.selected&&w.push(y);return w}),h=ae(()=>[...c.value,...d.value]),p=ae(()=>{const w=[];for(const y of e.nodes)y.dimensions.width&&y.dimensions.height&&y.handleBounds!==void 0&&w.push(y);return w}),b=ae(()=>l.value.length>0&&p.value.length===l.value.length);return{getNode:o,getEdge:r,getElements:u,getEdgeTypes:i,getNodeTypes:a,getEdges:s,getNodes:l,getSelectedElements:h,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:p,areNodesInitialized:b}}class dt{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=Wt())==null?void 0:t.appContext.app,o=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??dt.instance;return dt.instance=o??new dt,n&&(n.config.globalProperties.$vueFlowStorage=dt.instance),dt.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=aa(),r=Qa(o),i={};for(const[h,p]of Object.entries(r.hooks)){const b=`on${h.charAt(0).toUpperCase()+h.slice(1)}`;i[b]=p.on}const a={};for(const[h,p]of Object.entries(r.hooks))a[h]=p.trigger;const l=ae(()=>{const h=new Map;for(const p of r.nodes)h.set(p.id,p);return h}),s=ae(()=>{const h=new Map;for(const p of r.edges)h.set(p.id,p);return h}),u=yf(r,l,s),c=Gd(r,l,s);c.setState({...r,...n});const d={...i,...u,...c,...bl(r),nodeLookup:l,edgeLookup:s,emits:a,id:t,vueFlowVersion:"1.41.0",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function Se(e){const t=dt.getInstance(),n=ri(),o=typeof e=="object",r=o?e:{id:e},i=r.id,a=i??(n==null?void 0:n.vueFlowId);let l;if(n){const s=Tt(kr,null);typeof s<"u"&&s!==null&&(!a||s.id===a)&&(l=s)}if(l||a&&(l=t.get(a)),!l||a&&l.id!==a){const s=i??t.getId(),u=t.create(s,r);l=u,(n??ti(!0)).run(()=>{ye(u.applyDefault,(d,h,p)=>{const b=y=>{u.applyNodeChanges(y)},w=y=>{u.applyEdgeChanges(y)};d?(u.onNodesChange(b),u.onEdgesChange(w)):(u.hooks.value.nodesChange.off(b),u.hooks.value.edgesChange.off(w)),p(()=>{u.hooks.value.nodesChange.off(b),u.hooks.value.edgesChange.off(w)})},{immediate:!0}),Sn(()=>{if(l){const d=t.get(l.id);d?d.$destroy():On(`No store instance found for id ${l.id} in storage.`)}})})}else o&&l.setState(r);if(n&&(Ct(kr,l),n.vueFlowId=l.id),o){const s=Wt();(s==null?void 0:s.type.name)!=="VueFlow"&&l.emits.error(new Oe(Ce.USEVUEFLOW_OPTIONS))}return l}function wf(e){const{emits:t,dimensions:n}=Se();let o;et(()=>{const r=e.value,i=()=>{if(!r)return;const a=Mn(r);(a.width===0||a.height===0)&&t.error(new Oe(Ce.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:a.width||500,height:a.height||500}};i(),window.addEventListener("resize",i),r&&(o=new ResizeObserver(()=>i()),o.observe(r)),oi(()=>{window.removeEventListener("resize",i),o&&r&&o.unobserve(r)})})}const _f={name:"UserSelection",compatConfig:{MODE:3}},bf=_e({..._f,props:{userSelectionRect:{}},setup(e){return(t,n)=>(te(),ce("div",{class:"vue-flow__selection vue-flow__container",style:Ae({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),Ef=["tabIndex"],xf={name:"NodesSelection",compatConfig:{MODE:3}},Sf=_e({...xf,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:r,disableKeyboardA11y:i,userSelectionActive:a}=Se(),l=ia(),s=se(null),u=na({el:s,onStart(b){t.selectionDragStart(b)},onDrag(b){t.selectionDrag(b)},onStop(b){t.selectionDragStop(b)}});et(()=>{var b;i.value||(b=s.value)==null||b.focus({preventScroll:!0})});const c=ae(()=>ji(o.value)),d=ae(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function h(b){t.selectionContextMenu({event:b,nodes:o.value})}function p(b){i||kt[b.key]&&l({x:kt[b.key].x,y:kt[b.key].y},b.shiftKey)}return(b,w)=>!V(a)&&c.value.width&&c.value.height?(te(),ce("div",{key:0,class:gt(["vue-flow__nodesselection vue-flow__container",V(r)]),style:Ae({transform:`translate(${V(n).x}px,${V(n).y}px) scale(${V(n).zoom})`})},[Me("div",{ref_key:"el",ref:s,class:gt([{dragging:V(u)},"vue-flow__nodesselection-rect"]),style:Ae(d.value),tabIndex:V(i)?void 0:-1,onContextmenu:h,onKeydown:p},null,46,Ef)],6)):ze("",!0)}});function Nf(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const kf={name:"Pane",compatConfig:{MODE:3}},Cf=_e({...kf,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:r,userSelectionActive:i,removeSelectedElements:a,panOnDrag:l,userSelectionRect:s,elementsSelectable:u,nodesSelectionActive:c,getSelectedEdges:d,getSelectedNodes:h,removeNodes:p,removeEdges:b,selectionMode:w,deleteKeyCode:y,multiSelectionKeyCode:m,multiSelectionActive:g,edgeLookup:S,nodeLookup:N}=Se(),D=se(null),R=se(0),T=se(0),X=se(),U=se(new Map),A=xe(()=>u.value&&(e.isSelecting||i.value));let E=!1,ee=!1;const ne=Lt(y,{actInsideInputWithModifier:!1}),_=Lt(m);ye(ne,j=>{j&&(p(h.value),b(d.value),c.value=!1)}),ye(_,j=>{g.value=j});function M(j,L){return K=>{K.target===L&&(j==null||j(K))}}function C(){i.value=!1,s.value=null,R.value=0,T.value=0}function I(j){if(E){E=!1;return}r.paneClick(j),a(),c.value=!1}function O(j){var L;if(Array.isArray(l.value)&&((L=l.value)!=null&&L.includes(2))){j.preventDefault();return}r.paneContextMenu(j)}function $(j){r.paneScroll(j)}function B(j){var L,K,fe,ue,he;if(X.value=(L=t.value)==null?void 0:L.getBoundingClientRect(),!u.value||!e.isSelecting||j.button!==0||j.target!==D.value||!X.value)return;(fe=(K=j.target)==null?void 0:K.setPointerCapture)==null||fe.call(K,j.pointerId);const{x:re,y:le}=Nf(j,X.value);ee=!0,E=!1,U.value=new Map;for(const[Z,q]of S.value)U.value.set(q.source,((ue=U.value.get(q.source))==null?void 0:ue.add(Z))||new Set([Z])),U.value.set(q.target,((he=U.value.get(q.target))==null?void 0:he.add(Z))||new Set([Z]));a(),s.value={width:0,height:0,startX:re,startY:le,x:re,y:le},r.selectionStart(j)}function G(j){if(!X.value||!s.value)return;E=!0;const{x:L,y:K}=at(j,X.value),{startX:fe=0,startY:ue=0}=s.value,he={startX:fe,startY:ue,x:L<fe?L:fe,y:K<ue?K:ue,width:Math.abs(L-fe),height:Math.abs(K-ue)},re=Wi(n.value,he,o.value,w.value===To.Partial,!0),le=new Set,Z=new Set;for(const q of re){Z.add(q.id);const z=U.value.get(q.id);if(z)for(const f of z)le.add(f)}if(R.value!==Z.size){R.value=Z.size;const q=rt(N.value,Z,!0);r.nodesChange(q)}if(T.value!==le.size){T.value=le.size;const q=rt(S.value,le);r.edgesChange(q)}s.value=he,i.value=!0,c.value=!1}function oe(j){var L;j.button!==0||!ee||((L=j.target)==null||L.releasePointerCapture(j.pointerId),!i.value&&s.value&&j.target===D.value&&I(j),R.value>0&&(c.value=!0),C(),r.selectionEnd(j),e.selectionKeyPressed&&(E=!1),ee=!1)}return(j,L)=>(te(),ce("div",{ref_key:"container",ref:D,class:gt(["vue-flow__pane vue-flow__container",{selection:j.isSelecting}]),onClick:L[0]||(L[0]=K=>A.value?void 0:M(I,D.value)(K)),onContextmenu:L[1]||(L[1]=K=>M(O,D.value)(K)),onWheelPassive:L[2]||(L[2]=K=>M($,D.value)(K)),onPointerenter:L[3]||(L[3]=K=>A.value?void 0:V(r).paneMouseEnter(K)),onPointerdown:L[4]||(L[4]=K=>A.value?B(K):V(r).paneMouseMove(K)),onPointermove:L[5]||(L[5]=K=>A.value?G(K):V(r).paneMouseMove(K)),onPointerup:L[6]||(L[6]=K=>A.value?oe(K):void 0),onPointerleave:L[7]||(L[7]=K=>V(r).paneMouseLeave(K))},[lt(j.$slots,"default"),V(i)&&V(s)?(te(),$e(bf,{key:0,"user-selection-rect":V(s)},null,8,["user-selection-rect"])):ze("",!0),V(c)&&V(h).length?(te(),$e(Sf,{key:1})):ze("",!0)],34))}}),If={name:"Transform",compatConfig:{MODE:3}},Mf=_e({...If,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=Se(),r=ae(()=>n.value?!o.value:!1),i=ae(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(a,l)=>(te(),ce("div",{class:"vue-flow__transformationpane vue-flow__container",style:Ae({transform:i.value,opacity:r.value?0:void 0})},[lt(a.$slots,"default")],4))}}),Of={name:"Viewport",compatConfig:{MODE:3}},Tf=_e({...Of,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:r,zoomActivationKeyCode:i,selectionKeyCode:a,panActivationKeyCode:l,panOnScroll:s,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:h,zoomOnPinch:p,zoomOnScroll:b,preventScrolling:w,noWheelClassName:y,noPanClassName:m,emits:g,connectionStartHandle:S,userSelectionActive:N,paneDragging:D,d3Zoom:R,d3Selection:T,d3ZoomHandler:X,viewport:U,viewportRef:A,paneClickDistance:E}=Se();wf(A);const ee=se(!1),ne=se(!1);let _=null,M=!1,C=0,I={x:0,y:0,zoom:0};const O=Lt(l),$=Lt(a),B=Lt(i),G=xe(()=>!$.value&&(O.value||d.value)),oe=xe(()=>O.value||s.value),j=xe(()=>$.value||a.value===!0&&G.value!==!0);et(()=>{if(!A.value){On("Viewport element is missing");return}const re=A.value,le=re.getBoundingClientRect(),Z=nd().clickDistance(E.value).scaleExtent([t.value,n.value]).translateExtent(r.value),q=Le(re).call(Z),z=q.on("wheel.zoom"),f=Ot.translate(o.value.x??0,o.value.y??0).scale(wt(o.value.zoom??1,t.value,n.value)),v=[[0,0],[le.width,le.height]],k=Z.constrain()(f,v,r.value);Z.transform(q,k),Z.wheelDelta(K),R.value=Z,T.value=q,X.value=z,U.value={x:k.x,y:k.y,zoom:k.k},Z.on("start",x=>{var P;if(!x.sourceEvent)return null;C=x.sourceEvent.button,ee.value=!0;const Q=ue(x.transform);((P=x.sourceEvent)==null?void 0:P.type)==="mousedown"&&(D.value=!0),I=Q,g.viewportChangeStart(Q),g.moveStart({event:x,flowTransform:Q})}),Z.on("end",x=>{if(!x.sourceEvent)return null;if(ee.value=!1,D.value=!1,L(G.value,C??0)&&!M&&g.paneContextMenu(x.sourceEvent),M=!1,fe(I,x.transform)){const P=ue(x.transform);I=P,g.viewportChangeEnd(P),g.moveEnd({event:x,flowTransform:P})}}),Z.filter(x=>{var P,Q,W;const ie=B.value||b.value,de=p.value&&x.ctrlKey,ge=x.button;if((G.value===!0||Array.isArray(G.value)&&G.value.includes(1))&&ge===1&&x.type==="mousedown"&&((P=x.target)!=null&&P.closest(".vue-flow__node")||(Q=x.target)!=null&&Q.closest(".vue-flow__edge")))return!0;if(!G.value&&!ie&&!oe.value&&!h.value&&!p.value||N.value||!h.value&&x.type==="dblclick"||he(x,y.value)&&x.type==="wheel"||he(x,m.value)&&(x.type!=="wheel"||oe.value&&x.type==="wheel"&&!B.value)||!p.value&&x.ctrlKey&&x.type==="wheel"||!ie&&!oe.value&&!de&&x.type==="wheel")return!1;if(!p&&x.type==="touchstart"&&((W=x.touches)==null?void 0:W.length)>1)return x.preventDefault(),!1;if(!G.value&&(x.type==="mousedown"||x.type==="touchstart")||Array.isArray(G.value)&&!G.value.includes(ge)&&(x.type==="mousedown"||x.type==="touchstart"))return!1;const ve=Array.isArray(G.value)&&G.value.includes(ge)||!ge||ge<=1;return(!x.ctrlKey||x.type==="wheel")&&ve}),ye([N,G],()=>{N.value&&!ee.value?Z.on("zoom",null):N.value||Z.on("zoom",x=>{U.value={x:x.transform.x,y:x.transform.y,zoom:x.transform.k};const P=ue(x.transform);M=L(G.value,C??0),g.viewportChange(P),g.move({event:x,flowTransform:P})})},{immediate:!0}),ye([N,oe,u,B,p,w,y],()=>{oe.value&&!B.value&&!N.value?q.on("wheel.zoom",x=>{if(he(x,y.value))return!1;const P=B.value||b.value,Q=p.value&&x.ctrlKey;if(!(!w.value||oe.value||P||Q))return!1;x.preventDefault(),x.stopImmediatePropagation();const ie=q.property("__zoom").k||1,de=_n();if(x.ctrlKey&&p.value&&de){const Xa=Ye(x),ja=K(x),Wa=ie*2**ja;Z.scaleTo(q,Wa,Xa,x);return}const ge=x.deltaMode===1?20:1;let ve=u.value===Bt.Vertical?0:x.deltaX*ge,be=u.value===Bt.Horizontal?0:x.deltaY*ge;!de&&x.shiftKey&&u.value!==Bt.Vertical&&!ve&&be&&(ve=be,be=0),Z.translateBy(q,-(ve/ie)*c.value,-(be/ie)*c.value);const bt=ue(q.property("__zoom"));_&&clearTimeout(_),ne.value?(g.move({event:x,flowTransform:bt}),g.viewportChange(bt),_=setTimeout(()=>{g.moveEnd({event:x,flowTransform:bt}),g.viewportChangeEnd(bt),ne.value=!1},150)):(ne.value=!0,g.moveStart({event:x,flowTransform:bt}),g.viewportChangeStart(bt))},{passive:!1}):typeof z<"u"&&q.on("wheel.zoom",function(x,P){const Q=!w.value&&x.type==="wheel"&&!x.ctrlKey,W=B.value||b.value,ie=p.value&&x.ctrlKey;if(!W&&!s.value&&!ie&&x.type==="wheel"||Q||he(x,y.value))return null;x.preventDefault(),z.call(this,x,P)},{passive:!1})},{immediate:!0})});function L(re,le){return le===2&&Array.isArray(re)&&re.includes(2)}function K(re){const le=re.ctrlKey&&_n()?10:1;return-re.deltaY*(re.deltaMode===1?.05:re.deltaMode?1:.002)*le}function fe(re,le){return re.x!==le.x&&!Number.isNaN(le.x)||re.y!==le.y&&!Number.isNaN(le.y)||re.zoom!==le.k&&!Number.isNaN(le.k)}function ue(re){return{x:re.x,y:re.y,zoom:re.k}}function he(re,le){return re.target.closest(`.${le}`)}return(re,le)=>(te(),ce("div",{ref_key:"viewportRef",ref:A,class:"vue-flow__viewport vue-flow__container"},[H(Cf,{"is-selecting":j.value,"selection-key-pressed":V($),class:gt({connecting:!!V(S),dragging:V(D),draggable:V(d)===!0||Array.isArray(V(d))&&V(d).includes(0)})},{default:J(()=>[H(Mf,null,{default:J(()=>[lt(re.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),$f=["id"],Pf=["id"],Df=["id"],Af={name:"A11yDescriptions",compatConfig:{MODE:3}},Vf=_e({...Af,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Se();return(r,i)=>(te(),ce(Re,null,[Me("div",{id:`${V(Ri)}-${V(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+Te(V(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,$f),Me("div",{id:`${V(zi)}-${V(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Pf),V(n)?ze("",!0):(te(),ce("div",{key:0,id:`${V(ad)}-${V(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},Te(V(o)),9,Df))],64))}});function Rf(){const e=Se();ye(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function zf(e,t,n){return n===Y.Left?e-t:n===Y.Right?e+t:e}function Bf(e,t,n){return n===Y.Top?e-t:n===Y.Bottom?e+t:e}const Ao=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=Y.Top,type:r}){return we("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${r}`,cx:zf(t,e,o),cy:Bf(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};Ao.props=["radius","centerX","centerY","position","type"];Ao.compatConfig={MODE:3};const Tr=Ao,Lf=_e({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:r,emits:i,nodesSelectionActive:a,noPanClassName:l,getEdgeTypes:s,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:h,multiSelectionActive:p,disableKeyboardA11y:b,elementsSelectable:w,edgesUpdatable:y,edgesFocusable:m}=Se(),g=ae(()=>c(e.id)),S=Td(g.value,i),N=Tt(Tn),D=Wt(),R=se(!1),T=se(!1),X=se(""),U=se(null),A=se("source"),E=se(null),ee=xe(()=>typeof g.value.selectable>"u"?w.value:g.value.selectable),ne=xe(()=>typeof g.value.updatable>"u"?y.value:g.value.updatable),_=xe(()=>typeof g.value.focusable>"u"?m.value:g.value.focusable);Ct(Id,e.id),Ct(Md,E);const M=ae(()=>g.value.class instanceof Function?g.value.class(g.value):g.value.class),C=ae(()=>g.value.style instanceof Function?g.value.style(g.value):g.value.style),I=ae(()=>{const z=g.value.type||"default",f=N==null?void 0:N[`edge-${z}`];if(f)return f;let v=g.value.template??s.value[z];if(typeof v=="string"&&D){const k=Object.keys(D.appContext.components);k&&k.includes(z)&&(v=me(z,!1))}return v&&typeof v!="string"?v:(i.error(new Oe(Ce.EDGE_TYPE_MISSING,v)),!1)}),{handlePointerDown:O}=oa({nodeId:X,handleId:U,type:A,isValidConnection:h,edgeUpdaterType:A,onEdgeUpdate:G,onEdgeUpdateEnd:oe});return()=>{const z=d(g.value.source),f=d(g.value.target),v="pathOptions"in g.value?g.value.pathOptions:{};if(!z&&!f)return i.error(new Oe(Ce.EDGE_SOURCE_TARGET_MISSING,g.value.id,g.value.source,g.value.target)),null;if(!z)return i.error(new Oe(Ce.EDGE_SOURCE_MISSING,g.value.id,g.value.source)),null;if(!f)return i.error(new Oe(Ce.EDGE_TARGET_MISSING,g.value.id,g.value.target)),null;if(!g.value||g.value.hidden||z.hidden||f.hidden)return null;let k;o.value===yt.Strict?k=z.handleBounds.source:k=[...z.handleBounds.source||[],...z.handleBounds.target||[]];const x=yr(k,g.value.sourceHandle);let P;o.value===yt.Strict?P=f.handleBounds.target:P=[...f.handleBounds.target||[],...f.handleBounds.source||[]];const Q=yr(P,g.value.targetHandle),W=(x==null?void 0:x.position)||Y.Bottom,ie=(Q==null?void 0:Q.position)||Y.Top,{x:de,y:ge}=wn(z,x,W),{x:ve,y:be}=wn(f,Q,ie);return g.value.sourceX=de,g.value.sourceY=ge,g.value.targetX=ve,g.value.targetY=be,we("g",{ref:E,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${I.value===!1?"default":g.value.type||"default"}`,l.value,M.value,{updating:R.value,selected:g.value.selected,animated:g.value.animated,inactive:!ee.value}],onClick:L,onContextmenu:K,onDblclick:fe,onMouseenter:ue,onMousemove:he,onMouseleave:re,onKeyDown:_.value?q:void 0,tabIndex:_.value?0:void 0,"aria-label":g.value.ariaLabel===null?void 0:g.value.ariaLabel||`Edge from ${g.value.source} to ${g.value.target}`,"aria-describedby":_.value?`${zi}-${t}`:void 0,role:_.value?"button":"img"},[T.value?null:we(I.value===!1?s.value.default:I.value,{id:e.id,sourceNode:z,targetNode:f,source:g.value.source,target:g.value.target,type:g.value.type,updatable:ne.value,selected:g.value.selected,animated:g.value.animated,label:g.value.label,labelStyle:g.value.labelStyle,labelShowBg:g.value.labelShowBg,labelBgStyle:g.value.labelBgStyle,labelBgPadding:g.value.labelBgPadding,labelBgBorderRadius:g.value.labelBgBorderRadius,data:g.value.data,events:{...g.value.events,...S.on},style:C.value,markerStart:`url('#${jt(g.value.markerStart,t)}')`,markerEnd:`url('#${jt(g.value.markerEnd,t)}')`,sourcePosition:W,targetPosition:ie,sourceX:de,sourceY:ge,targetX:ve,targetY:be,sourceHandleId:g.value.sourceHandle,targetHandleId:g.value.targetHandle,interactionWidth:g.value.interactionWidth,...v}),[ne.value==="source"||ne.value===!0?[we("g",{onMousedown:le,onMouseenter:$,onMouseout:B},we(Tr,{position:W,centerX:de,centerY:ge,radius:r.value,type:"source","data-type":"source"}))]:null,ne.value==="target"||ne.value===!0?[we("g",{onMousedown:Z,onMouseenter:$,onMouseout:B},we(Tr,{position:ie,centerX:ve,centerY:be,radius:r.value,type:"target","data-type":"target"}))]:null]])};function $(){R.value=!0}function B(){R.value=!1}function G(z,f){S.emit.update({event:z,edge:g.value,connection:f})}function oe(z){S.emit.updateEnd({event:z,edge:g.value}),T.value=!1}function j(z,f){z.button===0&&(T.value=!0,X.value=f?g.value.target:g.value.source,U.value=(f?g.value.targetHandle:g.value.sourceHandle)??"",A.value=f?"target":"source",S.emit.updateStart({event:z,edge:g.value}),O(z))}function L(z){var f;const v={event:z,edge:g.value};ee.value&&(a.value=!1,g.value.selected&&p.value?(u([g.value]),(f=E.value)==null||f.blur()):n([g.value])),S.emit.click(v)}function K(z){S.emit.contextMenu({event:z,edge:g.value})}function fe(z){S.emit.doubleClick({event:z,edge:g.value})}function ue(z){S.emit.mouseEnter({event:z,edge:g.value})}function he(z){S.emit.mouseMove({event:z,edge:g.value})}function re(z){S.emit.mouseLeave({event:z,edge:g.value})}function le(z){j(z,!0)}function Z(z){j(z,!1)}function q(z){var f;!b.value&&Bi.includes(z.key)&&ee.value&&(z.key==="Escape"?((f=E.value)==null||f.blur(),u([c(e.id)])):n([c(e.id)]))}}}),Ff=Lf,Gf={[Y.Left]:Y.Right,[Y.Right]:Y.Left,[Y.Top]:Y.Bottom,[Y.Bottom]:Y.Top},Hf=_e({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:r,connectionPosition:i,connectionLineType:a,connectionLineStyle:l,connectionLineOptions:s,connectionStatus:u,viewport:c,findNode:d}=Se(),h=(e=Tt(Tn))==null?void 0:e["connection-line"],p=ae(()=>{var g;return d((g=o.value)==null?void 0:g.nodeId)}),b=ae(()=>{var g;return d((g=r.value)==null?void 0:g.nodeId)??null}),w=ae(()=>({x:(i.value.x-c.value.x)/c.value.zoom,y:(i.value.y-c.value.y)/c.value.zoom})),y=ae(()=>s.value.markerStart?`url(#${jt(s.value.markerStart,t)})`:""),m=ae(()=>s.value.markerEnd?`url(#${jt(s.value.markerEnd,t)})`:"");return()=>{var g,S,N,D;if(!p.value||!o.value)return null;const R=o.value.handleId,T=o.value.type,X=p.value.handleBounds;let U=X==null?void 0:X[T];if(n.value===yt.Loose&&(U=U||(X==null?void 0:X[T==="source"?"target":"source"])),!U)return null;const A=(R?U.find($=>$.id===R):U[0])??null,E=(A==null?void 0:A.position)||Y.Top,{x:ee,y:ne}=wn(p.value,A,E);let _=null;b.value&&((g=r.value)!=null&&g.handleId)&&(n.value===yt.Strict?_=((S=b.value.handleBounds[T==="source"?"target":"source"])==null?void 0:S.find($=>{var B;return $.id===((B=r.value)==null?void 0:B.handleId)}))||null:_=((N=[...b.value.handleBounds.source||[],...b.value.handleBounds.target||[]])==null?void 0:N.find($=>{var B;return $.id===((B=r.value)==null?void 0:B.handleId)}))||null);const M=((D=r.value)==null?void 0:D.position)??(E?Gf[E]:null);if(!E||!M)return null;const C=a.value??s.value.type??ct.Bezier;let I="";const O={sourceX:ee,sourceY:ne,sourcePosition:E,targetX:w.value.x,targetY:w.value.y,targetPosition:M};return C===ct.Bezier?[I]=ua(O):C===ct.Step?[I]=_o({...O,borderRadius:0}):C===ct.SmoothStep?[I]=_o(O):C===ct.SimpleBezier?[I]=ca(O):I=`M${ee},${ne} ${w.value.x},${w.value.y}`,we("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},we("g",{class:"vue-flow__connection"},h?we(h,{sourceX:ee,sourceY:ne,sourcePosition:E,targetX:w.value.x,targetY:w.value.y,targetPosition:M,sourceNode:p.value,sourceHandle:A,targetNode:b.value,targetHandle:_,markerEnd:m.value,markerStart:y.value,connectionStatus:u.value}):we("path",{d:I,class:[s.value.class,u,"vue-flow__connection-path"],style:{...l.value,...s.value.style},"marker-end":m.value,"marker-start":y.value})))}}}),Yf=Hf,Xf=["id","markerWidth","markerHeight","markerUnits","orient"],jf={name:"MarkerType",compatConfig:{MODE:3}},Wf=_e({...jf,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(te(),ce("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===V(go).ArrowClosed?(te(),ce("polyline",{key:0,style:Ae({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):ze("",!0),t.type===V(go).Arrow?(te(),ce("polyline",{key:1,style:Ae({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):ze("",!0)],8,Xf))}}),Uf={class:"vue-flow__marker vue-flow__container"},Zf={name:"MarkerDefinitions",compatConfig:{MODE:3}},Kf=_e({...Zf,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:r}=Se(),i=ae(()=>{const a=new Set,l=[],s=u=>{if(u){const c=jt(u,t);a.has(c)||(typeof u=="object"?l.push({...u,id:c,color:u.color||r.value}):l.push({id:c,color:r.value,type:u}),a.add(c))}};for(const u of[o.value.markerEnd,o.value.markerStart])s(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])s(c);return l.sort((u,c)=>u.id.localeCompare(c.id))});return(a,l)=>(te(),ce("svg",Uf,[Me("defs",null,[(te(!0),ce(Re,null,vt(i.value,s=>(te(),$e(Wf,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,"stroke-width":s.strokeWidth,orient:s.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),qf={name:"Edges",compatConfig:{MODE:3}},Qf=_e({...qf,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=Se();return(r,i)=>(te(),ce(Re,null,[H(Kf),(te(!0),ce(Re,null,vt(V(n),a=>(te(),ce("svg",{key:a.id,class:"vue-flow__edges vue-flow__container",style:Ae({zIndex:V(_d)(a,V(t),V(o))})},[H(V(Ff),{id:a.id},null,8,["id"])],4))),128)),H(V(Yf))],64))}}),Jf=_e({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:r,multiSelectionActive:i,emits:a,removeSelectedNodes:l,addSelectedNodes:s,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:h,elevateNodesOnSelect:p,disableKeyboardA11y:b,ariaLiveMessage:w,snapToGrid:y,snapGrid:m,nodeDragThreshold:g,nodesDraggable:S,elementsSelectable:N,nodesConnectable:D,nodesFocusable:R}=Se(),T=se(null);Ct(ta,T),Ct(ea,e.id);const X=Tt(Tn),U=Wt(),A=ia(),{node:E,parentNode:ee}=ra(e.id),ne=xe(()=>typeof E.draggable>"u"?S.value:E.draggable),_=xe(()=>typeof E.selectable>"u"?N.value:E.selectable),M=xe(()=>typeof E.connectable>"u"?D.value:E.connectable),C=xe(()=>typeof E.focusable>"u"?R.value:E.focusable),I=xe(()=>!!E.dimensions.width&&!!E.dimensions.height),O=ae(()=>{const f=E.type||"default",v=X==null?void 0:X[`node-${f}`];if(v)return v;let k=E.template||d.value[f];if(typeof k=="string"&&U){const x=Object.keys(U.appContext.components);x&&x.includes(f)&&(k=me(f,!1))}return k&&typeof k!="string"?k:(a.error(new Oe(Ce.NODE_TYPE_MISSING,k)),!1)}),{emit:$,on:B}=Ad(E,a),G=na({id:e.id,el:T,disabled:()=>!ne.value,selectable:_,dragHandle:()=>E.dragHandle,onStart(f){$.dragStart(f)},onDrag(f){$.drag(f)},onStop(f){$.dragStop(f)},onClick(f){q(f)}}),oe=ae(()=>E.class instanceof Function?E.class(E):E.class),j=ae(()=>{const f=(E.style instanceof Function?E.style(E):E.style)||{},v=E.width instanceof Function?E.width(E):E.width,k=E.height instanceof Function?E.height(E):E.height;return v&&(f.width=typeof v=="string"?v:`${v}px`),k&&(f.height=typeof k=="string"?k:`${k}px`),f}),L=xe(()=>Number(E.zIndex??j.value.zIndex??0));return c(f=>{(f.includes(e.id)||!f.length)&&fe()}),et(()=>{ye(()=>E.hidden,(f=!1,v,k)=>{!f&&T.value&&(e.resizeObserver.observe(T.value),k(()=>{T.value&&e.resizeObserver.unobserve(T.value)}))},{immediate:!0,flush:"post"})}),ye([()=>E.type,()=>E.sourcePosition,()=>E.targetPosition],()=>{Qe(()=>{u([{id:e.id,nodeElement:T.value,forceUpdate:!0}])})}),ye([()=>E.position.x,()=>E.position.y,()=>{var f;return(f=ee.value)==null?void 0:f.computedPosition.x},()=>{var f;return(f=ee.value)==null?void 0:f.computedPosition.y},()=>{var f;return(f=ee.value)==null?void 0:f.computedPosition.z},L,()=>E.selected,()=>E.dimensions.height,()=>E.dimensions.width,()=>{var f;return(f=ee.value)==null?void 0:f.dimensions.height},()=>{var f;return(f=ee.value)==null?void 0:f.dimensions.width}],([f,v,k,x,P,Q])=>{const W={x:f,y:v,z:Q+(p.value&&E.selected?1e3:0)};typeof k<"u"&&typeof x<"u"?E.computedPosition=pd({x:k,y:x,z:P},W):E.computedPosition=W},{flush:"post",immediate:!0}),ye([()=>E.extent,h],([f,v],[k,x])=>{(f!==k||v!==x)&&K()}),E.extent==="parent"||typeof E.extent=="object"&&"range"in E.extent&&E.extent.range==="parent"?io(()=>I).toBe(!0).then(K):K(),()=>E.hidden?null:we("div",{ref:T,"data-id":E.id,class:["vue-flow__node",`vue-flow__node-${O.value===!1?"default":E.type||"default"}`,{[n.value]:ne.value,dragging:G==null?void 0:G.value,draggable:ne.value,selected:E.selected,selectable:_.value,parent:E.isParent},oe.value],style:{visibility:I.value?"visible":"hidden",zIndex:E.computedPosition.z??L.value,transform:`translate(${E.computedPosition.x}px,${E.computedPosition.y}px)`,pointerEvents:_.value||ne.value?"all":"none",...j.value},tabIndex:C.value?0:void 0,role:C.value?"button":void 0,"aria-describedby":b.value?void 0:`${Ri}-${t}`,"aria-label":E.ariaLabel,onMouseenter:ue,onMousemove:he,onMouseleave:re,onContextmenu:le,onClick:q,onDblclick:Z,onKeydown:z},[we(O.value===!1?d.value.default:O.value,{id:E.id,type:E.type,data:E.data,events:{...E.events,...B},selected:E.selected,resizing:E.resizing,dragging:G.value,connectable:M.value,position:E.computedPosition,dimensions:E.dimensions,isValidTargetPos:E.isValidTargetPos,isValidSourcePos:E.isValidSourcePos,parent:E.parentNode,parentNodeId:E.parentNode,zIndex:E.computedPosition.z??L.value,targetPosition:E.targetPosition,sourcePosition:E.sourcePosition,label:E.label,dragHandle:E.dragHandle,onUpdateNodeInternals:fe})]);function K(){const f=E.computedPosition;y.value&&(f.x=m.value[0]*Math.round(f.x/m.value[0]),f.y=m.value[1]*Math.round(f.y/m.value[1]));const{computedPosition:v,position:k}=$o(E,f,a.error,h.value,ee.value);(E.computedPosition.x!==v.x||E.computedPosition.y!==v.y)&&(E.computedPosition={...E.computedPosition,...v}),(E.position.x!==k.x||E.position.y!==k.y)&&(E.position=k)}function fe(){T.value&&u([{id:e.id,nodeElement:T.value,forceUpdate:!0}])}function ue(f){G!=null&&G.value||$.mouseEnter({event:f,node:E})}function he(f){G!=null&&G.value||$.mouseMove({event:f,node:E})}function re(f){G!=null&&G.value||$.mouseLeave({event:f,node:E})}function le(f){return $.contextMenu({event:f,node:E})}function Z(f){return $.doubleClick({event:f,node:E})}function q(f){_.value&&(!o.value||!ne.value||g.value>0)&&wo(E,i.value,s,l,r,!1,T.value),$.click({event:f,node:E})}function z(f){if(!(vo(f)||b.value))if(Bi.includes(f.key)&&_.value){const v=f.key==="Escape";wo(E,i.value,s,l,r,v,T.value)}else ne.value&&E.selected&&kt[f.key]&&(w.value=`Moved selected node ${f.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~E.position.x}, y: ${~~E.position.y}`,A({x:kt[f.key].x,y:kt[f.key].y},f.shiftKey))}}}),eh=Jf;function th(e={includeHiddenNodes:!1}){const{nodes:t}=Se();return ae(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const nh={class:"vue-flow__nodes vue-flow__container"},oh={name:"Nodes",compatConfig:{MODE:3}},rh=_e({...oh,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=Se(),r=th(),i=se();return ye(r,a=>{a&&Qe(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),et(()=>{i.value=new ResizeObserver(a=>{const l=a.map(s=>({id:s.target.getAttribute("data-id"),nodeElement:s.target,forceUpdate:!0}));Qe(()=>n(l))})}),oi(()=>{var a;return(a=i.value)==null?void 0:a.disconnect()}),(a,l)=>(te(),ce("div",nh,[i.value?(te(!0),ce(Re,{key:0},vt(V(t),(s,u,c,d)=>{const h=[s.id];if(d&&d.key===s.id&&Ja(d,h))return d;const p=(te(),$e(V(eh),{id:s.id,key:s.id,"resize-observer":i.value},null,8,["id","resize-observer"]));return p.memo=h,p},l,0),128)):ze("",!0)]))}});function ih(){const{emits:e}=Se();et(()=>{if(Ji()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new Oe(Ce.MISSING_STYLES))}})}const ah=Me("div",{class:"vue-flow__edge-labels"},null,-1),lh={name:"VueFlow",compatConfig:{MODE:3}},sh=_e({...lh,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,r=Ka(),i=zn(o,"modelValue",n),a=zn(o,"nodes",n),l=zn(o,"edges",n),s=Se(o),u=zd({modelValue:i,nodes:a,edges:l},o,s);return Ld(n,s.hooks),Rf(),ih(),Ct(Tn,r),ei(()=>{u()}),t(s),(c,d)=>(te(),ce("div",{ref:V(s).vueFlowRef,class:"vue-flow"},[H(Tf,null,{default:J(()=>[H(Qf),ah,H(rh),lt(c.$slots,"zoom-pane")]),_:3}),lt(c.$slots,"default"),H(Vf)],512))}});var uh="\0",ut="\0",$r="";let ch=class{constructor(t){Ee(this,"_isDirected",!0);Ee(this,"_isMultigraph",!1);Ee(this,"_isCompound",!1);Ee(this,"_label");Ee(this,"_defaultNodeLabelFn",()=>{});Ee(this,"_defaultEdgeLabelFn",()=>{});Ee(this,"_nodes",{});Ee(this,"_in",{});Ee(this,"_preds",{});Ee(this,"_out",{});Ee(this,"_sucs",{});Ee(this,"_edgeObjs",{});Ee(this,"_edgeLabels",{});Ee(this,"_nodeCount",0);Ee(this,"_edgeCount",0);Ee(this,"_parent");Ee(this,"_children");t&&(this._isDirected=Object.hasOwn(t,"directed")?t.directed:!0,this._isMultigraph=Object.hasOwn(t,"multigraph")?t.multigraph:!1,this._isCompound=Object.hasOwn(t,"compound")?t.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[ut]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return this._defaultNodeLabelFn=t,typeof t!="function"&&(this._defaultNodeLabelFn=()=>t),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var t=this;return this.nodes().filter(n=>Object.keys(t._in[n]).length===0)}sinks(){var t=this;return this.nodes().filter(n=>Object.keys(t._out[n]).length===0)}setNodes(t,n){var o=arguments,r=this;return t.forEach(function(i){o.length>1?r.setNode(i,n):r.setNode(i)}),this}setNode(t,n){return Object.hasOwn(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=n),this):(this._nodes[t]=arguments.length>1?n:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=ut,this._children[t]={},this._children[ut][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}node(t){return this._nodes[t]}hasNode(t){return Object.hasOwn(this._nodes,t)}removeNode(t){var n=this;if(Object.hasOwn(this._nodes,t)){var o=r=>n.removeEdge(n._edgeObjs[r]);delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],this.children(t).forEach(function(r){n.setParent(r)}),delete this._children[t]),Object.keys(this._in[t]).forEach(o),delete this._in[t],delete this._preds[t],Object.keys(this._out[t]).forEach(o),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n===void 0)n=ut;else{n+="";for(var o=n;o!==void 0;o=this.parent(o))if(o===t)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");this.setNode(n)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=n,this._children[n][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var n=this._parent[t];if(n!==ut)return n}}children(t=ut){if(this._isCompound){var n=this._children[t];if(n)return Object.keys(n)}else{if(t===ut)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var n=this._preds[t];if(n)return Object.keys(n)}successors(t){var n=this._sucs[t];if(n)return Object.keys(n)}neighbors(t){var n=this.predecessors(t);if(n){const r=new Set(n);for(var o of this.successors(t))r.add(o);return Array.from(r.values())}}isLeaf(t){var n;return this.isDirected()?n=this.successors(t):n=this.neighbors(t),n.length===0}filterNodes(t){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var o=this;Object.entries(this._nodes).forEach(function([a,l]){t(a)&&n.setNode(a,l)}),Object.values(this._edgeObjs).forEach(function(a){n.hasNode(a.v)&&n.hasNode(a.w)&&n.setEdge(a,o.edge(a))});var r={};function i(a){var l=o.parent(a);return l===void 0||n.hasNode(l)?(r[a]=l,l):l in r?r[l]:i(l)}return this._isCompound&&n.nodes().forEach(a=>n.setParent(a,i(a))),n}setDefaultEdgeLabel(t){return this._defaultEdgeLabelFn=t,typeof t!="function"&&(this._defaultEdgeLabelFn=()=>t),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(t,n){var o=this,r=arguments;return t.reduce(function(i,a){return r.length>1?o.setEdge(i,a,n):o.setEdge(i,a),a}),this}setEdge(){var t,n,o,r,i=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(t=a.v,n=a.w,o=a.name,arguments.length===2&&(r=arguments[1],i=!0)):(t=a,n=arguments[1],o=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),t=""+t,n=""+n,o!==void 0&&(o=""+o);var l=zt(this._isDirected,t,n,o);if(Object.hasOwn(this._edgeLabels,l))return i&&(this._edgeLabels[l]=r),this;if(o!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(n),this._edgeLabels[l]=i?r:this._defaultEdgeLabelFn(t,n,o);var s=dh(this._isDirected,t,n,o);return t=s.v,n=s.w,Object.freeze(s),this._edgeObjs[l]=s,Pr(this._preds[n],t),Pr(this._sucs[t],n),this._in[n][l]=s,this._out[t][l]=s,this._edgeCount++,this}edge(t,n,o){var r=arguments.length===1?Un(this._isDirected,arguments[0]):zt(this._isDirected,t,n,o);return this._edgeLabels[r]}edgeAsObj(){const t=this.edge(...arguments);return typeof t!="object"?{label:t}:t}hasEdge(t,n,o){var r=arguments.length===1?Un(this._isDirected,arguments[0]):zt(this._isDirected,t,n,o);return Object.hasOwn(this._edgeLabels,r)}removeEdge(t,n,o){var r=arguments.length===1?Un(this._isDirected,arguments[0]):zt(this._isDirected,t,n,o),i=this._edgeObjs[r];return i&&(t=i.v,n=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],Dr(this._preds[n],t),Dr(this._sucs[t],n),delete this._in[n][r],delete this._out[t][r],this._edgeCount--),this}inEdges(t,n){var o=this._in[t];if(o){var r=Object.values(o);return n?r.filter(i=>i.v===n):r}}outEdges(t,n){var o=this._out[t];if(o){var r=Object.values(o);return n?r.filter(i=>i.w===n):r}}nodeEdges(t,n){var o=this.inEdges(t,n);if(o)return o.concat(this.outEdges(t,n))}};function Pr(e,t){e[t]?e[t]++:e[t]=1}function Dr(e,t){--e[t]||delete e[t]}function zt(e,t,n,o){var r=""+t,i=""+n;if(!e&&r>i){var a=r;r=i,i=a}return r+$r+i+$r+(o===void 0?uh:o)}function dh(e,t,n,o){var r=""+t,i=""+n;if(!e&&r>i){var a=r;r=i,i=a}var l={v:r,w:i};return o&&(l.name=o),l}function Un(e,t){return zt(e,t.v,t.w,t.name)}var Vo=ch,fh="2.2.4",hh={Graph:Vo,version:fh},ph=Vo,gh={write:vh,read:wh};function vh(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:mh(e),edges:yh(e)};return e.graph()!==void 0&&(t.value=structuredClone(e.graph())),t}function mh(e){return e.nodes().map(function(t){var n=e.node(t),o=e.parent(t),r={v:t};return n!==void 0&&(r.value=n),o!==void 0&&(r.parent=o),r})}function yh(e){return e.edges().map(function(t){var n=e.edge(t),o={v:t.v,w:t.w};return t.name!==void 0&&(o.name=t.name),n!==void 0&&(o.value=n),o})}function wh(e){var t=new ph(e.options).setGraph(e.value);return e.nodes.forEach(function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),e.edges.forEach(function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}var _h=bh;function bh(e){var t={},n=[],o;function r(i){Object.hasOwn(t,i)||(t[i]=!0,o.push(i),e.successors(i).forEach(r),e.predecessors(i).forEach(r))}return e.nodes().forEach(function(i){o=[],r(i),o.length&&n.push(o)}),n}let Eh=class{constructor(){Ee(this,"_arr",[]);Ee(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(t){return t.key})}has(t){return Object.hasOwn(this._keyIndices,t)}priority(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(t,n){var o=this._keyIndices;if(t=String(t),!Object.hasOwn(o,t)){var r=this._arr,i=r.length;return o[t]=i,r.push({key:t,priority:n}),this._decrease(i),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key}decrease(t,n){var o=this._keyIndices[t];if(n>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[o].priority+" New: "+n);this._arr[o].priority=n,this._decrease(o)}_heapify(t){var n=this._arr,o=2*t,r=o+1,i=t;o<n.length&&(i=n[o].priority<n[i].priority?o:i,r<n.length&&(i=n[r].priority<n[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))}_decrease(t){for(var n=this._arr,o=n[t].priority,r;t!==0&&(r=t>>1,!(n[r].priority<o));)this._swap(t,r),t=r}_swap(t,n){var o=this._arr,r=this._keyIndices,i=o[t],a=o[n];o[t]=a,o[n]=i,r[a.key]=t,r[i.key]=n}};var fa=Eh,xh=fa,ha=Nh,Sh=()=>1;function Nh(e,t,n,o){return kh(e,String(t),n||Sh,o||function(r){return e.outEdges(r)})}function kh(e,t,n,o){var r={},i=new xh,a,l,s=function(u){var c=u.v!==a?u.v:u.w,d=r[c],h=n(u),p=l.distance+h;if(h<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+u+" Weight: "+h);p<d.distance&&(d.distance=p,d.predecessor=a,i.decrease(c,p))};for(e.nodes().forEach(function(u){var c=u===t?0:Number.POSITIVE_INFINITY;r[u]={distance:c},i.add(u,c)});i.size()>0&&(a=i.removeMin(),l=r[a],l.distance!==Number.POSITIVE_INFINITY);)o(a).forEach(s);return r}var Ch=ha,Ih=Mh;function Mh(e,t,n){return e.nodes().reduce(function(o,r){return o[r]=Ch(e,r,t,n),o},{})}var pa=Oh;function Oh(e){var t=0,n=[],o={},r=[];function i(a){var l=o[a]={onStack:!0,lowlink:t,index:t++};if(n.push(a),e.successors(a).forEach(function(c){Object.hasOwn(o,c)?o[c].onStack&&(l.lowlink=Math.min(l.lowlink,o[c].index)):(i(c),l.lowlink=Math.min(l.lowlink,o[c].lowlink))}),l.lowlink===l.index){var s=[],u;do u=n.pop(),o[u].onStack=!1,s.push(u);while(a!==u);r.push(s)}}return e.nodes().forEach(function(a){Object.hasOwn(o,a)||i(a)}),r}var Th=pa,$h=Ph;function Ph(e){return Th(e).filter(function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})}var Dh=Vh,Ah=()=>1;function Vh(e,t,n){return Rh(e,t||Ah,n||function(o){return e.outEdges(o)})}function Rh(e,t,n){var o={},r=e.nodes();return r.forEach(function(i){o[i]={},o[i][i]={distance:0},r.forEach(function(a){i!==a&&(o[i][a]={distance:Number.POSITIVE_INFINITY})}),n(i).forEach(function(a){var l=a.v===i?a.w:a.v,s=t(a);o[i][l]={distance:s,predecessor:i}})}),r.forEach(function(i){var a=o[i];r.forEach(function(l){var s=o[l];r.forEach(function(u){var c=s[i],d=a[u],h=s[u],p=c.distance+d.distance;p<h.distance&&(h.distance=p,h.predecessor=d.predecessor)})})}),o}function ga(e){var t={},n={},o=[];function r(i){if(Object.hasOwn(n,i))throw new bo;Object.hasOwn(t,i)||(n[i]=!0,t[i]=!0,e.predecessors(i).forEach(r),delete n[i],o.push(i))}if(e.sinks().forEach(r),Object.keys(t).length!==e.nodeCount())throw new bo;return o}class bo extends Error{constructor(){super(...arguments)}}var va=ga;ga.CycleException=bo;var Ar=va,zh=Bh;function Bh(e){try{Ar(e)}catch(t){if(t instanceof Ar.CycleException)return!1;throw t}return!0}var ma=Lh;function Lh(e,t,n){Array.isArray(t)||(t=[t]);var o=e.isDirected()?l=>e.successors(l):l=>e.neighbors(l),r=n==="post"?Fh:Gh,i=[],a={};return t.forEach(l=>{if(!e.hasNode(l))throw new Error("Graph does not have node: "+l);r(l,o,a,i)}),i}function Fh(e,t,n,o){for(var r=[[e,!1]];r.length>0;){var i=r.pop();i[1]?o.push(i[0]):Object.hasOwn(n,i[0])||(n[i[0]]=!0,r.push([i[0],!0]),ya(t(i[0]),a=>r.push([a,!1])))}}function Gh(e,t,n,o){for(var r=[e];r.length>0;){var i=r.pop();Object.hasOwn(n,i)||(n[i]=!0,o.push(i),ya(t(i),a=>r.push(a)))}}function ya(e,t){for(var n=e.length;n--;)t(e[n],n,e);return e}var Hh=ma,Yh=Xh;function Xh(e,t){return Hh(e,t,"post")}var jh=ma,Wh=Uh;function Uh(e,t){return jh(e,t,"pre")}var Zh=Vo,Kh=fa,qh=Qh;function Qh(e,t){var n=new Zh,o={},r=new Kh,i;function a(s){var u=s.v===i?s.w:s.v,c=r.priority(u);if(c!==void 0){var d=t(s);d<c&&(o[u]=i,r.decrease(u,d))}}if(e.nodeCount()===0)return n;e.nodes().forEach(function(s){r.add(s,Number.POSITIVE_INFINITY),n.setNode(s)}),r.decrease(e.nodes()[0],0);for(var l=!1;r.size()>0;){if(i=r.removeMin(),Object.hasOwn(o,i))n.setEdge(i,o[i]);else{if(l)throw new Error("Input graph is not connected: "+e);l=!0}e.nodeEdges(i).forEach(a)}return n}var Jh={components:_h,dijkstra:ha,dijkstraAll:Ih,findCycles:$h,floydWarshall:Dh,isAcyclic:zh,postorder:Yh,preorder:Wh,prim:qh,tarjan:pa,topsort:va},Vr=hh,He={Graph:Vr.Graph,json:gh,alg:Jh,version:Vr.version};let ep=class{constructor(){let t={};t._next=t._prev=t,this._sentinel=t}dequeue(){let t=this._sentinel,n=t._prev;if(n!==t)return Rr(n),n}enqueue(t){let n=this._sentinel;t._prev&&t._next&&Rr(t),t._next=n._next,n._next._prev=t,n._next=t,t._prev=n}toString(){let t=[],n=this._sentinel,o=n._prev;for(;o!==n;)t.push(JSON.stringify(o,tp)),o=o._prev;return"["+t.join(", ")+"]"}};function Rr(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function tp(e,t){if(e!=="_next"&&e!=="_prev")return t}var np=ep;let op=He.Graph,rp=np;var ip=lp;let ap=()=>1;function lp(e,t){if(e.nodeCount()<=1)return[];let n=up(e,t||ap);return sp(n.graph,n.buckets,n.zeroIdx).flatMap(r=>e.outEdges(r.v,r.w))}function sp(e,t,n){let o=[],r=t[t.length-1],i=t[0],a;for(;e.nodeCount();){for(;a=i.dequeue();)Zn(e,t,n,a);for(;a=r.dequeue();)Zn(e,t,n,a);if(e.nodeCount()){for(let l=t.length-2;l>0;--l)if(a=t[l].dequeue(),a){o=o.concat(Zn(e,t,n,a,!0));break}}}return o}function Zn(e,t,n,o,r){let i=r?[]:void 0;return e.inEdges(o.v).forEach(a=>{let l=e.edge(a),s=e.node(a.v);r&&i.push({v:a.v,w:a.w}),s.out-=l,Eo(t,n,s)}),e.outEdges(o.v).forEach(a=>{let l=e.edge(a),s=a.w,u=e.node(s);u.in-=l,Eo(t,n,u)}),e.removeNode(o.v),i}function up(e,t){let n=new op,o=0,r=0;e.nodes().forEach(l=>{n.setNode(l,{v:l,in:0,out:0})}),e.edges().forEach(l=>{let s=n.edge(l.v,l.w)||0,u=t(l),c=s+u;n.setEdge(l.v,l.w,c),r=Math.max(r,n.node(l.v).out+=u),o=Math.max(o,n.node(l.w).in+=u)});let i=cp(r+o+3).map(()=>new rp),a=o+1;return n.nodes().forEach(l=>{Eo(i,a,n.node(l))}),{graph:n,buckets:i,zeroIdx:a}}function Eo(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}function cp(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}let wa=He.Graph;var Ie={addBorderNode:wp,addDummyNode:_a,applyWithChunking:Vn,asNonCompoundGraph:fp,buildLayerMatrix:vp,intersectRect:gp,mapValues:kp,maxRank:Ea,normalizeRanks:mp,notime:xp,partition:bp,pick:Np,predecessorWeights:pp,range:Sa,removeEmptyRanks:yp,simplify:dp,successorWeights:hp,time:Ep,uniqueId:xa,zipObject:Ro};function _a(e,t,n,o){let r;do r=xa(o);while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r}function dp(e){let t=new wa().setGraph(e.graph());return e.nodes().forEach(n=>t.setNode(n,e.node(n))),e.edges().forEach(n=>{let o=t.edge(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+r.weight,minlen:Math.max(o.minlen,r.minlen)})}),t}function fp(e){let t=new wa({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{e.children(n).length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdge(n,e.edge(n))}),t}function hp(e){let t=e.nodes().map(n=>{let o={};return e.outEdges(n).forEach(r=>{o[r.w]=(o[r.w]||0)+e.edge(r).weight}),o});return Ro(e.nodes(),t)}function pp(e){let t=e.nodes().map(n=>{let o={};return e.inEdges(n).forEach(r=>{o[r.v]=(o[r.v]||0)+e.edge(r).weight}),o});return Ro(e.nodes(),t)}function gp(e,t){let n=e.x,o=e.y,r=t.x-n,i=t.y-o,a=e.width/2,l=e.height/2;if(!r&&!i)throw new Error("Not possible to find intersection inside of the rectangle");let s,u;return Math.abs(i)*a>Math.abs(r)*l?(i<0&&(l=-l),s=l*r/i,u=l):(r<0&&(a=-a),s=a,u=a*i/r),{x:n+s,y:o+u}}function vp(e){let t=Sa(Ea(e)+1).map(()=>[]);return e.nodes().forEach(n=>{let o=e.node(n),r=o.rank;r!==void 0&&(t[r][o.order]=n)}),t}function mp(e){let t=e.nodes().map(o=>{let r=e.node(o).rank;return r===void 0?Number.MAX_VALUE:r}),n=Vn(Math.min,t);e.nodes().forEach(o=>{let r=e.node(o);Object.hasOwn(r,"rank")&&(r.rank-=n)})}function yp(e){let t=e.nodes().map(a=>e.node(a).rank),n=Vn(Math.min,t),o=[];e.nodes().forEach(a=>{let l=e.node(a).rank-n;o[l]||(o[l]=[]),o[l].push(a)});let r=0,i=e.graph().nodeRankFactor;Array.from(o).forEach((a,l)=>{a===void 0&&l%i!==0?--r:a!==void 0&&r&&a.forEach(s=>e.node(s).rank+=r)})}function wp(e,t,n,o){let r={width:0,height:0};return arguments.length>=4&&(r.rank=n,r.order=o),_a(e,"border",r,t)}function _p(e,t=ba){const n=[];for(let o=0;o<e.length;o+=t){const r=e.slice(o,o+t);n.push(r)}return n}const ba=65535;function Vn(e,t){if(t.length>ba){const n=_p(t);return e.apply(null,n.map(o=>e.apply(null,o)))}else return e.apply(null,t)}function Ea(e){const n=e.nodes().map(o=>{let r=e.node(o).rank;return r===void 0?Number.MIN_VALUE:r});return Vn(Math.max,n)}function bp(e,t){let n={lhs:[],rhs:[]};return e.forEach(o=>{t(o)?n.lhs.push(o):n.rhs.push(o)}),n}function Ep(e,t){let n=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-n)+"ms")}}function xp(e,t){return t()}let Sp=0;function xa(e){var t=++Sp;return toString(e)+t}function Sa(e,t,n=1){t==null&&(t=e,e=0);let o=i=>i<t;n<0&&(o=i=>t<i);const r=[];for(let i=e;o(i);i+=n)r.push(i);return r}function Np(e,t){const n={};for(const o of t)e[o]!==void 0&&(n[o]=e[o]);return n}function kp(e,t){let n=t;return typeof t=="string"&&(n=o=>o[t]),Object.entries(e).reduce((o,[r,i])=>(o[r]=n(i,r),o),{})}function Ro(e,t){return e.reduce((n,o,r)=>(n[o]=t[r],n),{})}let Cp=ip,Ip=Ie.uniqueId;var Mp={run:Op,undo:$p};function Op(e){(e.graph().acyclicer==="greedy"?Cp(e,n(e)):Tp(e)).forEach(o=>{let r=e.edge(o);e.removeEdge(o),r.forwardName=o.name,r.reversed=!0,e.setEdge(o.w,o.v,r,Ip("rev"))});function n(o){return r=>o.edge(r).weight}}function Tp(e){let t=[],n={},o={};function r(i){Object.hasOwn(o,i)||(o[i]=!0,n[i]=!0,e.outEdges(i).forEach(a=>{Object.hasOwn(n,a.w)?t.push(a):r(a.w)}),delete n[i])}return e.nodes().forEach(r),t}function $p(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.reversed){e.removeEdge(t);let o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}})}let Pp=Ie;var Dp={run:Ap,undo:Rp};function Ap(e){e.graph().dummyChains=[],e.edges().forEach(t=>Vp(e,t))}function Vp(e,t){let n=t.v,o=e.node(n).rank,r=t.w,i=e.node(r).rank,a=t.name,l=e.edge(t),s=l.labelRank;if(i===o+1)return;e.removeEdge(t);let u,c,d;for(d=0,++o;o<i;++d,++o)l.points=[],c={width:0,height:0,edgeLabel:l,edgeObj:t,rank:o},u=Pp.addDummyNode(e,"edge",c,"_d"),o===s&&(c.width=l.width,c.height=l.height,c.dummy="edge-label",c.labelpos=l.labelpos),e.setEdge(n,u,{weight:l.weight},a),d===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,r,{weight:l.weight},a)}function Rp(e){e.graph().dummyChains.forEach(t=>{let n=e.node(t),o=n.edgeLabel,r;for(e.setEdge(n.edgeObj,o);n.dummy;)r=e.successors(t)[0],e.removeNode(t),o.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),t=r,n=e.node(t)})}const{applyWithChunking:zp}=Ie;var Rn={longestPath:Bp,slack:Lp};function Bp(e){var t={};function n(o){var r=e.node(o);if(Object.hasOwn(t,o))return r.rank;t[o]=!0;let i=e.outEdges(o).map(l=>l==null?Number.POSITIVE_INFINITY:n(l.w)-e.edge(l).minlen);var a=zp(Math.min,i);return a===Number.POSITIVE_INFINITY&&(a=0),r.rank=a}e.sources().forEach(n)}function Lp(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Fp=He.Graph,bn=Rn.slack,Na=Gp;function Gp(e){var t=new Fp({directed:!1}),n=e.nodes()[0],o=e.nodeCount();t.setNode(n,{});for(var r,i;Hp(t,e)<o;)r=Yp(t,e),i=t.hasNode(r.v)?bn(e,r):-bn(e,r),Xp(t,e,i);return t}function Hp(e,t){function n(o){t.nodeEdges(o).forEach(r=>{var i=r.v,a=o===i?r.w:i;!e.hasNode(a)&&!bn(t,r)&&(e.setNode(a,{}),e.setEdge(o,a,{}),n(a))})}return e.nodes().forEach(n),e.nodeCount()}function Yp(e,t){return t.edges().reduce((o,r)=>{let i=Number.POSITIVE_INFINITY;return e.hasNode(r.v)!==e.hasNode(r.w)&&(i=bn(t,r)),i<o[0]?[i,r]:o},[Number.POSITIVE_INFINITY,null])[1]}function Xp(e,t,n){e.nodes().forEach(o=>t.node(o).rank+=n)}var jp=Na,zr=Rn.slack,Wp=Rn.longestPath,Up=He.alg.preorder,Zp=He.alg.postorder,Kp=Ie.simplify,qp=_t;_t.initLowLimValues=Bo;_t.initCutValues=zo;_t.calcCutValue=ka;_t.leaveEdge=Ia;_t.enterEdge=Ma;_t.exchangeEdges=Oa;function _t(e){e=Kp(e),Wp(e);var t=jp(e);Bo(t),zo(t,e);for(var n,o;n=Ia(t);)o=Ma(t,e,n),Oa(t,e,n,o)}function zo(e,t){var n=Zp(e,e.nodes());n=n.slice(0,n.length-1),n.forEach(o=>Qp(e,t,o))}function Qp(e,t,n){var o=e.node(n),r=o.parent;e.edge(n,r).cutvalue=ka(e,t,n)}function ka(e,t,n){var o=e.node(n),r=o.parent,i=!0,a=t.edge(n,r),l=0;return a||(i=!1,a=t.edge(r,n)),l=a.weight,t.nodeEdges(n).forEach(s=>{var u=s.v===n,c=u?s.w:s.v;if(c!==r){var d=u===i,h=t.edge(s).weight;if(l+=d?h:-h,eg(e,n,c)){var p=e.edge(n,c).cutvalue;l+=d?-p:p}}}),l}function Bo(e,t){arguments.length<2&&(t=e.nodes()[0]),Ca(e,{},1,t)}function Ca(e,t,n,o,r){var i=n,a=e.node(o);return t[o]=!0,e.neighbors(o).forEach(l=>{Object.hasOwn(t,l)||(n=Ca(e,t,n,l,o))}),a.low=i,a.lim=n++,r?a.parent=r:delete a.parent,n}function Ia(e){return e.edges().find(t=>e.edge(t).cutvalue<0)}function Ma(e,t,n){var o=n.v,r=n.w;t.hasEdge(o,r)||(o=n.w,r=n.v);var i=e.node(o),a=e.node(r),l=i,s=!1;i.lim>a.lim&&(l=a,s=!0);var u=t.edges().filter(c=>s===Br(e,e.node(c.v),l)&&s!==Br(e,e.node(c.w),l));return u.reduce((c,d)=>zr(t,d)<zr(t,c)?d:c)}function Oa(e,t,n,o){var r=n.v,i=n.w;e.removeEdge(r,i),e.setEdge(o.v,o.w,{}),Bo(e),zo(e,t),Jp(e,t)}function Jp(e,t){var n=e.nodes().find(r=>!t.node(r).parent),o=Up(e,n);o=o.slice(1),o.forEach(r=>{var i=e.node(r).parent,a=t.edge(r,i),l=!1;a||(a=t.edge(i,r),l=!0),t.node(r).rank=t.node(i).rank+(l?a.minlen:-a.minlen)})}function eg(e,t,n){return e.hasEdge(t,n)}function Br(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var tg=Rn,Ta=tg.longestPath,ng=Na,og=qp,rg=ig;function ig(e){switch(e.graph().ranker){case"network-simplex":Lr(e);break;case"tight-tree":lg(e);break;case"longest-path":ag(e);break;default:Lr(e)}}var ag=Ta;function lg(e){Ta(e),ng(e)}function Lr(e){og(e)}var sg=ug;function ug(e){let t=dg(e);e.graph().dummyChains.forEach(n=>{let o=e.node(n),r=o.edgeObj,i=cg(e,t,r.v,r.w),a=i.path,l=i.lca,s=0,u=a[s],c=!0;for(;n!==r.w;){if(o=e.node(n),c){for(;(u=a[s])!==l&&e.node(u).maxRank<o.rank;)s++;u===l&&(c=!1)}if(!c){for(;s<a.length-1&&e.node(u=a[s+1]).minRank<=o.rank;)s++;u=a[s]}e.setParent(n,u),n=e.successors(n)[0]}})}function cg(e,t,n,o){let r=[],i=[],a=Math.min(t[n].low,t[o].low),l=Math.max(t[n].lim,t[o].lim),s,u;s=n;do s=e.parent(s),r.push(s);while(s&&(t[s].low>a||l>t[s].lim));for(u=s,s=o;(s=e.parent(s))!==u;)i.push(s);return{path:r.concat(i.reverse()),lca:u}}function dg(e){let t={},n=0;function o(r){let i=n;e.children(r).forEach(o),t[r]={low:i,lim:n++}}return e.children().forEach(o),t}let En=Ie;var fg={run:hg,cleanup:vg};function hg(e){let t=En.addDummyNode(e,"root",{},"_root"),n=pg(e),o=Object.values(n),r=En.applyWithChunking(Math.max,o)-1,i=2*r+1;e.graph().nestingRoot=t,e.edges().forEach(l=>e.edge(l).minlen*=i);let a=gg(e)+1;e.children().forEach(l=>$a(e,t,i,a,r,n,l)),e.graph().nodeRankFactor=i}function $a(e,t,n,o,r,i,a){let l=e.children(a);if(!l.length){a!==t&&e.setEdge(t,a,{weight:0,minlen:n});return}let s=En.addBorderNode(e,"_bt"),u=En.addBorderNode(e,"_bb"),c=e.node(a);e.setParent(s,a),c.borderTop=s,e.setParent(u,a),c.borderBottom=u,l.forEach(d=>{$a(e,t,n,o,r,i,d);let h=e.node(d),p=h.borderTop?h.borderTop:d,b=h.borderBottom?h.borderBottom:d,w=h.borderTop?o:2*o,y=p!==b?1:r-i[a]+1;e.setEdge(s,p,{weight:w,minlen:y,nestingEdge:!0}),e.setEdge(b,u,{weight:w,minlen:y,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,s,{weight:0,minlen:r+i[a]})}function pg(e){var t={};function n(o,r){var i=e.children(o);i&&i.length&&i.forEach(a=>n(a,r+1)),t[o]=r}return e.children().forEach(o=>n(o,1)),t}function gg(e){return e.edges().reduce((t,n)=>t+e.edge(n).weight,0)}function vg(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{var o=e.edge(n);o.nestingEdge&&e.removeEdge(n)})}let mg=Ie;var yg=wg;function wg(e){function t(n){let o=e.children(n),r=e.node(n);if(o.length&&o.forEach(t),Object.hasOwn(r,"minRank")){r.borderLeft=[],r.borderRight=[];for(let i=r.minRank,a=r.maxRank+1;i<a;++i)Fr(e,"borderLeft","_bl",n,r,i),Fr(e,"borderRight","_br",n,r,i)}}e.children().forEach(t)}function Fr(e,t,n,o,r,i){let a={width:0,height:0,rank:i,borderType:t},l=r[t][i-1],s=mg.addDummyNode(e,"border",a,n);r[t][i]=s,e.setParent(s,o),l&&e.setEdge(l,s,{weight:1})}var _g={adjust:bg,undo:Eg};function bg(e){let t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Pa(e)}function Eg(e){let t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&xg(e),(t==="lr"||t==="rl")&&(Sg(e),Pa(e))}function Pa(e){e.nodes().forEach(t=>Gr(e.node(t))),e.edges().forEach(t=>Gr(e.edge(t)))}function Gr(e){let t=e.width;e.width=e.height,e.height=t}function xg(e){e.nodes().forEach(t=>Kn(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(Kn),Object.hasOwn(n,"y")&&Kn(n)})}function Kn(e){e.y=-e.y}function Sg(e){e.nodes().forEach(t=>qn(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(qn),Object.hasOwn(n,"x")&&qn(n)})}function qn(e){let t=e.x;e.x=e.y,e.y=t}let Hr=Ie;var Ng=kg;function kg(e){let t={},n=e.nodes().filter(s=>!e.children(s).length),o=n.map(s=>e.node(s).rank),r=Hr.applyWithChunking(Math.max,o),i=Hr.range(r+1).map(()=>[]);function a(s){if(t[s])return;t[s]=!0;let u=e.node(s);i[u.rank].push(s),e.successors(s).forEach(a)}return n.sort((s,u)=>e.node(s).rank-e.node(u).rank).forEach(a),i}let Cg=Ie.zipObject;var Ig=Mg;function Mg(e,t){let n=0;for(let o=1;o<t.length;++o)n+=Og(e,t[o-1],t[o]);return n}function Og(e,t,n){let o=Cg(n,n.map((u,c)=>c)),r=t.flatMap(u=>e.outEdges(u).map(c=>({pos:o[c.w],weight:e.edge(c).weight})).sort((c,d)=>c.pos-d.pos)),i=1;for(;i<n.length;)i<<=1;let a=2*i-1;i-=1;let l=new Array(a).fill(0),s=0;return r.forEach(u=>{let c=u.pos+i;l[c]+=u.weight;let d=0;for(;c>0;)c%2&&(d+=l[c+1]),c=c-1>>1,l[c]+=u.weight;s+=u.weight*d}),s}var Tg=$g;function $g(e,t=[]){return t.map(n=>{let o=e.inEdges(n);if(o.length){let r=o.reduce((i,a)=>{let l=e.edge(a),s=e.node(a.v);return{sum:i.sum+l.weight*s.order,weight:i.weight+l.weight}},{sum:0,weight:0});return{v:n,barycenter:r.sum/r.weight,weight:r.weight}}else return{v:n}})}let Pg=Ie;var Dg=Ag;function Ag(e,t){let n={};e.forEach((r,i)=>{let a=n[r.v]={indegree:0,in:[],out:[],vs:[r.v],i};r.barycenter!==void 0&&(a.barycenter=r.barycenter,a.weight=r.weight)}),t.edges().forEach(r=>{let i=n[r.v],a=n[r.w];i!==void 0&&a!==void 0&&(a.indegree++,i.out.push(n[r.w]))});let o=Object.values(n).filter(r=>!r.indegree);return Vg(o)}function Vg(e){let t=[];function n(r){return i=>{i.merged||(i.barycenter===void 0||r.barycenter===void 0||i.barycenter>=r.barycenter)&&Rg(r,i)}}function o(r){return i=>{i.in.push(r),--i.indegree===0&&e.push(i)}}for(;e.length;){let r=e.pop();t.push(r),r.in.reverse().forEach(n(r)),r.out.forEach(o(r))}return t.filter(r=>!r.merged).map(r=>Pg.pick(r,["vs","i","barycenter","weight"]))}function Rg(e,t){let n=0,o=0;e.weight&&(n+=e.barycenter*e.weight,o+=e.weight),t.weight&&(n+=t.barycenter*t.weight,o+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/o,e.weight=o,e.i=Math.min(t.i,e.i),t.merged=!0}let zg=Ie;var Bg=Lg;function Lg(e,t){let n=zg.partition(e,c=>Object.hasOwn(c,"barycenter")),o=n.lhs,r=n.rhs.sort((c,d)=>d.i-c.i),i=[],a=0,l=0,s=0;o.sort(Fg(!!t)),s=Yr(i,r,s),o.forEach(c=>{s+=c.vs.length,i.push(c.vs),a+=c.barycenter*c.weight,l+=c.weight,s=Yr(i,r,s)});let u={vs:i.flat(!0)};return l&&(u.barycenter=a/l,u.weight=l),u}function Yr(e,t,n){let o;for(;t.length&&(o=t[t.length-1]).i<=n;)t.pop(),e.push(o.vs),n++;return n}function Fg(e){return(t,n)=>t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}let Gg=Tg,Hg=Dg,Yg=Bg;var Xg=Da;function Da(e,t,n,o){let r=e.children(t),i=e.node(t),a=i?i.borderLeft:void 0,l=i?i.borderRight:void 0,s={};a&&(r=r.filter(h=>h!==a&&h!==l));let u=Gg(e,r);u.forEach(h=>{if(e.children(h.v).length){let p=Da(e,h.v,n,o);s[h.v]=p,Object.hasOwn(p,"barycenter")&&Wg(h,p)}});let c=Hg(u,n);jg(c,s);let d=Yg(c,o);if(a&&(d.vs=[a,d.vs,l].flat(!0),e.predecessors(a).length)){let h=e.node(e.predecessors(a)[0]),p=e.node(e.predecessors(l)[0]);Object.hasOwn(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+h.order+p.order)/(d.weight+2),d.weight+=2}return d}function jg(e,t){e.forEach(n=>{n.vs=n.vs.flatMap(o=>t[o]?t[o].vs:o)})}function Wg(e,t){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)}let Ug=He.Graph,Zg=Ie;var Kg=qg;function qg(e,t,n){let o=Qg(e),r=new Ug({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(i=>e.node(i));return e.nodes().forEach(i=>{let a=e.node(i),l=e.parent(i);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(r.setNode(i),r.setParent(i,l||o),e[n](i).forEach(s=>{let u=s.v===i?s.w:s.v,c=r.edge(u,i),d=c!==void 0?c.weight:0;r.setEdge(u,i,{weight:e.edge(s).weight+d})}),Object.hasOwn(a,"minRank")&&r.setNode(i,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),r}function Qg(e){for(var t;e.hasNode(t=Zg.uniqueId("_root")););return t}var Jg=ev;function ev(e,t,n){let o={},r;n.forEach(i=>{let a=e.parent(i),l,s;for(;a;){if(l=e.parent(a),l?(s=o[l],o[l]=a):(s=r,r=a),s&&s!==a){t.setEdge(s,a);return}a=l}})}let tv=Ng,nv=Ig,ov=Xg,rv=Kg,iv=Jg,av=He.Graph,an=Ie;var lv=Aa;function Aa(e,t){if(t&&typeof t.customOrder=="function"){t.customOrder(e,Aa);return}let n=an.maxRank(e),o=Xr(e,an.range(1,n+1),"inEdges"),r=Xr(e,an.range(n-1,-1,-1),"outEdges"),i=tv(e);if(jr(e,i),t&&t.disableOptimalOrderHeuristic)return;let a=Number.POSITIVE_INFINITY,l;for(let s=0,u=0;u<4;++s,++u){sv(s%2?o:r,s%4>=2),i=an.buildLayerMatrix(e);let c=nv(e,i);c<a&&(u=0,l=Object.assign({},i),a=c)}jr(e,l)}function Xr(e,t,n){return t.map(function(o){return rv(e,o,n)})}function sv(e,t){let n=new av;e.forEach(function(o){let r=o.graph().root,i=ov(o,r,n,t);i.vs.forEach((a,l)=>o.node(a).order=l),iv(o,n,i.vs)})}function jr(e,t){Object.values(t).forEach(n=>n.forEach((o,r)=>e.node(o).order=r))}let uv=He.Graph,Ke=Ie;var cv={positionX:hv,findType1Conflicts:Va,findType2Conflicts:Ra,addConflict:Lo,hasConflict:za,verticalAlignment:Ba,horizontalCompaction:La,alignCoordinates:Ga,findSmallestWidthAlignment:Fa,balance:Ha};function Va(e,t){let n={};function o(r,i){let a=0,l=0,s=r.length,u=i[i.length-1];return i.forEach((c,d)=>{let h=dv(e,c),p=h?e.node(h).order:s;(h||c===u)&&(i.slice(l,d+1).forEach(b=>{e.predecessors(b).forEach(w=>{let y=e.node(w),m=y.order;(m<a||p<m)&&!(y.dummy&&e.node(b).dummy)&&Lo(n,w,b)})}),l=d+1,a=p)}),i}return t.length&&t.reduce(o),n}function Ra(e,t){let n={};function o(i,a,l,s,u){let c;Ke.range(a,l).forEach(d=>{c=i[d],e.node(c).dummy&&e.predecessors(c).forEach(h=>{let p=e.node(h);p.dummy&&(p.order<s||p.order>u)&&Lo(n,h,c)})})}function r(i,a){let l=-1,s,u=0;return a.forEach((c,d)=>{if(e.node(c).dummy==="border"){let h=e.predecessors(c);h.length&&(s=e.node(h[0]).order,o(a,u,d,l,s),u=d,l=s)}o(a,u,a.length,s,i.length)}),a}return t.length&&t.reduce(r),n}function dv(e,t){if(e.node(t).dummy)return e.predecessors(t).find(n=>e.node(n).dummy)}function Lo(e,t,n){if(t>n){let r=t;t=n,n=r}let o=e[t];o||(e[t]=o={}),o[n]=!0}function za(e,t,n){if(t>n){let o=t;t=n,n=o}return!!e[t]&&Object.hasOwn(e[t],n)}function Ba(e,t,n,o){let r={},i={},a={};return t.forEach(l=>{l.forEach((s,u)=>{r[s]=s,i[s]=s,a[s]=u})}),t.forEach(l=>{let s=-1;l.forEach(u=>{let c=o(u);if(c.length){c=c.sort((h,p)=>a[h]-a[p]);let d=(c.length-1)/2;for(let h=Math.floor(d),p=Math.ceil(d);h<=p;++h){let b=c[h];i[u]===u&&s<a[b]&&!za(n,u,b)&&(i[b]=u,i[u]=r[u]=r[b],s=a[b])}}})}),{root:r,align:i}}function La(e,t,n,o,r){let i={},a=fv(e,t,n,r),l=r?"borderLeft":"borderRight";function s(d,h){let p=a.nodes(),b=p.pop(),w={};for(;b;)w[b]?d(b):(w[b]=!0,p.push(b),p=p.concat(h(b))),b=p.pop()}function u(d){i[d]=a.inEdges(d).reduce((h,p)=>Math.max(h,i[p.v]+a.edge(p)),0)}function c(d){let h=a.outEdges(d).reduce((b,w)=>Math.min(b,i[w.w]-a.edge(w)),Number.POSITIVE_INFINITY),p=e.node(d);h!==Number.POSITIVE_INFINITY&&p.borderType!==l&&(i[d]=Math.max(i[d],h))}return s(u,a.predecessors.bind(a)),s(c,a.successors.bind(a)),Object.keys(o).forEach(d=>i[d]=i[n[d]]),i}function fv(e,t,n,o){let r=new uv,i=e.graph(),a=pv(i.nodesep,i.edgesep,o);return t.forEach(l=>{let s;l.forEach(u=>{let c=n[u];if(r.setNode(c),s){var d=n[s],h=r.edge(d,c);r.setEdge(d,c,Math.max(a(e,u,s),h||0))}s=u})}),r}function Fa(e,t){return Object.values(t).reduce((n,o)=>{let r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;Object.entries(o).forEach(([l,s])=>{let u=gv(e,l)/2;r=Math.max(s+u,r),i=Math.min(s-u,i)});const a=r-i;return a<n[0]&&(n=[a,o]),n},[Number.POSITIVE_INFINITY,null])[1]}function Ga(e,t){let n=Object.values(t),o=Ke.applyWithChunking(Math.min,n),r=Ke.applyWithChunking(Math.max,n);["u","d"].forEach(i=>{["l","r"].forEach(a=>{let l=i+a,s=e[l];if(s===t)return;let u=Object.values(s),c=o-Ke.applyWithChunking(Math.min,u);a!=="l"&&(c=r-Ke.applyWithChunking(Math.max,u)),c&&(e[l]=Ke.mapValues(s,d=>d+c))})})}function Ha(e,t){return Ke.mapValues(e.ul,(n,o)=>{if(t)return e[t.toLowerCase()][o];{let r=Object.values(e).map(i=>i[o]).sort((i,a)=>i-a);return(r[1]+r[2])/2}})}function hv(e){let t=Ke.buildLayerMatrix(e),n=Object.assign(Va(e,t),Ra(e,t)),o={},r;["u","d"].forEach(a=>{r=a==="u"?t:Object.values(t).reverse(),["l","r"].forEach(l=>{l==="r"&&(r=r.map(d=>Object.values(d).reverse()));let s=(a==="u"?e.predecessors:e.successors).bind(e),u=Ba(e,r,n,s),c=La(e,r,u.root,u.align,l==="r");l==="r"&&(c=Ke.mapValues(c,d=>-d)),o[a+l]=c})});let i=Fa(e,o);return Ga(o,i),Ha(o,e.graph().align)}function pv(e,t,n){return(o,r,i)=>{let a=o.node(r),l=o.node(i),s=0,u;if(s+=a.width/2,Object.hasOwn(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=-a.width/2;break;case"r":u=a.width/2;break}if(u&&(s+=n?u:-u),u=0,s+=(a.dummy?t:e)/2,s+=(l.dummy?t:e)/2,s+=l.width/2,Object.hasOwn(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":u=l.width/2;break;case"r":u=-l.width/2;break}return u&&(s+=n?u:-u),u=0,s}}function gv(e,t){return e.node(t).width}let Ya=Ie,vv=cv.positionX;var mv=yv;function yv(e){e=Ya.asNonCompoundGraph(e),wv(e),Object.entries(vv(e)).forEach(([t,n])=>e.node(t).x=n)}function wv(e){let t=Ya.buildLayerMatrix(e),n=e.graph().ranksep,o=0;t.forEach(r=>{const i=r.reduce((a,l)=>{const s=e.node(l).height;return a>s?a:s},0);r.forEach(a=>e.node(a).y=o+i/2),o+=i+n})}let Wr=Mp,Ur=Dp,_v=rg,bv=Ie.normalizeRanks,Ev=sg,xv=Ie.removeEmptyRanks,Zr=fg,Sv=yg,Kr=_g,Nv=lv,kv=mv,Be=Ie,Cv=He.Graph;var Iv=Mv;function Mv(e,t){let n=t&&t.debugTiming?Be.time:Be.notime;n("layout",()=>{let o=n("  buildLayoutGraph",()=>Bv(e));n("  runLayout",()=>Ov(o,n,t)),n("  updateInputGraph",()=>Tv(e,o))})}function Ov(e,t,n){t("    makeSpaceForEdgeLabels",()=>Lv(e)),t("    removeSelfEdges",()=>Zv(e)),t("    acyclic",()=>Wr.run(e)),t("    nestingGraph.run",()=>Zr.run(e)),t("    rank",()=>_v(Be.asNonCompoundGraph(e))),t("    injectEdgeLabelProxies",()=>Fv(e)),t("    removeEmptyRanks",()=>xv(e)),t("    nestingGraph.cleanup",()=>Zr.cleanup(e)),t("    normalizeRanks",()=>bv(e)),t("    assignRankMinMax",()=>Gv(e)),t("    removeEdgeLabelProxies",()=>Hv(e)),t("    normalize.run",()=>Ur.run(e)),t("    parentDummyChains",()=>Ev(e)),t("    addBorderSegments",()=>Sv(e)),t("    order",()=>Nv(e,n)),t("    insertSelfEdges",()=>Kv(e)),t("    adjustCoordinateSystem",()=>Kr.adjust(e)),t("    position",()=>kv(e)),t("    positionSelfEdges",()=>qv(e)),t("    removeBorderNodes",()=>Uv(e)),t("    normalize.undo",()=>Ur.undo(e)),t("    fixupEdgeLabelCoords",()=>jv(e)),t("    undoCoordinateSystem",()=>Kr.undo(e)),t("    translateGraph",()=>Yv(e)),t("    assignNodeIntersects",()=>Xv(e)),t("    reversePoints",()=>Wv(e)),t("    acyclic.undo",()=>Wr.undo(e))}function Tv(e,t){e.nodes().forEach(n=>{let o=e.node(n),r=t.node(n);o&&(o.x=r.x,o.y=r.y,o.rank=r.rank,t.children(n).length&&(o.width=r.width,o.height=r.height))}),e.edges().forEach(n=>{let o=e.edge(n),r=t.edge(n);o.points=r.points,Object.hasOwn(r,"x")&&(o.x=r.x,o.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}let $v=["nodesep","edgesep","ranksep","marginx","marginy"],Pv={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Dv=["acyclicer","ranker","rankdir","align"],Av=["width","height"],qr={width:0,height:0},Vv=["minlen","weight","width","height","labeloffset"],Rv={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},zv=["labelpos"];function Bv(e){let t=new Cv({multigraph:!0,compound:!0}),n=Jn(e.graph());return t.setGraph(Object.assign({},Pv,Qn(n,$v),Be.pick(n,Dv))),e.nodes().forEach(o=>{let r=Jn(e.node(o));const i=Qn(r,Av);Object.keys(qr).forEach(a=>{i[a]===void 0&&(i[a]=qr[a])}),t.setNode(o,i),t.setParent(o,e.parent(o))}),e.edges().forEach(o=>{let r=Jn(e.edge(o));t.setEdge(o,Object.assign({},Rv,Qn(r,Vv),Be.pick(r,zv)))}),t}function Lv(e){let t=e.graph();t.ranksep/=2,e.edges().forEach(n=>{let o=e.edge(n);o.minlen*=2,o.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?o.width+=o.labeloffset:o.height+=o.labeloffset)})}function Fv(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.width&&n.height){let o=e.node(t.v),i={rank:(e.node(t.w).rank-o.rank)/2+o.rank,e:t};Be.addDummyNode(e,"edge-proxy",i,"_ep")}})}function Gv(e){let t=0;e.nodes().forEach(n=>{let o=e.node(n);o.borderTop&&(o.minRank=e.node(o.borderTop).rank,o.maxRank=e.node(o.borderBottom).rank,t=Math.max(t,o.maxRank))}),e.graph().maxRank=t}function Hv(e){e.nodes().forEach(t=>{let n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function Yv(e){let t=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,r=0,i=e.graph(),a=i.marginx||0,l=i.marginy||0;function s(u){let c=u.x,d=u.y,h=u.width,p=u.height;t=Math.min(t,c-h/2),n=Math.max(n,c+h/2),o=Math.min(o,d-p/2),r=Math.max(r,d+p/2)}e.nodes().forEach(u=>s(e.node(u))),e.edges().forEach(u=>{let c=e.edge(u);Object.hasOwn(c,"x")&&s(c)}),t-=a,o-=l,e.nodes().forEach(u=>{let c=e.node(u);c.x-=t,c.y-=o}),e.edges().forEach(u=>{let c=e.edge(u);c.points.forEach(d=>{d.x-=t,d.y-=o}),Object.hasOwn(c,"x")&&(c.x-=t),Object.hasOwn(c,"y")&&(c.y-=o)}),i.width=n-t+a,i.height=r-o+l}function Xv(e){e.edges().forEach(t=>{let n=e.edge(t),o=e.node(t.v),r=e.node(t.w),i,a;n.points?(i=n.points[0],a=n.points[n.points.length-1]):(n.points=[],i=r,a=o),n.points.unshift(Be.intersectRect(o,i)),n.points.push(Be.intersectRect(r,a))})}function jv(e){e.edges().forEach(t=>{let n=e.edge(t);if(Object.hasOwn(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function Wv(e){e.edges().forEach(t=>{let n=e.edge(t);n.reversed&&n.points.reverse()})}function Uv(e){e.nodes().forEach(t=>{if(e.children(t).length){let n=e.node(t),o=e.node(n.borderTop),r=e.node(n.borderBottom),i=e.node(n.borderLeft[n.borderLeft.length-1]),a=e.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(a.x-i.x),n.height=Math.abs(r.y-o.y),n.x=i.x+n.width/2,n.y=o.y+n.height/2}}),e.nodes().forEach(t=>{e.node(t).dummy==="border"&&e.removeNode(t)})}function Zv(e){e.edges().forEach(t=>{if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function Kv(e){var t=Be.buildLayerMatrix(e);t.forEach(n=>{var o=0;n.forEach((r,i)=>{var a=e.node(r);a.order=i+o,(a.selfEdges||[]).forEach(l=>{Be.addDummyNode(e,"selfedge",{width:l.label.width,height:l.label.height,rank:a.rank,order:i+ ++o,e:l.e,label:l.label},"_se")}),delete a.selfEdges})})}function qv(e){e.nodes().forEach(t=>{var n=e.node(t);if(n.dummy==="selfedge"){var o=e.node(n.e.v),r=o.x+o.width/2,i=o.y,a=n.x-r,l=o.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*a/3,y:i-l},{x:r+5*a/6,y:i-l},{x:r+a,y:i},{x:r+5*a/6,y:i+l},{x:r+2*a/3,y:i+l}],n.label.x=n.x,n.label.y=n.y}})}function Qn(e,t){return Be.mapValues(Be.pick(e,t),Number)}function Jn(e){var t={};return e&&Object.entries(e).forEach(([n,o])=>{typeof n=="string"&&(n=n.toLowerCase()),t[n]=o}),t}let Qv=Ie,Jv=He.Graph;var em={debugOrdering:tm};function tm(e){let t=Qv.buildLayerMatrix(e),n=new Jv({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(o=>{n.setNode(o,{label:o}),n.setParent(o,"layer"+e.node(o).rank)}),e.edges().forEach(o=>n.setEdge(o.v,o.w,{},o.name)),t.forEach((o,r)=>{let i="layer"+r;n.setNode(i,{rank:"same"}),o.reduce((a,l)=>(n.setEdge(a,l,{style:"invis"}),l))}),n}var nm="1.1.4",om={graphlib:He,layout:Iv,debug:em,util:{time:Ie.time,notime:Ie.notime},version:nm};const Qr=dl(om),rm=_e({__name:"AxialLeadBar",props:ii({color:null,luster:{type:Boolean}},{luster:!1}),setup(e){return ai(t=>({"57d50bcd":t.color})),(t,n)=>(te(),ce("div",{class:gt(["axial-lead-bar",{luster:t.luster}])},null,2))}}),im={class:"axial-lead"},am={class:"label"},eo=_e({__name:"AxialLead",props:ii({text:null,color:null,colorCodes:null,barsAlign:null,barWidth:null,separatorWidth:null},{text:"",color:"white",barsAlign:"center",barWidth:8,separatorWidth:4}),setup(e){return ai(t=>({"7000277e":t.color})),(t,n)=>(te(),ce("div",im,[Me("div",am,Te(t.text),1),Me("div",{class:"bar-container",style:Ae({justifyContent:t.barsAlign})},[(te(!0),ce(Re,null,vt(t.colorCodes,(o,r)=>(te(),$e(rm,{key:r,color:o.color.hex,luster:o.color.luster,style:Ae({width:t.barWidth+"px",margin:`0 ${t.separatorWidth}px`})},null,8,["color","luster","style"]))),128))],4)]))}}),lm=25,sm=5,Jr=15,um=_e({__name:"CombinationDialog",props:{result:null,combination:null},setup(e){const t={x:0,y:0},n={width:7.5,height:7.5,borderWidth:3},o={width:2.5,height:2.5,borderWidth:0},r={width:70,height:20,borderWidth:1};function i(s){const u=[{id:"S",type:"start",position:t}],c=[];let d=0;function h(b,w){if(b.type==="term"){const y=(d++).toString();u.push({id:y,type:"component",data:{value:b.children,label:`${xn.fit(b.children,e.result.componentType.prefixSymbols).toSimpleString(3)}${e.result.componentType.unit}`},position:t});for(const m of w)c.push({id:`e${m}-${y}`,source:m,target:y});return[y]}else if(b.type==="series"){let y=w;return b.children.forEach(m=>{const g=h(m,y);if(y.length>1&&g.length>1){const S=y,N=new Set(S.flatMap(R=>c.filter(T=>T.source===R).map(T=>T.target))),D=`j${d++}`;u.push({id:D,type:"junction",position:t});for(const R of y)for(const T of N)c.splice(c.findIndex(X=>X.source===R&&X.target===T),1);for(const R of y)c.push({id:`e${R}-${D}`,source:R,target:D});for(const R of N)c.push({id:`e${D}-${R}`,source:D,target:R})}return y=g,g}),y}else if(b.type==="parallel")return b.children.flatMap(y=>h(y,w));return[]}return h(s,["S"]).forEach(b=>{c.push({id:`e${b}-E`,source:b,target:"E"})}),u.push({id:"E",type:"end",position:t}),{nodes:u,edges:c}}const a=ae(()=>i(e.combination.nodes)),l=ae(()=>{const s=new Qr.graphlib.Graph;s.setDefaultEdgeLabel(()=>({})),s.setGraph({rankdir:"LR",nodesep:sm,ranksep:lm});for(const u of a.value.nodes)switch(u.type){case"start":case"end":case"junction":{s.setNode(u.id,{width:n.width+Jr,height:n.height});break}case"component":{s.setNode(u.id,{label:u.data.label,width:r.width,height:r.height});break}}for(const u of a.value.edges)s.setEdge(u.source,u.target);return Qr.layout(s),a.value.nodes.map(u=>{const c=s.node(u.id);return{...u,position:{x:c.x-c.width/2+(u.type==="component"?0:Jr/2),y:c.y-c.height/2}}})});return(s,u)=>{const c=me("v-card-text"),d=me("v-spacer"),h=me("v-btn"),p=me("v-card-actions"),b=me("v-card"),w=me("v-dialog");return te(),$e(w,{style:{"max-width":"600px"}},{activator:J(({props:y})=>[lt(s.$slots,"activator",{props:y},void 0,!0)]),default:J(({isActive:y})=>[H(b,null,{default:J(()=>[H(c,{style:{height:"150px"}},{default:J(()=>[H(V(sh),{nodes:l.value,edges:a.value.edges,"nodes-draggable":!1,"nodes-connectable":!1,"fit-view-on-init":""},{"node-start":J(()=>[Me("div",{class:"node-terminal",style:Ae({width:n.width+"px",height:n.height+"px",borderWidth:n.borderWidth+"px"})},null,4),H(V(Xe),{class:"no-handle",type:"source",position:V(Y).Right},null,8,["position"])]),"node-end":J(()=>[Me("div",{class:"node-terminal",style:Ae({width:n.width+"px",height:n.height+"px",borderWidth:n.borderWidth+"px"})},null,4),H(V(Xe),{class:"no-handle",type:"target",position:V(Y).Left},null,8,["position"])]),"node-junction":J(()=>[Me("div",{class:"node-junction",style:Ae({width:o.width+"px",height:o.height+"px",borderWidth:o.borderWidth+"px"})},null,4),H(V(Xe),{class:"no-handle",type:"target",position:V(Y).Left},null,8,["position"]),H(V(Xe),{class:"no-handle",type:"source",position:V(Y).Right},null,8,["position"])]),"node-component":J(({data:m})=>[e.result.componentType.value==="resistor"?(te(),$e(eo,{key:0,text:m.label,color:"#fbddc9",barsAlign:"right",colorCodes:V(Go)(m.value,5,"4-band"),barWidth:4,separatorWidth:1,style:{color:"black",width:"70px",height:"15px","font-size":"50%",margin:"2px",padding:"0 5px"}},null,8,["text","colorCodes"])):e.result.componentType.value==="capacitor"?(te(),$e(eo,{key:1,text:m.label,color:"#111111",style:{color:"white",width:"70px",height:"15px","font-size":"50%",margin:"2px",padding:"0 5px"}},null,8,["text"])):e.result.componentType.value==="inductor"?(te(),$e(eo,{key:2,text:m.label,color:"#68b697",barsAlign:"right",colorCodes:V(Go)(m.value*1e6,10,"4-band"),barWidth:4,separatorWidth:1,style:{color:"black",width:"70px",height:"15px","font-size":"50%",margin:"2px",padding:"0 5px"}},null,8,["text","colorCodes"])):ze("",!0),H(V(Xe),{class:"no-handle",type:"target",position:V(Y).Left},null,8,["position"]),H(V(Xe),{class:"no-handle",type:"source",position:V(Y).Right},null,8,["position"])]),_:1},8,["nodes","edges"])]),_:1}),H(c,null,{default:J(()=>[it(" çµã¿åããå¼: "+Te(e.combination.toString(e.result.componentType.prefixSymbols)),1)]),_:1}),H(p,null,{default:J(()=>[H(d),H(h,{text:"éãã",onClick:m=>y.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:3})}}}),cm=fl(um,[["__scopeId","data-v-efb8d2f1"]]),dm=["onClick"],fm=_e({__name:"ResultTable",props:{results:null},setup(e){const t=se();function n(i,a){const l=i.calcValue(a.componentType.value);if(l===a.targetComponentValue)return"= æ­£ç¢º";const s=(l-a.targetComponentValue)/a.targetComponentValue*100;return Math.abs(s)<.001?s>0?"< +0.001":"< -0.001":(s>0?"+":"")+s.toFixed(3)}function o(i){return[{title:`${i.componentType.valueLabel} (${i.componentType.unit})`,value:"value"},{title:"èª¤å·®ç (%)",value:"error"},{title:"çµã¿åãã",value:"combination"},{title:"ç´ å­ã®ç¨®é¡æ°",value:"numberOfTypes"}]}function r(i,a){return i.map(l=>{const s=l.calcValue(a.componentType.value);return{value:xn.fit(s,a.componentType.prefixSymbols).toSimpleString(3),isBestValue:s===a.bestComponentValue,error:n(l,a),combinationText:l.toString(a.componentType.prefixSymbols),numberOfTypes:l.numberOfTypes,combination:l}})}return(i,a)=>{const l=me("v-tab"),s=me("v-tabs"),u=me("v-data-table"),c=me("v-tabs-window-item"),d=me("v-tabs-window");return te(),ce(Re,null,[H(s,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=h=>t.value=h),"align-tabs":"center","bg-color":"secondary"},{default:J(()=>[(te(!0),ce(Re,null,vt(e.results,h=>(te(),$e(l,{key:h.componentNumber,"prepend-icon":V(il)(h.finished,h.finishReason==="finishedAllCombination"?"mdi-check-all":h.finishReason==="aborted"?"mdi-progress-alert":"mdi-check","mdi-timer-sand","mdi-circle-medium")},{default:J(()=>[it(Te(h.componentNumber)+"æ¬ã®è§£ ",1)]),_:2},1032,["prepend-icon"]))),128))]),_:1},8,["modelValue"]),H(d,{modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=h=>t.value=h)},{default:J(()=>[(te(!0),ce(Re,null,vt(e.results,h=>(te(),$e(c,{key:h.componentNumber},{default:J(()=>[H(u,{items:r(h.resultCombinations??[],h),headers:o(h),density:"compact",class:"result-table","no-data-text":"ã¾ã è¨ç®ããã¦ãã¾ãã","items-per-page-text":"ãã¼ã¸ãã¨ã®è¡¨ç¤ºæ°:","page-text":"å¨{2}åã®çµæ / {0}-{1}"},{item:J(({item:p})=>[H(cm,{combination:p.combination,result:h},{activator:J(({props:b})=>[Me("tr",So({ref_for:!0},b,{class:["calculated",{"best-combination":p.isBestValue}],onClick:w=>console.info(h)}),[Me("td",null,Te(p.value),1),Me("td",null,Te(p.error),1),Me("td",null,Te(p.combinationText),1),Me("td",null,Te(p.numberOfTypes),1)],16,dm)]),_:2},1032,["combination","result"])]),_:2},1032,["items","headers"])]),_:2},1024))),128))]),_:1},8,["modelValue"])],64)}}});function hm(e){return new Worker("/tools/assets/worker-BPHrbIxm.js",{name:e==null?void 0:e.name})}const to=[{title:"æµæå¨ (Î©)",value:"resistor",unit:"Î©",valueLabel:"æµæå¤",prefixSymbols:["G","M","k","","m","Î¼"]},{title:"ã³ã³ãã³ãµ (F)",value:"capacitor",unit:"F",valueLabel:"éé»å®¹é",prefixSymbols:["","m","Î¼","n","p"]},{title:"ã¤ã³ãã¯ã¿ (H)",value:"inductor",unit:"H",valueLabel:"ã¤ã³ãã¯ã¿ã³ã¹",prefixSymbols:["","m","Î¼","n"]}],no=[{title:"E1",value:"E1"},{title:"E3",value:"E3"},{title:"E6",value:"E6"},{title:"E12",value:"E12"},{title:"E24",value:"E24"},{title:"E48",value:"E48"},{title:"E96",value:"E96"},{title:"E192",value:"E192"}],oo=[{title:"< 0.1%",value:.001},{title:"< 0.01%",value:1e-4},{title:"< 0.001%",value:1e-5},{title:"= 0.0%ï¼æ­£ç¢ºï¼",value:0},{title:"å¨æ¢ç´¢",value:void 0}],pm={resistor:{componentTargetValue:1234,minValue:10,maxValue:1e6,excludedValuePlaceholder:1e3,excludedValues:[]},capacitor:{componentTargetValue:1234e-9,minValue:1e-12,maxValue:1,excludedValuePlaceholder:1e-6,excludedValues:[]},inductor:{componentTargetValue:1234e-7,minValue:1e-9,maxValue:1,excludedValuePlaceholder:1e-5,excludedValues:[]}},gm={key:0},vm={key:1},mm={key:2},ym={key:3},wm={key:4},_m=_e({__name:"App",setup(e){const t=se([2,3,4,5].map(y=>({componentNumber:y,componentType:to[0],targetComponentValue:1234,series:Fo[no[3].value],minValue:0,maxValue:0,excludedValues:[],targetErrorRate:oo[2]}))),n=se(0),o=se(to[0]),r=se(pm),i=ae(()=>r.value[o.value.value]),a=se(no[3]),l=se(oo[2]),s=se(),u=se(),c=se(1e3),d=new al(hm),h=ae(()=>{if(!s.value)return 0;const y=t.value[n.value];return typeof y.currentCombination>"u"||typeof y.totalCombinations>"u"||y.totalCombinations===0?0:y.currentCombination/y.totalCombinations*100});async function p(){var m,g;s.value=!0;let y=0;for(const S of t.value)S.componentType=o.value,S.targetComponentValue=i.value.componentTargetValue,S.minValue=i.value.minValue,S.maxValue=i.value.maxValue,S.excludedValues=i.value.excludedValues,S.series=Fo[a.value.value],S.targetErrorRate=l.value,S.finished=void 0,S.finishReason=void 0,S.bestComponentValue=0,S.resultCombinations=[],S.totalCombinations=0,S.currentCombination=0;for(const S of t.value){if(u.value)break;for(n.value=y++,S.finished=!1,S.finishReason="calculating",await d.invoke({type:"initialize",value:S.targetComponentValue,componentType:S.componentType.value,componentNumber:S.componentNumber,series:[...S.series],minValue:S.minValue,maxValue:S.maxValue,excludedValues:[...S.excludedValues],progressBeacon:1e6});!u.value;){const N=await d.invoke({type:"invoke"});if(N.type!=="invoke"){S.finishReason="error";break}if(N.result){const D=N.result;if(S.currentCombination=D.current,S.totalCombinations=D.total,D.componentNodes){const R=new Pe(D.componentNodes);if(!((m=S.resultCombinations)!=null&&m.some(T=>T.equals(R)))){(g=S.resultCombinations)==null||g.unshift(R),S.bestComponentValue=R.calcValue(S.componentType.value);const T=(S.bestComponentValue-S.targetComponentValue)/S.targetComponentValue;if(typeof S.targetErrorRate.value=="number"&&Math.abs(T)<=S.targetErrorRate.value){S.finishReason="finishedByUnderErrorRate";break}}}}if(N.done){S.finishReason="finishedAllCombination";break}}u.value&&(S.finishReason="aborted"),S.finished=!0}u.value=!1,s.value=!1}function b(){[Ne.required,Ne.value,Ne.notNegative,Ne.notZero].every(y=>y(c.value.toString())===!0)&&!i.value.excludedValues.includes(c.value)&&i.value.excludedValues.push(c.value)}async function w(){s.value?u.value=!0:await p()}return(y,m)=>{const g=me("v-select"),S=me("v-col"),N=me("v-row"),D=me("v-combobox"),R=me("v-card-text"),T=me("v-btn"),X=me("v-form"),U=me("v-icon"),A=me("v-list-item"),E=me("v-list"),ee=me("v-spacer"),ne=me("v-card-actions"),_=me("v-card"),M=me("v-dialog"),C=me("v-progress-linear");return te(),$e(ul,{"page-id":"electric/combination","toolbar-title":"ååç´ å­ çµã¿åããè¨ç®æ©"},{default:J(()=>[H(N,null,{default:J(()=>[H(S,{cols:"4"},{default:J(()=>[H(g,{label:"ç´ å­ã®ç¨®é¡",density:"compact",variant:"underlined",modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=I=>o.value=I),items:V(to),"hide-details":"","return-object":""},null,8,["modelValue","items"])]),_:1}),H(S,{cols:"8"},{default:J(()=>[H(Kt,{value:i.value.componentTargetValue,"onUpdate:value":m[1]||(m[1]=I=>i.value.componentTargetValue=I),label:`æ±ãã${o.value.valueLabel}`,variant:"underlined",density:"compact",unit:o.value.unit,"fraction-digits":3,"prefix-symbols":o.value.prefixSymbols,rule:[V(Ne).required,V(Ne).value,V(Ne).notNegative,V(Ne).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1})]),_:1}),H(N,null,{default:J(()=>[H(S,{cols:"4"},{default:J(()=>[H(g,{label:"Eç³»å",density:"compact",variant:"underlined",modelValue:a.value,"onUpdate:modelValue":m[2]||(m[2]=I=>a.value=I),items:V(no),"hide-details":"","return-object":""},null,8,["modelValue","items"])]),_:1}),H(S,{cols:"8"},{default:J(()=>[H(M,{"max-width":"600"},{activator:J(({props:I})=>[H(D,So(I,{multiple:"","model-value":i.value.excludedValues,label:`é¤å¤ãã${o.value.valueLabel}ï¼ãªãã·ã§ã³ï¼`,suffix:o.value.unit,density:"compact",variant:"underlined","hide-details":"",readonly:""}),null,16,["model-value","label","suffix"])]),default:J(({isActive:I})=>[H(_,{title:`é¤å¤ãã${o.value.valueLabel}`},{default:J(()=>[H(R,null,{default:J(()=>[it(" ç®æ¨ã®"+Te(o.value.valueLabel)+"ä»¥å¤ã«ããçµã¿åããã«ä½¿ç¨ããªã"+Te(o.value.valueLabel)+"ãè¤æ°æå®ã§ãã¾ãã ",1)]),_:1}),H(R,null,{default:J(()=>[H(X,{onSubmit:ll(b,["prevent"])},{default:J(()=>[H(N,null,{default:J(()=>[H(S,null,{default:J(()=>[H(Kt,{value:c.value,"onUpdate:value":m[3]||(m[3]=O=>c.value=O),label:`é¤å¤ã®å¯¾è±¡ã«è¿½å ãã${o.value.valueLabel}`,variant:"underlined",density:"compact",unit:o.value.unit,"fraction-digits":3,"prefix-symbols":o.value.prefixSymbols,rule:[V(Ne).required,V(Ne).value,V(Ne).notNegative,V(Ne).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1}),H(S,{cols:"3"},{default:J(()=>[H(T,{color:"success",type:"submit",variant:"outlined",block:""},{default:J(()=>m[10]||(m[10]=[it("è¿½å ")])),_:1})]),_:1}),H(S,{cols:"3"},{default:J(()=>[H(T,{variant:"outlined",block:"",onClick:m[4]||(m[4]=O=>i.value.excludedValues=[])},{default:J(()=>m[11]||(m[11]=[it(" å¨ã¦ã¯ãªã¢ ")])),_:1})]),_:1})]),_:1})]),_:1}),H(E,{density:"compact","onClick:select":m[5]||(m[5]=O=>i.value.excludedValues=i.value.excludedValues.filter($=>$!==O.id))},{default:J(()=>[(te(!0),ce(Re,null,vt(i.value.excludedValues,(O,$)=>(te(),$e(A,{key:$,value:O,slim:""},{prepend:J(()=>[H(U,{icon:"mdi-close"})]),default:J(()=>[it(Te(V(xn).fit(O,o.value.prefixSymbols))+Te(o.value.unit)+" ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1}),H(ne,null,{default:J(()=>[H(ee),H(T,{text:"éãã",onClick:O=>I.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["title"])]),_:1})]),_:1})]),_:1}),H(N,null,{default:J(()=>[H(S,{cols:"4"},{default:J(()=>[H(Kt,{value:i.value.minValue,"onUpdate:value":m[6]||(m[6]=I=>i.value.minValue=I),label:`ä½¿ç¨ããæå°ã®${o.value.valueLabel}`,variant:"underlined",density:"compact",unit:o.value.unit,"fraction-digits":0,"prefix-symbols":o.value.prefixSymbols,rule:[V(Ne).required,V(Ne).value,V(Ne).notNegative,V(Ne).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1}),H(S,{cols:"4"},{default:J(()=>[H(Kt,{value:i.value.maxValue,"onUpdate:value":m[7]||(m[7]=I=>i.value.maxValue=I),label:`ä½¿ç¨ããæå¤§ã®${o.value.valueLabel}`,variant:"underlined",density:"compact",unit:o.value.unit,"fraction-digits":0,"prefix-symbols":o.value.prefixSymbols,rule:[V(Ne).required,V(Ne).value,V(Ne).notNegative,V(Ne).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1}),H(S,{cols:"4"},{default:J(()=>[H(g,{label:"è¨ç®ãçµããèª¤å·®ç",density:"compact",variant:"underlined",modelValue:l.value,"onUpdate:modelValue":m[8]||(m[8]=I=>l.value=I),items:V(oo),"hide-details":"","return-object":""},null,8,["modelValue","items"])]),_:1})]),_:1}),H(N,null,{default:J(()=>[H(S,{"align-self":"center"},{default:J(()=>[H(C,{color:"light-blue",modelValue:h.value,"onUpdate:modelValue":m[9]||(m[9]=I=>h.value=I),height:"20",striped:s.value},{default:J(()=>[s.value?(te(),ce("strong",gm,"è¨ç®ä¸­... "+Te(h.value.toFixed(3))+"%",1)):t.value.some(I=>I.finishReason==="aborted")?(te(),ce("strong",vm,"è¨ç®ãä¸­æ­¢ãã¾ãã")):t.value.some(I=>I.finishReason==="error")?(te(),ce("strong",mm," ã¨ã©ã¼ã«ããè¨ç®ãä¸­æ­¢ãã¾ãã ")):t.value.some(I=>I.finishReason==="finishedByUnderErrorRate")?(te(),ce("strong",ym," è¨ç®ãå®äºãã¾ãã ")):t.value.every(I=>I.finishReason==="finishedAllCombination")?(te(),ce("strong",wm," å¨æ¢ç´¢ãå®äºãã¾ãã ")):ze("",!0)]),_:1},8,["modelValue","striped"])]),_:1}),H(S,{cols:"4"},{default:J(()=>[H(T,{"prepend-icon":s.value?"mdi-timer-sand":"mdi-play",variant:s.value?"outlined":"flat",color:s.value?"error":"success",onClick:w,block:""},sl({_:2},[s.value?{name:"default",fn:J(()=>[m[12]||(m[12]=Me("div",null,"è¨ç®ä¸­",-1)),m[13]||(m[13]=Me("div",{class:"text-caption"},"ã¯ãªãã¯ã§ä¸­æ­¢",-1))]),key:"0"}:{name:"default",fn:J(()=>[m[14]||(m[14]=it("è¨ç®éå§"))]),key:"1"}]),1032,["prepend-icon","variant","color"])]),_:1})]),_:1}),H(N,null,{default:J(()=>[H(S,null,{default:J(()=>[H(fm,{results:t.value},null,8,["results"])]),_:1})]),_:1})]),_:1})}}});cl("#app",_m);
