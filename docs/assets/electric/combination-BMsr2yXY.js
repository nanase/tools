var Ua=Object.defineProperty;var Za=(e,t,n)=>t in e?Ua(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var xe=(e,t,n)=>Za(e,typeof t!="symbol"?t+"":t,n);import{d as _e,l as Ee,j as de,m as ie,n as tt,p as ti,o as ee,b as ce,q as st,u as $,s as vt,v as ni,k as me,x as Ka,y as Ct,a as H,w as J,z as Ut,A as Je,B as Tt,C as qa,D as oi,E as Qa,h as Me,t as Te,G as ze,F as Re,e as mt,H as Ae,I as ri,J as Ja,c as $e,K as So,L as el,M as tl,N as pe,O as ii,Q as sn,r as ye,R as we,S as xt,T as nl,U as ol,V as rl,f as at,W as No,X as ai,Y as li,Z as il,$ as al,a0 as ll,g as sl,_ as ul,i as cl}from"../tools-ToolAppBase.vue_vue_type_script_setup_true_lang-Btv-3mZf.js";import{u as dl}from"../tools-index-DzQz_ZeU.js";import{l as Sn,_ as qt,o as Ne}from"../tools-SIValueInput.vue_vue_type_script_setup_true_lang-Vk-pPJ9b.js";import{s as fl}from"../tools-object-BaSs9UKu.js";import{g as hl}from"../tools-_commonjsHelpers-Cpj98o6Y.js";const Go={E1:[100],E3:[100,220,470],E6:[100,150,220,330,470,680],E12:[100,120,150,180,220,270,330,390,470,560,680,820],E24:[100,110,120,130,150,160,180,200,220,240,270,300,330,360,390,430,470,510,560,620,680,750,820,910],E48:[100,105,110,115,121,127,133,140,147,154,162,169,178,187,196,205,215,226,237,249,261,274,287,301,316,332,348,365,383,402,422,442,464,487,511,536,562,590,619,649,681,715,750,787,825,866,909,953],E96:[100,102,105,107,110,113,115,118,121,124,127,130,133,137,140,143,147,150,154,158,162,165,169,174,178,182,187,191,196,200,205,210,215,221,226,232,237,243,249,261,267,274,280,287,294,301,309,316,324,332,340,348,357,365,374,383,392,402,412,422,432,442,453,464,475,487,499,511,523,536,549,562,576,590,604,619,634,649,681,698,715,732,750,768,787,806,825,845,866,887,909,931,953,976],E192:[100,101,102,104,105,106,107,109,110,111,113,114,115,117,118,120,121,123,124,126,127,129,130,132,133,135,137,138,140,142,143,145,147,149,150,152,154,156,158,160,162,164,165,167,169,172,174,176,178,180,182,184,187,189,191,193,196,198,200,203,205,208,210,213,215,218,221,223,226,229,232,234,237,240,243,246,249,252,255,258,261,264,267,271,274,277,280,284,287,291,294,298,301,305,309,312,316,320,324,328,332,336,340,344,348,352,357,361,365,370,374,379,383,388,392,397,402,407,412,417,422,427,432,437,442,448,453,459,464,470,475,481,487,493,499,505,511,517,523,530,536,542,549,556,562,569,576,583,590,597,604,612,619,626,634,642,649,657,665,673,681,690,698,706,715,723,732,741,750,759,768,777,787,796,806,816,825,835,845,856,866,876,887,898,909,920,931,942,953,965,976,988]},Pt=[{figure:null,name:"None",code:null,color:{hex:"#00000000",luster:!1},multiplier:null,tolerance:{percent:20,letter:"M"}},{figure:null,name:"Pink",code:"PK",color:{hex:"#ccceccff",luster:!1},multiplier:.001,tolerance:null},{figure:null,name:"Silver",code:"SR",color:{hex:"#ccceccff",luster:!0},multiplier:.01,tolerance:{percent:10,letter:"K"}},{figure:null,name:"Gold",code:"GD",color:{hex:"#cc9a34ff",luster:!0},multiplier:.1,tolerance:{percent:5,letter:"J"}},{figure:"0",name:"Black",code:"BK",color:{hex:"#0b0000ff",luster:!1},multiplier:1,tolerance:null},{figure:"1",name:"Brown",code:"BN",color:{hex:"#643234ff",luster:!1},multiplier:10,tolerance:{percent:1,letter:"F"}},{figure:"2",name:"Red",code:"RD",color:{hex:"#ff0000ff",luster:!1},multiplier:100,tolerance:{percent:2,letter:"G"}},{figure:"3",name:"Orange",code:"OG",color:{hex:"#fc6604ff",luster:!1},multiplier:1e3,tolerance:{percent:.05,letter:"W"}},{figure:"4",name:"Yellow",code:"YE",color:{hex:"#fcfe04ff",luster:!1},multiplier:1e4,tolerance:{percent:.02,letter:"P"}},{figure:"5",name:"Green",code:"GN",color:{hex:"#34ce34ff",luster:!1},multiplier:1e5,tolerance:{percent:.5,letter:"D"}},{figure:"6",name:"Blue",code:"BU",color:{hex:"#6466fcff",luster:!1},multiplier:1e6,tolerance:{percent:.25,letter:"C"}},{figure:"7",name:"Violet",code:"VT",color:{hex:"#cc66fcff",luster:!1},multiplier:1e7,tolerance:{percent:.1,letter:"B"}},{figure:"8",name:"Gray",code:"GY",color:{hex:"#949294ff",luster:!1},multiplier:1e8,tolerance:{percent:.01,letter:"L(A)"}},{figure:"9",name:"White",code:"WH",color:{hex:"#ffffffff",luster:!1},multiplier:1e9,tolerance:null}];function Ho(e,t,n){const o=n==="4-band"?1:2,r=Math.floor(Math.log10(e))-o,i=Math.round(e/10**r);return[...(n==="4-band"?[Math.floor(i/10),i%10]:[Math.floor(i/100),i/10%10,i%10]).map(l=>Pt[l+4]),Pt.find(l=>l.multiplier===10**r)??Pt[0],Pt.find(l=>{var s;return((s=l.tolerance)==null?void 0:s.percent)===t})??Pt[0]]}class Pe{constructor(t){xe(this,"componentNodes");xe(this,"nodes");this.componentNodes=structuredClone(t),this.nodes=Pe.generateSyntaxTree(t)}get numberOfTypes(){return this.componentNodes.filter(t=>typeof t=="object").map(t=>t.value).filter((t,n,o)=>o.indexOf(t)===n).length}equals(t){return Pe.equalsInternal(this.nodes,t.nodes)}toString(t=["T","G","M","k","","m","Î¼","n","p","f"],n=3){return Pe.toStringInternal(this.nodes,t,n)}calcValue(t){return t==="capacitor"?Pe.calcValueForCapacitorInternal(this.componentNodes):Pe.calcValueInternal(this.componentNodes)}static calcValue(t,n){return n==="capacitor"?Pe.calcValueForCapacitorInternal(t):Pe.calcValueInternal(t)}static equalsInternal(t,n){if(t.type!==n.type||t.children.length!==n.children.length)return!1;const o=[...t.children].sort(Pe.compareNodes),r=[...n.children].sort(Pe.compareNodes);return o.every((i,a)=>Pe.deepCompare(i,r[a]))}static compareNodes(t,n){return t.type==="term"&&n.type==="term"?t.children-n.children:t.type==="term"?-1:n.type==="term"?1:t.type.localeCompare(n.type)}static deepCompare(t,n){return t.type!==n.type?!1:t.type==="term"&&n.type==="term"?t.children===n.children:t.type!=="term"&&n.type!=="term"?Pe.equalsInternal(t,n):!1}static generateSyntaxTree(t){const n=[];for(let o=t.length-1;o>=0;o--){const r=t[o],i=[];if(r==="+"){const a=n.pop(),l=n.pop();a.type==="series"?i.push(...a.children):i.push(a),l.type==="series"?i.push(...l.children):i.push(l),n.push({type:"series",children:i})}else if(r==="|"){const a=n.pop(),l=n.pop();a.type==="parallel"?i.push(...a.children):i.push(a),l.type==="parallel"?i.push(...l.children):i.push(l),n.push({type:"parallel",children:i})}else n.push({type:"term",children:r.value})}if(n[0].type!=="term")return n[0];throw new Error("invalid nodes")}static toStringInternal(t,n,o){return t.children.map(r=>r.type==="term"?Sn.fit(r.children,n).toSimpleString(o):`(${Pe.toStringInternal(r,n,o)})`).join(t.type==="series"?" + ":" | ")}static calcValueInternal(t){const n=[];for(let o=t.length-1;o>=0;o--){const r=t[o];if(r==="+"){const i=n.pop(),a=n.pop();n.push(i+a)}else if(r==="|"){const i=n.pop(),a=n.pop();n.push(i*a/(i+a))}else n.push(r.value)}return n[0]}static calcValueForCapacitorInternal(t){const n=[];for(let o=t.length-1;o>=0;o--){const r=t[o];if(r==="+"){const i=n.pop(),a=n.pop();n.push(i*a/(i+a))}else if(r==="|"){const i=n.pop(),a=n.pop();n.push(i+a)}else n.push(r.value)}return n[0]}}function Nn(e){return ii()?(sn(e),!0):!1}function Ke(e){return typeof e=="function"?e():$(e)}const pl=typeof window<"u"&&typeof document<"u",gl=e=>typeof e<"u",vl=Object.prototype.toString,ml=e=>vl.call(e)==="[object Object]",yl=()=>{};function wl(e,t){function n(...o){return new Promise((r,i)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(i)})}return n}const si=e=>e();function _l(e=si){const t=de(!0);function n(){t.value=!1}function o(){t.value=!0}const r=(...i)=>{t.value&&e(...i)};return{isActive:nl(t),pause:n,resume:o,eventFilter:r}}function Yo(e,t=!1,n="Timeout"){return new Promise((o,r)=>{setTimeout(t?()=>r(n):o,e)})}function bl(e,t,n={}){const{eventFilter:o=si,...r}=n;return me(e,wl(o,t),r)}function Et(e,t,n={}){const{eventFilter:o,...r}=n,{eventFilter:i,pause:a,resume:l,isActive:s}=_l(o);return{stop:bl(e,t,{...r,eventFilter:i}),pause:a,resume:l,isActive:s}}function El(e,t={}){if(!So(e))return el(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=tl(()=>({get(){return e.value[o]},set(r){var i;if((i=Ke(t.replaceRef))!=null?i:!0)if(Array.isArray(e.value)){const l=[...e.value];l[o]=r,e.value=l}else{const l={...e.value,[o]:r};Object.setPrototypeOf(l,Object.getPrototypeOf(e.value)),e.value=l}else e.value[o]=r}}));return n}function io(e,t=!1){function n(d,{flush:h="sync",deep:f=!1,timeout:p,throwOnTimeout:_}={}){let y=null;const C=[new Promise(E=>{y=me(e,S=>{d(S)!==t&&(y==null||y(),E(S))},{flush:h,deep:f,immediate:!0})})];return p!=null&&C.push(Yo(p,_).then(()=>Ke(e)).finally(()=>y==null?void 0:y())),Promise.race(C)}function o(d,h){if(!So(d))return n(S=>S===d,h);const{flush:f="sync",deep:p=!1,timeout:_,throwOnTimeout:y}=h??{};let x=null;const E=[new Promise(S=>{x=me([e,d],([D,V])=>{t!==(D===V)&&(x==null||x(),S(D))},{flush:f,deep:p,immediate:!0})})];return _!=null&&E.push(Yo(_,y).then(()=>Ke(e)).finally(()=>(x==null||x(),Ke(e)))),Promise.race(E)}function r(d){return n(h=>!!h,d)}function i(d){return o(null,d)}function a(d){return o(void 0,d)}function l(d){return n(Number.isNaN,d)}function s(d,h){return n(f=>{const p=Array.from(f);return p.includes(d)||p.includes(Ke(d))},h)}function u(d){return c(1,d)}function c(d=1,h){let f=-1;return n(()=>(f+=1,f>=d),h)}return Array.isArray(Ke(e))?{toMatch:n,toContains:s,changed:u,changedTimes:c,get not(){return io(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:r,toBeNull:i,toBeNaN:l,toBeUndefined:a,changed:u,changedTimes:c,get not(){return io(e,!t)}}}function ao(e){return io(e)}function xl(e){var t;const n=Ke(e);return(t=n==null?void 0:n.$el)!=null?t:n}const ui=pl?window:void 0;function ci(...e){let t,n,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,r]=e,t=ui):[t,n,o,r]=e,!t)return yl;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const i=[],a=()=>{i.forEach(c=>c()),i.length=0},l=(c,d,h,f)=>(c.addEventListener(d,h,f),()=>c.removeEventListener(d,h,f)),s=me(()=>[xl(t),Ke(r)],([c,d])=>{if(a(),!c)return;const h=ml(d)?{...d}:d;i.push(...n.flatMap(f=>o.map(p=>l(c,f,p,h))))},{immediate:!0,flush:"post"}),u=()=>{s(),a()};return Nn(u),u}function Sl(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Xo(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:r=ui,eventName:i="keydown",passive:a=!1,dedupe:l=!1}=o,s=Sl(t);return ci(r,i,c=>{c.repeat&&Ke(l)||s(c)&&n(c)},a)}function Nl(e){return JSON.parse(JSON.stringify(e))}function Bn(e,t,n,o={}){var r,i,a;const{clone:l=!1,passive:s=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:h}=o,f=Ut(),p=n||(f==null?void 0:f.emit)||((r=f==null?void 0:f.$emit)==null?void 0:r.bind(f))||((a=(i=f==null?void 0:f.proxy)==null?void 0:i.$emit)==null?void 0:a.bind(f==null?void 0:f.proxy));let _=u;t||(t="modelValue"),_=_||`update:${t.toString()}`;const y=E=>l?typeof l=="function"?l(E):Nl(E):E,x=()=>gl(e[t])?y(e[t]):d,C=E=>{h?h(E)&&p(_,E):p(_,E)};if(s){const E=x(),S=de(E);let D=!1;return me(()=>e[t],V=>{D||(D=!0,S.value=y(V),Je(()=>D=!1))}),me(S,V=>{!D&&(V!==e[t]||c)&&C(V)},{deep:c}),S}else return ie({get(){return x()},set(E){C(E)}})}var kl={value:()=>{}};function kn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new un(n)}function un(e){this._=e}function Cl(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}un.prototype=kn.prototype={constructor:un,on:function(e,t){var n=this._,o=Cl(e+"",n),r,i=-1,a=o.length;if(arguments.length<2){for(;++i<a;)if((r=(e=o[i]).type)&&(r=Il(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(r=(e=o[i]).type)n[r]=jo(n[r],e.name,t);else if(t==null)for(r in n)n[r]=jo(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new un(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function Il(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function jo(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=kl,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var lo="http://www.w3.org/1999/xhtml";const Wo={svg:"http://www.w3.org/2000/svg",xhtml:lo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Cn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Wo.hasOwnProperty(t)?{space:Wo[t],local:e}:e}function Ml(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===lo&&t.documentElement.namespaceURI===lo?t.createElement(e):t.createElementNS(n,e)}}function Ol(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function di(e){var t=Cn(e);return(t.local?Ol:Ml)(t)}function Tl(){}function ko(e){return e==null?Tl:function(){return this.querySelector(e)}}function $l(e){typeof e!="function"&&(e=ko(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,l=o[r]=new Array(a),s,u,c=0;c<a;++c)(s=i[c])&&(u=e.call(s,s.__data__,c,i))&&("__data__"in s&&(u.__data__=s.__data__),l[c]=u);return new Ve(o,this._parents)}function Pl(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Dl(){return[]}function fi(e){return e==null?Dl:function(){return this.querySelectorAll(e)}}function Al(e){return function(){return Pl(e.apply(this,arguments))}}function Vl(e){typeof e=="function"?e=Al(e):e=fi(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a=t[i],l=a.length,s,u=0;u<l;++u)(s=a[u])&&(o.push(e.call(s,s.__data__,u,a)),r.push(s));return new Ve(o,r)}function hi(e){return function(){return this.matches(e)}}function pi(e){return function(t){return t.matches(e)}}var Rl=Array.prototype.find;function zl(e){return function(){return Rl.call(this.children,e)}}function Bl(){return this.firstElementChild}function Ll(e){return this.select(e==null?Bl:zl(typeof e=="function"?e:pi(e)))}var Fl=Array.prototype.filter;function Gl(){return Array.from(this.children)}function Hl(e){return function(){return Fl.call(this.children,e)}}function Yl(e){return this.selectAll(e==null?Gl:Hl(typeof e=="function"?e:pi(e)))}function Xl(e){typeof e!="function"&&(e=hi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,l=o[r]=[],s,u=0;u<a;++u)(s=i[u])&&e.call(s,s.__data__,u,i)&&l.push(s);return new Ve(o,this._parents)}function gi(e){return new Array(e.length)}function jl(){return new Ve(this._enter||this._groups.map(gi),this._parents)}function hn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}hn.prototype={constructor:hn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Wl(e){return function(){return e}}function Ul(e,t,n,o,r,i){for(var a=0,l,s=t.length,u=i.length;a<u;++a)(l=t[a])?(l.__data__=i[a],o[a]=l):n[a]=new hn(e,i[a]);for(;a<s;++a)(l=t[a])&&(r[a]=l)}function Zl(e,t,n,o,r,i,a){var l,s,u=new Map,c=t.length,d=i.length,h=new Array(c),f;for(l=0;l<c;++l)(s=t[l])&&(h[l]=f=a.call(s,s.__data__,l,t)+"",u.has(f)?r[l]=s:u.set(f,s));for(l=0;l<d;++l)f=a.call(e,i[l],l,i)+"",(s=u.get(f))?(o[l]=s,s.__data__=i[l],u.delete(f)):n[l]=new hn(e,i[l]);for(l=0;l<c;++l)(s=t[l])&&u.get(h[l])===s&&(r[l]=s)}function Kl(e){return e.__data__}function ql(e,t){if(!arguments.length)return Array.from(this,Kl);var n=t?Zl:Ul,o=this._parents,r=this._groups;typeof e!="function"&&(e=Wl(e));for(var i=r.length,a=new Array(i),l=new Array(i),s=new Array(i),u=0;u<i;++u){var c=o[u],d=r[u],h=d.length,f=Ql(e.call(c,c&&c.__data__,u,o)),p=f.length,_=l[u]=new Array(p),y=a[u]=new Array(p),x=s[u]=new Array(h);n(c,d,_,y,x,f,t);for(var C=0,E=0,S,D;C<p;++C)if(S=_[C]){for(C>=E&&(E=C+1);!(D=y[E])&&++E<p;);S._next=D||null}}return a=new Ve(a,o),a._enter=l,a._exit=s,a}function Ql(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Jl(){return new Ve(this._exit||this._groups.map(gi),this._parents)}function es(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function ts(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),l=new Array(r),s=0;s<a;++s)for(var u=n[s],c=o[s],d=u.length,h=l[s]=new Array(d),f,p=0;p<d;++p)(f=u[p]||c[p])&&(h[p]=f);for(;s<r;++s)l[s]=n[s];return new Ve(l,this._parents)}function ns(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],a;--r>=0;)(a=o[r])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function os(e){e||(e=rs);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a=n[i],l=a.length,s=r[i]=new Array(l),u,c=0;c<l;++c)(u=a[c])&&(s[c]=u);s.sort(t)}return new Ve(r,this._parents).order()}function rs(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function is(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function as(){return Array.from(this)}function ls(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null}function ss(){let e=0;for(const t of this)++e;return e}function us(){return!this.node()}function cs(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,a=r.length,l;i<a;++i)(l=r[i])&&e.call(l,l.__data__,i,r);return this}function ds(e){return function(){this.removeAttribute(e)}}function fs(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hs(e,t){return function(){this.setAttribute(e,t)}}function ps(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function gs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function vs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ms(e,t){var n=Cn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?fs:ds:typeof t=="function"?n.local?vs:gs:n.local?ps:hs)(n,t))}function vi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ys(e){return function(){this.style.removeProperty(e)}}function ws(e,t,n){return function(){this.style.setProperty(e,t,n)}}function _s(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function bs(e,t,n){return arguments.length>1?this.each((t==null?ys:typeof t=="function"?_s:ws)(e,t,n??"")):It(this.node(),e)}function It(e,t){return e.style.getPropertyValue(t)||vi(e).getComputedStyle(e,null).getPropertyValue(t)}function Es(e){return function(){delete this[e]}}function xs(e,t){return function(){this[e]=t}}function Ss(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ns(e,t){return arguments.length>1?this.each((t==null?Es:typeof t=="function"?Ss:xs)(e,t)):this.node()[e]}function mi(e){return e.trim().split(/^|\s+/)}function Co(e){return e.classList||new yi(e)}function yi(e){this._node=e,this._names=mi(e.getAttribute("class")||"")}yi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function wi(e,t){for(var n=Co(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function _i(e,t){for(var n=Co(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function ks(e){return function(){wi(this,e)}}function Cs(e){return function(){_i(this,e)}}function Is(e,t){return function(){(t.apply(this,arguments)?wi:_i)(this,e)}}function Ms(e,t){var n=mi(e+"");if(arguments.length<2){for(var o=Co(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Is:t?ks:Cs)(n,t))}function Os(){this.textContent=""}function Ts(e){return function(){this.textContent=e}}function $s(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ps(e){return arguments.length?this.each(e==null?Os:(typeof e=="function"?$s:Ts)(e)):this.node().textContent}function Ds(){this.innerHTML=""}function As(e){return function(){this.innerHTML=e}}function Vs(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Rs(e){return arguments.length?this.each(e==null?Ds:(typeof e=="function"?Vs:As)(e)):this.node().innerHTML}function zs(){this.nextSibling&&this.parentNode.appendChild(this)}function Bs(){return this.each(zs)}function Ls(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fs(){return this.each(Ls)}function Gs(e){var t=typeof e=="function"?e:di(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Hs(){return null}function Ys(e,t){var n=typeof e=="function"?e:di(e),o=t==null?Hs:typeof t=="function"?t:ko(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Xs(){var e=this.parentNode;e&&e.removeChild(this)}function js(){return this.each(Xs)}function Ws(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Us(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Zs(e){return this.select(e?Us:Ws)}function Ks(e){return arguments.length?this.property("__data__",e):this.node().__data__}function qs(e){return function(t){e.call(this,t,this.__data__)}}function Qs(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Js(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function eu(e,t,n){return function(){var o=this.__on,r,i=qs(t);if(o){for(var a=0,l=o.length;a<l;++a)if((r=o[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function tu(e,t,n){var o=Qs(e+""),r,i=o.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,c;s<u;++s)for(r=0,c=l[s];r<i;++r)if((a=o[r]).type===c.type&&a.name===c.name)return c.value}return}for(l=t?eu:Js,r=0;r<i;++r)this.each(l(o[r],t,n));return this}function bi(e,t,n){var o=vi(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function nu(e,t){return function(){return bi(this,e,t)}}function ou(e,t){return function(){return bi(this,e,t.apply(this,arguments))}}function ru(e,t){return this.each((typeof t=="function"?ou:nu)(e,t))}function*iu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,a;r<i;++r)(a=o[r])&&(yield a)}var Ei=[null];function Ve(e,t){this._groups=e,this._parents=t}function Zt(){return new Ve([[document.documentElement]],Ei)}function au(){return this}Ve.prototype=Zt.prototype={constructor:Ve,select:$l,selectAll:Vl,selectChild:Ll,selectChildren:Yl,filter:Xl,data:ql,enter:jl,exit:Jl,join:es,merge:ts,selection:au,order:ns,sort:os,call:is,nodes:as,node:ls,size:ss,empty:us,each:cs,attr:ms,style:bs,property:Ns,classed:Ms,text:Ps,html:Rs,raise:Bs,lower:Fs,append:Gs,insert:Ys,remove:js,clone:Zs,datum:Ks,on:tu,dispatch:ru,[Symbol.iterator]:iu};function Le(e){return typeof e=="string"?new Ve([[document.querySelector(e)]],[document.documentElement]):new Ve([[e]],Ei)}function lu(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Xe(e,t){if(e=lu(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const su={passive:!1},Gt={capture:!0,passive:!1};function Ln(e){e.stopImmediatePropagation()}function St(e){e.preventDefault(),e.stopImmediatePropagation()}function xi(e){var t=e.document.documentElement,n=Le(e).on("dragstart.drag",St,Gt);"onselectstart"in t?n.on("selectstart.drag",St,Gt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Si(e,t){var n=e.document.documentElement,o=Le(e).on("dragstart.drag",null);t&&(o.on("click.drag",St,Gt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Qt=e=>()=>e;function so(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:a,y:l,dx:s,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}so.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function uu(e){return!e.ctrlKey&&!e.button}function cu(){return this.parentNode}function du(e,t){return t??{x:e.x,y:e.y}}function fu(){return navigator.maxTouchPoints||"ontouchstart"in this}function hu(){var e=uu,t=cu,n=du,o=fu,r={},i=kn("start","drag","end"),a=0,l,s,u,c,d=0;function h(S){S.on("mousedown.drag",f).filter(o).on("touchstart.drag",y).on("touchmove.drag",x,su).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(S,D){if(!(c||!e.call(this,S,D))){var V=E(this,t.call(this,S,D),S,D,"mouse");V&&(Le(S.view).on("mousemove.drag",p,Gt).on("mouseup.drag",_,Gt),xi(S.view),Ln(S),u=!1,l=S.clientX,s=S.clientY,V("start",S))}}function p(S){if(St(S),!u){var D=S.clientX-l,V=S.clientY-s;u=D*D+V*V>d}r.mouse("drag",S)}function _(S){Le(S.view).on("mousemove.drag mouseup.drag",null),Si(S.view,u),St(S),r.mouse("end",S)}function y(S,D){if(e.call(this,S,D)){var V=S.changedTouches,R=t.call(this,S,D),L=V.length,U,T;for(U=0;U<L;++U)(T=E(this,R,S,D,V[U].identifier,V[U]))&&(Ln(S),T("start",S,V[U]))}}function x(S){var D=S.changedTouches,V=D.length,R,L;for(R=0;R<V;++R)(L=r[D[R].identifier])&&(St(S),L("drag",S,D[R]))}function C(S){var D=S.changedTouches,V=D.length,R,L;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),R=0;R<V;++R)(L=r[D[R].identifier])&&(Ln(S),L("end",S,D[R]))}function E(S,D,V,R,L,U){var T=i.copy(),z=Xe(U||V,D),N,te,v;if((v=n.call(S,new so("beforestart",{sourceEvent:V,target:h,identifier:L,active:a,x:z[0],y:z[1],dx:0,dy:0,dispatch:T}),R))!=null)return N=v.x-z[0]||0,te=v.y-z[1]||0,function I(k,O,P){var A=z,B;switch(k){case"start":r[L]=I,B=a++;break;case"end":delete r[L],--a;case"drag":z=Xe(P||O,D),B=a;break}T.call(k,S,new so(k,{sourceEvent:O,subject:v,target:h,identifier:L,active:B,x:z[0]+N,y:z[1]+te,dx:z[0]-A[0],dy:z[1]-A[1],dispatch:T}),R)}}return h.filter=function(S){return arguments.length?(e=typeof S=="function"?S:Qt(!!S),h):e},h.container=function(S){return arguments.length?(t=typeof S=="function"?S:Qt(S),h):t},h.subject=function(S){return arguments.length?(n=typeof S=="function"?S:Qt(S),h):n},h.touchable=function(S){return arguments.length?(o=typeof S=="function"?S:Qt(!!S),h):o},h.on=function(){var S=i.on.apply(i,arguments);return S===i?h:S},h.clickDistance=function(S){return arguments.length?(d=(S=+S)*S,h):Math.sqrt(d)},h}function Io(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ni(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Kt(){}var Ht=.7,pn=1/Ht,Nt="\\s*([+-]?\\d+)\\s*",Yt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",We="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pu=/^#([0-9a-f]{3,8})$/,gu=new RegExp(`^rgb\\(${Nt},${Nt},${Nt}\\)$`),vu=new RegExp(`^rgb\\(${We},${We},${We}\\)$`),mu=new RegExp(`^rgba\\(${Nt},${Nt},${Nt},${Yt}\\)$`),yu=new RegExp(`^rgba\\(${We},${We},${We},${Yt}\\)$`),wu=new RegExp(`^hsl\\(${Yt},${We},${We}\\)$`),_u=new RegExp(`^hsla\\(${Yt},${We},${We},${Yt}\\)$`),Uo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Io(Kt,Xt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Zo,formatHex:Zo,formatHex8:bu,formatHsl:Eu,formatRgb:Ko,toString:Ko});function Zo(){return this.rgb().formatHex()}function bu(){return this.rgb().formatHex8()}function Eu(){return ki(this).formatHsl()}function Ko(){return this.rgb().formatRgb()}function Xt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=pu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?qo(t):n===3?new De(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Jt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Jt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=gu.exec(e))?new De(t[1],t[2],t[3],1):(t=vu.exec(e))?new De(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mu.exec(e))?Jt(t[1],t[2],t[3],t[4]):(t=yu.exec(e))?Jt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=wu.exec(e))?er(t[1],t[2]/100,t[3]/100,1):(t=_u.exec(e))?er(t[1],t[2]/100,t[3]/100,t[4]):Uo.hasOwnProperty(e)?qo(Uo[e]):e==="transparent"?new De(NaN,NaN,NaN,0):null}function qo(e){return new De(e>>16&255,e>>8&255,e&255,1)}function Jt(e,t,n,o){return o<=0&&(e=t=n=NaN),new De(e,t,n,o)}function xu(e){return e instanceof Kt||(e=Xt(e)),e?(e=e.rgb(),new De(e.r,e.g,e.b,e.opacity)):new De}function uo(e,t,n,o){return arguments.length===1?xu(e):new De(e,t,n,o??1)}function De(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Io(De,uo,Ni(Kt,{brighter(e){return e=e==null?pn:Math.pow(pn,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ht:Math.pow(Ht,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new De(pt(this.r),pt(this.g),pt(this.b),gn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qo,formatHex:Qo,formatHex8:Su,formatRgb:Jo,toString:Jo}));function Qo(){return`#${ht(this.r)}${ht(this.g)}${ht(this.b)}`}function Su(){return`#${ht(this.r)}${ht(this.g)}${ht(this.b)}${ht((isNaN(this.opacity)?1:this.opacity)*255)}`}function Jo(){const e=gn(this.opacity);return`${e===1?"rgb(":"rgba("}${pt(this.r)}, ${pt(this.g)}, ${pt(this.b)}${e===1?")":`, ${e})`}`}function gn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function pt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ht(e){return e=pt(e),(e<16?"0":"")+e.toString(16)}function er(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Fe(e,t,n,o)}function ki(e){if(e instanceof Fe)return new Fe(e.h,e.s,e.l,e.opacity);if(e instanceof Kt||(e=Xt(e)),!e)return new Fe;if(e instanceof Fe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,l=i-r,s=(i+r)/2;return l?(t===i?a=(n-o)/l+(n<o)*6:n===i?a=(o-t)/l+2:a=(t-n)/l+4,l/=s<.5?i+r:2-i-r,a*=60):l=s>0&&s<1?0:a,new Fe(a,l,s,e.opacity)}function Nu(e,t,n,o){return arguments.length===1?ki(e):new Fe(e,t,n,o??1)}function Fe(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Io(Fe,Nu,Ni(Kt,{brighter(e){return e=e==null?pn:Math.pow(pn,e),new Fe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ht:Math.pow(Ht,e),new Fe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new De(Fn(e>=240?e-240:e+120,r,o),Fn(e,r,o),Fn(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new Fe(tr(this.h),en(this.s),en(this.l),gn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=gn(this.opacity);return`${e===1?"hsl(":"hsla("}${tr(this.h)}, ${en(this.s)*100}%, ${en(this.l)*100}%${e===1?")":`, ${e})`}`}}));function tr(e){return e=(e||0)%360,e<0?e+360:e}function en(e){return Math.max(0,Math.min(1,e||0))}function Fn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ci=e=>()=>e;function ku(e,t){return function(n){return e+n*t}}function Cu(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Iu(e){return(e=+e)==1?Ii:function(t,n){return n-t?Cu(t,n,e):Ci(isNaN(t)?n:t)}}function Ii(e,t){var n=t-e;return n?ku(e,n):Ci(isNaN(e)?t:e)}const nr=function e(t){var n=Iu(t);function o(r,i){var a=n((r=uo(r)).r,(i=uo(i)).r),l=n(r.g,i.g),s=n(r.b,i.b),u=Ii(r.opacity,i.opacity);return function(c){return r.r=a(c),r.g=l(c),r.b=s(c),r.opacity=u(c),r+""}}return o.gamma=e,o}(1);function rt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var co=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gn=new RegExp(co.source,"g");function Mu(e){return function(){return e}}function Ou(e){return function(t){return e(t)+""}}function Tu(e,t){var n=co.lastIndex=Gn.lastIndex=0,o,r,i,a=-1,l=[],s=[];for(e=e+"",t=t+"";(o=co.exec(e))&&(r=Gn.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),l[a]?l[a]+=i:l[++a]=i),(o=o[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,s.push({i:a,x:rt(o,r)})),n=Gn.lastIndex;return n<t.length&&(i=t.slice(n),l[a]?l[a]+=i:l[++a]=i),l.length<2?s[0]?Ou(s[0].x):Mu(t):(t=s.length,function(u){for(var c=0,d;c<t;++c)l[(d=s[c]).i]=d.x(u);return l.join("")})}var or=180/Math.PI,fo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Mi(e,t,n,o,r,i){var a,l,s;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,s/=l),e*o<t*n&&(e=-e,t=-t,s=-s,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*or,skewX:Math.atan(s)*or,scaleX:a,scaleY:l}}var tn;function $u(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?fo:Mi(t.a,t.b,t.c,t.d,t.e,t.f)}function Pu(e){return e==null||(tn||(tn=document.createElementNS("http://www.w3.org/2000/svg","g")),tn.setAttribute("transform",e),!(e=tn.transform.baseVal.consolidate()))?fo:(e=e.matrix,Mi(e.a,e.b,e.c,e.d,e.e,e.f))}function Oi(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,c,d,h,f,p){if(u!==d||c!==h){var _=f.push("translate(",null,t,null,n);p.push({i:_-4,x:rt(u,d)},{i:_-2,x:rt(c,h)})}else(d||h)&&f.push("translate("+d+t+h+n)}function a(u,c,d,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:d.push(r(d)+"rotate(",null,o)-2,x:rt(u,c)})):c&&d.push(r(d)+"rotate("+c+o)}function l(u,c,d,h){u!==c?h.push({i:d.push(r(d)+"skewX(",null,o)-2,x:rt(u,c)}):c&&d.push(r(d)+"skewX("+c+o)}function s(u,c,d,h,f,p){if(u!==d||c!==h){var _=f.push(r(f)+"scale(",null,",",null,")");p.push({i:_-4,x:rt(u,d)},{i:_-2,x:rt(c,h)})}else(d!==1||h!==1)&&f.push(r(f)+"scale("+d+","+h+")")}return function(u,c){var d=[],h=[];return u=e(u),c=e(c),i(u.translateX,u.translateY,c.translateX,c.translateY,d,h),a(u.rotate,c.rotate,d,h),l(u.skewX,c.skewX,d,h),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,h),u=c=null,function(f){for(var p=-1,_=h.length,y;++p<_;)d[(y=h[p]).i]=y.x(f);return d.join("")}}}var Du=Oi($u,"px, ","px)","deg)"),Au=Oi(Pu,", ",")",")"),Vu=1e-12;function rr(e){return((e=Math.exp(e))+1/e)/2}function Ru(e){return((e=Math.exp(e))-1/e)/2}function zu(e){return((e=Math.exp(2*e))-1)/(e+1)}const Bu=function e(t,n,o){function r(i,a){var l=i[0],s=i[1],u=i[2],c=a[0],d=a[1],h=a[2],f=c-l,p=d-s,_=f*f+p*p,y,x;if(_<Vu)x=Math.log(h/u)/t,y=function(R){return[l+R*f,s+R*p,u*Math.exp(t*R*x)]};else{var C=Math.sqrt(_),E=(h*h-u*u+o*_)/(2*u*n*C),S=(h*h-u*u-o*_)/(2*h*n*C),D=Math.log(Math.sqrt(E*E+1)-E),V=Math.log(Math.sqrt(S*S+1)-S);x=(V-D)/t,y=function(R){var L=R*x,U=rr(D),T=u/(n*C)*(U*zu(t*L+D)-Ru(D));return[l+T*f,s+T*p,u*U/rr(t*L+D)]}}return y.duration=x*1e3*t/Math.SQRT2,y}return r.rho=function(i){var a=Math.max(.001,+i),l=a*a,s=l*l;return e(a,l,s)},r}(Math.SQRT2,2,4);var Mt=0,Vt=0,Dt=0,Ti=1e3,vn,Rt,mn=0,yt=0,In=0,jt=typeof performance=="object"&&performance.now?performance:Date,$i=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Mo(){return yt||($i(Lu),yt=jt.now()+In)}function Lu(){yt=0}function yn(){this._call=this._time=this._next=null}yn.prototype=Pi.prototype={constructor:yn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Mo():+n)+(t==null?0:+t),!this._next&&Rt!==this&&(Rt?Rt._next=this:vn=this,Rt=this),this._call=e,this._time=n,ho()},stop:function(){this._call&&(this._call=null,this._time=1/0,ho())}};function Pi(e,t,n){var o=new yn;return o.restart(e,t,n),o}function Fu(){Mo(),++Mt;for(var e=vn,t;e;)(t=yt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Mt}function ir(){yt=(mn=jt.now())+In,Mt=Vt=0;try{Fu()}finally{Mt=0,Hu(),yt=0}}function Gu(){var e=jt.now(),t=e-mn;t>Ti&&(In-=t,mn=e)}function Hu(){for(var e,t=vn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:vn=n);Rt=e,ho(o)}function ho(e){if(!Mt){Vt&&(Vt=clearTimeout(Vt));var t=e-yt;t>24?(e<1/0&&(Vt=setTimeout(ir,e-jt.now()-In)),Dt&&(Dt=clearInterval(Dt))):(Dt||(mn=jt.now(),Dt=setInterval(Gu,Ti)),Mt=1,$i(ir))}}function ar(e,t,n){var o=new yn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Yu=kn("start","end","cancel","interrupt"),Xu=[],Di=0,lr=1,po=2,cn=3,sr=4,go=5,dn=6;function Mn(e,t,n,o,r,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;ju(e,n,{name:t,index:o,group:r,on:Yu,tween:Xu,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Di})}function Oo(e,t){var n=Ge(e,t);if(n.state>Di)throw new Error("too late; already scheduled");return n}function Ue(e,t){var n=Ge(e,t);if(n.state>cn)throw new Error("too late; already running");return n}function Ge(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ju(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=Pi(i,0,n.time);function i(u){n.state=lr,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,d,h,f;if(n.state!==lr)return s();for(c in o)if(f=o[c],f.name===n.name){if(f.state===cn)return ar(a);f.state===sr?(f.state=dn,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[c]):+c<t&&(f.state=dn,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[c])}if(ar(function(){n.state===cn&&(n.state=sr,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=po,n.on.call("start",e,e.__data__,n.index,n.group),n.state===po){for(n.state=cn,r=new Array(h=n.tween.length),c=0,d=-1;c<h;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=f);r.length=d+1}}function l(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=go,1),d=-1,h=r.length;++d<h;)r[d].call(e,c);n.state===go&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=dn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function fn(e,t){var n=e.__transition,o,r,i=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((o=n[a]).name!==t){i=!1;continue}r=o.state>po&&o.state<go,o.state=dn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[a]}i&&delete e.__transition}}function Wu(e){return this.each(function(){fn(this,e)})}function Uu(e,t){var n,o;return function(){var r=Ue(this,e),i=r.tween;if(i!==n){o=n=i;for(var a=0,l=o.length;a<l;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}r.tween=o}}function Zu(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=Ue(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var l={name:t,value:n},s=0,u=r.length;s<u;++s)if(r[s].name===t){r[s]=l;break}s===u&&r.push(l)}i.tween=r}}function Ku(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Ge(this.node(),n).tween,r=0,i=o.length,a;r<i;++r)if((a=o[r]).name===e)return a.value;return null}return this.each((t==null?Uu:Zu)(n,e,t))}function To(e,t,n){var o=e._id;return e.each(function(){var r=Ue(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Ge(r,o).value[t]}}function Ai(e,t){var n;return(typeof t=="number"?rt:t instanceof Xt?nr:(n=Xt(t))?(t=n,nr):Tu)(e,t)}function qu(e){return function(){this.removeAttribute(e)}}function Qu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ju(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttribute(e);return a===r?null:a===o?i:i=t(o=a,n)}}function ec(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===o?i:i=t(o=a,n)}}function tc(e,t,n){var o,r,i;return function(){var a,l=n(this),s;return l==null?void this.removeAttribute(e):(a=this.getAttribute(e),s=l+"",a===s?null:a===o&&s===r?i:(r=s,i=t(o=a,l)))}}function nc(e,t,n){var o,r,i;return function(){var a,l=n(this),s;return l==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),s=l+"",a===s?null:a===o&&s===r?i:(r=s,i=t(o=a,l)))}}function oc(e,t){var n=Cn(e),o=n==="transform"?Au:Ai;return this.attrTween(e,typeof t=="function"?(n.local?nc:tc)(n,o,To(this,"attr."+e,t)):t==null?(n.local?Qu:qu)(n):(n.local?ec:Ju)(n,o,t))}function rc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ic(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ac(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&ic(e,i)),n}return r._value=t,r}function lc(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&rc(e,i)),n}return r._value=t,r}function sc(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Cn(e);return this.tween(n,(o.local?ac:lc)(o,t))}function uc(e,t){return function(){Oo(this,e).delay=+t.apply(this,arguments)}}function cc(e,t){return t=+t,function(){Oo(this,e).delay=t}}function dc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?uc:cc)(t,e)):Ge(this.node(),t).delay}function fc(e,t){return function(){Ue(this,e).duration=+t.apply(this,arguments)}}function hc(e,t){return t=+t,function(){Ue(this,e).duration=t}}function pc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fc:hc)(t,e)):Ge(this.node(),t).duration}function gc(e,t){if(typeof t!="function")throw new Error;return function(){Ue(this,e).ease=t}}function vc(e){var t=this._id;return arguments.length?this.each(gc(t,e)):Ge(this.node(),t).ease}function mc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ue(this,e).ease=n}}function yc(e){if(typeof e!="function")throw new Error;return this.each(mc(this._id,e))}function wc(e){typeof e!="function"&&(e=hi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,l=o[r]=[],s,u=0;u<a;++u)(s=i[u])&&e.call(s,s.__data__,u,i)&&l.push(s);return new et(o,this._parents,this._name,this._id)}function _c(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),l=0;l<i;++l)for(var s=t[l],u=n[l],c=s.length,d=a[l]=new Array(c),h,f=0;f<c;++f)(h=s[f]||u[f])&&(d[f]=h);for(;l<o;++l)a[l]=t[l];return new et(a,this._parents,this._name,this._id)}function bc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ec(e,t,n){var o,r,i=bc(t)?Oo:Ue;return function(){var a=i(this,e),l=a.on;l!==o&&(r=(o=l).copy()).on(t,n),a.on=r}}function xc(e,t){var n=this._id;return arguments.length<2?Ge(this.node(),n).on.on(e):this.each(Ec(n,e,t))}function Sc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Nc(){return this.on("end.remove",Sc(this._id))}function kc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ko(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var l=o[a],s=l.length,u=i[a]=new Array(s),c,d,h=0;h<s;++h)(c=l[h])&&(d=e.call(c,c.__data__,h,l))&&("__data__"in c&&(d.__data__=c.__data__),u[h]=d,Mn(u[h],t,n,h,u,Ge(c,n)));return new et(i,this._parents,t,n)}function Cc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=fi(e));for(var o=this._groups,r=o.length,i=[],a=[],l=0;l<r;++l)for(var s=o[l],u=s.length,c,d=0;d<u;++d)if(c=s[d]){for(var h=e.call(c,c.__data__,d,s),f,p=Ge(c,n),_=0,y=h.length;_<y;++_)(f=h[_])&&Mn(f,t,n,_,h,p);i.push(h),a.push(c)}return new et(i,a,t,n)}var Ic=Zt.prototype.constructor;function Mc(){return new Ic(this._groups,this._parents)}function Oc(e,t){var n,o,r;return function(){var i=It(this,e),a=(this.style.removeProperty(e),It(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}function Vi(e){return function(){this.style.removeProperty(e)}}function Tc(e,t,n){var o,r=n+"",i;return function(){var a=It(this,e);return a===r?null:a===o?i:i=t(o=a,n)}}function $c(e,t,n){var o,r,i;return function(){var a=It(this,e),l=n(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(e),It(this,e))),a===s?null:a===o&&s===r?i:(r=s,i=t(o=a,l))}}function Pc(e,t){var n,o,r,i="style."+t,a="end."+i,l;return function(){var s=Ue(this,e),u=s.on,c=s.value[i]==null?l||(l=Vi(t)):void 0;(u!==n||r!==c)&&(o=(n=u).copy()).on(a,r=c),s.on=o}}function Dc(e,t,n){var o=(e+="")=="transform"?Du:Ai;return t==null?this.styleTween(e,Oc(e,o)).on("end.style."+e,Vi(e)):typeof t=="function"?this.styleTween(e,$c(e,o,To(this,"style."+e,t))).each(Pc(this._id,e)):this.styleTween(e,Tc(e,o,t),n).on("end.style."+e,null)}function Ac(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Vc(e,t,n){var o,r;function i(){var a=t.apply(this,arguments);return a!==r&&(o=(r=a)&&Ac(e,a,n)),o}return i._value=t,i}function Rc(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Vc(e,t,n??""))}function zc(e){return function(){this.textContent=e}}function Bc(e){return function(){var t=e(this);this.textContent=t??""}}function Lc(e){return this.tween("text",typeof e=="function"?Bc(To(this,"text",e)):zc(e==null?"":e+""))}function Fc(e){return function(t){this.textContent=e.call(this,t)}}function Gc(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Fc(r)),t}return o._value=e,o}function Hc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Gc(e))}function Yc(){for(var e=this._name,t=this._id,n=Ri(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],l=a.length,s,u=0;u<l;++u)if(s=a[u]){var c=Ge(s,t);Mn(s,e,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new et(o,this._parents,e,n)}function Xc(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,a){var l={value:a},s={value:function(){--r===0&&i()}};n.each(function(){var u=Ue(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(s)),u.on=t}),r===0&&i()})}var jc=0;function et(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Ri(){return++jc}var Ze=Zt.prototype;et.prototype={constructor:et,select:kc,selectAll:Cc,selectChild:Ze.selectChild,selectChildren:Ze.selectChildren,filter:wc,merge:_c,selection:Mc,transition:Yc,call:Ze.call,nodes:Ze.nodes,node:Ze.node,size:Ze.size,empty:Ze.empty,each:Ze.each,on:xc,attr:oc,attrTween:sc,style:Dc,styleTween:Rc,text:Lc,textTween:Hc,remove:Nc,tween:Ku,delay:dc,duration:pc,ease:vc,easeVarying:yc,end:Xc,[Symbol.iterator]:Ze[Symbol.iterator]};function Wc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Uc={time:null,delay:0,duration:250,ease:Wc};function Zc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Kc(e){var t,n;e instanceof et?(t=e._id,e=e._name):(t=Ri(),(n=Uc).time=Mo(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],l=a.length,s,u=0;u<l;++u)(s=a[u])&&Mn(s,e,t,u,a,n||Zc(s,t));return new et(o,this._parents,e,t)}Zt.prototype.interrupt=Wu;Zt.prototype.transition=Kc;const nn=e=>()=>e;function qc(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Qe(e,t,n){this.k=e,this.x=t,this.y=n}Qe.prototype={constructor:Qe,scale:function(e){return e===1?this:new Qe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Qe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ot=new Qe(1,0,0);Qe.prototype;function Hn(e){e.stopImmediatePropagation()}function At(e){e.preventDefault(),e.stopImmediatePropagation()}function Qc(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Jc(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ur(){return this.__zoom||Ot}function ed(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function td(){return navigator.maxTouchPoints||"ontouchstart"in this}function nd(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function od(){var e=Qc,t=Jc,n=nd,o=ed,r=td,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,s=Bu,u=kn("start","zoom","end"),c,d,h,f=500,p=150,_=0,y=10;function x(v){v.property("__zoom",ur).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",T).filter(r).on("touchstart.zoom",z).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",te).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(v,I,k,O){var P=v.selection?v.selection():v;P.property("__zoom",ur),v!==P?D(v,I,k,O):P.interrupt().each(function(){V(this,arguments).event(O).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},x.scaleBy=function(v,I,k,O){x.scaleTo(v,function(){var P=this.__zoom.k,A=typeof I=="function"?I.apply(this,arguments):I;return P*A},k,O)},x.scaleTo=function(v,I,k,O){x.transform(v,function(){var P=t.apply(this,arguments),A=this.__zoom,B=k==null?S(P):typeof k=="function"?k.apply(this,arguments):k,X=A.invert(B),ne=typeof I=="function"?I.apply(this,arguments):I;return n(E(C(A,ne),B,X),P,a)},k,O)},x.translateBy=function(v,I,k,O){x.transform(v,function(){return n(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof k=="function"?k.apply(this,arguments):k),t.apply(this,arguments),a)},null,O)},x.translateTo=function(v,I,k,O,P){x.transform(v,function(){var A=t.apply(this,arguments),B=this.__zoom,X=O==null?S(A):typeof O=="function"?O.apply(this,arguments):O;return n(Ot.translate(X[0],X[1]).scale(B.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof k=="function"?-k.apply(this,arguments):-k),A,a)},O,P)};function C(v,I){return I=Math.max(i[0],Math.min(i[1],I)),I===v.k?v:new Qe(I,v.x,v.y)}function E(v,I,k){var O=I[0]-k[0]*v.k,P=I[1]-k[1]*v.k;return O===v.x&&P===v.y?v:new Qe(v.k,O,P)}function S(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function D(v,I,k,O){v.on("start.zoom",function(){V(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){V(this,arguments).event(O).end()}).tween("zoom",function(){var P=this,A=arguments,B=V(P,A).event(O),X=t.apply(P,A),ne=k==null?S(X):typeof k=="function"?k.apply(P,A):k,Y=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),F=P.__zoom,q=typeof I=="function"?I.apply(P,A):I,fe=s(F.invert(ne).concat(Y/F.k),q.invert(ne).concat(Y/q.k));return function(se){if(se===1)se=q;else{var he=fe(se),re=Y/he[2];se=new Qe(re,ne[0]-he[0]*re,ne[1]-he[1]*re)}B.zoom(null,se)}})}function V(v,I,k){return!k&&v.__zooming||new R(v,I)}function R(v,I){this.that=v,this.args=I,this.active=0,this.sourceEvent=null,this.extent=t.apply(v,I),this.taps=0}R.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,I){return this.mouse&&v!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var I=Le(this.that).datum();u.call(v,this.that,new qc(v,{sourceEvent:this.sourceEvent,target:x,type:v,transform:this.that.__zoom,dispatch:u}),I)}};function L(v,...I){if(!e.apply(this,arguments))return;var k=V(this,I).event(v),O=this.__zoom,P=Math.max(i[0],Math.min(i[1],O.k*Math.pow(2,o.apply(this,arguments)))),A=Xe(v);if(k.wheel)(k.mouse[0][0]!==A[0]||k.mouse[0][1]!==A[1])&&(k.mouse[1]=O.invert(k.mouse[0]=A)),clearTimeout(k.wheel);else{if(O.k===P)return;k.mouse=[A,O.invert(A)],fn(this),k.start()}At(v),k.wheel=setTimeout(B,p),k.zoom("mouse",n(E(C(O,P),k.mouse[0],k.mouse[1]),k.extent,a));function B(){k.wheel=null,k.end()}}function U(v,...I){if(h||!e.apply(this,arguments))return;var k=v.currentTarget,O=V(this,I,!0).event(v),P=Le(v.view).on("mousemove.zoom",ne,!0).on("mouseup.zoom",Y,!0),A=Xe(v,k),B=v.clientX,X=v.clientY;xi(v.view),Hn(v),O.mouse=[A,this.__zoom.invert(A)],fn(this),O.start();function ne(F){if(At(F),!O.moved){var q=F.clientX-B,fe=F.clientY-X;O.moved=q*q+fe*fe>_}O.event(F).zoom("mouse",n(E(O.that.__zoom,O.mouse[0]=Xe(F,k),O.mouse[1]),O.extent,a))}function Y(F){P.on("mousemove.zoom mouseup.zoom",null),Si(F.view,O.moved),At(F),O.event(F).end()}}function T(v,...I){if(e.apply(this,arguments)){var k=this.__zoom,O=Xe(v.changedTouches?v.changedTouches[0]:v,this),P=k.invert(O),A=k.k*(v.shiftKey?.5:2),B=n(E(C(k,A),O,P),t.apply(this,I),a);At(v),l>0?Le(this).transition().duration(l).call(D,B,O,v):Le(this).call(x.transform,B,O,v)}}function z(v,...I){if(e.apply(this,arguments)){var k=v.touches,O=k.length,P=V(this,I,v.changedTouches.length===O).event(v),A,B,X,ne;for(Hn(v),B=0;B<O;++B)X=k[B],ne=Xe(X,this),ne=[ne,this.__zoom.invert(ne),X.identifier],P.touch0?!P.touch1&&P.touch0[2]!==ne[2]&&(P.touch1=ne,P.taps=0):(P.touch0=ne,A=!0,P.taps=1+!!c);c&&(c=clearTimeout(c)),A&&(P.taps<2&&(d=ne[0],c=setTimeout(function(){c=null},f)),fn(this),P.start())}}function N(v,...I){if(this.__zooming){var k=V(this,I).event(v),O=v.changedTouches,P=O.length,A,B,X,ne;for(At(v),A=0;A<P;++A)B=O[A],X=Xe(B,this),k.touch0&&k.touch0[2]===B.identifier?k.touch0[0]=X:k.touch1&&k.touch1[2]===B.identifier&&(k.touch1[0]=X);if(B=k.that.__zoom,k.touch1){var Y=k.touch0[0],F=k.touch0[1],q=k.touch1[0],fe=k.touch1[1],se=(se=q[0]-Y[0])*se+(se=q[1]-Y[1])*se,he=(he=fe[0]-F[0])*he+(he=fe[1]-F[1])*he;B=C(B,Math.sqrt(se/he)),X=[(Y[0]+q[0])/2,(Y[1]+q[1])/2],ne=[(F[0]+fe[0])/2,(F[1]+fe[1])/2]}else if(k.touch0)X=k.touch0[0],ne=k.touch0[1];else return;k.zoom("touch",n(E(B,X,ne),k.extent,a))}}function te(v,...I){if(this.__zooming){var k=V(this,I).event(v),O=v.changedTouches,P=O.length,A,B;for(Hn(v),h&&clearTimeout(h),h=setTimeout(function(){h=null},f),A=0;A<P;++A)B=O[A],k.touch0&&k.touch0[2]===B.identifier?delete k.touch0:k.touch1&&k.touch1[2]===B.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(B=Xe(B,this),Math.hypot(d[0]-B[0],d[1]-B[1])<y)){var X=Le(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return x.wheelDelta=function(v){return arguments.length?(o=typeof v=="function"?v:nn(+v),x):o},x.filter=function(v){return arguments.length?(e=typeof v=="function"?v:nn(!!v),x):e},x.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:nn(!!v),x):r},x.extent=function(v){return arguments.length?(t=typeof v=="function"?v:nn([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),x):t},x.scaleExtent=function(v){return arguments.length?(i[0]=+v[0],i[1]=+v[1],x):[i[0],i[1]]},x.translateExtent=function(v){return arguments.length?(a[0][0]=+v[0][0],a[1][0]=+v[1][0],a[0][1]=+v[0][1],a[1][1]=+v[1][1],x):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},x.constrain=function(v){return arguments.length?(n=v,x):n},x.duration=function(v){return arguments.length?(l=+v,x):l},x.interpolate=function(v){return arguments.length?(s=v,x):s},x.on=function(){var v=u.on.apply(u,arguments);return v===u?x:v},x.clickDistance=function(v){return arguments.length?(_=(v=+v)*v,x):Math.sqrt(_)},x.tapDistance=function(v){return arguments.length?(y=+v,x):y},x}var j=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(j||{}),$o=(e=>(e.Partial="partial",e.Full="full",e))($o||{}),dt=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(dt||{}),wt=(e=>(e.Strict="strict",e.Loose="loose",e))(wt||{}),vo=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(vo||{}),Lt=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Lt||{});function mo(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,r=typeof(o==null?void 0:o.hasAttribute)=="function"?o.hasAttribute("contenteditable"):!1,i=typeof(o==null?void 0:o.closest)=="function"?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(o==null?void 0:o.nodeName)||r||!!i}function rd(e){return e.ctrlKey||e.metaKey||e.shiftKey}function cr(e,t,n,o){const r=t.split("+").map(i=>i.trim().toLowerCase());return r.length===1?e.toLowerCase()===t.toLowerCase():(o?n.delete(e.toLowerCase()):n.add(e.toLowerCase()),r.every((i,a)=>n.has(i)&&Array.from(n.values())[a]===r[a]))}function id(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=ad(n.code,e);return Array.isArray(e)?e.some(r=>cr(n[o],r,t,n.type==="keyup")):cr(n[o],e,t,n.type==="keyup")}}function ad(e,t){return typeof t=="string"?e===t?"code":"key":t.includes(e)?"code":"key"}function Ft(e,t){const n=Ee(()=>pe(t==null?void 0:t.actInsideInputWithModifier)??!1),o=Ee(()=>pe(t==null?void 0:t.target)??window),r=de(pe(e)===!0);let i=!1;const a=new Set;let l=u(pe(e));me(()=>pe(e),(c,d)=>{typeof d=="boolean"&&typeof c!="boolean"&&s(),l=u(c)},{immediate:!0}),tt(()=>{ci(window,["blur","contextmenu"],s)}),Xo((...c)=>l(...c),c=>{i=rd(c),!((!i||i&&!n.value)&&mo(c))&&(c.preventDefault(),r.value=!0)},{eventName:"keydown",target:o}),Xo((...c)=>l(...c),c=>{if(r.value){if((!i||i&&!n.value)&&mo(c))return;s()}},{eventName:"keyup",target:o});function s(){i=!1,a.clear(),r.value=!1}function u(c){return c===null?(s(),()=>!1):typeof c=="boolean"?(s(),r.value=c,()=>!1):Array.isArray(c)||typeof c=="string"?id(c,a):c}return r}const zi="vue-flow__node-desc",Bi="vue-flow__edge-desc",ld="vue-flow__aria-live",Li=["Enter"," ","Escape"],kt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function yo(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function wo(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function On(e){return{width:e.offsetWidth,height:e.offsetHeight}}function _t(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Fi(e,t){return{x:_t(e.x,t[0][0],t[1][0]),y:_t(e.y,t[0][1],t[1][1])}}function dr(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function ut(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function gt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!ut(e)}function zt(e){return gt(e)&&"computedPosition"in e}function on(e){return!Number.isNaN(e)&&Number.isFinite(e)}function sd(e){return on(e.width)&&on(e.height)&&on(e.x)&&on(e.y)}function ud(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:xt({width:0,height:0}),computedPosition:xt({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:ke(e.data)?e.data:{},events:xt(ke(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function Gi(e,t,n){var o,r;const i={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(r=e.targetHandle)==null?void 0:r.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:ke(e.data)?e.data:{},events:xt(ke(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??i,e,{id:e.id.toString()})}function Hi(e,t,n,o){const r=typeof e=="string"?e:e.id,i=new Set,a=o==="source"?"target":"source";for(const l of n)l[a]===r&&i.add(l[o]);return t.filter(l=>i.has(l.id))}function cd(...e){if(e.length===3){const[i,a,l]=e;return Hi(i,a,l,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>ut(i)&&i.source===o).map(i=>n.find(a=>gt(a)&&a.id===i.target))}function dd(...e){if(e.length===3){const[i,a,l]=e;return Hi(i,a,l,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>ut(i)&&i.target===o).map(i=>n.find(a=>gt(a)&&a.id===i.source))}function Yi({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function fd(e,t){return t.some(n=>ut(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Xi({x:e,y:t},{x:n,y:o,zoom:r}){return{x:e*r+n,y:t*r+o}}function wn({x:e,y:t},{x:n,y:o,zoom:r},i=!1,[a,l]=[1,1]){const s={x:(e-n)/r,y:(t-o)/r};return i?{x:a*Math.round(s.x/a),y:l*Math.round(s.y/l)}:s}function hd(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function ji({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function pd({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function Wi(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=hd(t,ji({...o.computedPosition,...o.dimensions}))}return pd(t)}function Ui(e,t,n={x:0,y:0,zoom:1},o=!1,r=!1){const i={...wn(t,n),width:t.width/n.zoom,height:t.height/n.zoom},a=[];for(const l of e){const{dimensions:s,selectable:u=!0,hidden:c=!1}=l,d=s.width??l.width??null,h=s.height??l.height??null;if(r&&!u||c)continue;const f=wo(i,yo(l)),p=d===null||h===null,_=o&&f>0,y=(d??0)*(h??0);(p||_||f>=y||l.dragging)&&a.push(l)}return a}function Zi(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function fr(e,t,n,o,r,i=.1,a={x:0,y:0}){const l=t/(e.width*(1+i)),s=n/(e.height*(1+i)),u=Math.min(l,s),c=_t(u,o,r),d=e.x+e.width/2,h=e.y+e.height/2,f=t/2-d*c+(a.x??0),p=n/2-h*c+(a.y??0);return{x:f,y:p,zoom:c}}function gd(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function Ki(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:Ki(n,t):!1}function Wt(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function hr(e,t,n){return e<t?_t(Math.abs(e-t),1,t)/t:e>n?-_t(Math.abs(e-n),1,t)/t:0}function qi(e,t,n=15,o=40){const r=hr(e.x,o,t.width-o)*n,i=hr(e.y,o,t.height-o)*n;return[r,i]}function Yn(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let r={};if(typeof t.style=="function"?r={...t.style(t)}:t.style&&(r={...t.style}),r.width=r.width??`${t.dimensions.width}px`,r.height=r.height??`${t.dimensions.height}px`,n>0)if(typeof r.width=="string"){const i=Number(r.width.replace("px",""));r.width=`${i+n}px`}else r.width+=n;if(o>0)if(typeof r.height=="string"){const i=Number(r.height.replace("px",""));r.height=`${i+o}px`}else r.height+=o;if(e.position.x<0){const i=Math.abs(e.position.x);if(t.position.x=t.position.x-i,typeof r.width=="string"){const a=Number(r.width.replace("px",""));r.width=`${a+i}px`}else r.width+=i;e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);if(t.position.y=t.position.y-i,typeof r.height=="string"){const a=Number(r.height.replace("px",""));r.height=`${a+i}px`}else r.height+=i;e.position.y=0}t.dimensions.width=Number(r.width.toString().replace("px","")),t.dimensions.height=Number(r.height.toString().replace("px","")),typeof t.style=="function"?t.style=i=>{const a=t.style;return{...a(i),...r}}:t.style={...t.style,...r}}}}function pr(e,t){var n,o;const r=e.filter(a=>a.type==="add"||a.type==="remove");for(const a of r)if(a.type==="add")t.findIndex(s=>s.id===a.item.id)===-1&&t.push(a.item);else if(a.type==="remove"){const l=t.findIndex(s=>s.id===a.id);l!==-1&&t.splice(l,1)}const i=t.map(a=>a.id);for(const a of t)for(const l of e)if(l.id===a.id)switch(l.type){case"select":a.selected=l.selected;break;case"position":if(zt(a)&&(typeof l.position<"u"&&(a.position=l.position),typeof l.dragging<"u"&&(a.dragging=l.dragging),a.expandParent&&a.parentNode)){const s=t[i.indexOf(a.parentNode)];s&&zt(s)&&Yn(a,s)}break;case"dimensions":if(zt(a)&&(typeof l.dimensions<"u"&&(a.dimensions=l.dimensions),typeof l.updateStyle<"u"&&l.updateStyle&&(a.style={...a.style||{},width:`${(n=l.dimensions)==null?void 0:n.width}px`,height:`${(o=l.dimensions)==null?void 0:o.height}px`}),typeof l.resizing<"u"&&(a.resizing=l.resizing),a.expandParent&&a.parentNode)){const s=t[i.indexOf(a.parentNode)];s&&zt(s)&&(!!s.dimensions.width&&!!s.dimensions.height?Yn(a,s):Je(()=>{Yn(a,s)}))}break}return t}function ot(e,t){return{id:e,type:"select",selected:t}}function gr(e){return{item:e,type:"add"}}function vr(e){return{id:e,type:"remove"}}function mr(e,t,n,o,r){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:r||null,type:"remove"}}function it(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const a=t.has(r);!(i.selected===void 0&&!a)&&i.selected!==a&&(n&&(i.selected=a),o.push(ot(i.id,a)))}return o}function G(e){const t=new Set;let n=!1;const o=()=>t.size>0;e&&(n=!0,t.add(e));const r=l=>{t.delete(l)};return{on:l=>{e&&n&&t.delete(e),t.add(l);const s=()=>{r(l),e&&n&&t.add(e)};return Nn(s),{off:s}},off:r,trigger:l=>Promise.all(Array.from(t).map(s=>s(l))),hasListeners:o,fns:t}}function yr(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function vd(e,t,n,o,r){var i,a;const l=[];for(const s of e)(s.selected||s.id===r)&&(!s.parentNode||!Ki(s,o))&&(s.draggable||t&&typeof s.draggable>"u")&&l.push(xt({id:s.id,position:s.position||{x:0,y:0},distance:{x:n.x-((i=s.computedPosition)==null?void 0:i.x)||0,y:n.y-((a=s.computedPosition)==null?void 0:a.y)||0},from:s.computedPosition,extent:s.extent,parentNode:s.parentNode,dimensions:s.dimensions,expandParent:s.expandParent}));return l}function Xn({id:e,dragItems:t,findNode:n}){const o=[];for(const r of t){const i=n(r.id);i&&o.push(i)}return[e?o.find(r=>r.id===e):o[0],o]}function Qi(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function md(e,t,n){const[o,r,i,a]=typeof e!="string"?Qi(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+a,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-r,n.computedPosition.y+n.dimensions.height-i]]:!1}function yd(e,t,n,o){let r=e.extent||n;if((r==="parent"||!Array.isArray(r)&&(r==null?void 0:r.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const i=md(r,e,o);i&&(r=i)}else t(new Oe(Ce.NODE_EXTENT_INVALID,e.id)),r=n;else if(Array.isArray(r)){const i=(o==null?void 0:o.computedPosition.x)||0,a=(o==null?void 0:o.computedPosition.y)||0;r=[[r[0][0]+i,r[0][1]+a],[r[1][0]+i,r[1][1]+a]]}else if(r!=="parent"&&(r!=null&&r.range)&&Array.isArray(r.range)){const[i,a,l,s]=Qi(r.padding),u=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;r=[[r.range[0][0]+u+s,r.range[0][1]+c+i],[r.range[1][0]+u-a,r.range[1][1]+c-l]]}return r==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:r}function wd({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function Po(e,t,n,o,r){const i=wd(e.dimensions,yd(e,n,o,r)),a=Fi(t,i);return{position:{x:a.x-((r==null?void 0:r.computedPosition.x)||0),y:a.y-((r==null?void 0:r.computedPosition.y)||0)},computedPosition:a}}function _n(e,t,n=j.Left){const o=((t==null?void 0:t.x)??0)+e.computedPosition.x,r=((t==null?void 0:t.y)??0)+e.computedPosition.y,{width:i,height:a}=t??Ed(e);switch((t==null?void 0:t.position)??n){case j.Top:return{x:o+i/2,y:r};case j.Right:return{x:o+i,y:r+a/2};case j.Bottom:return{x:o+i/2,y:r+a};case j.Left:return{x:o,y:r+a/2}}}function wr(e=[],t){return e.length&&(t?e.find(n=>n.id===t):e[0])||null}function _d({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:a,height:l,viewport:s}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=ji({x:(0-s.x)/s.zoom,y:(0-s.y)/s.zoom,width:a/s.zoom,height:l/s.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),h=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*h)>0}function bd(e,t,n=!1){const o=typeof e.zIndex=="number";let r=o?e.zIndex:0;const i=t(e.source),a=t(e.target);return!i||!a?0:(n&&(r=o?e.zIndex:Math.max(i.computedPosition.z||0,a.computedPosition.z||0)),r)}var Ce=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Ce||{});const _r={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class Oe extends Error{constructor(t,...n){var o;super((o=_r[t])==null?void 0:o.call(_r,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function Do(e){return"clientX"in e}function lt(e,t){var n,o;const r=Do(e),i=r?e.clientX:(n=e.touches)==null?void 0:n[0].clientX,a=r?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}}const bn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Ed(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function Ji(){return{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}}function jn(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function br(e,t,n,o){const r=[];for(const i of t[n]||[])if(`${e.id}-${i.id}-${n}`!==o){const{x:a,y:l}=_n(e,i);r.push({id:i.id||null,type:n,nodeId:e.id,x:a,y:l})}return r}function xd(e,t,n,o,r,i){const{x:a,y:l}=lt(e),u=t.elementsFromPoint(a,l).find(p=>p.classList.contains("vue-flow__handle"));if(u){const p=u.getAttribute("data-nodeid");if(p){const _=Ao(void 0,u),y=u.getAttribute("data-handleid"),x=i({nodeId:p,id:y,type:_});if(x){const C=r.find(E=>E.nodeId===p&&E.type===_&&E.id===y);return{handle:{id:y,type:_,nodeId:p,x:(C==null?void 0:C.x)||n.x,y:(C==null?void 0:C.y)||n.y},validHandleResult:x}}}}let c=[],d=Number.POSITIVE_INFINITY;for(const p of r){const _=Math.sqrt((p.x-n.x)**2+(p.y-n.y)**2);if(_<=o){const y=i(p);_<=d&&(_<d?c=[{handle:p,validHandleResult:y}]:_===d&&c.push({handle:p,validHandleResult:y}),d=_)}}if(!c.length)return{handle:null,validHandleResult:Ji()};if(c.length===1)return c[0];const h=c.some(({validHandleResult:p})=>p.isValid),f=c.some(({handle:p})=>p.type==="target");return c.find(({handle:p,validHandleResult:_})=>f?p.type==="target":h?_.isValid:!0)||c[0]}function Er(e,t,n,o,r,i,a,l,s,u,c){const d=i==="target",h=l.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:f,y:p}=lt(e),_=l.elementFromPoint(f,p),y=_!=null&&_.classList.contains("vue-flow__handle")?_:h,x=Ji();if(y){x.handleDomNode=y;const C=Ao(void 0,y),E=y.getAttribute("data-nodeid"),S=y.getAttribute("data-handleid"),D=y.classList.contains("connectable"),V=y.classList.contains("connectableend"),R={source:d?E:o,sourceHandle:d?S:r,target:d?o:E,targetHandle:d?r:S};x.connection=R,D&&V&&(n===wt.Strict?d&&C==="source"||!d&&C==="target":E!==o||S!==r)&&(x.isValid=a(R,{edges:s,nodes:u,sourceNode:c(R.source),targetNode:c(R.target)}),x.endHandle={nodeId:E,handleId:S,type:C,position:x.isValid?y.getAttribute("data-handlepos"):null})}return x}function Sd({nodes:e,nodeId:t,handleId:n,handleType:o}){const r=[];for(let i=0;i<e.length;i++){const a=e[i],{handleBounds:l}=a;let s=[],u=[];l&&(s=br(a,l,"source",`${t}-${n}-${o}`),u=br(a,l,"target",`${t}-${n}-${o}`)),r.push(...s,...u)}return r}function Ao(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Nd(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const kd=["production","prod"];function Tn(e,...t){ea()&&console.warn(`[Vue Flow]: ${e}`,...t)}function ea(){return!kd.includes("production")}function xr(e,t,n,o){const r=t.querySelectorAll(`.vue-flow__handle${e}`);return Array.from(r).map(a=>{const l=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(l.left-n.left)/o,y:(l.top-n.top)/o,...On(a)}})}function _o(e,t,n,o,r,i=!1,a){r.value=!1,e.selected?(i||e.selected&&t)&&(o([e]),Je(()=>{a.blur()})):n([e])}function ke(e){return typeof $(e)<"u"}function Cd(e,t,n,o){if(!e||!e.source||!e.target)return n(new Oe(Ce.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let r;return ut(e)?r=e:r={...e,id:Yi(e)},r=Gi(r,void 0,o),fd(r,t)?!1:r}function Id(e,t,n,o,r,i){if(!t.source||!t.target)return i(new Oe(Ce.EDGE_INVALID,e.id)),!1;const a=o(e.id);if(!a)return i(new Oe(Ce.EDGE_NOT_FOUND,e.id)),!1;const{id:l,...s}=e,u={...s,id:r?Yi(t):l,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(a),1,u),u}function Sr(e,t,n){const o={},r=[];for(let i=0;i<e.length;++i){const a=e[i];if(!gt(a)){n(new Oe(Ce.NODE_INVALID,a==null?void 0:a.id)||`[ID UNKNOWN|INDEX ${i}]`);continue}const l=ud(a,t(a.id),a.parentNode);a.parentNode&&(o[a.parentNode]=!0),r[i]=l}for(const i of r){const a=t(i.parentNode)||r.find(l=>l.id===i.parentNode);i.parentNode&&!a&&n(new Oe(Ce.NODE_MISSING_PARENT,i.id,i.parentNode)),(i.parentNode||o[i.id])&&(o[i.id]&&(i.isParent=!0),a&&(a.isParent=!0))}return r}function Nr(e,t){e.clear();for(const n of t){const{id:o,source:r,target:i,sourceHandle:a=null,targetHandle:l=null}=n,s=`${r}-source-${a}`,u=`${i}-target-${l}`,c=e.get(s)||new Map,d=e.get(u)||new Map,h=xt({edgeId:o,source:r,target:i,sourceHandle:a,targetHandle:l});e.set(s,c.set(`${i}-${l}`,h)),e.set(u,d.set(`${r}-${a}`,h))}}function kr(e,t,n,o,r,i,a,l){const s=[];for(const u of e){const c=ut(u)?u:Cd(u,l,r,i);if(!c)continue;const d=n(c.source),h=n(c.target);if(!d||!h){r(new Oe(Ce.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){r(new Oe(Ce.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!h){r(new Oe(Ce.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:l,nodes:a,sourceNode:d,targetNode:h})){r(new Oe(Ce.EDGE_INVALID,c.id));continue}const f=o(c.id);s.push({...Gi(c,f,i),sourceNode:d,targetNode:h})}return s}const Cr=Symbol("vueFlow"),ta=Symbol("nodeId"),na=Symbol("nodeRef"),Md=Symbol("edgeId"),Od=Symbol("edgeRef"),$n=Symbol("slots");function oa(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:r,nodes:i,nodeExtent:a,nodeDragThreshold:l,viewport:s,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:d,panBy:h,findNode:f,multiSelectionActive:p,nodesSelectionActive:_,selectNodesOnDrag:y,removeSelectedElements:x,addSelectedNodes:C,updateNodePositions:E,emits:S}=Se(),{onStart:D,onDrag:V,onStop:R,onClick:L,el:U,disabled:T,id:z,selectable:N,dragHandle:te}=e,v=de(!1);let I=[],k,O=null,P={x:void 0,y:void 0},A={x:0,y:0},B=null,X=!1,ne=0,Y=!1;const F=Pd(),q=({x:Z,y:Q})=>{P={x:Z,y:Q};let ae=!1;if(I=I.map(w=>{const g={x:Z-w.distance.x,y:Q-w.distance.y};n.value&&(g.x=o.value[0]*Math.round(g.x/o.value[0]),g.y=o.value[1]*Math.round(g.y/o.value[1]));const{computedPosition:m}=Po(w,g,S.error,a.value,w.parentNode?f(w.parentNode):void 0);return ae=ae||w.position.x!==m.x||w.position.y!==m.y,w.position=m,w}),!!ae&&(E(I,!0,!0),v.value=!0,B)){const[w,g]=Xn({id:z,dragItems:I,findNode:f});V({event:B,node:w,nodes:g})}},fe=()=>{if(!O)return;const[Z,Q]=qi(A,O,c.value);if(Z!==0||Q!==0){const ae={x:(P.x??0)-Z/s.value.zoom,y:(P.y??0)-Q/s.value.zoom};h({x:Z,y:Q})&&q(ae)}ne=requestAnimationFrame(fe)},se=(Z,Q)=>{X=!0;const ae=f(z);!y.value&&!p.value&&ae&&(ae.selected||x()),ae&&pe(N)&&y.value&&_o(ae,p.value,C,x,_,!1,Q);const w=F(Z);if(P=w,I=vd(i.value,d.value,w,f,z),I.length){const[g,m]=Xn({id:z,dragItems:I,findNode:f});D({event:Z.sourceEvent,node:g,nodes:m})}},he=(Z,Q)=>{var ae;Z.sourceEvent.type==="touchmove"&&Z.sourceEvent.touches.length>1||(l.value===0&&se(Z,Q),P=F(Z),O=((ae=t.value)==null?void 0:ae.getBoundingClientRect())||null,A=lt(Z.sourceEvent,O))},re=(Z,Q)=>{const ae=F(Z);if(!Y&&X&&u.value&&(Y=!0,fe()),!X){const w=ae.xSnapped-(P.x??0),g=ae.ySnapped-(P.y??0);Math.sqrt(w*w+g*g)>l.value&&se(Z,Q)}(P.x!==ae.xSnapped||P.y!==ae.ySnapped)&&I.length&&X&&(B=Z.sourceEvent,A=lt(Z.sourceEvent,O),q(ae))},le=Z=>{if(!X&&!v.value&&!p.value){const Q=F(Z),ae=Q.xSnapped-(P.x??0),w=Q.ySnapped-(P.y??0),g=Math.sqrt(ae*ae+w*w);g!==0&&g<=l.value&&(L==null||L(Z.sourceEvent));return}if(v.value=!1,Y=!1,X=!1,P={x:void 0,y:void 0},cancelAnimationFrame(ne),I.length){E(I,!1,!1);const[Q,ae]=Xn({id:z,dragItems:I,findNode:f});R({event:Z.sourceEvent,node:Q,nodes:ae})}};return me([()=>pe(T),U],([Z,Q],ae,w)=>{if(Q){const g=Le(Q);Z||(k=hu().on("start",m=>he(m,Q)).on("drag",m=>re(m,Q)).on("end",m=>le(m)).filter(m=>{const b=m.target,M=pe(te);return!m.button&&(!r.value||!yr(b,`.${r.value}`,Q)&&(!M||yr(b,M,Q)))}),g.call(k)),w(()=>{g.on(".drag",null),k&&(k.on("start",null),k.on("drag",null),k.on("end",null))})}}),v}function Td(){return{doubleClick:G(),click:G(),mouseEnter:G(),mouseMove:G(),mouseLeave:G(),contextMenu:G(),updateStart:G(),update:G(),updateEnd:G()}}function $d(e,t){const n=Td();return n.doubleClick.on(o=>{var r,i;t.edgeDoubleClick(o),(i=(r=e.events)==null?void 0:r.doubleClick)==null||i.call(r,o)}),n.click.on(o=>{var r,i;t.edgeClick(o),(i=(r=e.events)==null?void 0:r.click)==null||i.call(r,o)}),n.mouseEnter.on(o=>{var r,i;t.edgeMouseEnter(o),(i=(r=e.events)==null?void 0:r.mouseEnter)==null||i.call(r,o)}),n.mouseMove.on(o=>{var r,i;t.edgeMouseMove(o),(i=(r=e.events)==null?void 0:r.mouseMove)==null||i.call(r,o)}),n.mouseLeave.on(o=>{var r,i;t.edgeMouseLeave(o),(i=(r=e.events)==null?void 0:r.mouseLeave)==null||i.call(r,o)}),n.contextMenu.on(o=>{var r,i;t.edgeContextMenu(o),(i=(r=e.events)==null?void 0:r.contextMenu)==null||i.call(r,o)}),n.updateStart.on(o=>{var r,i;t.edgeUpdateStart(o),(i=(r=e.events)==null?void 0:r.updateStart)==null||i.call(r,o)}),n.update.on(o=>{var r,i;t.edgeUpdate(o),(i=(r=e.events)==null?void 0:r.update)==null||i.call(r,o)}),n.updateEnd.on(o=>{var r,i;t.edgeUpdateEnd(o),(i=(r=e.events)==null?void 0:r.updateEnd)==null||i.call(r,o)}),Object.entries(n).reduce((o,[r,i])=>(o.emit[r]=i.trigger,o.on[r]=i.on,o),{emit:{},on:{}})}function Pd(){const{viewport:e,snapGrid:t,snapToGrid:n}=Se();return({sourceEvent:o})=>{const r=o.touches?o.touches[0].clientX:o.clientX,i=o.touches?o.touches[0].clientY:o.clientY,a={x:(r-e.value.x)/e.value.zoom,y:(i-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(a.x/t.value[0]):a.x,ySnapped:n.value?t.value[1]*Math.round(a.y/t.value[1]):a.y,...a}}}function rn(){return!0}function ra({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:r,onEdgeUpdate:i,onEdgeUpdateEnd:a}){const{vueFlowRef:l,connectionMode:s,connectionRadius:u,connectOnClick:c,connectionClickStartHandle:d,nodesConnectable:h,autoPanOnConnect:f,autoPanSpeed:p,findNode:_,panBy:y,startConnection:x,updateConnection:C,endConnection:E,emits:S,viewport:D,edges:V,nodes:R,isValidConnection:L}=Se();let U=null,T=!1,z=null,N=null;function te(I){var k;const O=pe(n)==="target",P=Do(I),A=dr(I.target);if(P&&I.button===0||!P){let B=function(m){Q=lt(m,le);const{handle:b,validHandleResult:M}=xd(m,A,wn(Q,D.value,!1,[1,1]),u.value,w,W=>Er(m,W,s.value,pe(t),pe(e),O?"target":"source",Y,A,V.value,R.value,_));if(F=b,ae||(g(),ae=!0),U=M.connection,T=M.isValid,z=M.handleDomNode,!(T&&F&&(N!=null&&N.endHandle)&&M.endHandle&&N.endHandle.type===M.endHandle.type&&N.endHandle.nodeId===M.endHandle.nodeId&&N.endHandle.handleId===M.endHandle.handleId)){if(C(F&&T?Xi({x:F.x,y:F.y},D.value):Q,M.endHandle,Nd(!!F,T)),N=M,!F&&!T&&!z)return jn(Z);U&&U.source!==U.target&&z&&(jn(Z),Z=z,z.classList.add("connecting","vue-flow__handle-connecting"),z.classList.toggle("valid",T),z.classList.toggle("vue-flow__handle-valid",T))}},X=function(m){(F||z)&&U&&T&&(i?i(m,U):S.connect(U)),S.connectEnd(m),r&&(a==null||a(m)),jn(Z),cancelAnimationFrame(q),E(m),ae=!1,T=!1,U=null,z=null,A.removeEventListener("mousemove",B),A.removeEventListener("mouseup",X),A.removeEventListener("touchmove",B),A.removeEventListener("touchend",X)};const ne=_(pe(t));let Y=pe(o)||L.value||rn;!Y&&ne&&(Y=(O?ne.isValidSourcePos:ne.isValidTargetPos)||rn);let F,q=0;const{x:fe,y:se}=lt(I),he=A==null?void 0:A.elementFromPoint(fe,se),re=Ao(pe(r),he),le=(k=l.value)==null?void 0:k.getBoundingClientRect();if(!le||!re)return;let Z,Q=lt(I,le),ae=!1;const w=Sd({nodes:R.value,nodeId:pe(t),handleId:pe(e),handleType:re}),g=()=>{if(!f.value)return;const[m,b]=qi(Q,le,p.value);y({x:m,y:b}),q=requestAnimationFrame(g)};x({nodeId:pe(t),handleId:pe(e),type:re,position:(he==null?void 0:he.getAttribute("data-handlepos"))||j.Top},{x:fe-le.left,y:se-le.top}),S.connectStart({event:I,nodeId:pe(t),handleId:pe(e),handleType:re}),A.addEventListener("mousemove",B),A.addEventListener("mouseup",X),A.addEventListener("touchmove",B),A.addEventListener("touchend",X)}}function v(I){if(!c.value)return;const k=pe(n)==="target";if(!d.value)S.clickConnectStart({event:I,nodeId:pe(t),handleId:pe(e)}),x({nodeId:pe(t),type:pe(n),handleId:pe(e)},void 0,!0);else{let O=pe(o)||L.value||rn;const P=_(pe(t));if(!O&&P&&(O=(k?P.isValidSourcePos:P.isValidTargetPos)||rn),P&&(typeof P.connectable>"u"?h.value:P.connectable)===!1)return;const A=dr(I.target),{connection:B,isValid:X}=Er(I,{nodeId:pe(t),id:pe(e),type:pe(n)},s.value,d.value.nodeId,d.value.handleId||null,d.value.type,O,A,V.value,R.value,_),ne=B.source===B.target;X&&!ne&&S.connect(B),S.clickConnectEnd(I),E(I,!0)}}return{handlePointerDown:te,handleClick:v}}function Dd(){return Tt(ta,"")}function ia(e){const t=e??Dd()??"",n=Tt(na,de(null)),{findNode:o,edges:r,emits:i}=Se(),a=o(t);return a||i.error(new Oe(Ce.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:a,parentNode:ie(()=>o(a.parentNode)),connectedEdges:ie(()=>Zi([a],r.value))}}function Ad(){return{doubleClick:G(),click:G(),mouseEnter:G(),mouseMove:G(),mouseLeave:G(),contextMenu:G(),dragStart:G(),drag:G(),dragStop:G()}}function Vd(e,t){const n=Ad();return n.doubleClick.on(o=>{var r,i;t.nodeDoubleClick(o),(i=(r=e.events)==null?void 0:r.doubleClick)==null||i.call(r,o)}),n.click.on(o=>{var r,i;t.nodeClick(o),(i=(r=e.events)==null?void 0:r.click)==null||i.call(r,o)}),n.mouseEnter.on(o=>{var r,i;t.nodeMouseEnter(o),(i=(r=e.events)==null?void 0:r.mouseEnter)==null||i.call(r,o)}),n.mouseMove.on(o=>{var r,i;t.nodeMouseMove(o),(i=(r=e.events)==null?void 0:r.mouseMove)==null||i.call(r,o)}),n.mouseLeave.on(o=>{var r,i;t.nodeMouseLeave(o),(i=(r=e.events)==null?void 0:r.mouseLeave)==null||i.call(r,o)}),n.contextMenu.on(o=>{var r,i;t.nodeContextMenu(o),(i=(r=e.events)==null?void 0:r.contextMenu)==null||i.call(r,o)}),n.dragStart.on(o=>{var r,i;t.nodeDragStart(o),(i=(r=e.events)==null?void 0:r.dragStart)==null||i.call(r,o)}),n.drag.on(o=>{var r,i;t.nodeDrag(o),(i=(r=e.events)==null?void 0:r.drag)==null||i.call(r,o)}),n.dragStop.on(o=>{var r,i;t.nodeDragStop(o),(i=(r=e.events)==null?void 0:r.dragStop)==null||i.call(r,o)}),Object.entries(n).reduce((o,[r,i])=>(o.emit[r]=i.trigger,o.on[r]=i.on,o),{emit:{},on:{}})}function aa(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:r,snapToGrid:i,nodesDraggable:a,emits:l}=Se();return(s,u=!1)=>{const c=i.value?r.value[0]:5,d=i.value?r.value[1]:5,h=u?4:1,f=s.x*c*h,p=s.y*d*h,_=[];for(const y of e.value)if(y.draggable||a&&typeof y.draggable>"u"){const x={x:y.computedPosition.x+f,y:y.computedPosition.y+p},{computedPosition:C}=Po(y,x,l.error,t.value,y.parentNode?o(y.parentNode):void 0);_.push({id:y.id,position:C,from:y.position,distance:{x:s.x,y:s.y},dimensions:y.dimensions})}n(_,!0,!1)}}const Wn=.1;function nt(){return Tn("Viewport not initialized yet."),Promise.resolve(!1)}const Rd={zoomIn:nt,zoomOut:nt,zoomTo:nt,fitView:nt,setCenter:nt,fitBounds:nt,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:nt,setTransform:nt,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function zd(e){function t(o,r){return new Promise(i=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleBy(Un(e.d3Selection,r,()=>{i(!0)}),o):i(!1)})}function n(o,r,i,a){return new Promise(l=>{const{x:s,y:u}=Fi({x:-o,y:-r},e.translateExtent),c=Ot.translate(-s,-u).scale(i);e.d3Selection&&e.d3Zoom?e.d3Zoom.transform(Un(e.d3Selection,a,()=>{l(!0)}),c):l(!1)})}return ie(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:r=>t(1.2,r==null?void 0:r.duration),zoomOut:r=>t(1/1.2,r==null?void 0:r.duration),zoomTo:(r,i)=>new Promise(a=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleTo(Un(e.d3Selection,i==null?void 0:i.duration,()=>{a(!0)}),r):a(!1)}),setViewport:(r,i)=>n(r.x,r.y,r.zoom,i==null?void 0:i.duration),setTransform:(r,i)=>n(r.x,r.y,r.zoom,i==null?void 0:i.duration),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(r={padding:Wn,includeHiddenNodes:!1,duration:0})=>{var i,a;const l=[];for(const h of e.nodes)h.dimensions.width&&h.dimensions.height&&((r==null?void 0:r.includeHiddenNodes)||!h.hidden)&&(!((i=r.nodes)!=null&&i.length)||(a=r.nodes)!=null&&a.length&&r.nodes.includes(h.id))&&l.push(h);if(!l.length)return Promise.resolve(!1);const s=Wi(l),{x:u,y:c,zoom:d}=fr(s,e.dimensions.width,e.dimensions.height,r.minZoom??e.minZoom,r.maxZoom??e.maxZoom,r.padding??Wn,r.offset);return n(u,c,d,r==null?void 0:r.duration)},setCenter:(r,i,a)=>{const l=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:e.maxZoom,s=e.dimensions.width/2-r*l,u=e.dimensions.height/2-i*l;return n(s,u,l,a==null?void 0:a.duration)},fitBounds:(r,i={padding:Wn})=>{const{x:a,y:l,zoom:s}=fr(r,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,i.padding);return n(a,l,s,i==null?void 0:i.duration)},project:r=>wn(r,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:a}=e.vueFlowRef.getBoundingClientRect(),l={x:r.x-i,y:r.y-a};return wn(l,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:a}=e.vueFlowRef.getBoundingClientRect(),l={x:r.x+i,y:r.y+a};return Xi(l,e.viewport)}return{x:0,y:0}}}:Rd)}function Un(e,t=0,n){return e.transition().duration(t).on("end",n)}function Bd(e,t,n){const o=ni(!0);return o.run(()=>{const r=()=>{o.run(()=>{let _,y,x=!!(n.nodes.value.length||n.edges.value.length);_=Et([e.modelValue,()=>{var C,E;return(E=(C=e.modelValue)==null?void 0:C.value)==null?void 0:E.length}],([C])=>{C&&Array.isArray(C)&&(y==null||y.pause(),n.setElements(C),!y&&!x&&C.length?x=!0:y==null||y.resume())}),y=Et([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([C,E])=>{var S;(S=e.modelValue)!=null&&S.value&&Array.isArray(e.modelValue.value)&&(_==null||_.pause(),e.modelValue.value=[...C,...E],Je(()=>{_==null||_.resume()}))},{immediate:x}),sn(()=>{_==null||_.stop(),y==null||y.stop()})})},i=()=>{o.run(()=>{let _,y,x=!!n.nodes.value.length;_=Et([e.nodes,()=>{var C,E;return(E=(C=e.nodes)==null?void 0:C.value)==null?void 0:E.length}],([C])=>{C&&Array.isArray(C)&&(y==null||y.pause(),n.setNodes(C),!y&&!x&&C.length?x=!0:y==null||y.resume())}),y=Et([n.nodes,()=>n.nodes.value.length],([C])=>{var E;(E=e.nodes)!=null&&E.value&&Array.isArray(e.nodes.value)&&(_==null||_.pause(),e.nodes.value=[...C],Je(()=>{_==null||_.resume()}))},{immediate:x}),sn(()=>{_==null||_.stop(),y==null||y.stop()})})},a=()=>{o.run(()=>{let _,y,x=!!n.edges.value.length;_=Et([e.edges,()=>{var C,E;return(E=(C=e.edges)==null?void 0:C.value)==null?void 0:E.length}],([C])=>{C&&Array.isArray(C)&&(y==null||y.pause(),n.setEdges(C),!y&&!x&&C.length?x=!0:y==null||y.resume())}),y=Et([n.edges,()=>n.edges.value.length],([C])=>{var E;(E=e.edges)!=null&&E.value&&Array.isArray(e.edges.value)&&(_==null||_.pause(),e.edges.value=[...C],Je(()=>{_==null||_.resume()}))},{immediate:x}),sn(()=>{_==null||_.stop(),y==null||y.stop()})})},l=()=>{o.run(()=>{me(()=>t.maxZoom,()=>{t.maxZoom&&ke(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},s=()=>{o.run(()=>{me(()=>t.minZoom,()=>{t.minZoom&&ke(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{me(()=>t.translateExtent,()=>{t.translateExtent&&ke(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{me(()=>t.nodeExtent,()=>{t.nodeExtent&&ke(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{o.run(()=>{me(()=>t.applyDefault,()=>{ke(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},h=()=>{o.run(()=>{const _=async y=>{let x=y;typeof t.autoConnect=="function"&&(x=await t.autoConnect(y)),x!==!1&&n.addEdges([x])};me(()=>t.autoConnect,()=>{ke(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),me(n.autoConnect,(y,x,C)=>{y?n.onConnect(_):n.hooks.value.connect.off(_),C(()=>{n.hooks.value.connect.off(_)})},{immediate:!0})})},f=()=>{const _=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const y of Object.keys(t)){const x=y;if(!_.includes(x)){const C=Ee(()=>t[x]),E=n[x];So(E)&&o.run(()=>{me(C,S=>{ke(S)&&(E.value=S)},{immediate:!0})})}}};(()=>{r(),i(),a(),s(),l(),u(),c(),d(),h(),f()})()}),()=>o.stop()}function Ld(){return{edgesChange:G(),nodesChange:G(),nodeDoubleClick:G(),nodeClick:G(),nodeMouseEnter:G(),nodeMouseMove:G(),nodeMouseLeave:G(),nodeContextMenu:G(),nodeDragStart:G(),nodeDrag:G(),nodeDragStop:G(),nodesInitialized:G(),miniMapNodeClick:G(),miniMapNodeDoubleClick:G(),miniMapNodeMouseEnter:G(),miniMapNodeMouseMove:G(),miniMapNodeMouseLeave:G(),connect:G(),connectStart:G(),connectEnd:G(),clickConnectStart:G(),clickConnectEnd:G(),paneReady:G(),init:G(),move:G(),moveStart:G(),moveEnd:G(),selectionDragStart:G(),selectionDrag:G(),selectionDragStop:G(),selectionContextMenu:G(),selectionStart:G(),selectionEnd:G(),viewportChangeStart:G(),viewportChange:G(),viewportChangeEnd:G(),paneScroll:G(),paneClick:G(),paneContextMenu:G(),paneMouseEnter:G(),paneMouseMove:G(),paneMouseLeave:G(),edgeContextMenu:G(),edgeMouseEnter:G(),edgeMouseMove:G(),edgeMouseLeave:G(),edgeDoubleClick:G(),edgeClick:G(),edgeUpdateStart:G(),edgeUpdate:G(),edgeUpdateEnd:G(),updateNodeInternals:G(),error:G(e=>Tn(e.message))}}function Fd(e,t){qa(()=>{for(const[n,o]of Object.entries(t.value)){const r=i=>{e(n,i)};o.fns.add(r),Nn(()=>{o.off(r)})}})}function la(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:$o.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Lt.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:dt.Bezier,style:{}},connectionMode:wt.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:bn()?"Meta":"Control",zoomActivationKeyCode:bn()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Ld(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const Gd=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function Hd(e,t,n){const o=zd(e),r=w=>{const g=w??[];e.hooks.updateNodeInternals.trigger(g)},i=w=>dd(w,e.nodes,e.edges),a=w=>cd(w,e.nodes,e.edges),l=w=>Zi(w,e.edges),s=({id:w,type:g,nodeId:m})=>{var b;return Array.from(((b=e.connectionLookup.get(`${m}-${g}-${w??null}`))==null?void 0:b.values())??[])},u=w=>{if(w)return t.value.get(w)},c=w=>{if(w)return n.value.get(w)},d=(w,g,m)=>{var b,M;const W=[];for(const K of w){const oe={id:K.id,type:"position",dragging:m,from:K.from};if(g&&(oe.position=K.position,K.parentNode)){const ue=u(K.parentNode);oe.position={x:oe.position.x-(((b=ue==null?void 0:ue.computedPosition)==null?void 0:b.x)??0),y:oe.position.y-(((M=ue==null?void 0:ue.computedPosition)==null?void 0:M.y)??0)}}W.push(oe)}W!=null&&W.length&&e.hooks.nodesChange.trigger(W)},h=w=>{if(!e.vueFlowRef)return;const g=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!g)return;const m=window.getComputedStyle(g),{m22:b}=new window.DOMMatrixReadOnly(m.transform),M=[];for(let W=0;W<w.length;++W){const K=w[W],oe=u(K.id);if(oe){const ue=On(K.nodeElement);if(!!(ue.width&&ue.height&&(oe.dimensions.width!==ue.width||oe.dimensions.height!==ue.height||K.forceUpdate))){const ve=K.nodeElement.getBoundingClientRect();oe.dimensions=ue,oe.handleBounds.source=xr(".source",K.nodeElement,ve,b),oe.handleBounds.target=xr(".target",K.nodeElement,ve,b),M.push({id:oe.id,type:"dimensions",dimensions:ue})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),M.length&&e.hooks.nodesChange.trigger(M)},f=(w,g)=>{const m=new Set,b=new Set;for(const K of w)gt(K)?m.add(K.id):ut(K)&&b.add(K.id);const M=it(t.value,m,!0),W=it(n.value,b);if(e.multiSelectionActive){for(const K of m)M.push(ot(K,g));for(const K of b)W.push(ot(K,g))}M.length&&e.hooks.nodesChange.trigger(M),W.length&&e.hooks.edgesChange.trigger(W)},p=w=>{if(e.multiSelectionActive){const g=w.map(m=>ot(m.id,!0));e.hooks.nodesChange.trigger(g);return}e.hooks.nodesChange.trigger(it(t.value,new Set(w.map(g=>g.id)),!0)),e.hooks.edgesChange.trigger(it(n.value))},_=w=>{if(e.multiSelectionActive){const g=w.map(m=>ot(m.id,!0));e.hooks.edgesChange.trigger(g);return}e.hooks.edgesChange.trigger(it(n.value,new Set(w.map(g=>g.id)))),e.hooks.nodesChange.trigger(it(t.value,new Set,!0))},y=w=>{f(w,!0)},x=w=>{const m=(w||e.nodes).map(b=>(b.selected=!1,ot(b.id,!1)));e.hooks.nodesChange.trigger(m)},C=w=>{const m=(w||e.edges).map(b=>(b.selected=!1,ot(b.id,!1)));e.hooks.edgesChange.trigger(m)},E=w=>{if(!w||!w.length)return f([],!1);const g=w.reduce((m,b)=>{const M=ot(b.id,!1);return gt(b)?m.nodes.push(M):m.edges.push(M),m},{nodes:[],edges:[]});g.nodes.length&&e.hooks.nodesChange.trigger(g.nodes),g.edges.length&&e.hooks.edgesChange.trigger(g.edges)},S=w=>{var g;(g=e.d3Zoom)==null||g.scaleExtent([w,e.maxZoom]),e.minZoom=w},D=w=>{var g;(g=e.d3Zoom)==null||g.scaleExtent([e.minZoom,w]),e.maxZoom=w},V=w=>{var g;(g=e.d3Zoom)==null||g.translateExtent(w),e.translateExtent=w},R=w=>{e.nodeExtent=w,r()},L=w=>{var g;(g=e.d3Zoom)==null||g.clickDistance(w)},U=w=>{e.nodesDraggable=w,e.nodesConnectable=w,e.elementsSelectable=w},T=w=>{const g=w instanceof Function?w(e.nodes):w;!e.initialized&&!g.length||(e.nodes=Sr(g,u,e.hooks.error.trigger))},z=w=>{const g=w instanceof Function?w(e.edges):w;if(!e.initialized&&!g.length)return;const m=kr(g,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);Nr(e.connectionLookup,m),e.edges=m},N=w=>{const g=w instanceof Function?w([...e.nodes,...e.edges]):w;!e.initialized&&!g.length||(T(g.filter(gt)),z(g.filter(ut)))},te=w=>{let g=w instanceof Function?w(e.nodes):w;g=Array.isArray(g)?g:[g];const m=Sr(g,u,e.hooks.error.trigger),b=[];for(const M of m)b.push(gr(M));b.length&&e.hooks.nodesChange.trigger(b)},v=w=>{let g=w instanceof Function?w(e.edges):w;g=Array.isArray(g)?g:[g];const m=kr(g,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),b=[];for(const M of m)b.push(gr(M));b.length&&e.hooks.edgesChange.trigger(b)},I=(w,g=!0,m=!1)=>{const b=w instanceof Function?w(e.nodes):w,M=Array.isArray(b)?b:[b],W=[],K=[];function oe(ge){const ve=l(ge);for(const be of ve)(!ke(be.deletable)||be.deletable)&&K.push(mr(be.id,be.source,be.target,be.sourceHandle,be.targetHandle))}function ue(ge){const ve=[];for(const be of e.nodes)be.parentNode===ge&&ve.push(be);if(ve.length){for(const be of ve)W.push(vr(be.id));g&&oe(ve);for(const be of ve)ue(be.id)}}for(const ge of M){const ve=typeof ge=="string"?u(ge):ge;ve&&(ke(ve.deletable)&&!ve.deletable||(W.push(vr(ve.id)),g&&oe([ve]),m&&ue(ve.id)))}K.length&&e.hooks.edgesChange.trigger(K),W.length&&e.hooks.nodesChange.trigger(W)},k=w=>{const g=w instanceof Function?w(e.edges):w,m=Array.isArray(g)?g:[g],b=[];for(const M of m){const W=typeof M=="string"?c(M):M;W&&(ke(W.deletable)&&!W.deletable||b.push(mr(typeof M=="string"?M:M.id,W.source,W.target,W.sourceHandle,W.targetHandle)))}e.hooks.edgesChange.trigger(b)},O=(w,g,m=!0)=>Id(w,g,e.edges,c,m,e.hooks.error.trigger),P=(w,g,m={replace:!1})=>{const b=c(w);if(!b)return;const M=typeof g=="function"?g(b):g;b.data=m.replace?M:{...b.data,...M}},A=w=>pr(w,e.nodes),B=w=>{const g=pr(w,e.edges);return Nr(e.connectionLookup,g),g},X=(w,g,m={replace:!1})=>{const b=u(w);if(!b)return;const M=typeof g=="function"?g(b):g;m.replace?e.nodes.splice(e.nodes.indexOf(b),1,M):Object.assign(b,M)},ne=(w,g,m={replace:!1})=>{const b=u(w);if(!b)return;const M=typeof g=="function"?g(b):g;b.data=m.replace?M:{...b.data,...M}},Y=(w,g,m=!1)=>{m?e.connectionClickStartHandle=w:e.connectionStartHandle=w,e.connectionEndHandle=null,e.connectionStatus=null,g&&(e.connectionPosition=g)},F=(w,g=null,m=null)=>{e.connectionStartHandle&&(e.connectionPosition=w,e.connectionEndHandle=g,e.connectionStatus=m)},q=(w,g)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,g?e.connectionClickStartHandle=null:e.connectionStartHandle=null},fe=w=>{const g=sd(w),m=g?null:zt(w)?w:u(w.id);return!g&&!m?[null,null,g]:[g?w:yo(m),m,g]},se=(w,g=!0,m=e.nodes)=>{const[b,M,W]=fe(w);if(!b)return[];const K=[];for(const oe of m||e.nodes){if(!W&&(oe.id===M.id||!oe.computedPosition))continue;const ue=yo(oe),ge=wo(ue,b);(g&&ge>0||ge>=Number(b.width)*Number(b.height))&&K.push(oe)}return K},he=(w,g,m=!0)=>{const[b]=fe(w);if(!b)return!1;const M=wo(b,g);return m&&M>0||M>=Number(b.width)*Number(b.height)},re=w=>{const{viewport:g,dimensions:m,d3Zoom:b,d3Selection:M,translateExtent:W}=e;if(!b||!M||!w.x&&!w.y)return!1;const K=Ot.translate(g.x+w.x,g.y+w.y).scale(g.zoom),oe=[[0,0],[m.width,m.height]],ue=b.constrain()(K,oe,W),ge=e.viewport.x!==ue.x||e.viewport.y!==ue.y||e.viewport.zoom!==ue.k;return b.transform(M,ue),ge},le=w=>{const g=w instanceof Function?w(e):w,m=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];ke(g.defaultEdgeOptions)&&(e.defaultEdgeOptions=g.defaultEdgeOptions);const b=g.modelValue||g.nodes||g.edges?[]:void 0;b&&(g.modelValue&&b.push(...g.modelValue),g.nodes&&b.push(...g.nodes),g.edges&&b.push(...g.edges),N(b));const M=()=>{ke(g.maxZoom)&&D(g.maxZoom),ke(g.minZoom)&&S(g.minZoom),ke(g.translateExtent)&&V(g.translateExtent)};for(const W of Object.keys(g)){const K=W,oe=g[K];![...Gd,...m].includes(K)&&ke(oe)&&(e[K]=oe)}ao(()=>e.d3Zoom).not.toBeNull().then(M),e.initialized||(e.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:h,setElements:N,setNodes:T,setEdges:z,addNodes:te,addEdges:v,removeNodes:I,removeEdges:k,findNode:u,findEdge:c,updateEdge:O,updateEdgeData:P,updateNode:X,updateNodeData:ne,applyEdgeChanges:B,applyNodeChanges:A,addSelectedElements:y,addSelectedNodes:p,addSelectedEdges:_,setMinZoom:S,setMaxZoom:D,setTranslateExtent:V,setNodeExtent:R,setPaneClickDistance:L,removeSelectedElements:E,removeSelectedNodes:x,removeSelectedEdges:C,startConnection:Y,updateConnection:F,endConnection:q,setInteractive:U,setState:le,getIntersectingNodes:se,getIncomers:i,getOutgoers:a,getConnectedEdges:l,getHandleConnections:s,isNodeIntersecting:he,panBy:re,fitView:w=>o.value.fitView(w),zoomIn:w=>o.value.zoomIn(w),zoomOut:w=>o.value.zoomOut(w),zoomTo:(w,g)=>o.value.zoomTo(w,g),setViewport:(w,g)=>o.value.setViewport(w,g),setTransform:(w,g)=>o.value.setTransform(w,g),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(w,g,m)=>o.value.setCenter(w,g,m),fitBounds:(w,g)=>o.value.fitBounds(w,g),project:w=>o.value.project(w),screenToFlowCoordinate:w=>o.value.screenToFlowCoordinate(w),flowToScreenCoordinate:w=>o.value.flowToScreenCoordinate(w),toObject:()=>{const w=[],g=[];for(const m of e.nodes){const{computedPosition:b,handleBounds:M,selected:W,dimensions:K,isParent:oe,resizing:ue,dragging:ge,events:ve,...be}=m;w.push(be)}for(const m of e.edges){const{selected:b,sourceNode:M,targetNode:W,events:K,...oe}=m;g.push(oe)}return JSON.parse(JSON.stringify({nodes:w,edges:g,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:w=>new Promise(g=>{const{nodes:m,edges:b,position:M,zoom:W,viewport:K}=w;if(m&&T(m),b&&z(b),K!=null&&K.x&&(K!=null&&K.y)||M){const oe=(K==null?void 0:K.x)||M[0],ue=(K==null?void 0:K.y)||M[1],ge=(K==null?void 0:K.zoom)||W||e.viewport.zoom;return ao(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:oe,y:ue,zoom:ge}).then(()=>{g(!0)})})}else g(!0)}),updateNodeInternals:r,viewportHelper:o,$reset:()=>{const w=la();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const g=Ot.translate(w.defaultViewport.x??0,w.defaultViewport.y??0).scale(_t(w.defaultViewport.zoom??1,w.minZoom,w.maxZoom)),m=e.viewportRef.getBoundingClientRect(),b=[[0,0],[m.width,m.height]],M=e.d3Zoom.constrain()(g,b,w.translateExtent);e.d3Zoom.transform(e.d3Selection,M)}le(w)},$destroy:()=>{}}}const Yd=["data-id","data-handleid","data-nodeid","data-handlepos"],Xd={name:"Handle",compatConfig:{MODE:3}},je=_e({...Xd,props:{id:{default:null},type:{},position:{default:()=>j.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=oi(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Ee(()=>n.type??"source"),r=Ee(()=>n.isValidConnection??null),{connectionStartHandle:i,connectionClickStartHandle:a,connectionEndHandle:l,vueFlowRef:s,nodesConnectable:u,noDragClassName:c,noPanClassName:d}=Se(),{id:h,node:f,nodeEl:p,connectedEdges:_}=ia(),y=de(),x=Ee(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),C=Ee(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),E=Ee(()=>{var T,z,N,te,v,I;return((T=i.value)==null?void 0:T.nodeId)===h&&((z=i.value)==null?void 0:z.handleId)===e.id&&((N=i.value)==null?void 0:N.type)===o.value||((te=l.value)==null?void 0:te.nodeId)===h&&((v=l.value)==null?void 0:v.handleId)===e.id&&((I=l.value)==null?void 0:I.type)===o.value}),S=Ee(()=>{var T,z,N;return((T=a.value)==null?void 0:T.nodeId)===h&&((z=a.value)==null?void 0:z.handleId)===e.id&&((N=a.value)==null?void 0:N.type)===o.value}),{handlePointerDown:D,handleClick:V}=ra({nodeId:h,handleId:e.id,isValidConnection:r,type:o}),R=ie(()=>typeof e.connectable=="string"&&e.connectable==="single"?!_.value.some(T=>{const z=T[`${o.value}Handle`];return T[o.value]!==h?!1:z?z===e.id:!0}):typeof e.connectable=="number"?_.value.filter(T=>{const z=T[`${o.value}Handle`];return T[o.value]!==h?!1:z?z===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(f,_.value):ke(e.connectable)?e.connectable:u.value);tt(()=>{var T;if(!f.dimensions.width||!f.dimensions.height)return;const z=(T=f.handleBounds[o.value])==null?void 0:T.find(P=>P.id===e.id);if(!s.value||z)return;const N=s.value.querySelector(".vue-flow__transformationpane");if(!p.value||!y.value||!N||!e.id)return;const te=p.value.getBoundingClientRect(),v=y.value.getBoundingClientRect(),I=window.getComputedStyle(N),{m22:k}=new window.DOMMatrixReadOnly(I.transform),O={id:e.id,position:e.position,x:(v.left-te.left)/k,y:(v.top-te.top)/k,...On(y.value)};f.handleBounds[o.value]=[...f.handleBounds[o.value]??[],O]}),ti(()=>{const T=f.handleBounds[o.value];T&&(f.handleBounds[o.value]=T.filter(z=>z.id!==e.id))});function L(T){const z=Do(T);R.value&&x.value&&(z&&T.button===0||!z)&&D(T)}function U(T){!h||!a.value&&!x.value||R.value&&V(T)}return t({handleClick:V,handlePointerDown:D,onClick:U,onPointerDown:L}),(T,z)=>(ee(),ce("div",{ref_key:"handle",ref:y,"data-id":`${$(h)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":$(h),"data-handlepos":T.position,class:vt(["vue-flow__handle",[`vue-flow__handle-${T.position}`,`vue-flow__handle-${e.id}`,$(c),$(d),o.value,{connectable:R.value,connecting:S.value,connectablestart:x.value,connectableend:C.value,connectionindicator:R.value&&(x.value&&!E.value||C.value&&E.value)}]]),onMousedown:L,onTouchstartPassive:L,onClick:U},[st(T.$slots,"default",{id:T.id})],42,Yd))}}),Pn=function({sourcePosition:e=j.Bottom,targetPosition:t=j.Top,label:n,connectable:o=!0,isValidTargetPos:r,isValidSourcePos:i,data:a}){const l=a.label||n;return[we(je,{type:"target",position:t,connectable:o,isValidConnection:r}),typeof l!="string"&&l?we(l):we("div",{innerHTML:l}),we(je,{type:"source",position:e,connectable:o,isValidConnection:i})]};Pn.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];Pn.inheritAttrs=!1;Pn.compatConfig={MODE:3};const jd=Pn,Dn=function({targetPosition:e=j.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:r}){const i=r.label||t;return[we(je,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof i!="string"&&i?we(i):we("div",{innerHTML:i})]};Dn.props=["targetPosition","label","isValidTargetPos","connectable","data"];Dn.inheritAttrs=!1;Dn.compatConfig={MODE:3};const Wd=Dn,An=function({sourcePosition:e=j.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:r}){const i=r.label||t;return[typeof i!="string"&&i?we(i):we("div",{innerHTML:i}),we(je,{type:"source",position:e,connectable:n,isValidConnection:o})]};An.props=["sourcePosition","label","isValidSourcePos","connectable","data"];An.inheritAttrs=!1;An.compatConfig={MODE:3};const Ud=An,Zd=["transform"],Kd=["width","height","x","y","rx","ry"],qd=["y"],Qd={name:"EdgeText",compatConfig:{MODE:3}},Jd=_e({...Qd,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=de({x:0,y:0,width:0,height:0}),n=de(null),o=ie(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);tt(r),me([()=>e.x,()=>e.y,n,()=>e.label],r);function r(){if(!n.value)return;const i=n.value.getBBox();(i.width!==t.value.width||i.height!==t.value.height)&&(t.value=i)}return(i,a)=>(ee(),ce("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[i.labelShowBg?(ee(),ce("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*i.labelBgPadding[0]}px`,height:`${t.value.height+2*i.labelBgPadding[1]}px`,x:-i.labelBgPadding[0],y:-i.labelBgPadding[1],style:Ae(i.labelBgStyle),rx:i.labelBgBorderRadius,ry:i.labelBgBorderRadius},null,12,Kd)):ze("",!0),Me("text",No(i.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:i.labelStyle}),[st(i.$slots,"default",{},()=>[typeof i.label!="string"?(ee(),$e(rl(i.label),{key:0})):(ee(),ce(Re,{key:1},[at(Te(i.label),1)],64))])],16,qd)],8,Zd))}}),ef=["id","d","marker-end","marker-start"],tf=["d","stroke-width"],nf={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},Vn=_e({...nf,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},style:{},labelStyle:{},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=oi(e,["interactionWidth","labelShowBg"]),o=de(null),r=de(null),i=de(null),a=ol();return t({pathEl:o,interactionEl:r,labelEl:i}),(l,s)=>(ee(),ce(Re,null,[Me("path",{id:l.id,ref_key:"pathEl",ref:o,d:l.path,style:Ae(n.style),class:vt(["vue-flow__edge-path",$(a).class]),"marker-end":l.markerEnd,"marker-start":l.markerStart},null,14,ef),l.interactionWidth?(ee(),ce("path",{key:0,ref_key:"interactionEl",ref:r,fill:"none",d:l.path,"stroke-width":l.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,tf)):ze("",!0),l.label&&l.labelX&&l.labelY?(ee(),$e(Jd,{key:1,ref_key:"labelEl",ref:i,x:l.labelX,y:l.labelY,label:l.label,"label-show-bg":l.labelShowBg,"label-bg-style":l.labelBgStyle,"label-bg-padding":l.labelBgPadding,"label-bg-border-radius":l.labelBgBorderRadius,"label-style":l.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):ze("",!0)],64))}});function sa({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,a=Math.abs(o-t)/2,l=o<t?o+a:o-a;return[i,l,r,a]}function ua({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:a,targetControlY:l}){const s=e*.125+r*.375+a*.375+n*.125,u=t*.125+i*.375+l*.375+o*.125,c=Math.abs(s-e),d=Math.abs(u-t);return[s,u,c,d]}function an(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ir({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){let a,l;switch(e){case j.Left:a=t-an(t-o,i),l=n;break;case j.Right:a=t+an(o-t,i),l=n;break;case j.Top:a=t,l=n-an(n-r,i);break;case j.Bottom:a=t,l=n+an(r-n,i);break}return[a,l]}function ca(e){const{sourceX:t,sourceY:n,sourcePosition:o=j.Bottom,targetX:r,targetY:i,targetPosition:a=j.Top,curvature:l=.25}=e,[s,u]=Ir({pos:o,x1:t,y1:n,x2:r,y2:i,c:l}),[c,d]=Ir({pos:a,x1:r,y1:i,x2:t,y2:n,c:l}),[h,f,p,_]=ua({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:s,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${s},${u} ${c},${d} ${r},${i}`,h,f,p,_]}function Mr({pos:e,x1:t,y1:n,x2:o,y2:r}){let i,a;switch(e){case j.Left:case j.Right:i=.5*(t+o),a=n;break;case j.Top:case j.Bottom:i=t,a=.5*(n+r);break}return[i,a]}function da(e){const{sourceX:t,sourceY:n,sourcePosition:o=j.Bottom,targetX:r,targetY:i,targetPosition:a=j.Top}=e,[l,s]=Mr({pos:o,x1:t,y1:n,x2:r,y2:i}),[u,c]=Mr({pos:a,x1:r,y1:i,x2:t,y2:n}),[d,h,f,p]=ua({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:l,sourceControlY:s,targetControlX:u,targetControlY:c});return[`M${t},${n} C${l},${s} ${u},${c} ${r},${i}`,d,h,f,p]}const Or={[j.Left]:{x:-1,y:0},[j.Right]:{x:1,y:0},[j.Top]:{x:0,y:-1},[j.Bottom]:{x:0,y:1}};function of({source:e,sourcePosition:t=j.Bottom,target:n}){return t===j.Left||t===j.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Tr(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function rf({source:e,sourcePosition:t=j.Bottom,target:n,targetPosition:o=j.Top,center:r,offset:i}){const a=Or[t],l=Or[o],s={x:e.x+a.x*i,y:e.y+a.y*i},u={x:n.x+l.x*i,y:n.y+l.y*i},c=of({source:s,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",h=c[d];let f,p,_;const y={x:0,y:0},x={x:0,y:0},[C,E,S,D]=sa({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*l[d]===-1){p=r.x??C,_=r.y??E;const R=[{x:p,y:s.y},{x:p,y:u.y}],L=[{x:s.x,y:_},{x:u.x,y:_}];a[d]===h?f=d==="x"?R:L:f=d==="x"?L:R}else{const R=[{x:s.x,y:u.y}],L=[{x:u.x,y:s.y}];if(d==="x"?f=a.x===h?L:R:f=a.y===h?R:L,t===o){const te=Math.abs(e[d]-n[d]);if(te<=i){const v=Math.min(i-1,i-te);a[d]===h?y[d]=(s[d]>e[d]?-1:1)*v:x[d]=(u[d]>n[d]?-1:1)*v}}if(t!==o){const te=d==="x"?"y":"x",v=a[d]===l[te],I=s[te]>u[te],k=s[te]<u[te];(a[d]===1&&(!v&&I||v&&k)||a[d]!==1&&(!v&&k||v&&I))&&(f=d==="x"?R:L)}const U={x:s.x+y.x,y:s.y+y.y},T={x:u.x+x.x,y:u.y+x.y},z=Math.max(Math.abs(U.x-f[0].x),Math.abs(T.x-f[0].x)),N=Math.max(Math.abs(U.y-f[0].y),Math.abs(T.y-f[0].y));z>=N?(p=(U.x+T.x)/2,_=f[0].y):(p=f[0].x,_=(U.y+T.y)/2)}return[[e,{x:s.x+y.x,y:s.y+y.y},...f,{x:u.x+x.x,y:u.y+x.y},n],p,_,S,D]}function af(e,t,n,o){const r=Math.min(Tr(e,t)/2,Tr(t,n)/2,o),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${i+r*u},${a}Q ${i},${a} ${i},${a+r*c}`}const l=e.x<n.x?1:-1,s=e.y<n.y?-1:1;return`L ${i},${a+r*s}Q ${i},${a} ${i+r*l},${a}`}function bo(e){const{sourceX:t,sourceY:n,sourcePosition:o=j.Bottom,targetX:r,targetY:i,targetPosition:a=j.Top,borderRadius:l=5,centerX:s,centerY:u,offset:c=20}=e,[d,h,f,p,_]=rf({source:{x:t,y:n},sourcePosition:o,target:{x:r,y:i},targetPosition:a,center:{x:s,y:u},offset:c});return[d.reduce((x,C,E)=>{let S;return E>0&&E<d.length-1?S=af(d[E-1],C,d[E+1],l):S=`${E===0?"M":"L"}${C.x} ${C.y}`,x+=S,x},""),h,f,p,_]}function lf(e){const{sourceX:t,sourceY:n,targetX:o,targetY:r}=e,[i,a,l,s]=sa({sourceX:t,sourceY:n,targetX:o,targetY:r});return[`M ${t},${n}L ${o},${r}`,i,a,l,s]}const sf=_e({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=lf(e);return we(Vn,{path:n,labelX:o,labelY:r,...t,...e})}}}),uf=sf,cf=_e({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=bo({...e,sourcePosition:e.sourcePosition??j.Bottom,targetPosition:e.targetPosition??j.Top});return we(Vn,{path:n,labelX:o,labelY:r,...t,...e})}}}),fa=cf,df=_e({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>we(fa,{...e,...t,borderRadius:0})}}),ff=df,hf=_e({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=ca({...e,sourcePosition:e.sourcePosition??j.Bottom,targetPosition:e.targetPosition??j.Top});return we(Vn,{path:n,labelX:o,labelY:r,...t,...e})}}}),pf=hf,gf=_e({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=da({...e,sourcePosition:e.sourcePosition??j.Bottom,targetPosition:e.targetPosition??j.Top});return we(Vn,{path:n,labelX:o,labelY:r,...t,...e})}}}),vf=gf,mf={input:Ud,default:jd,output:Wd},yf={default:pf,straight:uf,step:ff,smoothstep:fa,simplebezier:vf};function wf(e,t,n){const o=ie(()=>_=>t.value.get(_)),r=ie(()=>_=>n.value.get(_)),i=ie(()=>{const _={...yf,...e.edgeTypes},y=Object.keys(_);for(const x of e.edges)x.type&&!y.includes(x.type)&&(_[x.type]=x.type);return _}),a=ie(()=>{const _={...mf,...e.nodeTypes},y=Object.keys(_);for(const x of e.nodes)x.type&&!y.includes(x.type)&&(_[x.type]=x.type);return _}),l=ie(()=>e.onlyRenderVisibleElements?Ui(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),s=ie(()=>{if(e.onlyRenderVisibleElements){const _=[];for(const y of e.edges){const x=t.value.get(y.source),C=t.value.get(y.target);_d({sourcePos:x.computedPosition||{x:0,y:0},targetPos:C.computedPosition||{x:0,y:0},sourceWidth:x.dimensions.width,sourceHeight:x.dimensions.height,targetWidth:C.dimensions.width,targetHeight:C.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&_.push(y)}return _}return e.edges}),u=ie(()=>[...l.value,...s.value]),c=ie(()=>{const _=[];for(const y of e.nodes)y.selected&&_.push(y);return _}),d=ie(()=>{const _=[];for(const y of e.edges)y.selected&&_.push(y);return _}),h=ie(()=>[...c.value,...d.value]),f=ie(()=>{const _=[];for(const y of e.nodes)y.dimensions.width&&y.dimensions.height&&y.handleBounds!==void 0&&_.push(y);return _}),p=ie(()=>l.value.length>0&&f.value.length===l.value.length);return{getNode:o,getEdge:r,getElements:u,getEdgeTypes:i,getNodeTypes:a,getEdges:s,getNodes:l,getSelectedElements:h,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:f,areNodesInitialized:p}}class ft{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=Ut())==null?void 0:t.appContext.app,o=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??ft.instance;return ft.instance=o??new ft,n&&(n.config.globalProperties.$vueFlowStorage=ft.instance),ft.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=la(),r=Qa(o),i={};for(const[h,f]of Object.entries(r.hooks)){const p=`on${h.charAt(0).toUpperCase()+h.slice(1)}`;i[p]=f.on}const a={};for(const[h,f]of Object.entries(r.hooks))a[h]=f.trigger;const l=ie(()=>{const h=new Map;for(const f of r.nodes)h.set(f.id,f);return h}),s=ie(()=>{const h=new Map;for(const f of r.edges)h.set(f.id,f);return h}),u=wf(r,l,s),c=Hd(r,l,s);c.setState({...r,...n});const d={...i,...u,...c,...El(r),nodeLookup:l,edgeLookup:s,emits:a,id:t,vueFlowVersion:"1.41.2",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function Se(e){const t=ft.getInstance(),n=ii(),o=typeof e=="object",r=o?e:{id:e},i=r.id,a=i??(n==null?void 0:n.vueFlowId);let l;if(n){const s=Tt(Cr,null);typeof s<"u"&&s!==null&&(!a||s.id===a)&&(l=s)}if(l||a&&(l=t.get(a)),!l||a&&l.id!==a){const s=i??t.getId(),u=t.create(s,r);l=u,(n??ni(!0)).run(()=>{me(u.applyDefault,(d,h,f)=>{const p=y=>{u.applyNodeChanges(y)},_=y=>{u.applyEdgeChanges(y)};d?(u.onNodesChange(p),u.onEdgesChange(_)):(u.hooks.value.nodesChange.off(p),u.hooks.value.edgesChange.off(_)),f(()=>{u.hooks.value.nodesChange.off(p),u.hooks.value.edgesChange.off(_)})},{immediate:!0}),Nn(()=>{if(l){const d=t.get(l.id);d?d.$destroy():Tn(`No store instance found for id ${l.id} in storage.`)}})})}else o&&l.setState(r);if(n&&(Ct(Cr,l),n.vueFlowId=l.id),o){const s=Ut();(s==null?void 0:s.type.name)!=="VueFlow"&&l.emits.error(new Oe(Ce.USEVUEFLOW_OPTIONS))}return l}function _f(e){const{emits:t,dimensions:n}=Se();let o;tt(()=>{const r=e.value,i=()=>{if(!r)return;const a=On(r);(a.width===0||a.height===0)&&t.error(new Oe(Ce.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:a.width||500,height:a.height||500}};i(),window.addEventListener("resize",i),r&&(o=new ResizeObserver(()=>i()),o.observe(r)),ri(()=>{window.removeEventListener("resize",i),o&&r&&o.unobserve(r)})})}const bf={name:"UserSelection",compatConfig:{MODE:3}},Ef=_e({...bf,props:{userSelectionRect:{}},setup(e){return(t,n)=>(ee(),ce("div",{class:"vue-flow__selection vue-flow__container",style:Ae({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),xf=["tabIndex"],Sf={name:"NodesSelection",compatConfig:{MODE:3}},Nf=_e({...Sf,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:r,disableKeyboardA11y:i,userSelectionActive:a}=Se(),l=aa(),s=de(null),u=oa({el:s,onStart(p){t.selectionDragStart(p)},onDrag(p){t.selectionDrag(p)},onStop(p){t.selectionDragStop(p)}});tt(()=>{var p;i.value||(p=s.value)==null||p.focus({preventScroll:!0})});const c=ie(()=>Wi(o.value)),d=ie(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function h(p){t.selectionContextMenu({event:p,nodes:o.value})}function f(p){i||kt[p.key]&&l({x:kt[p.key].x,y:kt[p.key].y},p.shiftKey)}return(p,_)=>!$(a)&&c.value.width&&c.value.height?(ee(),ce("div",{key:0,class:vt(["vue-flow__nodesselection vue-flow__container",$(r)]),style:Ae({transform:`translate(${$(n).x}px,${$(n).y}px) scale(${$(n).zoom})`})},[Me("div",{ref_key:"el",ref:s,class:vt([{dragging:$(u)},"vue-flow__nodesselection-rect"]),style:Ae(d.value),tabIndex:$(i)?void 0:-1,onContextmenu:h,onKeydown:f},null,46,xf)],6)):ze("",!0)}});function kf(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Cf={name:"Pane",compatConfig:{MODE:3}},If=_e({...Cf,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:r,userSelectionActive:i,removeSelectedElements:a,panOnDrag:l,userSelectionRect:s,elementsSelectable:u,nodesSelectionActive:c,getSelectedEdges:d,getSelectedNodes:h,removeNodes:f,removeEdges:p,selectionMode:_,deleteKeyCode:y,multiSelectionKeyCode:x,multiSelectionActive:C,edgeLookup:E,nodeLookup:S}=Se(),D=de(null),V=de(0),R=de(0),L=de(),U=de(new Map),T=Ee(()=>u.value&&(e.isSelecting||i.value));let z=!1,N=!1;const te=Ft(y,{actInsideInputWithModifier:!1}),v=Ft(x);me(te,Y=>{Y&&(f(h.value),p(d.value),c.value=!1)}),me(v,Y=>{C.value=Y});function I(Y,F){return q=>{q.target===F&&(Y==null||Y(q))}}function k(){i.value=!1,s.value=null,V.value=0,R.value=0}function O(Y){if(z){z=!1;return}r.paneClick(Y),a(),c.value=!1}function P(Y){var F;if(Array.isArray(l.value)&&((F=l.value)!=null&&F.includes(2))){Y.preventDefault();return}r.paneContextMenu(Y)}function A(Y){r.paneScroll(Y)}function B(Y){var F,q,fe,se,he;if(L.value=(F=t.value)==null?void 0:F.getBoundingClientRect(),!u.value||!e.isSelecting||Y.button!==0||Y.target!==D.value||!L.value)return;(fe=(q=Y.target)==null?void 0:q.setPointerCapture)==null||fe.call(q,Y.pointerId);const{x:re,y:le}=kf(Y,L.value);N=!0,z=!1,U.value=new Map;for(const[Z,Q]of E.value)U.value.set(Q.source,((se=U.value.get(Q.source))==null?void 0:se.add(Z))||new Set([Z])),U.value.set(Q.target,((he=U.value.get(Q.target))==null?void 0:he.add(Z))||new Set([Z]));a(),s.value={width:0,height:0,startX:re,startY:le,x:re,y:le},r.selectionStart(Y)}function X(Y){if(!L.value||!s.value)return;z=!0;const{x:F,y:q}=lt(Y,L.value),{startX:fe=0,startY:se=0}=s.value,he={startX:fe,startY:se,x:F<fe?F:fe,y:q<se?q:se,width:Math.abs(F-fe),height:Math.abs(q-se)},re=Ui(n.value,he,o.value,_.value===$o.Partial,!0),le=new Set,Z=new Set;for(const Q of re){Z.add(Q.id);const ae=U.value.get(Q.id);if(ae)for(const w of ae)le.add(w)}if(V.value!==Z.size){V.value=Z.size;const Q=it(S.value,Z,!0);r.nodesChange(Q)}if(R.value!==le.size){R.value=le.size;const Q=it(E.value,le);r.edgesChange(Q)}s.value=he,i.value=!0,c.value=!1}function ne(Y){var F;Y.button!==0||!N||((F=Y.target)==null||F.releasePointerCapture(Y.pointerId),!i.value&&s.value&&Y.target===D.value&&O(Y),V.value>0&&(c.value=!0),k(),r.selectionEnd(Y),e.selectionKeyPressed&&(z=!1),N=!1)}return(Y,F)=>(ee(),ce("div",{ref_key:"container",ref:D,class:vt(["vue-flow__pane vue-flow__container",{selection:Y.isSelecting}]),onClick:F[0]||(F[0]=q=>T.value?void 0:I(O,D.value)(q)),onContextmenu:F[1]||(F[1]=q=>I(P,D.value)(q)),onWheelPassive:F[2]||(F[2]=q=>I(A,D.value)(q)),onPointerenter:F[3]||(F[3]=q=>T.value?void 0:$(r).paneMouseEnter(q)),onPointerdown:F[4]||(F[4]=q=>T.value?B(q):$(r).paneMouseMove(q)),onPointermove:F[5]||(F[5]=q=>T.value?X(q):$(r).paneMouseMove(q)),onPointerup:F[6]||(F[6]=q=>T.value?ne(q):void 0),onPointerleave:F[7]||(F[7]=q=>$(r).paneMouseLeave(q))},[st(Y.$slots,"default"),$(i)&&$(s)?(ee(),$e(Ef,{key:0,"user-selection-rect":$(s)},null,8,["user-selection-rect"])):ze("",!0),$(c)&&$(h).length?(ee(),$e(Nf,{key:1})):ze("",!0)],34))}}),Mf={name:"Transform",compatConfig:{MODE:3}},Of=_e({...Mf,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=Se(),r=ie(()=>n.value?!o.value:!1),i=ie(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(a,l)=>(ee(),ce("div",{class:"vue-flow__transformationpane vue-flow__container",style:Ae({transform:i.value,opacity:r.value?0:void 0})},[st(a.$slots,"default")],4))}}),Tf={name:"Viewport",compatConfig:{MODE:3}},$f=_e({...Tf,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:r,zoomActivationKeyCode:i,selectionKeyCode:a,panActivationKeyCode:l,panOnScroll:s,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:h,zoomOnPinch:f,zoomOnScroll:p,preventScrolling:_,noWheelClassName:y,noPanClassName:x,emits:C,connectionStartHandle:E,userSelectionActive:S,paneDragging:D,d3Zoom:V,d3Selection:R,d3ZoomHandler:L,viewport:U,viewportRef:T,paneClickDistance:z}=Se();_f(T);const N=de(!1),te=de(!1);let v=null,I=!1,k=0,O={x:0,y:0,zoom:0};const P=Ft(l),A=Ft(a),B=Ft(i),X=Ee(()=>!A.value&&(P.value||d.value)),ne=Ee(()=>P.value||s.value),Y=Ee(()=>A.value||a.value===!0&&X.value!==!0);tt(()=>{if(!T.value){Tn("Viewport element is missing");return}const re=T.value,le=re.getBoundingClientRect(),Z=od().clickDistance(z.value).scaleExtent([t.value,n.value]).translateExtent(r.value),Q=Le(re).call(Z),ae=Q.on("wheel.zoom"),w=Ot.translate(o.value.x??0,o.value.y??0).scale(_t(o.value.zoom??1,t.value,n.value)),g=[[0,0],[le.width,le.height]],m=Z.constrain()(w,g,r.value);Z.transform(Q,m),Z.wheelDelta(q),V.value=Z,R.value=Q,L.value=ae,U.value={x:m.x,y:m.y,zoom:m.k},Z.on("start",b=>{var M;if(!b.sourceEvent)return null;k=b.sourceEvent.button,N.value=!0;const W=se(b.transform);((M=b.sourceEvent)==null?void 0:M.type)==="mousedown"&&(D.value=!0),O=W,C.viewportChangeStart(W),C.moveStart({event:b,flowTransform:W})}),Z.on("end",b=>{if(!b.sourceEvent)return null;if(N.value=!1,D.value=!1,F(X.value,k??0)&&!I&&C.paneContextMenu(b.sourceEvent),I=!1,fe(O,b.transform)){const M=se(b.transform);O=M,C.viewportChangeEnd(M),C.moveEnd({event:b,flowTransform:M})}}),Z.filter(b=>{var M,W,K;const oe=B.value||p.value,ue=f.value&&b.ctrlKey,ge=b.button;if((X.value===!0||Array.isArray(X.value)&&X.value.includes(1))&&ge===1&&b.type==="mousedown"&&((M=b.target)!=null&&M.closest(".vue-flow__node")||(W=b.target)!=null&&W.closest(".vue-flow__edge")))return!0;if(!X.value&&!oe&&!ne.value&&!h.value&&!f.value||S.value||!h.value&&b.type==="dblclick"||he(b,y.value)&&b.type==="wheel"||he(b,x.value)&&(b.type!=="wheel"||ne.value&&b.type==="wheel"&&!B.value)||!f.value&&b.ctrlKey&&b.type==="wheel"||!oe&&!ne.value&&!ue&&b.type==="wheel")return!1;if(!f&&b.type==="touchstart"&&((K=b.touches)==null?void 0:K.length)>1)return b.preventDefault(),!1;if(!X.value&&(b.type==="mousedown"||b.type==="touchstart")||Array.isArray(X.value)&&!X.value.includes(ge)&&(b.type==="mousedown"||b.type==="touchstart"))return!1;const ve=Array.isArray(X.value)&&X.value.includes(ge)||!ge||ge<=1;return(!b.ctrlKey||b.type==="wheel")&&ve}),me([S,X],()=>{S.value&&!N.value?Z.on("zoom",null):S.value||Z.on("zoom",b=>{U.value={x:b.transform.x,y:b.transform.y,zoom:b.transform.k};const M=se(b.transform);I=F(X.value,k??0),C.viewportChange(M),C.move({event:b,flowTransform:M})})},{immediate:!0}),me([S,ne,u,B,f,_,y],()=>{ne.value&&!B.value&&!S.value?Q.on("wheel.zoom",b=>{if(he(b,y.value))return!1;const M=B.value||p.value,W=f.value&&b.ctrlKey;if(!(!_.value||ne.value||M||W))return!1;b.preventDefault(),b.stopImmediatePropagation();const oe=Q.property("__zoom").k||1,ue=bn();if(b.ctrlKey&&f.value&&ue){const $t=Xe(b),ja=q(b),Wa=oe*2**ja;Z.scaleTo(Q,Wa,$t,b);return}const ge=b.deltaMode===1?20:1;let ve=u.value===Lt.Vertical?0:b.deltaX*ge,be=u.value===Lt.Horizontal?0:b.deltaY*ge;!ue&&b.shiftKey&&u.value!==Lt.Vertical&&!ve&&be&&(ve=be,be=0),Z.translateBy(Q,-(ve/oe)*c.value,-(be/oe)*c.value);const Ye=se(Q.property("__zoom"));v&&clearTimeout(v),te.value?(C.move({event:b,flowTransform:Ye}),C.viewportChange(Ye),v=setTimeout(()=>{C.moveEnd({event:b,flowTransform:Ye}),C.viewportChangeEnd(Ye),te.value=!1},150)):(te.value=!0,C.moveStart({event:b,flowTransform:Ye}),C.viewportChangeStart(Ye))},{passive:!1}):typeof ae<"u"&&Q.on("wheel.zoom",function(b,M){const W=!_.value&&b.type==="wheel"&&!b.ctrlKey,K=B.value||p.value,oe=f.value&&b.ctrlKey;if(!K&&!s.value&&!oe&&b.type==="wheel"||W||he(b,y.value))return null;b.preventDefault(),ae.call(this,b,M)},{passive:!1})},{immediate:!0})});function F(re,le){return le===2&&Array.isArray(re)&&re.includes(2)}function q(re){const le=re.ctrlKey&&bn()?10:1;return-re.deltaY*(re.deltaMode===1?.05:re.deltaMode?1:.002)*le}function fe(re,le){return re.x!==le.x&&!Number.isNaN(le.x)||re.y!==le.y&&!Number.isNaN(le.y)||re.zoom!==le.k&&!Number.isNaN(le.k)}function se(re){return{x:re.x,y:re.y,zoom:re.k}}function he(re,le){return re.target.closest(`.${le}`)}return(re,le)=>(ee(),ce("div",{ref_key:"viewportRef",ref:T,class:"vue-flow__viewport vue-flow__container"},[H(If,{"is-selecting":Y.value,"selection-key-pressed":$(A),class:vt({connecting:!!$(E),dragging:$(D),draggable:$(d)===!0||Array.isArray($(d))&&$(d).includes(0)})},{default:J(()=>[H(Of,null,{default:J(()=>[st(re.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),Pf=["id"],Df=["id"],Af=["id"],Vf={name:"A11yDescriptions",compatConfig:{MODE:3}},Rf=_e({...Vf,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Se();return(r,i)=>(ee(),ce(Re,null,[Me("div",{id:`${$(zi)}-${$(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+Te($(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Pf),Me("div",{id:`${$(Bi)}-${$(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Df),$(n)?ze("",!0):(ee(),ce("div",{key:0,id:`${$(ld)}-${$(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},Te($(o)),9,Af))],64))}});function zf(){const e=Se();me(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function Bf(e,t,n){return n===j.Left?e-t:n===j.Right?e+t:e}function Lf(e,t,n){return n===j.Top?e-t:n===j.Bottom?e+t:e}const Vo=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=j.Top,type:r}){return we("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${r}`,cx:Bf(t,e,o),cy:Lf(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};Vo.props=["radius","centerX","centerY","position","type"];Vo.compatConfig={MODE:3};const $r=Vo,Ff=_e({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:r,emits:i,nodesSelectionActive:a,noPanClassName:l,getEdgeTypes:s,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:h,multiSelectionActive:f,disableKeyboardA11y:p,elementsSelectable:_,edgesUpdatable:y,edgesFocusable:x,hooks:C}=Se(),E=ie(()=>c(e.id)),{emit:S,on:D}=$d(E.value,i),V=Tt($n),R=Ut(),L=de(!1),U=de(!1),T=de(""),z=de(null),N=de("source"),te=de(null),v=Ee(()=>typeof E.value.selectable>"u"?_.value:E.value.selectable),I=Ee(()=>typeof E.value.updatable>"u"?y.value:E.value.updatable),k=Ee(()=>typeof E.value.focusable>"u"?x.value:E.value.focusable);Ct(Md,e.id),Ct(Od,te);const O=ie(()=>E.value.class instanceof Function?E.value.class(E.value):E.value.class),P=ie(()=>E.value.style instanceof Function?E.value.style(E.value):E.value.style),A=ie(()=>{const g=E.value.type||"default",m=V==null?void 0:V[`edge-${g}`];if(m)return m;let b=E.value.template??s.value[g];if(typeof b=="string"&&R){const M=Object.keys(R.appContext.components);M&&M.includes(g)&&(b=ye(g,!1))}return b&&typeof b!="string"?b:(i.error(new Oe(Ce.EDGE_TYPE_MISSING,b)),!1)}),{handlePointerDown:B}=ra({nodeId:T,handleId:z,type:N,isValidConnection:h,edgeUpdaterType:N,onEdgeUpdate:Y,onEdgeUpdateEnd:F});return()=>{const g=d(E.value.source),m=d(E.value.target),b="pathOptions"in E.value?E.value.pathOptions:{};if(!g&&!m)return i.error(new Oe(Ce.EDGE_SOURCE_TARGET_MISSING,E.value.id,E.value.source,E.value.target)),null;if(!g)return i.error(new Oe(Ce.EDGE_SOURCE_MISSING,E.value.id,E.value.source)),null;if(!m)return i.error(new Oe(Ce.EDGE_TARGET_MISSING,E.value.id,E.value.target)),null;if(!E.value||E.value.hidden||g.hidden||m.hidden)return null;let M;o.value===wt.Strict?M=g.handleBounds.source:M=[...g.handleBounds.source||[],...g.handleBounds.target||[]];const W=wr(M,E.value.sourceHandle);let K;o.value===wt.Strict?K=m.handleBounds.target:K=[...m.handleBounds.target||[],...m.handleBounds.source||[]];const oe=wr(K,E.value.targetHandle),ue=(W==null?void 0:W.position)||j.Bottom,ge=(oe==null?void 0:oe.position)||j.Top,{x:ve,y:be}=_n(g,W,ue),{x:Ye,y:$t}=_n(m,oe,ge);return E.value.sourceX=ve,E.value.sourceY=be,E.value.targetX=Ye,E.value.targetY=$t,we("g",{ref:te,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${A.value===!1?"default":E.value.type||"default"}`,l.value,O.value,{updating:L.value,selected:E.value.selected,animated:E.value.animated,inactive:!v.value&&!C.value.edgeClick.hasListeners()}],onClick:fe,onContextmenu:se,onDblclick:he,onMouseenter:re,onMousemove:le,onMouseleave:Z,onKeyDown:k.value?w:void 0,tabIndex:k.value?0:void 0,"aria-label":E.value.ariaLabel===null?void 0:E.value.ariaLabel||`Edge from ${E.value.source} to ${E.value.target}`,"aria-describedby":k.value?`${Bi}-${t}`:void 0,role:k.value?"button":"img"},[U.value?null:we(A.value===!1?s.value.default:A.value,{id:e.id,sourceNode:g,targetNode:m,source:E.value.source,target:E.value.target,type:E.value.type,updatable:I.value,selected:E.value.selected,animated:E.value.animated,label:E.value.label,labelStyle:E.value.labelStyle,labelShowBg:E.value.labelShowBg,labelBgStyle:E.value.labelBgStyle,labelBgPadding:E.value.labelBgPadding,labelBgBorderRadius:E.value.labelBgBorderRadius,data:E.value.data,events:{...E.value.events,...D},style:P.value,markerStart:`url('#${Wt(E.value.markerStart,t)}')`,markerEnd:`url('#${Wt(E.value.markerEnd,t)}')`,sourcePosition:ue,targetPosition:ge,sourceX:ve,sourceY:be,targetX:Ye,targetY:$t,sourceHandleId:E.value.sourceHandle,targetHandleId:E.value.targetHandle,interactionWidth:E.value.interactionWidth,...b}),[I.value==="source"||I.value===!0?[we("g",{onMousedown:Q,onMouseenter:X,onMouseout:ne},we($r,{position:ue,centerX:ve,centerY:be,radius:r.value,type:"source","data-type":"source"}))]:null,I.value==="target"||I.value===!0?[we("g",{onMousedown:ae,onMouseenter:X,onMouseout:ne},we($r,{position:ge,centerX:Ye,centerY:$t,radius:r.value,type:"target","data-type":"target"}))]:null]])};function X(){L.value=!0}function ne(){L.value=!1}function Y(g,m){S.update({event:g,edge:E.value,connection:m})}function F(g){S.updateEnd({event:g,edge:E.value}),U.value=!1}function q(g,m){g.button===0&&(U.value=!0,T.value=m?E.value.target:E.value.source,z.value=(m?E.value.targetHandle:E.value.sourceHandle)??"",N.value=m?"target":"source",S.updateStart({event:g,edge:E.value}),B(g))}function fe(g){var m;const b={event:g,edge:E.value};v.value&&(a.value=!1,E.value.selected&&f.value?(u([E.value]),(m=te.value)==null||m.blur()):n([E.value])),S.click(b)}function se(g){S.contextMenu({event:g,edge:E.value})}function he(g){S.doubleClick({event:g,edge:E.value})}function re(g){S.mouseEnter({event:g,edge:E.value})}function le(g){S.mouseMove({event:g,edge:E.value})}function Z(g){S.mouseLeave({event:g,edge:E.value})}function Q(g){q(g,!0)}function ae(g){q(g,!1)}function w(g){var m;!p.value&&Li.includes(g.key)&&v.value&&(g.key==="Escape"?((m=te.value)==null||m.blur(),u([c(e.id)])):n([c(e.id)]))}}}),Gf=Ff,Hf={[j.Left]:j.Right,[j.Right]:j.Left,[j.Top]:j.Bottom,[j.Bottom]:j.Top},Yf=_e({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:r,connectionPosition:i,connectionLineType:a,connectionLineStyle:l,connectionLineOptions:s,connectionStatus:u,viewport:c,findNode:d}=Se(),h=(e=Tt($n))==null?void 0:e["connection-line"],f=ie(()=>{var C;return d((C=o.value)==null?void 0:C.nodeId)}),p=ie(()=>{var C;return d((C=r.value)==null?void 0:C.nodeId)??null}),_=ie(()=>({x:(i.value.x-c.value.x)/c.value.zoom,y:(i.value.y-c.value.y)/c.value.zoom})),y=ie(()=>s.value.markerStart?`url(#${Wt(s.value.markerStart,t)})`:""),x=ie(()=>s.value.markerEnd?`url(#${Wt(s.value.markerEnd,t)})`:"");return()=>{var C,E,S,D;if(!f.value||!o.value)return null;const V=o.value.handleId,R=o.value.type,L=f.value.handleBounds;let U=L==null?void 0:L[R];if(n.value===wt.Loose&&(U=U||(L==null?void 0:L[R==="source"?"target":"source"])),!U)return null;const T=(V?U.find(A=>A.id===V):U[0])??null,z=(T==null?void 0:T.position)||j.Top,{x:N,y:te}=_n(f.value,T,z);let v=null;p.value&&((C=r.value)!=null&&C.handleId)&&(n.value===wt.Strict?v=((E=p.value.handleBounds[R==="source"?"target":"source"])==null?void 0:E.find(A=>{var B;return A.id===((B=r.value)==null?void 0:B.handleId)}))||null:v=((S=[...p.value.handleBounds.source||[],...p.value.handleBounds.target||[]])==null?void 0:S.find(A=>{var B;return A.id===((B=r.value)==null?void 0:B.handleId)}))||null);const I=((D=r.value)==null?void 0:D.position)??(z?Hf[z]:null);if(!z||!I)return null;const k=a.value??s.value.type??dt.Bezier;let O="";const P={sourceX:N,sourceY:te,sourcePosition:z,targetX:_.value.x,targetY:_.value.y,targetPosition:I};return k===dt.Bezier?[O]=ca(P):k===dt.Step?[O]=bo({...P,borderRadius:0}):k===dt.SmoothStep?[O]=bo(P):k===dt.SimpleBezier?[O]=da(P):O=`M${N},${te} ${_.value.x},${_.value.y}`,we("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},we("g",{class:"vue-flow__connection"},h?we(h,{sourceX:N,sourceY:te,sourcePosition:z,targetX:_.value.x,targetY:_.value.y,targetPosition:I,sourceNode:f.value,sourceHandle:T,targetNode:p.value,targetHandle:v,markerEnd:x.value,markerStart:y.value,connectionStatus:u.value}):we("path",{d:O,class:[s.value.class,u,"vue-flow__connection-path"],style:{...l.value,...s.value.style},"marker-end":x.value,"marker-start":y.value})))}}}),Xf=Yf,jf=["id","markerWidth","markerHeight","markerUnits","orient"],Wf={name:"MarkerType",compatConfig:{MODE:3}},Uf=_e({...Wf,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(ee(),ce("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===$(vo).ArrowClosed?(ee(),ce("polyline",{key:0,style:Ae({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):ze("",!0),t.type===$(vo).Arrow?(ee(),ce("polyline",{key:1,style:Ae({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):ze("",!0)],8,jf))}}),Zf={class:"vue-flow__marker vue-flow__container"},Kf={name:"MarkerDefinitions",compatConfig:{MODE:3}},qf=_e({...Kf,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:r}=Se(),i=ie(()=>{const a=new Set,l=[],s=u=>{if(u){const c=Wt(u,t);a.has(c)||(typeof u=="object"?l.push({...u,id:c,color:u.color||r.value}):l.push({id:c,color:r.value,type:u}),a.add(c))}};for(const u of[o.value.markerEnd,o.value.markerStart])s(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])s(c);return l.sort((u,c)=>u.id.localeCompare(c.id))});return(a,l)=>(ee(),ce("svg",Zf,[Me("defs",null,[(ee(!0),ce(Re,null,mt(i.value,s=>(ee(),$e(Uf,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,"stroke-width":s.strokeWidth,orient:s.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),Qf={name:"Edges",compatConfig:{MODE:3}},Jf=_e({...Qf,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=Se();return(r,i)=>(ee(),ce(Re,null,[H(qf),(ee(!0),ce(Re,null,mt($(n),a=>(ee(),ce("svg",{key:a.id,class:"vue-flow__edges vue-flow__container",style:Ae({zIndex:$(bd)(a,$(t),$(o))})},[H($(Gf),{id:a.id},null,8,["id"])],4))),128)),H($(Xf))],64))}}),eh=_e({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:r,multiSelectionActive:i,emits:a,removeSelectedNodes:l,addSelectedNodes:s,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:h,elevateNodesOnSelect:f,disableKeyboardA11y:p,ariaLiveMessage:_,snapToGrid:y,snapGrid:x,nodeDragThreshold:C,nodesDraggable:E,elementsSelectable:S,nodesConnectable:D,nodesFocusable:V,hooks:R}=Se(),L=de(null);Ct(na,L),Ct(ta,e.id);const U=Tt($n),T=Ut(),z=aa(),{node:N,parentNode:te}=ia(e.id),{emit:v,on:I}=Vd(N,a),k=Ee(()=>typeof N.draggable>"u"?E.value:N.draggable),O=Ee(()=>typeof N.selectable>"u"?S.value:N.selectable),P=Ee(()=>typeof N.connectable>"u"?D.value:N.connectable),A=Ee(()=>typeof N.focusable>"u"?V.value:N.focusable),B=Ee(()=>O.value||k.value||R.value.nodeClick.hasListeners()||R.value.nodeDoubleClick.hasListeners()||R.value.nodeMouseEnter.hasListeners()||R.value.nodeMouseMove.hasListeners()||R.value.nodeMouseLeave.hasListeners()),X=Ee(()=>!!N.dimensions.width&&!!N.dimensions.height),ne=ie(()=>{const m=N.type||"default",b=U==null?void 0:U[`node-${m}`];if(b)return b;let M=N.template||d.value[m];if(typeof M=="string"&&T){const W=Object.keys(T.appContext.components);W&&W.includes(m)&&(M=ye(m,!1))}return M&&typeof M!="string"?M:(a.error(new Oe(Ce.NODE_TYPE_MISSING,M)),!1)}),Y=oa({id:e.id,el:L,disabled:()=>!k.value,selectable:O,dragHandle:()=>N.dragHandle,onStart(m){v.dragStart(m)},onDrag(m){v.drag(m)},onStop(m){v.dragStop(m)},onClick(m){w(m)}}),F=ie(()=>N.class instanceof Function?N.class(N):N.class),q=ie(()=>{const m=(N.style instanceof Function?N.style(N):N.style)||{},b=N.width instanceof Function?N.width(N):N.width,M=N.height instanceof Function?N.height(N):N.height;return!m.width&&b&&(m.width=typeof b=="string"?b:`${b}px`),!m.height&&M&&(m.height=typeof M=="string"?M:`${M}px`),m}),fe=Ee(()=>Number(N.zIndex??q.value.zIndex??0));return c(m=>{(m.includes(e.id)||!m.length)&&he()}),tt(()=>{me(()=>N.hidden,(m=!1,b,M)=>{!m&&L.value&&(e.resizeObserver.observe(L.value),M(()=>{L.value&&e.resizeObserver.unobserve(L.value)}))},{immediate:!0,flush:"post"})}),me([()=>N.type,()=>N.sourcePosition,()=>N.targetPosition],()=>{Je(()=>{u([{id:e.id,nodeElement:L.value,forceUpdate:!0}])})}),me([()=>N.position.x,()=>N.position.y,()=>{var m;return(m=te.value)==null?void 0:m.computedPosition.x},()=>{var m;return(m=te.value)==null?void 0:m.computedPosition.y},()=>{var m;return(m=te.value)==null?void 0:m.computedPosition.z},fe,()=>N.selected,()=>N.dimensions.height,()=>N.dimensions.width,()=>{var m;return(m=te.value)==null?void 0:m.dimensions.height},()=>{var m;return(m=te.value)==null?void 0:m.dimensions.width}],([m,b,M,W,K,oe])=>{const ue={x:m,y:b,z:oe+(f.value&&N.selected?1e3:0)};typeof M<"u"&&typeof W<"u"?N.computedPosition=gd({x:M,y:W,z:K},ue):N.computedPosition=ue},{flush:"post",immediate:!0}),me([()=>N.extent,h],([m,b],[M,W])=>{(m!==M||b!==W)&&se()}),N.extent==="parent"||typeof N.extent=="object"&&"range"in N.extent&&N.extent.range==="parent"?ao(()=>X).toBe(!0).then(se):se(),()=>N.hidden?null:we("div",{ref:L,"data-id":N.id,class:["vue-flow__node",`vue-flow__node-${ne.value===!1?"default":N.type||"default"}`,{[n.value]:k.value,dragging:Y==null?void 0:Y.value,draggable:k.value,selected:N.selected,selectable:O.value,parent:N.isParent},F.value],style:{visibility:X.value?"visible":"hidden",zIndex:N.computedPosition.z??fe.value,transform:`translate(${N.computedPosition.x}px,${N.computedPosition.y}px)`,pointerEvents:B.value?"all":"none",...q.value},tabIndex:A.value?0:void 0,role:A.value?"button":void 0,"aria-describedby":p.value?void 0:`${zi}-${t}`,"aria-label":N.ariaLabel,onMouseenter:re,onMousemove:le,onMouseleave:Z,onContextmenu:Q,onClick:w,onDblclick:ae,onKeydown:g},[we(ne.value===!1?d.value.default:ne.value,{id:N.id,type:N.type,data:N.data,events:{...N.events,...I},selected:N.selected,resizing:N.resizing,dragging:Y.value,connectable:P.value,position:N.computedPosition,dimensions:N.dimensions,isValidTargetPos:N.isValidTargetPos,isValidSourcePos:N.isValidSourcePos,parent:N.parentNode,parentNodeId:N.parentNode,zIndex:N.computedPosition.z??fe.value,targetPosition:N.targetPosition,sourcePosition:N.sourcePosition,label:N.label,dragHandle:N.dragHandle,onUpdateNodeInternals:he})]);function se(){const m=N.computedPosition;y.value&&(m.x=x.value[0]*Math.round(m.x/x.value[0]),m.y=x.value[1]*Math.round(m.y/x.value[1]));const{computedPosition:b,position:M}=Po(N,m,a.error,h.value,te.value);(N.computedPosition.x!==b.x||N.computedPosition.y!==b.y)&&(N.computedPosition={...N.computedPosition,...b}),(N.position.x!==M.x||N.position.y!==M.y)&&(N.position=M)}function he(){L.value&&u([{id:e.id,nodeElement:L.value,forceUpdate:!0}])}function re(m){Y!=null&&Y.value||v.mouseEnter({event:m,node:N})}function le(m){Y!=null&&Y.value||v.mouseMove({event:m,node:N})}function Z(m){Y!=null&&Y.value||v.mouseLeave({event:m,node:N})}function Q(m){return v.contextMenu({event:m,node:N})}function ae(m){return v.doubleClick({event:m,node:N})}function w(m){O.value&&(!o.value||!k.value||C.value>0)&&_o(N,i.value,s,l,r,!1,L.value),v.click({event:m,node:N})}function g(m){if(!(mo(m)||p.value))if(Li.includes(m.key)&&O.value){const b=m.key==="Escape";_o(N,i.value,s,l,r,b,L.value)}else k.value&&N.selected&&kt[m.key]&&(_.value=`Moved selected node ${m.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~N.position.x}, y: ${~~N.position.y}`,z({x:kt[m.key].x,y:kt[m.key].y},m.shiftKey))}}}),th=eh;function nh(e={includeHiddenNodes:!1}){const{nodes:t}=Se();return ie(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const oh={class:"vue-flow__nodes vue-flow__container"},rh={name:"Nodes",compatConfig:{MODE:3}},ih=_e({...rh,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=Se(),r=nh(),i=de();return me(r,a=>{a&&Je(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),tt(()=>{i.value=new ResizeObserver(a=>{const l=a.map(s=>({id:s.target.getAttribute("data-id"),nodeElement:s.target,forceUpdate:!0}));Je(()=>n(l))})}),ri(()=>{var a;return(a=i.value)==null?void 0:a.disconnect()}),(a,l)=>(ee(),ce("div",oh,[i.value?(ee(!0),ce(Re,{key:0},mt($(t),(s,u,c,d)=>{const h=[s.id];if(d&&d.key===s.id&&Ja(d,h))return d;const f=(ee(),$e($(th),{id:s.id,key:s.id,"resize-observer":i.value},null,8,["id","resize-observer"]));return f.memo=h,f},l,0),128)):ze("",!0)]))}});function ah(){const{emits:e}=Se();tt(()=>{if(ea()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new Oe(Ce.MISSING_STYLES))}})}const lh=Me("div",{class:"vue-flow__edge-labels"},null,-1),sh={name:"VueFlow",compatConfig:{MODE:3}},uh=_e({...sh,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,r=Ka(),i=Bn(o,"modelValue",n),a=Bn(o,"nodes",n),l=Bn(o,"edges",n),s=Se(o),u=Bd({modelValue:i,nodes:a,edges:l},o,s);return Fd(n,s.hooks),zf(),ah(),Ct($n,r),ti(()=>{u()}),t(s),(c,d)=>(ee(),ce("div",{ref:$(s).vueFlowRef,class:"vue-flow"},[H($f,null,{default:J(()=>[H(Jf),lh,H(ih),st(c.$slots,"zoom-pane")]),_:3}),st(c.$slots,"default"),H(Rf)],512))}});var ch="\0",ct="\0",Pr="";let dh=class{constructor(t){xe(this,"_isDirected",!0);xe(this,"_isMultigraph",!1);xe(this,"_isCompound",!1);xe(this,"_label");xe(this,"_defaultNodeLabelFn",()=>{});xe(this,"_defaultEdgeLabelFn",()=>{});xe(this,"_nodes",{});xe(this,"_in",{});xe(this,"_preds",{});xe(this,"_out",{});xe(this,"_sucs",{});xe(this,"_edgeObjs",{});xe(this,"_edgeLabels",{});xe(this,"_nodeCount",0);xe(this,"_edgeCount",0);xe(this,"_parent");xe(this,"_children");t&&(this._isDirected=Object.hasOwn(t,"directed")?t.directed:!0,this._isMultigraph=Object.hasOwn(t,"multigraph")?t.multigraph:!1,this._isCompound=Object.hasOwn(t,"compound")?t.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[ct]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return this._defaultNodeLabelFn=t,typeof t!="function"&&(this._defaultNodeLabelFn=()=>t),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var t=this;return this.nodes().filter(n=>Object.keys(t._in[n]).length===0)}sinks(){var t=this;return this.nodes().filter(n=>Object.keys(t._out[n]).length===0)}setNodes(t,n){var o=arguments,r=this;return t.forEach(function(i){o.length>1?r.setNode(i,n):r.setNode(i)}),this}setNode(t,n){return Object.hasOwn(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=n),this):(this._nodes[t]=arguments.length>1?n:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=ct,this._children[t]={},this._children[ct][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}node(t){return this._nodes[t]}hasNode(t){return Object.hasOwn(this._nodes,t)}removeNode(t){var n=this;if(Object.hasOwn(this._nodes,t)){var o=r=>n.removeEdge(n._edgeObjs[r]);delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],this.children(t).forEach(function(r){n.setParent(r)}),delete this._children[t]),Object.keys(this._in[t]).forEach(o),delete this._in[t],delete this._preds[t],Object.keys(this._out[t]).forEach(o),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n===void 0)n=ct;else{n+="";for(var o=n;o!==void 0;o=this.parent(o))if(o===t)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");this.setNode(n)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=n,this._children[n][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var n=this._parent[t];if(n!==ct)return n}}children(t=ct){if(this._isCompound){var n=this._children[t];if(n)return Object.keys(n)}else{if(t===ct)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var n=this._preds[t];if(n)return Object.keys(n)}successors(t){var n=this._sucs[t];if(n)return Object.keys(n)}neighbors(t){var n=this.predecessors(t);if(n){const r=new Set(n);for(var o of this.successors(t))r.add(o);return Array.from(r.values())}}isLeaf(t){var n;return this.isDirected()?n=this.successors(t):n=this.neighbors(t),n.length===0}filterNodes(t){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var o=this;Object.entries(this._nodes).forEach(function([a,l]){t(a)&&n.setNode(a,l)}),Object.values(this._edgeObjs).forEach(function(a){n.hasNode(a.v)&&n.hasNode(a.w)&&n.setEdge(a,o.edge(a))});var r={};function i(a){var l=o.parent(a);return l===void 0||n.hasNode(l)?(r[a]=l,l):l in r?r[l]:i(l)}return this._isCompound&&n.nodes().forEach(a=>n.setParent(a,i(a))),n}setDefaultEdgeLabel(t){return this._defaultEdgeLabelFn=t,typeof t!="function"&&(this._defaultEdgeLabelFn=()=>t),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(t,n){var o=this,r=arguments;return t.reduce(function(i,a){return r.length>1?o.setEdge(i,a,n):o.setEdge(i,a),a}),this}setEdge(){var t,n,o,r,i=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(t=a.v,n=a.w,o=a.name,arguments.length===2&&(r=arguments[1],i=!0)):(t=a,n=arguments[1],o=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),t=""+t,n=""+n,o!==void 0&&(o=""+o);var l=Bt(this._isDirected,t,n,o);if(Object.hasOwn(this._edgeLabels,l))return i&&(this._edgeLabels[l]=r),this;if(o!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(n),this._edgeLabels[l]=i?r:this._defaultEdgeLabelFn(t,n,o);var s=fh(this._isDirected,t,n,o);return t=s.v,n=s.w,Object.freeze(s),this._edgeObjs[l]=s,Dr(this._preds[n],t),Dr(this._sucs[t],n),this._in[n][l]=s,this._out[t][l]=s,this._edgeCount++,this}edge(t,n,o){var r=arguments.length===1?Zn(this._isDirected,arguments[0]):Bt(this._isDirected,t,n,o);return this._edgeLabels[r]}edgeAsObj(){const t=this.edge(...arguments);return typeof t!="object"?{label:t}:t}hasEdge(t,n,o){var r=arguments.length===1?Zn(this._isDirected,arguments[0]):Bt(this._isDirected,t,n,o);return Object.hasOwn(this._edgeLabels,r)}removeEdge(t,n,o){var r=arguments.length===1?Zn(this._isDirected,arguments[0]):Bt(this._isDirected,t,n,o),i=this._edgeObjs[r];return i&&(t=i.v,n=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],Ar(this._preds[n],t),Ar(this._sucs[t],n),delete this._in[n][r],delete this._out[t][r],this._edgeCount--),this}inEdges(t,n){var o=this._in[t];if(o){var r=Object.values(o);return n?r.filter(i=>i.v===n):r}}outEdges(t,n){var o=this._out[t];if(o){var r=Object.values(o);return n?r.filter(i=>i.w===n):r}}nodeEdges(t,n){var o=this.inEdges(t,n);if(o)return o.concat(this.outEdges(t,n))}};function Dr(e,t){e[t]?e[t]++:e[t]=1}function Ar(e,t){--e[t]||delete e[t]}function Bt(e,t,n,o){var r=""+t,i=""+n;if(!e&&r>i){var a=r;r=i,i=a}return r+Pr+i+Pr+(o===void 0?ch:o)}function fh(e,t,n,o){var r=""+t,i=""+n;if(!e&&r>i){var a=r;r=i,i=a}var l={v:r,w:i};return o&&(l.name=o),l}function Zn(e,t){return Bt(e,t.v,t.w,t.name)}var Ro=dh,hh="2.2.4",ph={Graph:Ro,version:hh},gh=Ro,vh={write:mh,read:_h};function mh(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:yh(e),edges:wh(e)};return e.graph()!==void 0&&(t.value=structuredClone(e.graph())),t}function yh(e){return e.nodes().map(function(t){var n=e.node(t),o=e.parent(t),r={v:t};return n!==void 0&&(r.value=n),o!==void 0&&(r.parent=o),r})}function wh(e){return e.edges().map(function(t){var n=e.edge(t),o={v:t.v,w:t.w};return t.name!==void 0&&(o.name=t.name),n!==void 0&&(o.value=n),o})}function _h(e){var t=new gh(e.options).setGraph(e.value);return e.nodes.forEach(function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),e.edges.forEach(function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}var bh=Eh;function Eh(e){var t={},n=[],o;function r(i){Object.hasOwn(t,i)||(t[i]=!0,o.push(i),e.successors(i).forEach(r),e.predecessors(i).forEach(r))}return e.nodes().forEach(function(i){o=[],r(i),o.length&&n.push(o)}),n}let xh=class{constructor(){xe(this,"_arr",[]);xe(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(t){return t.key})}has(t){return Object.hasOwn(this._keyIndices,t)}priority(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(t,n){var o=this._keyIndices;if(t=String(t),!Object.hasOwn(o,t)){var r=this._arr,i=r.length;return o[t]=i,r.push({key:t,priority:n}),this._decrease(i),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key}decrease(t,n){var o=this._keyIndices[t];if(n>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[o].priority+" New: "+n);this._arr[o].priority=n,this._decrease(o)}_heapify(t){var n=this._arr,o=2*t,r=o+1,i=t;o<n.length&&(i=n[o].priority<n[i].priority?o:i,r<n.length&&(i=n[r].priority<n[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))}_decrease(t){for(var n=this._arr,o=n[t].priority,r;t!==0&&(r=t>>1,!(n[r].priority<o));)this._swap(t,r),t=r}_swap(t,n){var o=this._arr,r=this._keyIndices,i=o[t],a=o[n];o[t]=a,o[n]=i,r[a.key]=t,r[i.key]=n}};var ha=xh,Sh=ha,pa=kh,Nh=()=>1;function kh(e,t,n,o){return Ch(e,String(t),n||Nh,o||function(r){return e.outEdges(r)})}function Ch(e,t,n,o){var r={},i=new Sh,a,l,s=function(u){var c=u.v!==a?u.v:u.w,d=r[c],h=n(u),f=l.distance+h;if(h<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+u+" Weight: "+h);f<d.distance&&(d.distance=f,d.predecessor=a,i.decrease(c,f))};for(e.nodes().forEach(function(u){var c=u===t?0:Number.POSITIVE_INFINITY;r[u]={distance:c},i.add(u,c)});i.size()>0&&(a=i.removeMin(),l=r[a],l.distance!==Number.POSITIVE_INFINITY);)o(a).forEach(s);return r}var Ih=pa,Mh=Oh;function Oh(e,t,n){return e.nodes().reduce(function(o,r){return o[r]=Ih(e,r,t,n),o},{})}var ga=Th;function Th(e){var t=0,n=[],o={},r=[];function i(a){var l=o[a]={onStack:!0,lowlink:t,index:t++};if(n.push(a),e.successors(a).forEach(function(c){Object.hasOwn(o,c)?o[c].onStack&&(l.lowlink=Math.min(l.lowlink,o[c].index)):(i(c),l.lowlink=Math.min(l.lowlink,o[c].lowlink))}),l.lowlink===l.index){var s=[],u;do u=n.pop(),o[u].onStack=!1,s.push(u);while(a!==u);r.push(s)}}return e.nodes().forEach(function(a){Object.hasOwn(o,a)||i(a)}),r}var $h=ga,Ph=Dh;function Dh(e){return $h(e).filter(function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})}var Ah=Rh,Vh=()=>1;function Rh(e,t,n){return zh(e,t||Vh,n||function(o){return e.outEdges(o)})}function zh(e,t,n){var o={},r=e.nodes();return r.forEach(function(i){o[i]={},o[i][i]={distance:0},r.forEach(function(a){i!==a&&(o[i][a]={distance:Number.POSITIVE_INFINITY})}),n(i).forEach(function(a){var l=a.v===i?a.w:a.v,s=t(a);o[i][l]={distance:s,predecessor:i}})}),r.forEach(function(i){var a=o[i];r.forEach(function(l){var s=o[l];r.forEach(function(u){var c=s[i],d=a[u],h=s[u],f=c.distance+d.distance;f<h.distance&&(h.distance=f,h.predecessor=d.predecessor)})})}),o}function va(e){var t={},n={},o=[];function r(i){if(Object.hasOwn(n,i))throw new Eo;Object.hasOwn(t,i)||(n[i]=!0,t[i]=!0,e.predecessors(i).forEach(r),delete n[i],o.push(i))}if(e.sinks().forEach(r),Object.keys(t).length!==e.nodeCount())throw new Eo;return o}class Eo extends Error{constructor(){super(...arguments)}}var ma=va;va.CycleException=Eo;var Vr=ma,Bh=Lh;function Lh(e){try{Vr(e)}catch(t){if(t instanceof Vr.CycleException)return!1;throw t}return!0}var ya=Fh;function Fh(e,t,n){Array.isArray(t)||(t=[t]);var o=e.isDirected()?l=>e.successors(l):l=>e.neighbors(l),r=n==="post"?Gh:Hh,i=[],a={};return t.forEach(l=>{if(!e.hasNode(l))throw new Error("Graph does not have node: "+l);r(l,o,a,i)}),i}function Gh(e,t,n,o){for(var r=[[e,!1]];r.length>0;){var i=r.pop();i[1]?o.push(i[0]):Object.hasOwn(n,i[0])||(n[i[0]]=!0,r.push([i[0],!0]),wa(t(i[0]),a=>r.push([a,!1])))}}function Hh(e,t,n,o){for(var r=[e];r.length>0;){var i=r.pop();Object.hasOwn(n,i)||(n[i]=!0,o.push(i),wa(t(i),a=>r.push(a)))}}function wa(e,t){for(var n=e.length;n--;)t(e[n],n,e);return e}var Yh=ya,Xh=jh;function jh(e,t){return Yh(e,t,"post")}var Wh=ya,Uh=Zh;function Zh(e,t){return Wh(e,t,"pre")}var Kh=Ro,qh=ha,Qh=Jh;function Jh(e,t){var n=new Kh,o={},r=new qh,i;function a(s){var u=s.v===i?s.w:s.v,c=r.priority(u);if(c!==void 0){var d=t(s);d<c&&(o[u]=i,r.decrease(u,d))}}if(e.nodeCount()===0)return n;e.nodes().forEach(function(s){r.add(s,Number.POSITIVE_INFINITY),n.setNode(s)}),r.decrease(e.nodes()[0],0);for(var l=!1;r.size()>0;){if(i=r.removeMin(),Object.hasOwn(o,i))n.setEdge(i,o[i]);else{if(l)throw new Error("Input graph is not connected: "+e);l=!0}e.nodeEdges(i).forEach(a)}return n}var ep={components:bh,dijkstra:pa,dijkstraAll:Mh,findCycles:Ph,floydWarshall:Ah,isAcyclic:Bh,postorder:Xh,preorder:Uh,prim:Qh,tarjan:ga,topsort:ma},Rr=ph,He={Graph:Rr.Graph,json:vh,alg:ep,version:Rr.version};let tp=class{constructor(){let t={};t._next=t._prev=t,this._sentinel=t}dequeue(){let t=this._sentinel,n=t._prev;if(n!==t)return zr(n),n}enqueue(t){let n=this._sentinel;t._prev&&t._next&&zr(t),t._next=n._next,n._next._prev=t,n._next=t,t._prev=n}toString(){let t=[],n=this._sentinel,o=n._prev;for(;o!==n;)t.push(JSON.stringify(o,np)),o=o._prev;return"["+t.join(", ")+"]"}};function zr(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function np(e,t){if(e!=="_next"&&e!=="_prev")return t}var op=tp;let rp=He.Graph,ip=op;var ap=sp;let lp=()=>1;function sp(e,t){if(e.nodeCount()<=1)return[];let n=cp(e,t||lp);return up(n.graph,n.buckets,n.zeroIdx).flatMap(r=>e.outEdges(r.v,r.w))}function up(e,t,n){let o=[],r=t[t.length-1],i=t[0],a;for(;e.nodeCount();){for(;a=i.dequeue();)Kn(e,t,n,a);for(;a=r.dequeue();)Kn(e,t,n,a);if(e.nodeCount()){for(let l=t.length-2;l>0;--l)if(a=t[l].dequeue(),a){o=o.concat(Kn(e,t,n,a,!0));break}}}return o}function Kn(e,t,n,o,r){let i=r?[]:void 0;return e.inEdges(o.v).forEach(a=>{let l=e.edge(a),s=e.node(a.v);r&&i.push({v:a.v,w:a.w}),s.out-=l,xo(t,n,s)}),e.outEdges(o.v).forEach(a=>{let l=e.edge(a),s=a.w,u=e.node(s);u.in-=l,xo(t,n,u)}),e.removeNode(o.v),i}function cp(e,t){let n=new rp,o=0,r=0;e.nodes().forEach(l=>{n.setNode(l,{v:l,in:0,out:0})}),e.edges().forEach(l=>{let s=n.edge(l.v,l.w)||0,u=t(l),c=s+u;n.setEdge(l.v,l.w,c),r=Math.max(r,n.node(l.v).out+=u),o=Math.max(o,n.node(l.w).in+=u)});let i=dp(r+o+3).map(()=>new ip),a=o+1;return n.nodes().forEach(l=>{xo(i,a,n.node(l))}),{graph:n,buckets:i,zeroIdx:a}}function xo(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}function dp(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}let _a=He.Graph;var Ie={addBorderNode:_p,addDummyNode:ba,applyWithChunking:Rn,asNonCompoundGraph:hp,buildLayerMatrix:mp,intersectRect:vp,mapValues:Cp,maxRank:xa,normalizeRanks:yp,notime:Sp,partition:Ep,pick:kp,predecessorWeights:gp,range:Na,removeEmptyRanks:wp,simplify:fp,successorWeights:pp,time:xp,uniqueId:Sa,zipObject:zo};function ba(e,t,n,o){let r;do r=Sa(o);while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r}function fp(e){let t=new _a().setGraph(e.graph());return e.nodes().forEach(n=>t.setNode(n,e.node(n))),e.edges().forEach(n=>{let o=t.edge(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+r.weight,minlen:Math.max(o.minlen,r.minlen)})}),t}function hp(e){let t=new _a({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{e.children(n).length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdge(n,e.edge(n))}),t}function pp(e){let t=e.nodes().map(n=>{let o={};return e.outEdges(n).forEach(r=>{o[r.w]=(o[r.w]||0)+e.edge(r).weight}),o});return zo(e.nodes(),t)}function gp(e){let t=e.nodes().map(n=>{let o={};return e.inEdges(n).forEach(r=>{o[r.v]=(o[r.v]||0)+e.edge(r).weight}),o});return zo(e.nodes(),t)}function vp(e,t){let n=e.x,o=e.y,r=t.x-n,i=t.y-o,a=e.width/2,l=e.height/2;if(!r&&!i)throw new Error("Not possible to find intersection inside of the rectangle");let s,u;return Math.abs(i)*a>Math.abs(r)*l?(i<0&&(l=-l),s=l*r/i,u=l):(r<0&&(a=-a),s=a,u=a*i/r),{x:n+s,y:o+u}}function mp(e){let t=Na(xa(e)+1).map(()=>[]);return e.nodes().forEach(n=>{let o=e.node(n),r=o.rank;r!==void 0&&(t[r][o.order]=n)}),t}function yp(e){let t=e.nodes().map(o=>{let r=e.node(o).rank;return r===void 0?Number.MAX_VALUE:r}),n=Rn(Math.min,t);e.nodes().forEach(o=>{let r=e.node(o);Object.hasOwn(r,"rank")&&(r.rank-=n)})}function wp(e){let t=e.nodes().map(a=>e.node(a).rank),n=Rn(Math.min,t),o=[];e.nodes().forEach(a=>{let l=e.node(a).rank-n;o[l]||(o[l]=[]),o[l].push(a)});let r=0,i=e.graph().nodeRankFactor;Array.from(o).forEach((a,l)=>{a===void 0&&l%i!==0?--r:a!==void 0&&r&&a.forEach(s=>e.node(s).rank+=r)})}function _p(e,t,n,o){let r={width:0,height:0};return arguments.length>=4&&(r.rank=n,r.order=o),ba(e,"border",r,t)}function bp(e,t=Ea){const n=[];for(let o=0;o<e.length;o+=t){const r=e.slice(o,o+t);n.push(r)}return n}const Ea=65535;function Rn(e,t){if(t.length>Ea){const n=bp(t);return e.apply(null,n.map(o=>e.apply(null,o)))}else return e.apply(null,t)}function xa(e){const n=e.nodes().map(o=>{let r=e.node(o).rank;return r===void 0?Number.MIN_VALUE:r});return Rn(Math.max,n)}function Ep(e,t){let n={lhs:[],rhs:[]};return e.forEach(o=>{t(o)?n.lhs.push(o):n.rhs.push(o)}),n}function xp(e,t){let n=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-n)+"ms")}}function Sp(e,t){return t()}let Np=0;function Sa(e){var t=++Np;return toString(e)+t}function Na(e,t,n=1){t==null&&(t=e,e=0);let o=i=>i<t;n<0&&(o=i=>t<i);const r=[];for(let i=e;o(i);i+=n)r.push(i);return r}function kp(e,t){const n={};for(const o of t)e[o]!==void 0&&(n[o]=e[o]);return n}function Cp(e,t){let n=t;return typeof t=="string"&&(n=o=>o[t]),Object.entries(e).reduce((o,[r,i])=>(o[r]=n(i,r),o),{})}function zo(e,t){return e.reduce((n,o,r)=>(n[o]=t[r],n),{})}let Ip=ap,Mp=Ie.uniqueId;var Op={run:Tp,undo:Pp};function Tp(e){(e.graph().acyclicer==="greedy"?Ip(e,n(e)):$p(e)).forEach(o=>{let r=e.edge(o);e.removeEdge(o),r.forwardName=o.name,r.reversed=!0,e.setEdge(o.w,o.v,r,Mp("rev"))});function n(o){return r=>o.edge(r).weight}}function $p(e){let t=[],n={},o={};function r(i){Object.hasOwn(o,i)||(o[i]=!0,n[i]=!0,e.outEdges(i).forEach(a=>{Object.hasOwn(n,a.w)?t.push(a):r(a.w)}),delete n[i])}return e.nodes().forEach(r),t}function Pp(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.reversed){e.removeEdge(t);let o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}})}let Dp=Ie;var Ap={run:Vp,undo:zp};function Vp(e){e.graph().dummyChains=[],e.edges().forEach(t=>Rp(e,t))}function Rp(e,t){let n=t.v,o=e.node(n).rank,r=t.w,i=e.node(r).rank,a=t.name,l=e.edge(t),s=l.labelRank;if(i===o+1)return;e.removeEdge(t);let u,c,d;for(d=0,++o;o<i;++d,++o)l.points=[],c={width:0,height:0,edgeLabel:l,edgeObj:t,rank:o},u=Dp.addDummyNode(e,"edge",c,"_d"),o===s&&(c.width=l.width,c.height=l.height,c.dummy="edge-label",c.labelpos=l.labelpos),e.setEdge(n,u,{weight:l.weight},a),d===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,r,{weight:l.weight},a)}function zp(e){e.graph().dummyChains.forEach(t=>{let n=e.node(t),o=n.edgeLabel,r;for(e.setEdge(n.edgeObj,o);n.dummy;)r=e.successors(t)[0],e.removeNode(t),o.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),t=r,n=e.node(t)})}const{applyWithChunking:Bp}=Ie;var zn={longestPath:Lp,slack:Fp};function Lp(e){var t={};function n(o){var r=e.node(o);if(Object.hasOwn(t,o))return r.rank;t[o]=!0;let i=e.outEdges(o).map(l=>l==null?Number.POSITIVE_INFINITY:n(l.w)-e.edge(l).minlen);var a=Bp(Math.min,i);return a===Number.POSITIVE_INFINITY&&(a=0),r.rank=a}e.sources().forEach(n)}function Fp(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Gp=He.Graph,En=zn.slack,ka=Hp;function Hp(e){var t=new Gp({directed:!1}),n=e.nodes()[0],o=e.nodeCount();t.setNode(n,{});for(var r,i;Yp(t,e)<o;)r=Xp(t,e),i=t.hasNode(r.v)?En(e,r):-En(e,r),jp(t,e,i);return t}function Yp(e,t){function n(o){t.nodeEdges(o).forEach(r=>{var i=r.v,a=o===i?r.w:i;!e.hasNode(a)&&!En(t,r)&&(e.setNode(a,{}),e.setEdge(o,a,{}),n(a))})}return e.nodes().forEach(n),e.nodeCount()}function Xp(e,t){return t.edges().reduce((o,r)=>{let i=Number.POSITIVE_INFINITY;return e.hasNode(r.v)!==e.hasNode(r.w)&&(i=En(t,r)),i<o[0]?[i,r]:o},[Number.POSITIVE_INFINITY,null])[1]}function jp(e,t,n){e.nodes().forEach(o=>t.node(o).rank+=n)}var Wp=ka,Br=zn.slack,Up=zn.longestPath,Zp=He.alg.preorder,Kp=He.alg.postorder,qp=Ie.simplify,Qp=bt;bt.initLowLimValues=Lo;bt.initCutValues=Bo;bt.calcCutValue=Ca;bt.leaveEdge=Ma;bt.enterEdge=Oa;bt.exchangeEdges=Ta;function bt(e){e=qp(e),Up(e);var t=Wp(e);Lo(t),Bo(t,e);for(var n,o;n=Ma(t);)o=Oa(t,e,n),Ta(t,e,n,o)}function Bo(e,t){var n=Kp(e,e.nodes());n=n.slice(0,n.length-1),n.forEach(o=>Jp(e,t,o))}function Jp(e,t,n){var o=e.node(n),r=o.parent;e.edge(n,r).cutvalue=Ca(e,t,n)}function Ca(e,t,n){var o=e.node(n),r=o.parent,i=!0,a=t.edge(n,r),l=0;return a||(i=!1,a=t.edge(r,n)),l=a.weight,t.nodeEdges(n).forEach(s=>{var u=s.v===n,c=u?s.w:s.v;if(c!==r){var d=u===i,h=t.edge(s).weight;if(l+=d?h:-h,tg(e,n,c)){var f=e.edge(n,c).cutvalue;l+=d?-f:f}}}),l}function Lo(e,t){arguments.length<2&&(t=e.nodes()[0]),Ia(e,{},1,t)}function Ia(e,t,n,o,r){var i=n,a=e.node(o);return t[o]=!0,e.neighbors(o).forEach(l=>{Object.hasOwn(t,l)||(n=Ia(e,t,n,l,o))}),a.low=i,a.lim=n++,r?a.parent=r:delete a.parent,n}function Ma(e){return e.edges().find(t=>e.edge(t).cutvalue<0)}function Oa(e,t,n){var o=n.v,r=n.w;t.hasEdge(o,r)||(o=n.w,r=n.v);var i=e.node(o),a=e.node(r),l=i,s=!1;i.lim>a.lim&&(l=a,s=!0);var u=t.edges().filter(c=>s===Lr(e,e.node(c.v),l)&&s!==Lr(e,e.node(c.w),l));return u.reduce((c,d)=>Br(t,d)<Br(t,c)?d:c)}function Ta(e,t,n,o){var r=n.v,i=n.w;e.removeEdge(r,i),e.setEdge(o.v,o.w,{}),Lo(e),Bo(e,t),eg(e,t)}function eg(e,t){var n=e.nodes().find(r=>!t.node(r).parent),o=Zp(e,n);o=o.slice(1),o.forEach(r=>{var i=e.node(r).parent,a=t.edge(r,i),l=!1;a||(a=t.edge(i,r),l=!0),t.node(r).rank=t.node(i).rank+(l?a.minlen:-a.minlen)})}function tg(e,t,n){return e.hasEdge(t,n)}function Lr(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var ng=zn,$a=ng.longestPath,og=ka,rg=Qp,ig=ag;function ag(e){switch(e.graph().ranker){case"network-simplex":Fr(e);break;case"tight-tree":sg(e);break;case"longest-path":lg(e);break;default:Fr(e)}}var lg=$a;function sg(e){$a(e),og(e)}function Fr(e){rg(e)}var ug=cg;function cg(e){let t=fg(e);e.graph().dummyChains.forEach(n=>{let o=e.node(n),r=o.edgeObj,i=dg(e,t,r.v,r.w),a=i.path,l=i.lca,s=0,u=a[s],c=!0;for(;n!==r.w;){if(o=e.node(n),c){for(;(u=a[s])!==l&&e.node(u).maxRank<o.rank;)s++;u===l&&(c=!1)}if(!c){for(;s<a.length-1&&e.node(u=a[s+1]).minRank<=o.rank;)s++;u=a[s]}e.setParent(n,u),n=e.successors(n)[0]}})}function dg(e,t,n,o){let r=[],i=[],a=Math.min(t[n].low,t[o].low),l=Math.max(t[n].lim,t[o].lim),s,u;s=n;do s=e.parent(s),r.push(s);while(s&&(t[s].low>a||l>t[s].lim));for(u=s,s=o;(s=e.parent(s))!==u;)i.push(s);return{path:r.concat(i.reverse()),lca:u}}function fg(e){let t={},n=0;function o(r){let i=n;e.children(r).forEach(o),t[r]={low:i,lim:n++}}return e.children().forEach(o),t}let xn=Ie;var hg={run:pg,cleanup:mg};function pg(e){let t=xn.addDummyNode(e,"root",{},"_root"),n=gg(e),o=Object.values(n),r=xn.applyWithChunking(Math.max,o)-1,i=2*r+1;e.graph().nestingRoot=t,e.edges().forEach(l=>e.edge(l).minlen*=i);let a=vg(e)+1;e.children().forEach(l=>Pa(e,t,i,a,r,n,l)),e.graph().nodeRankFactor=i}function Pa(e,t,n,o,r,i,a){let l=e.children(a);if(!l.length){a!==t&&e.setEdge(t,a,{weight:0,minlen:n});return}let s=xn.addBorderNode(e,"_bt"),u=xn.addBorderNode(e,"_bb"),c=e.node(a);e.setParent(s,a),c.borderTop=s,e.setParent(u,a),c.borderBottom=u,l.forEach(d=>{Pa(e,t,n,o,r,i,d);let h=e.node(d),f=h.borderTop?h.borderTop:d,p=h.borderBottom?h.borderBottom:d,_=h.borderTop?o:2*o,y=f!==p?1:r-i[a]+1;e.setEdge(s,f,{weight:_,minlen:y,nestingEdge:!0}),e.setEdge(p,u,{weight:_,minlen:y,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,s,{weight:0,minlen:r+i[a]})}function gg(e){var t={};function n(o,r){var i=e.children(o);i&&i.length&&i.forEach(a=>n(a,r+1)),t[o]=r}return e.children().forEach(o=>n(o,1)),t}function vg(e){return e.edges().reduce((t,n)=>t+e.edge(n).weight,0)}function mg(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{var o=e.edge(n);o.nestingEdge&&e.removeEdge(n)})}let yg=Ie;var wg=_g;function _g(e){function t(n){let o=e.children(n),r=e.node(n);if(o.length&&o.forEach(t),Object.hasOwn(r,"minRank")){r.borderLeft=[],r.borderRight=[];for(let i=r.minRank,a=r.maxRank+1;i<a;++i)Gr(e,"borderLeft","_bl",n,r,i),Gr(e,"borderRight","_br",n,r,i)}}e.children().forEach(t)}function Gr(e,t,n,o,r,i){let a={width:0,height:0,rank:i,borderType:t},l=r[t][i-1],s=yg.addDummyNode(e,"border",a,n);r[t][i]=s,e.setParent(s,o),l&&e.setEdge(l,s,{weight:1})}var bg={adjust:Eg,undo:xg};function Eg(e){let t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Da(e)}function xg(e){let t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&Sg(e),(t==="lr"||t==="rl")&&(Ng(e),Da(e))}function Da(e){e.nodes().forEach(t=>Hr(e.node(t))),e.edges().forEach(t=>Hr(e.edge(t)))}function Hr(e){let t=e.width;e.width=e.height,e.height=t}function Sg(e){e.nodes().forEach(t=>qn(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(qn),Object.hasOwn(n,"y")&&qn(n)})}function qn(e){e.y=-e.y}function Ng(e){e.nodes().forEach(t=>Qn(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(Qn),Object.hasOwn(n,"x")&&Qn(n)})}function Qn(e){let t=e.x;e.x=e.y,e.y=t}let Yr=Ie;var kg=Cg;function Cg(e){let t={},n=e.nodes().filter(s=>!e.children(s).length),o=n.map(s=>e.node(s).rank),r=Yr.applyWithChunking(Math.max,o),i=Yr.range(r+1).map(()=>[]);function a(s){if(t[s])return;t[s]=!0;let u=e.node(s);i[u.rank].push(s),e.successors(s).forEach(a)}return n.sort((s,u)=>e.node(s).rank-e.node(u).rank).forEach(a),i}let Ig=Ie.zipObject;var Mg=Og;function Og(e,t){let n=0;for(let o=1;o<t.length;++o)n+=Tg(e,t[o-1],t[o]);return n}function Tg(e,t,n){let o=Ig(n,n.map((u,c)=>c)),r=t.flatMap(u=>e.outEdges(u).map(c=>({pos:o[c.w],weight:e.edge(c).weight})).sort((c,d)=>c.pos-d.pos)),i=1;for(;i<n.length;)i<<=1;let a=2*i-1;i-=1;let l=new Array(a).fill(0),s=0;return r.forEach(u=>{let c=u.pos+i;l[c]+=u.weight;let d=0;for(;c>0;)c%2&&(d+=l[c+1]),c=c-1>>1,l[c]+=u.weight;s+=u.weight*d}),s}var $g=Pg;function Pg(e,t=[]){return t.map(n=>{let o=e.inEdges(n);if(o.length){let r=o.reduce((i,a)=>{let l=e.edge(a),s=e.node(a.v);return{sum:i.sum+l.weight*s.order,weight:i.weight+l.weight}},{sum:0,weight:0});return{v:n,barycenter:r.sum/r.weight,weight:r.weight}}else return{v:n}})}let Dg=Ie;var Ag=Vg;function Vg(e,t){let n={};e.forEach((r,i)=>{let a=n[r.v]={indegree:0,in:[],out:[],vs:[r.v],i};r.barycenter!==void 0&&(a.barycenter=r.barycenter,a.weight=r.weight)}),t.edges().forEach(r=>{let i=n[r.v],a=n[r.w];i!==void 0&&a!==void 0&&(a.indegree++,i.out.push(n[r.w]))});let o=Object.values(n).filter(r=>!r.indegree);return Rg(o)}function Rg(e){let t=[];function n(r){return i=>{i.merged||(i.barycenter===void 0||r.barycenter===void 0||i.barycenter>=r.barycenter)&&zg(r,i)}}function o(r){return i=>{i.in.push(r),--i.indegree===0&&e.push(i)}}for(;e.length;){let r=e.pop();t.push(r),r.in.reverse().forEach(n(r)),r.out.forEach(o(r))}return t.filter(r=>!r.merged).map(r=>Dg.pick(r,["vs","i","barycenter","weight"]))}function zg(e,t){let n=0,o=0;e.weight&&(n+=e.barycenter*e.weight,o+=e.weight),t.weight&&(n+=t.barycenter*t.weight,o+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/o,e.weight=o,e.i=Math.min(t.i,e.i),t.merged=!0}let Bg=Ie;var Lg=Fg;function Fg(e,t){let n=Bg.partition(e,c=>Object.hasOwn(c,"barycenter")),o=n.lhs,r=n.rhs.sort((c,d)=>d.i-c.i),i=[],a=0,l=0,s=0;o.sort(Gg(!!t)),s=Xr(i,r,s),o.forEach(c=>{s+=c.vs.length,i.push(c.vs),a+=c.barycenter*c.weight,l+=c.weight,s=Xr(i,r,s)});let u={vs:i.flat(!0)};return l&&(u.barycenter=a/l,u.weight=l),u}function Xr(e,t,n){let o;for(;t.length&&(o=t[t.length-1]).i<=n;)t.pop(),e.push(o.vs),n++;return n}function Gg(e){return(t,n)=>t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}let Hg=$g,Yg=Ag,Xg=Lg;var jg=Aa;function Aa(e,t,n,o){let r=e.children(t),i=e.node(t),a=i?i.borderLeft:void 0,l=i?i.borderRight:void 0,s={};a&&(r=r.filter(h=>h!==a&&h!==l));let u=Hg(e,r);u.forEach(h=>{if(e.children(h.v).length){let f=Aa(e,h.v,n,o);s[h.v]=f,Object.hasOwn(f,"barycenter")&&Ug(h,f)}});let c=Yg(u,n);Wg(c,s);let d=Xg(c,o);if(a&&(d.vs=[a,d.vs,l].flat(!0),e.predecessors(a).length)){let h=e.node(e.predecessors(a)[0]),f=e.node(e.predecessors(l)[0]);Object.hasOwn(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+h.order+f.order)/(d.weight+2),d.weight+=2}return d}function Wg(e,t){e.forEach(n=>{n.vs=n.vs.flatMap(o=>t[o]?t[o].vs:o)})}function Ug(e,t){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)}let Zg=He.Graph,Kg=Ie;var qg=Qg;function Qg(e,t,n){let o=Jg(e),r=new Zg({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(i=>e.node(i));return e.nodes().forEach(i=>{let a=e.node(i),l=e.parent(i);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(r.setNode(i),r.setParent(i,l||o),e[n](i).forEach(s=>{let u=s.v===i?s.w:s.v,c=r.edge(u,i),d=c!==void 0?c.weight:0;r.setEdge(u,i,{weight:e.edge(s).weight+d})}),Object.hasOwn(a,"minRank")&&r.setNode(i,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),r}function Jg(e){for(var t;e.hasNode(t=Kg.uniqueId("_root")););return t}var ev=tv;function tv(e,t,n){let o={},r;n.forEach(i=>{let a=e.parent(i),l,s;for(;a;){if(l=e.parent(a),l?(s=o[l],o[l]=a):(s=r,r=a),s&&s!==a){t.setEdge(s,a);return}a=l}})}let nv=kg,ov=Mg,rv=jg,iv=qg,av=ev,lv=He.Graph,ln=Ie;var sv=Va;function Va(e,t){if(t&&typeof t.customOrder=="function"){t.customOrder(e,Va);return}let n=ln.maxRank(e),o=jr(e,ln.range(1,n+1),"inEdges"),r=jr(e,ln.range(n-1,-1,-1),"outEdges"),i=nv(e);if(Wr(e,i),t&&t.disableOptimalOrderHeuristic)return;let a=Number.POSITIVE_INFINITY,l;for(let s=0,u=0;u<4;++s,++u){uv(s%2?o:r,s%4>=2),i=ln.buildLayerMatrix(e);let c=ov(e,i);c<a&&(u=0,l=Object.assign({},i),a=c)}Wr(e,l)}function jr(e,t,n){return t.map(function(o){return iv(e,o,n)})}function uv(e,t){let n=new lv;e.forEach(function(o){let r=o.graph().root,i=rv(o,r,n,t);i.vs.forEach((a,l)=>o.node(a).order=l),av(o,n,i.vs)})}function Wr(e,t){Object.values(t).forEach(n=>n.forEach((o,r)=>e.node(o).order=r))}let cv=He.Graph,qe=Ie;var dv={positionX:pv,findType1Conflicts:Ra,findType2Conflicts:za,addConflict:Fo,hasConflict:Ba,verticalAlignment:La,horizontalCompaction:Fa,alignCoordinates:Ha,findSmallestWidthAlignment:Ga,balance:Ya};function Ra(e,t){let n={};function o(r,i){let a=0,l=0,s=r.length,u=i[i.length-1];return i.forEach((c,d)=>{let h=fv(e,c),f=h?e.node(h).order:s;(h||c===u)&&(i.slice(l,d+1).forEach(p=>{e.predecessors(p).forEach(_=>{let y=e.node(_),x=y.order;(x<a||f<x)&&!(y.dummy&&e.node(p).dummy)&&Fo(n,_,p)})}),l=d+1,a=f)}),i}return t.length&&t.reduce(o),n}function za(e,t){let n={};function o(i,a,l,s,u){let c;qe.range(a,l).forEach(d=>{c=i[d],e.node(c).dummy&&e.predecessors(c).forEach(h=>{let f=e.node(h);f.dummy&&(f.order<s||f.order>u)&&Fo(n,h,c)})})}function r(i,a){let l=-1,s,u=0;return a.forEach((c,d)=>{if(e.node(c).dummy==="border"){let h=e.predecessors(c);h.length&&(s=e.node(h[0]).order,o(a,u,d,l,s),u=d,l=s)}o(a,u,a.length,s,i.length)}),a}return t.length&&t.reduce(r),n}function fv(e,t){if(e.node(t).dummy)return e.predecessors(t).find(n=>e.node(n).dummy)}function Fo(e,t,n){if(t>n){let r=t;t=n,n=r}let o=e[t];o||(e[t]=o={}),o[n]=!0}function Ba(e,t,n){if(t>n){let o=t;t=n,n=o}return!!e[t]&&Object.hasOwn(e[t],n)}function La(e,t,n,o){let r={},i={},a={};return t.forEach(l=>{l.forEach((s,u)=>{r[s]=s,i[s]=s,a[s]=u})}),t.forEach(l=>{let s=-1;l.forEach(u=>{let c=o(u);if(c.length){c=c.sort((h,f)=>a[h]-a[f]);let d=(c.length-1)/2;for(let h=Math.floor(d),f=Math.ceil(d);h<=f;++h){let p=c[h];i[u]===u&&s<a[p]&&!Ba(n,u,p)&&(i[p]=u,i[u]=r[u]=r[p],s=a[p])}}})}),{root:r,align:i}}function Fa(e,t,n,o,r){let i={},a=hv(e,t,n,r),l=r?"borderLeft":"borderRight";function s(d,h){let f=a.nodes(),p=f.pop(),_={};for(;p;)_[p]?d(p):(_[p]=!0,f.push(p),f=f.concat(h(p))),p=f.pop()}function u(d){i[d]=a.inEdges(d).reduce((h,f)=>Math.max(h,i[f.v]+a.edge(f)),0)}function c(d){let h=a.outEdges(d).reduce((p,_)=>Math.min(p,i[_.w]-a.edge(_)),Number.POSITIVE_INFINITY),f=e.node(d);h!==Number.POSITIVE_INFINITY&&f.borderType!==l&&(i[d]=Math.max(i[d],h))}return s(u,a.predecessors.bind(a)),s(c,a.successors.bind(a)),Object.keys(o).forEach(d=>i[d]=i[n[d]]),i}function hv(e,t,n,o){let r=new cv,i=e.graph(),a=gv(i.nodesep,i.edgesep,o);return t.forEach(l=>{let s;l.forEach(u=>{let c=n[u];if(r.setNode(c),s){var d=n[s],h=r.edge(d,c);r.setEdge(d,c,Math.max(a(e,u,s),h||0))}s=u})}),r}function Ga(e,t){return Object.values(t).reduce((n,o)=>{let r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;Object.entries(o).forEach(([l,s])=>{let u=vv(e,l)/2;r=Math.max(s+u,r),i=Math.min(s-u,i)});const a=r-i;return a<n[0]&&(n=[a,o]),n},[Number.POSITIVE_INFINITY,null])[1]}function Ha(e,t){let n=Object.values(t),o=qe.applyWithChunking(Math.min,n),r=qe.applyWithChunking(Math.max,n);["u","d"].forEach(i=>{["l","r"].forEach(a=>{let l=i+a,s=e[l];if(s===t)return;let u=Object.values(s),c=o-qe.applyWithChunking(Math.min,u);a!=="l"&&(c=r-qe.applyWithChunking(Math.max,u)),c&&(e[l]=qe.mapValues(s,d=>d+c))})})}function Ya(e,t){return qe.mapValues(e.ul,(n,o)=>{if(t)return e[t.toLowerCase()][o];{let r=Object.values(e).map(i=>i[o]).sort((i,a)=>i-a);return(r[1]+r[2])/2}})}function pv(e){let t=qe.buildLayerMatrix(e),n=Object.assign(Ra(e,t),za(e,t)),o={},r;["u","d"].forEach(a=>{r=a==="u"?t:Object.values(t).reverse(),["l","r"].forEach(l=>{l==="r"&&(r=r.map(d=>Object.values(d).reverse()));let s=(a==="u"?e.predecessors:e.successors).bind(e),u=La(e,r,n,s),c=Fa(e,r,u.root,u.align,l==="r");l==="r"&&(c=qe.mapValues(c,d=>-d)),o[a+l]=c})});let i=Ga(e,o);return Ha(o,i),Ya(o,e.graph().align)}function gv(e,t,n){return(o,r,i)=>{let a=o.node(r),l=o.node(i),s=0,u;if(s+=a.width/2,Object.hasOwn(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=-a.width/2;break;case"r":u=a.width/2;break}if(u&&(s+=n?u:-u),u=0,s+=(a.dummy?t:e)/2,s+=(l.dummy?t:e)/2,s+=l.width/2,Object.hasOwn(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":u=l.width/2;break;case"r":u=-l.width/2;break}return u&&(s+=n?u:-u),u=0,s}}function vv(e,t){return e.node(t).width}let Xa=Ie,mv=dv.positionX;var yv=wv;function wv(e){e=Xa.asNonCompoundGraph(e),_v(e),Object.entries(mv(e)).forEach(([t,n])=>e.node(t).x=n)}function _v(e){let t=Xa.buildLayerMatrix(e),n=e.graph().ranksep,o=0;t.forEach(r=>{const i=r.reduce((a,l)=>{const s=e.node(l).height;return a>s?a:s},0);r.forEach(a=>e.node(a).y=o+i/2),o+=i+n})}let Ur=Op,Zr=Ap,bv=ig,Ev=Ie.normalizeRanks,xv=ug,Sv=Ie.removeEmptyRanks,Kr=hg,Nv=wg,qr=bg,kv=sv,Cv=yv,Be=Ie,Iv=He.Graph;var Mv=Ov;function Ov(e,t){let n=t&&t.debugTiming?Be.time:Be.notime;n("layout",()=>{let o=n("  buildLayoutGraph",()=>Lv(e));n("  runLayout",()=>Tv(o,n,t)),n("  updateInputGraph",()=>$v(e,o))})}function Tv(e,t,n){t("    makeSpaceForEdgeLabels",()=>Fv(e)),t("    removeSelfEdges",()=>Kv(e)),t("    acyclic",()=>Ur.run(e)),t("    nestingGraph.run",()=>Kr.run(e)),t("    rank",()=>bv(Be.asNonCompoundGraph(e))),t("    injectEdgeLabelProxies",()=>Gv(e)),t("    removeEmptyRanks",()=>Sv(e)),t("    nestingGraph.cleanup",()=>Kr.cleanup(e)),t("    normalizeRanks",()=>Ev(e)),t("    assignRankMinMax",()=>Hv(e)),t("    removeEdgeLabelProxies",()=>Yv(e)),t("    normalize.run",()=>Zr.run(e)),t("    parentDummyChains",()=>xv(e)),t("    addBorderSegments",()=>Nv(e)),t("    order",()=>kv(e,n)),t("    insertSelfEdges",()=>qv(e)),t("    adjustCoordinateSystem",()=>qr.adjust(e)),t("    position",()=>Cv(e)),t("    positionSelfEdges",()=>Qv(e)),t("    removeBorderNodes",()=>Zv(e)),t("    normalize.undo",()=>Zr.undo(e)),t("    fixupEdgeLabelCoords",()=>Wv(e)),t("    undoCoordinateSystem",()=>qr.undo(e)),t("    translateGraph",()=>Xv(e)),t("    assignNodeIntersects",()=>jv(e)),t("    reversePoints",()=>Uv(e)),t("    acyclic.undo",()=>Ur.undo(e))}function $v(e,t){e.nodes().forEach(n=>{let o=e.node(n),r=t.node(n);o&&(o.x=r.x,o.y=r.y,o.rank=r.rank,t.children(n).length&&(o.width=r.width,o.height=r.height))}),e.edges().forEach(n=>{let o=e.edge(n),r=t.edge(n);o.points=r.points,Object.hasOwn(r,"x")&&(o.x=r.x,o.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}let Pv=["nodesep","edgesep","ranksep","marginx","marginy"],Dv={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Av=["acyclicer","ranker","rankdir","align"],Vv=["width","height"],Qr={width:0,height:0},Rv=["minlen","weight","width","height","labeloffset"],zv={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Bv=["labelpos"];function Lv(e){let t=new Iv({multigraph:!0,compound:!0}),n=eo(e.graph());return t.setGraph(Object.assign({},Dv,Jn(n,Pv),Be.pick(n,Av))),e.nodes().forEach(o=>{let r=eo(e.node(o));const i=Jn(r,Vv);Object.keys(Qr).forEach(a=>{i[a]===void 0&&(i[a]=Qr[a])}),t.setNode(o,i),t.setParent(o,e.parent(o))}),e.edges().forEach(o=>{let r=eo(e.edge(o));t.setEdge(o,Object.assign({},zv,Jn(r,Rv),Be.pick(r,Bv)))}),t}function Fv(e){let t=e.graph();t.ranksep/=2,e.edges().forEach(n=>{let o=e.edge(n);o.minlen*=2,o.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?o.width+=o.labeloffset:o.height+=o.labeloffset)})}function Gv(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.width&&n.height){let o=e.node(t.v),i={rank:(e.node(t.w).rank-o.rank)/2+o.rank,e:t};Be.addDummyNode(e,"edge-proxy",i,"_ep")}})}function Hv(e){let t=0;e.nodes().forEach(n=>{let o=e.node(n);o.borderTop&&(o.minRank=e.node(o.borderTop).rank,o.maxRank=e.node(o.borderBottom).rank,t=Math.max(t,o.maxRank))}),e.graph().maxRank=t}function Yv(e){e.nodes().forEach(t=>{let n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function Xv(e){let t=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,r=0,i=e.graph(),a=i.marginx||0,l=i.marginy||0;function s(u){let c=u.x,d=u.y,h=u.width,f=u.height;t=Math.min(t,c-h/2),n=Math.max(n,c+h/2),o=Math.min(o,d-f/2),r=Math.max(r,d+f/2)}e.nodes().forEach(u=>s(e.node(u))),e.edges().forEach(u=>{let c=e.edge(u);Object.hasOwn(c,"x")&&s(c)}),t-=a,o-=l,e.nodes().forEach(u=>{let c=e.node(u);c.x-=t,c.y-=o}),e.edges().forEach(u=>{let c=e.edge(u);c.points.forEach(d=>{d.x-=t,d.y-=o}),Object.hasOwn(c,"x")&&(c.x-=t),Object.hasOwn(c,"y")&&(c.y-=o)}),i.width=n-t+a,i.height=r-o+l}function jv(e){e.edges().forEach(t=>{let n=e.edge(t),o=e.node(t.v),r=e.node(t.w),i,a;n.points?(i=n.points[0],a=n.points[n.points.length-1]):(n.points=[],i=r,a=o),n.points.unshift(Be.intersectRect(o,i)),n.points.push(Be.intersectRect(r,a))})}function Wv(e){e.edges().forEach(t=>{let n=e.edge(t);if(Object.hasOwn(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function Uv(e){e.edges().forEach(t=>{let n=e.edge(t);n.reversed&&n.points.reverse()})}function Zv(e){e.nodes().forEach(t=>{if(e.children(t).length){let n=e.node(t),o=e.node(n.borderTop),r=e.node(n.borderBottom),i=e.node(n.borderLeft[n.borderLeft.length-1]),a=e.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(a.x-i.x),n.height=Math.abs(r.y-o.y),n.x=i.x+n.width/2,n.y=o.y+n.height/2}}),e.nodes().forEach(t=>{e.node(t).dummy==="border"&&e.removeNode(t)})}function Kv(e){e.edges().forEach(t=>{if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function qv(e){var t=Be.buildLayerMatrix(e);t.forEach(n=>{var o=0;n.forEach((r,i)=>{var a=e.node(r);a.order=i+o,(a.selfEdges||[]).forEach(l=>{Be.addDummyNode(e,"selfedge",{width:l.label.width,height:l.label.height,rank:a.rank,order:i+ ++o,e:l.e,label:l.label},"_se")}),delete a.selfEdges})})}function Qv(e){e.nodes().forEach(t=>{var n=e.node(t);if(n.dummy==="selfedge"){var o=e.node(n.e.v),r=o.x+o.width/2,i=o.y,a=n.x-r,l=o.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*a/3,y:i-l},{x:r+5*a/6,y:i-l},{x:r+a,y:i},{x:r+5*a/6,y:i+l},{x:r+2*a/3,y:i+l}],n.label.x=n.x,n.label.y=n.y}})}function Jn(e,t){return Be.mapValues(Be.pick(e,t),Number)}function eo(e){var t={};return e&&Object.entries(e).forEach(([n,o])=>{typeof n=="string"&&(n=n.toLowerCase()),t[n]=o}),t}let Jv=Ie,em=He.Graph;var tm={debugOrdering:nm};function nm(e){let t=Jv.buildLayerMatrix(e),n=new em({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(o=>{n.setNode(o,{label:o}),n.setParent(o,"layer"+e.node(o).rank)}),e.edges().forEach(o=>n.setEdge(o.v,o.w,{},o.name)),t.forEach((o,r)=>{let i="layer"+r;n.setNode(i,{rank:"same"}),o.reduce((a,l)=>(n.setEdge(a,l,{style:"invis"}),l))}),n}var om="1.1.4",rm={graphlib:He,layout:Mv,debug:tm,util:{time:Ie.time,notime:Ie.notime},version:om};const Jr=hl(rm),im=_e({__name:"AxialLeadBar",props:ai({color:null,luster:{type:Boolean}},{luster:!1}),setup(e){return li(t=>({"57d50bcd":t.color})),(t,n)=>(ee(),ce("div",{class:vt(["axial-lead-bar",{luster:t.luster}])},null,2))}}),am={class:"axial-lead"},lm={class:"label"},to=_e({__name:"AxialLead",props:ai({text:null,color:null,colorCodes:null,barsAlign:null,barWidth:null,separatorWidth:null},{text:"",color:"white",barsAlign:"center",barWidth:8,separatorWidth:4}),setup(e){return li(t=>({"7000277e":t.color})),(t,n)=>(ee(),ce("div",am,[Me("div",lm,Te(t.text),1),Me("div",{class:"bar-container",style:Ae({justifyContent:t.barsAlign})},[(ee(!0),ce(Re,null,mt(t.colorCodes,(o,r)=>(ee(),$e(im,{key:r,color:o.color.hex,luster:o.color.luster,style:Ae({width:t.barWidth+"px",margin:`0 ${t.separatorWidth}px`})},null,8,["color","luster","style"]))),128))],4)]))}}),sm=25,um=5,ei=15,cm=_e({__name:"CombinationDialog",props:{result:null,combination:null},setup(e){const t={x:0,y:0},n={width:7.5,height:7.5,borderWidth:3},o={width:2.5,height:2.5,borderWidth:0},r={width:70,height:20,borderWidth:1};function i(s){const u=[{id:"S",type:"start",position:t}],c=[];let d=0;function h(p,_){if(p.type==="term"){const y=(d++).toString();u.push({id:y,type:"component",data:{value:p.children,label:`${Sn.fit(p.children,e.result.componentType.prefixSymbols).toSimpleString(3)}${e.result.componentType.unit}`},position:t});for(const x of _)c.push({id:`e${x}-${y}`,source:x,target:y});return[y]}else if(p.type==="series"){let y=_;return p.children.forEach(x=>{const C=h(x,y);if(y.length>1&&C.length>1){const E=y,S=new Set(E.flatMap(V=>c.filter(R=>R.source===V).map(R=>R.target))),D=`j${d++}`;u.push({id:D,type:"junction",position:t});for(const V of y)for(const R of S)c.splice(c.findIndex(L=>L.source===V&&L.target===R),1);for(const V of y)c.push({id:`e${V}-${D}`,source:V,target:D});for(const V of S)c.push({id:`e${D}-${V}`,source:D,target:V})}return y=C,C}),y}else if(p.type==="parallel")return p.children.flatMap(y=>h(y,_));return[]}return h(s,["S"]).forEach(p=>{c.push({id:`e${p}-E`,source:p,target:"E"})}),u.push({id:"E",type:"end",position:t}),{nodes:u,edges:c}}const a=ie(()=>i(e.combination.nodes)),l=ie(()=>{const s=new Jr.graphlib.Graph;s.setDefaultEdgeLabel(()=>({})),s.setGraph({rankdir:"LR",nodesep:um,ranksep:sm});for(const u of a.value.nodes)switch(u.type){case"start":case"end":case"junction":{s.setNode(u.id,{width:n.width+ei,height:n.height});break}case"component":{s.setNode(u.id,{label:u.data.label,width:r.width,height:r.height});break}}for(const u of a.value.edges)s.setEdge(u.source,u.target);return Jr.layout(s),a.value.nodes.map(u=>{const c=s.node(u.id);return{...u,position:{x:c.x-c.width/2+(u.type==="component"?0:ei/2),y:c.y-c.height/2}}})});return(s,u)=>{const c=ye("v-card-text"),d=ye("v-spacer"),h=ye("v-btn"),f=ye("v-card-actions"),p=ye("v-card"),_=ye("v-dialog");return ee(),$e(_,{style:{"max-width":"600px"}},{activator:J(({props:y})=>[st(s.$slots,"activator",{props:y},void 0,!0)]),default:J(({isActive:y})=>[H(p,null,{default:J(()=>[H(c,{style:{height:"150px"}},{default:J(()=>[H($(uh),{nodes:l.value,edges:a.value.edges,"nodes-draggable":!1,"nodes-connectable":!1,"fit-view-on-init":""},{"node-start":J(()=>[Me("div",{class:"node-terminal",style:Ae({width:n.width+"px",height:n.height+"px",borderWidth:n.borderWidth+"px"})},null,4),H($(je),{class:"no-handle",type:"source",position:$(j).Right},null,8,["position"])]),"node-end":J(()=>[Me("div",{class:"node-terminal",style:Ae({width:n.width+"px",height:n.height+"px",borderWidth:n.borderWidth+"px"})},null,4),H($(je),{class:"no-handle",type:"target",position:$(j).Left},null,8,["position"])]),"node-junction":J(()=>[Me("div",{class:"node-junction",style:Ae({width:o.width+"px",height:o.height+"px",borderWidth:o.borderWidth+"px"})},null,4),H($(je),{class:"no-handle",type:"target",position:$(j).Left},null,8,["position"]),H($(je),{class:"no-handle",type:"source",position:$(j).Right},null,8,["position"])]),"node-component":J(({data:x})=>[e.result.componentType.value==="resistor"?(ee(),$e(to,{key:0,text:x.label,color:"#fbddc9",barsAlign:"right",colorCodes:$(Ho)(x.value,5,"4-band"),barWidth:4,separatorWidth:1,style:{color:"black",width:"70px",height:"15px","font-size":"50%",margin:"2px",padding:"0 5px"}},null,8,["text","colorCodes"])):e.result.componentType.value==="capacitor"?(ee(),$e(to,{key:1,text:x.label,color:"#111111",style:{color:"white",width:"70px",height:"15px","font-size":"50%",margin:"2px",padding:"0 5px"}},null,8,["text"])):e.result.componentType.value==="inductor"?(ee(),$e(to,{key:2,text:x.label,color:"#68b697",barsAlign:"right",colorCodes:$(Ho)(x.value*1e6,10,"4-band"),barWidth:4,separatorWidth:1,style:{color:"black",width:"70px",height:"15px","font-size":"50%",margin:"2px",padding:"0 5px"}},null,8,["text","colorCodes"])):ze("",!0),H($(je),{class:"no-handle",type:"target",position:$(j).Left},null,8,["position"]),H($(je),{class:"no-handle",type:"source",position:$(j).Right},null,8,["position"])]),_:1},8,["nodes","edges"])]),_:1}),H(c,null,{default:J(()=>[at(" çµã¿åããå¼: "+Te(e.combination.toString(e.result.componentType.prefixSymbols)),1)]),_:1}),H(f,null,{default:J(()=>[H(d),H(h,{text:"éãã",onClick:x=>y.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:3})}}}),dm=il(cm,[["__scopeId","data-v-2355a23f"]]),fm=["onClick"],hm=_e({__name:"ResultTable",props:{results:null},setup(e){const t=de();function n(i,a){const l=i.calcValue(a.componentType.value);if(l===a.targetComponentValue)return"= æ­£ç¢º";const s=(l-a.targetComponentValue)/a.targetComponentValue*100;return Math.abs(s)<.001?s>0?"< +0.001":"< -0.001":(s>0?"+":"")+s.toFixed(3)}function o(i){return[{title:`${i.componentType.valueLabel} (${i.componentType.unit})`,value:"value"},{title:"èª¤å·®ç (%)",value:"error"},{title:"çµã¿åãã",value:"combination"},{title:"ç´ å­ã®ç¨®é¡æ°",value:"numberOfTypes"}]}function r(i,a){return i.map(l=>{const s=l.calcValue(a.componentType.value);return{value:Sn.fit(s,a.componentType.prefixSymbols).toSimpleString(3),isBestValue:s===a.bestComponentValue,error:n(l,a),combinationText:l.toString(a.componentType.prefixSymbols),numberOfTypes:l.numberOfTypes,combination:l}})}return(i,a)=>{const l=ye("v-tab"),s=ye("v-tabs"),u=ye("v-data-table"),c=ye("v-tabs-window-item"),d=ye("v-tabs-window");return ee(),ce(Re,null,[H(s,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=h=>t.value=h),"align-tabs":"center","bg-color":"secondary"},{default:J(()=>[(ee(!0),ce(Re,null,mt(e.results,h=>(ee(),$e(l,{key:h.componentNumber,"prepend-icon":$(fl)(h.finished,h.finishReason==="finishedAllCombination"?"mdi-check-all":h.finishReason==="aborted"?"mdi-progress-alert":"mdi-check","mdi-timer-sand","mdi-circle-medium")},{default:J(()=>[at(Te(h.componentNumber)+"æ¬ã®è§£ ",1)]),_:2},1032,["prepend-icon"]))),128))]),_:1},8,["modelValue"]),H(d,{modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=h=>t.value=h)},{default:J(()=>[(ee(!0),ce(Re,null,mt(e.results,h=>(ee(),$e(c,{key:h.componentNumber},{default:J(()=>[H(u,{items:r(h.resultCombinations??[],h),headers:o(h),density:"compact",class:"result-table","no-data-text":"ã¾ã è¨ç®ããã¦ãã¾ãã","items-per-page-text":"ãã¼ã¸ãã¨ã®è¡¨ç¤ºæ°:","page-text":"å¨{2}åã®çµæ / {0}-{1}"},{item:J(({item:f})=>[H(dm,{combination:f.combination,result:h},{activator:J(({props:p})=>[Me("tr",No({ref_for:!0},p,{class:["calculated",{"best-combination":f.isBestValue}],onClick:_=>console.info(h)}),[Me("td",null,Te(f.value),1),Me("td",null,Te(f.error),1),Me("td",null,Te(f.combinationText),1),Me("td",null,Te(f.numberOfTypes),1)],16,fm)]),_:2},1032,["combination","result"])]),_:2},1032,["items","headers"])]),_:2},1024))),128))]),_:1},8,["modelValue"])],64)}}});function pm(e){return new Worker("/tools/assets/worker-DQ86OVcp.js",{name:e==null?void 0:e.name})}const no=[{title:"æµæå¨ (Î©)",value:"resistor",unit:"Î©",valueLabel:"æµæå¤",prefixSymbols:["G","M","k","","m","Î¼"]},{title:"ã³ã³ãã³ãµ (F)",value:"capacitor",unit:"F",valueLabel:"éé»å®¹é",prefixSymbols:["","m","Î¼","n","p"]},{title:"ã¤ã³ãã¯ã¿ (H)",value:"inductor",unit:"H",valueLabel:"ã¤ã³ãã¯ã¿ã³ã¹",prefixSymbols:["","m","Î¼","n"]}],oo=[{title:"E1",value:"E1"},{title:"E3",value:"E3"},{title:"E6",value:"E6"},{title:"E12",value:"E12"},{title:"E24",value:"E24"},{title:"E48",value:"E48"},{title:"E96",value:"E96"},{title:"E192",value:"E192"}],ro=[{title:"< 0.1%",value:.001},{title:"< 0.01%",value:1e-4},{title:"< 0.001%",value:1e-5},{title:"= 0.0%ï¼æ­£ç¢ºï¼",value:0},{title:"å¨æ¢ç´¢",value:void 0}],gm={resistor:{componentTargetValue:1234,minValue:10,maxValue:1e6,excludedValuePlaceholder:1e3,excludedValues:[]},capacitor:{componentTargetValue:1234e-9,minValue:1e-12,maxValue:1,excludedValuePlaceholder:1e-6,excludedValues:[]},inductor:{componentTargetValue:1234e-7,minValue:1e-9,maxValue:1,excludedValuePlaceholder:1e-5,excludedValues:[]}},vm={key:0},mm={key:1},ym={key:2},wm={key:3},_m={key:4},bm=_e({__name:"App",setup(e){const t=de([2,3,4,5].map(f=>({componentNumber:f,componentType:no[0],targetComponentValue:1234,series:Go[oo[3].value],minValue:0,maxValue:0,excludedValues:[],targetErrorRate:ro[2],worker:dl(new pm)}))),n=de(no[0]),o=de(gm),r=ie(()=>o.value[n.value.value]),i=de(oo[3]),a=de(ro[2]),l=ie(()=>t.value.some(f=>f.finishReason==="calculating")),s=de(),u=de(1e3),c=ie(()=>{if(!l.value)return 0;const f=t.value.reduce((_,y)=>_+(y.totalCombinations??0),0),p=t.value.reduce((_,y)=>_+(y.currentCombination??0),0);return f===0?0:p/f*100});for(const f of t.value)me(()=>f.worker.data,p=>{var _,y;if(p.result){const x=p.result;if({current:f.currentCombination,total:f.totalCombinations}=x,x.componentNodes){const C=new Pe(al(x.componentNodes));if(!((_=f.resultCombinations)!=null&&_.some(E=>E.equals(C)))){(y=f.resultCombinations)==null||y.unshift(C),f.bestComponentValue=C.calcValue(f.componentType.value);const E=(f.bestComponentValue-f.targetComponentValue)/f.targetComponentValue;if(typeof f.targetErrorRate.value=="number"&&Math.abs(E)<=f.targetErrorRate.value){f.finishReason="finishedByUnderErrorRate",f.finished=!0;return}}}}if(p.done){f.finishReason="finishedAllCombination",f.finished=!0;return}s.value?(f.finishReason="aborted",f.finished=!0):f.worker.post({type:"invoke"})});function d(){[Ne.required,Ne.value,Ne.notNegative,Ne.notZero].every(f=>f(u.value.toString())===!0)&&!r.value.excludedValues.includes(u.value)&&r.value.excludedValues.push(u.value)}function h(){if(l.value)s.value=!0;else{s.value=!1;for(const f of t.value)f.componentType=n.value,f.targetComponentValue=r.value.componentTargetValue,f.minValue=r.value.minValue,f.maxValue=r.value.maxValue,f.excludedValues=r.value.excludedValues,f.series=Go[i.value.value],f.targetErrorRate=a.value,f.finished=!1,f.finishReason="calculating",f.bestComponentValue=0,f.resultCombinations=[],f.totalCombinations=0,f.currentCombination=0,f.worker.post({type:"initialize",value:f.targetComponentValue,componentType:f.componentType.value,componentNumber:f.componentNumber,series:[...f.series],minValue:f.minValue,maxValue:f.maxValue,excludedValues:[...f.excludedValues],progressBeacon:1e6}),f.worker.post({type:"invoke"})}}return(f,p)=>{const _=ye("v-select"),y=ye("v-col"),x=ye("v-row"),C=ye("v-combobox"),E=ye("v-card-text"),S=ye("v-btn"),D=ye("v-form"),V=ye("v-icon"),R=ye("v-list-item"),L=ye("v-list"),U=ye("v-spacer"),T=ye("v-card-actions"),z=ye("v-card"),N=ye("v-dialog"),te=ye("v-progress-linear");return ee(),$e(ul,null,{default:J(()=>[H(x,null,{default:J(()=>[H(y,{cols:"4"},{default:J(()=>[H(_,{label:"ç´ å­ã®ç¨®é¡",density:"compact",variant:"underlined",modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=v=>n.value=v),items:$(no),"hide-details":"","return-object":""},null,8,["modelValue","items"])]),_:1}),H(y,{cols:"8"},{default:J(()=>[H(qt,{value:r.value.componentTargetValue,"onUpdate:value":p[1]||(p[1]=v=>r.value.componentTargetValue=v),label:`æ±ãã${n.value.valueLabel}`,variant:"underlined",density:"compact",unit:n.value.unit,"fraction-digits":3,"prefix-symbols":n.value.prefixSymbols,rule:[$(Ne).required,$(Ne).value,$(Ne).notNegative,$(Ne).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1})]),_:1}),H(x,null,{default:J(()=>[H(y,{cols:"4"},{default:J(()=>[H(_,{label:"Eç³»å",density:"compact",variant:"underlined",modelValue:i.value,"onUpdate:modelValue":p[2]||(p[2]=v=>i.value=v),items:$(oo),"hide-details":"","return-object":""},null,8,["modelValue","items"])]),_:1}),H(y,{cols:"8"},{default:J(()=>[H(N,{"max-width":"600"},{activator:J(({props:v})=>[H(C,No(v,{multiple:"","model-value":r.value.excludedValues,label:`é¤å¤ãã${n.value.valueLabel}ï¼ãªãã·ã§ã³ï¼`,suffix:n.value.unit,density:"compact",variant:"underlined","hide-details":"",readonly:""}),null,16,["model-value","label","suffix"])]),default:J(({isActive:v})=>[H(z,{title:`é¤å¤ãã${n.value.valueLabel}`},{default:J(()=>[H(E,null,{default:J(()=>[at(" ç®æ¨ã®"+Te(n.value.valueLabel)+"ä»¥å¤ã«ããçµã¿åããã«ä½¿ç¨ããªã"+Te(n.value.valueLabel)+"ãè¤æ°æå®ã§ãã¾ãã ",1)]),_:1}),H(E,null,{default:J(()=>[H(D,{onSubmit:ll(d,["prevent"])},{default:J(()=>[H(x,null,{default:J(()=>[H(y,null,{default:J(()=>[H(qt,{value:u.value,"onUpdate:value":p[3]||(p[3]=I=>u.value=I),label:`é¤å¤ã®å¯¾è±¡ã«è¿½å ãã${n.value.valueLabel}`,variant:"underlined",density:"compact",unit:n.value.unit,"fraction-digits":3,"prefix-symbols":n.value.prefixSymbols,rule:[$(Ne).required,$(Ne).value,$(Ne).notNegative,$(Ne).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1}),H(y,{cols:"3"},{default:J(()=>[H(S,{color:"success",type:"submit",variant:"outlined",block:""},{default:J(()=>p[10]||(p[10]=[at("è¿½å ")])),_:1})]),_:1}),H(y,{cols:"3"},{default:J(()=>[H(S,{variant:"outlined",block:"",onClick:p[4]||(p[4]=I=>r.value.excludedValues=[])},{default:J(()=>p[11]||(p[11]=[at(" å¨ã¦ã¯ãªã¢ ")])),_:1})]),_:1})]),_:1})]),_:1}),H(L,{density:"compact","onClick:select":p[5]||(p[5]=I=>r.value.excludedValues=r.value.excludedValues.filter(k=>k!==I.id))},{default:J(()=>[(ee(!0),ce(Re,null,mt(r.value.excludedValues,(I,k)=>(ee(),$e(R,{key:k,value:I,slim:""},{prepend:J(()=>[H(V,{icon:"mdi-close"})]),default:J(()=>[at(Te($(Sn).fit(I,n.value.prefixSymbols))+Te(n.value.unit)+" ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1}),H(T,null,{default:J(()=>[H(U),H(S,{text:"éãã",onClick:I=>v.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["title"])]),_:1})]),_:1})]),_:1}),H(x,null,{default:J(()=>[H(y,{cols:"4"},{default:J(()=>[H(qt,{value:r.value.minValue,"onUpdate:value":p[6]||(p[6]=v=>r.value.minValue=v),label:`ä½¿ç¨ããæå°ã®${n.value.valueLabel}`,variant:"underlined",density:"compact",unit:n.value.unit,"fraction-digits":0,"prefix-symbols":n.value.prefixSymbols,rule:[$(Ne).required,$(Ne).value,$(Ne).notNegative,$(Ne).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1}),H(y,{cols:"4"},{default:J(()=>[H(qt,{value:r.value.maxValue,"onUpdate:value":p[7]||(p[7]=v=>r.value.maxValue=v),label:`ä½¿ç¨ããæå¤§ã®${n.value.valueLabel}`,variant:"underlined",density:"compact",unit:n.value.unit,"fraction-digits":0,"prefix-symbols":n.value.prefixSymbols,rule:[$(Ne).required,$(Ne).value,$(Ne).notNegative,$(Ne).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1}),H(y,{cols:"4"},{default:J(()=>[H(_,{label:"è¨ç®ãçµããèª¤å·®ç",density:"compact",variant:"underlined",modelValue:a.value,"onUpdate:modelValue":p[8]||(p[8]=v=>a.value=v),items:$(ro),"hide-details":"","return-object":""},null,8,["modelValue","items"])]),_:1})]),_:1}),H(x,null,{default:J(()=>[H(y,{"align-self":"center"},{default:J(()=>[H(te,{color:"light-blue",modelValue:c.value,"onUpdate:modelValue":p[9]||(p[9]=v=>c.value=v),height:"20",striped:l.value},{default:J(()=>[l.value?(ee(),ce("strong",vm,"è¨ç®ä¸­... "+Te(c.value.toFixed(3))+"%",1)):t.value.some(v=>v.finishReason==="aborted")?(ee(),ce("strong",mm,"è¨ç®ãä¸­æ­¢ãã¾ãã")):t.value.some(v=>v.finishReason==="error")?(ee(),ce("strong",ym," ã¨ã©ã¼ã«ããè¨ç®ãä¸­æ­¢ãã¾ãã ")):t.value.some(v=>v.finishReason==="finishedByUnderErrorRate")?(ee(),ce("strong",wm," è¨ç®ãå®äºãã¾ãã ")):t.value.every(v=>v.finishReason==="finishedAllCombination")?(ee(),ce("strong",_m," å¨æ¢ç´¢ãå®äºãã¾ãã ")):ze("",!0)]),_:1},8,["modelValue","striped"])]),_:1}),H(y,{cols:"4"},{default:J(()=>[H(S,{"prepend-icon":l.value?"mdi-timer-sand":"mdi-play",variant:l.value?"outlined":"flat",color:l.value?"error":"success",onClick:h,block:""},sl({_:2},[l.value?{name:"default",fn:J(()=>[p[12]||(p[12]=Me("div",null,"è¨ç®ä¸­",-1)),p[13]||(p[13]=Me("div",{class:"text-caption"},"ã¯ãªãã¯ã§ä¸­æ­¢",-1))]),key:"0"}:{name:"default",fn:J(()=>[p[14]||(p[14]=at("è¨ç®éå§"))]),key:"1"}]),1032,["prepend-icon","variant","color"])]),_:1})]),_:1}),H(x,null,{default:J(()=>[H(y,null,{default:J(()=>[H(hm,{results:t.value},null,8,["results"])]),_:1})]),_:1})]),_:1})}}});cl("#app",bm);
