var Ua=Object.defineProperty;var Za=(e,t,n)=>t in e?Ua(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var be=(e,t,n)=>Za(e,typeof t!="symbol"?t+"":t,n);import{S as xn,d as ye,t as Ee,r as se,i as ie,j as Je,k as ei,o as ee,l as ce,m as lt,u as V,n as gt,p as ti,w as ve,q as Ka,s as Ct,e as H,b as Q,v as jt,x as qe,y as Tt,z as qa,A as ni,B as Qa,f as Ie,C as Oe,D as Re,F as Ve,E as vt,G as De,H as oi,I as Ja,c as Te,J as xo,K as el,L as tl,M as pe,N as ri,O as ln,a as ge,P as me,Q as xt,T as nl,U as ol,V as rl,W as it,X as So,Y as ii,Z as ai,h as Kt,R as Se,$ as il,a0 as al,_ as ll,g as sl}from"../tools-SIValueInput.vue_vue_type_script_setup_true_lang-ysALgvjn.js";import{_ as ul,W as cl}from"../tools-_plugin-vue_export-helper-Q6zYeb5r.js";import{t as dl}from"../tools-object-DXBQZyn3.js";import{g as fl}from"../tools-_commonjsHelpers-Cpj98o6Y.js";const Fo={E1:[100],E3:[100,220,470],E6:[100,150,220,330,470,680],E12:[100,120,150,180,220,270,330,390,470,560,680,820],E24:[100,110,120,130,150,160,180,200,220,240,270,300,330,360,390,430,470,510,560,620,680,750,820,910],E48:[100,105,110,115,121,127,133,140,147,154,162,169,178,187,196,205,215,226,237,249,261,274,287,301,316,332,348,365,383,402,422,442,464,487,511,536,562,590,619,649,681,715,750,787,825,866,909,953],E96:[100,102,105,107,110,113,115,118,121,124,127,130,133,137,140,143,147,150,154,158,162,165,169,174,178,182,187,191,196,200,205,210,215,221,226,232,237,243,249,261,267,274,280,287,294,301,309,316,324,332,340,348,357,365,374,383,392,402,412,422,432,442,453,464,475,487,499,511,523,536,549,562,576,590,604,619,634,649,681,698,715,732,750,768,787,806,825,845,866,887,909,931,953,976],E192:[100,101,102,104,105,106,107,109,110,111,113,114,115,117,118,120,121,123,124,126,127,129,130,132,133,135,137,138,140,142,143,145,147,149,150,152,154,156,158,160,162,164,165,167,169,172,174,176,178,180,182,184,187,189,191,193,196,198,200,203,205,208,210,213,215,218,221,223,226,229,232,234,237,240,243,246,249,252,255,258,261,264,267,271,274,277,280,284,287,291,294,298,301,305,309,312,316,320,324,328,332,336,340,344,348,352,357,361,365,370,374,379,383,388,392,397,402,407,412,417,422,427,432,437,442,448,453,459,464,470,475,481,487,493,499,505,511,517,523,530,536,542,549,556,562,569,576,583,590,597,604,612,619,626,634,642,649,657,665,673,681,690,698,706,715,723,732,741,750,759,768,777,787,796,806,816,825,835,845,856,866,876,887,898,909,920,931,942,953,965,976,988]},$t=[{figure:null,name:"None",code:null,color:{hex:"#00000000",luster:!1},multiplier:null,tolerance:{percent:20,letter:"M"}},{figure:null,name:"Pink",code:"PK",color:{hex:"#ccceccff",luster:!1},multiplier:.001,tolerance:null},{figure:null,name:"Silver",code:"SR",color:{hex:"#ccceccff",luster:!0},multiplier:.01,tolerance:{percent:10,letter:"K"}},{figure:null,name:"Gold",code:"GD",color:{hex:"#cc9a34ff",luster:!0},multiplier:.1,tolerance:{percent:5,letter:"J"}},{figure:"0",name:"Black",code:"BK",color:{hex:"#0b0000ff",luster:!1},multiplier:1,tolerance:null},{figure:"1",name:"Brown",code:"BN",color:{hex:"#643234ff",luster:!1},multiplier:10,tolerance:{percent:1,letter:"F"}},{figure:"2",name:"Red",code:"RD",color:{hex:"#ff0000ff",luster:!1},multiplier:100,tolerance:{percent:2,letter:"G"}},{figure:"3",name:"Orange",code:"OG",color:{hex:"#fc6604ff",luster:!1},multiplier:1e3,tolerance:{percent:.05,letter:"W"}},{figure:"4",name:"Yellow",code:"YE",color:{hex:"#fcfe04ff",luster:!1},multiplier:1e4,tolerance:{percent:.02,letter:"P"}},{figure:"5",name:"Green",code:"GN",color:{hex:"#34ce34ff",luster:!1},multiplier:1e5,tolerance:{percent:.5,letter:"D"}},{figure:"6",name:"Blue",code:"BU",color:{hex:"#6466fcff",luster:!1},multiplier:1e6,tolerance:{percent:.25,letter:"C"}},{figure:"7",name:"Violet",code:"VT",color:{hex:"#cc66fcff",luster:!1},multiplier:1e7,tolerance:{percent:.1,letter:"B"}},{figure:"8",name:"Gray",code:"GY",color:{hex:"#949294ff",luster:!1},multiplier:1e8,tolerance:{percent:.01,letter:"L(A)"}},{figure:"9",name:"White",code:"WH",color:{hex:"#ffffffff",luster:!1},multiplier:1e9,tolerance:null}];function Go(e,t,n){const o=n==="4-band"?1:2,r=Math.floor(Math.log10(e))-o,i=Math.round(e/10**r);return[...(n==="4-band"?[Math.floor(i/10),i%10]:[Math.floor(i/100),i/10%10,i%10]).map(l=>$t[l+4]),$t.find(l=>l.multiplier===10**r)??$t[0],$t.find(l=>{var s;return((s=l.tolerance)==null?void 0:s.percent)===t})??$t[0]]}class $e{constructor(t){be(this,"componentNodes");be(this,"nodes");this.componentNodes=structuredClone(t),this.nodes=$e.generateSyntaxTree(t)}get numberOfTypes(){return this.componentNodes.filter(t=>typeof t=="object").map(t=>t.value).filter((t,n,o)=>o.indexOf(t)===n).length}equals(t){return $e.equalsInternal(this.nodes,t.nodes)}toString(t=["T","G","M","k","","m","Î¼","n","p","f"],n=3){return $e.toStringInternal(this.nodes,t,n)}calcValue(t){return t==="capacitor"?$e.calcValueForCapacitorInternal(this.componentNodes):$e.calcValueInternal(this.componentNodes)}static calcValue(t,n){return n==="capacitor"?$e.calcValueForCapacitorInternal(t):$e.calcValueInternal(t)}static equalsInternal(t,n){if(t.type!==n.type||t.children.length!==n.children.length)return!1;const o=[...t.children].sort($e.compareNodes),r=[...n.children].sort($e.compareNodes);return o.every((i,a)=>$e.deepCompare(i,r[a]))}static compareNodes(t,n){return t.type==="term"&&n.type==="term"?t.children-n.children:t.type==="term"?-1:n.type==="term"?1:t.type.localeCompare(n.type)}static deepCompare(t,n){return t.type!==n.type?!1:t.type==="term"&&n.type==="term"?t.children===n.children:t.type!=="term"&&n.type!=="term"?$e.equalsInternal(t,n):!1}static generateSyntaxTree(t){const n=[];for(let o=t.length-1;o>=0;o--){const r=t[o],i=[];if(r==="+"){const a=n.pop(),l=n.pop();a.type==="series"?i.push(...a.children):i.push(a),l.type==="series"?i.push(...l.children):i.push(l),n.push({type:"series",children:i})}else if(r==="|"){const a=n.pop(),l=n.pop();a.type==="parallel"?i.push(...a.children):i.push(a),l.type==="parallel"?i.push(...l.children):i.push(l),n.push({type:"parallel",children:i})}else n.push({type:"term",children:r.value})}if(n[0].type!=="term")return n[0];throw new Error("invalid nodes")}static toStringInternal(t,n,o){return t.children.map(r=>r.type==="term"?xn.fit(r.children,n).toSimpleString(o):`(${$e.toStringInternal(r,n,o)})`).join(t.type==="series"?" + ":" | ")}static calcValueInternal(t){const n=[];for(let o=t.length-1;o>=0;o--){const r=t[o];if(r==="+"){const i=n.pop(),a=n.pop();n.push(i+a)}else if(r==="|"){const i=n.pop(),a=n.pop();n.push(i*a/(i+a))}else n.push(r.value)}return n[0]}static calcValueForCapacitorInternal(t){const n=[];for(let o=t.length-1;o>=0;o--){const r=t[o];if(r==="+"){const i=n.pop(),a=n.pop();n.push(i*a/(i+a))}else if(r==="|"){const i=n.pop(),a=n.pop();n.push(i+a)}else n.push(r.value)}return n[0]}}function Sn(e){return ri()?(ln(e),!0):!1}function Ue(e){return typeof e=="function"?e():V(e)}const hl=typeof window<"u"&&typeof document<"u",pl=e=>typeof e<"u",gl=Object.prototype.toString,vl=e=>gl.call(e)==="[object Object]",ml=()=>{};function yl(e,t){function n(...o){return new Promise((r,i)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(i)})}return n}const li=e=>e();function _l(e=li){const t=se(!0);function n(){t.value=!1}function o(){t.value=!0}const r=(...i)=>{t.value&&e(...i)};return{isActive:nl(t),pause:n,resume:o,eventFilter:r}}function Ho(e,t=!1,n="Timeout"){return new Promise((o,r)=>{setTimeout(t?()=>r(n):o,e)})}function wl(e,t,n={}){const{eventFilter:o=li,...r}=n;return ve(e,yl(o,t),r)}function Et(e,t,n={}){const{eventFilter:o,...r}=n,{eventFilter:i,pause:a,resume:l,isActive:s}=_l(o);return{stop:wl(e,t,{...r,eventFilter:i}),pause:a,resume:l,isActive:s}}function bl(e,t={}){if(!xo(e))return el(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=tl(()=>({get(){return e.value[o]},set(r){var i;if((i=Ue(t.replaceRef))!=null?i:!0)if(Array.isArray(e.value)){const l=[...e.value];l[o]=r,e.value=l}else{const l={...e.value,[o]:r};Object.setPrototypeOf(l,Object.getPrototypeOf(e.value)),e.value=l}else e.value[o]=r}}));return n}function ro(e,t=!1){function n(d,{flush:f="sync",deep:p=!1,timeout:b,throwOnTimeout:_}={}){let m=null;const v=[new Promise(x=>{m=ve(e,S=>{d(S)!==t&&(m==null||m(),x(S))},{flush:f,deep:p,immediate:!0})})];return b!=null&&v.push(Ho(b,_).then(()=>Ue(e)).finally(()=>m==null?void 0:m())),Promise.race(v)}function o(d,f){if(!xo(d))return n(S=>S===d,f);const{flush:p="sync",deep:b=!1,timeout:_,throwOnTimeout:m}=f??{};let y=null;const x=[new Promise(S=>{y=ve([e,d],([P,R])=>{t!==(P===R)&&(y==null||y(),S(P))},{flush:p,deep:b,immediate:!0})})];return _!=null&&x.push(Ho(_,m).then(()=>Ue(e)).finally(()=>(y==null||y(),Ue(e)))),Promise.race(x)}function r(d){return n(f=>!!f,d)}function i(d){return o(null,d)}function a(d){return o(void 0,d)}function l(d){return n(Number.isNaN,d)}function s(d,f){return n(p=>{const b=Array.from(p);return b.includes(d)||b.includes(Ue(d))},f)}function u(d){return c(1,d)}function c(d=1,f){let p=-1;return n(()=>(p+=1,p>=d),f)}return Array.isArray(Ue(e))?{toMatch:n,toContains:s,changed:u,changedTimes:c,get not(){return ro(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:r,toBeNull:i,toBeNaN:l,toBeUndefined:a,changed:u,changedTimes:c,get not(){return ro(e,!t)}}}function io(e){return ro(e)}function El(e){var t;const n=Ue(e);return(t=n==null?void 0:n.$el)!=null?t:n}const si=hl?window:void 0;function ui(...e){let t,n,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,r]=e,t=si):[t,n,o,r]=e,!t)return ml;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const i=[],a=()=>{i.forEach(c=>c()),i.length=0},l=(c,d,f,p)=>(c.addEventListener(d,f,p),()=>c.removeEventListener(d,f,p)),s=ve(()=>[El(t),Ue(r)],([c,d])=>{if(a(),!c)return;const f=vl(d)?{...d}:d;i.push(...n.flatMap(p=>o.map(b=>l(c,p,b,f))))},{immediate:!0,flush:"post"}),u=()=>{s(),a()};return Sn(u),u}function xl(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Yo(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:r=si,eventName:i="keydown",passive:a=!1,dedupe:l=!1}=o,s=xl(t);return ui(r,i,c=>{c.repeat&&Ue(l)||s(c)&&n(c)},a)}function Sl(e){return JSON.parse(JSON.stringify(e))}function zn(e,t,n,o={}){var r,i,a;const{clone:l=!1,passive:s=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:f}=o,p=jt(),b=n||(p==null?void 0:p.emit)||((r=p==null?void 0:p.$emit)==null?void 0:r.bind(p))||((a=(i=p==null?void 0:p.proxy)==null?void 0:i.$emit)==null?void 0:a.bind(p==null?void 0:p.proxy));let _=u;t||(t="modelValue"),_=_||`update:${t.toString()}`;const m=x=>l?typeof l=="function"?l(x):Sl(x):x,y=()=>pl(e[t])?m(e[t]):d,v=x=>{f?f(x)&&b(_,x):b(_,x)};if(s){const x=y(),S=se(x);let P=!1;return ve(()=>e[t],R=>{P||(P=!0,S.value=m(R),qe(()=>P=!1))}),ve(S,R=>{!P&&(R!==e[t]||c)&&v(R)},{deep:c}),S}else return ie({get(){return y()},set(x){v(x)}})}var Nl={value:()=>{}};function Nn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new sn(n)}function sn(e){this._=e}function kl(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}sn.prototype=Nn.prototype={constructor:sn,on:function(e,t){var n=this._,o=kl(e+"",n),r,i=-1,a=o.length;if(arguments.length<2){for(;++i<a;)if((r=(e=o[i]).type)&&(r=Cl(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(r=(e=o[i]).type)n[r]=Xo(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Xo(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new sn(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function Cl(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function Xo(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=Nl,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var ao="http://www.w3.org/1999/xhtml";const Wo={svg:"http://www.w3.org/2000/svg",xhtml:ao,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Wo.hasOwnProperty(t)?{space:Wo[t],local:e}:e}function Il(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ao&&t.documentElement.namespaceURI===ao?t.createElement(e):t.createElementNS(n,e)}}function Ml(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ci(e){var t=kn(e);return(t.local?Ml:Il)(t)}function Ol(){}function No(e){return e==null?Ol:function(){return this.querySelector(e)}}function Tl(e){typeof e!="function"&&(e=No(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,l=o[r]=new Array(a),s,u,c=0;c<a;++c)(s=i[c])&&(u=e.call(s,s.__data__,c,i))&&("__data__"in s&&(u.__data__=s.__data__),l[c]=u);return new Ae(o,this._parents)}function $l(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Pl(){return[]}function di(e){return e==null?Pl:function(){return this.querySelectorAll(e)}}function Dl(e){return function(){return $l(e.apply(this,arguments))}}function Al(e){typeof e=="function"?e=Dl(e):e=di(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a=t[i],l=a.length,s,u=0;u<l;++u)(s=a[u])&&(o.push(e.call(s,s.__data__,u,a)),r.push(s));return new Ae(o,r)}function fi(e){return function(){return this.matches(e)}}function hi(e){return function(t){return t.matches(e)}}var Vl=Array.prototype.find;function Rl(e){return function(){return Vl.call(this.children,e)}}function zl(){return this.firstElementChild}function Bl(e){return this.select(e==null?zl:Rl(typeof e=="function"?e:hi(e)))}var Ll=Array.prototype.filter;function Fl(){return Array.from(this.children)}function Gl(e){return function(){return Ll.call(this.children,e)}}function Hl(e){return this.selectAll(e==null?Fl:Gl(typeof e=="function"?e:hi(e)))}function Yl(e){typeof e!="function"&&(e=fi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,l=o[r]=[],s,u=0;u<a;++u)(s=i[u])&&e.call(s,s.__data__,u,i)&&l.push(s);return new Ae(o,this._parents)}function pi(e){return new Array(e.length)}function Xl(){return new Ae(this._enter||this._groups.map(pi),this._parents)}function fn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}fn.prototype={constructor:fn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Wl(e){return function(){return e}}function jl(e,t,n,o,r,i){for(var a=0,l,s=t.length,u=i.length;a<u;++a)(l=t[a])?(l.__data__=i[a],o[a]=l):n[a]=new fn(e,i[a]);for(;a<s;++a)(l=t[a])&&(r[a]=l)}function Ul(e,t,n,o,r,i,a){var l,s,u=new Map,c=t.length,d=i.length,f=new Array(c),p;for(l=0;l<c;++l)(s=t[l])&&(f[l]=p=a.call(s,s.__data__,l,t)+"",u.has(p)?r[l]=s:u.set(p,s));for(l=0;l<d;++l)p=a.call(e,i[l],l,i)+"",(s=u.get(p))?(o[l]=s,s.__data__=i[l],u.delete(p)):n[l]=new fn(e,i[l]);for(l=0;l<c;++l)(s=t[l])&&u.get(f[l])===s&&(r[l]=s)}function Zl(e){return e.__data__}function Kl(e,t){if(!arguments.length)return Array.from(this,Zl);var n=t?Ul:jl,o=this._parents,r=this._groups;typeof e!="function"&&(e=Wl(e));for(var i=r.length,a=new Array(i),l=new Array(i),s=new Array(i),u=0;u<i;++u){var c=o[u],d=r[u],f=d.length,p=ql(e.call(c,c&&c.__data__,u,o)),b=p.length,_=l[u]=new Array(b),m=a[u]=new Array(b),y=s[u]=new Array(f);n(c,d,_,m,y,p,t);for(var v=0,x=0,S,P;v<b;++v)if(S=_[v]){for(v>=x&&(x=v+1);!(P=m[x])&&++x<b;);S._next=P||null}}return a=new Ae(a,o),a._enter=l,a._exit=s,a}function ql(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ql(){return new Ae(this._exit||this._groups.map(pi),this._parents)}function Jl(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function es(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),l=new Array(r),s=0;s<a;++s)for(var u=n[s],c=o[s],d=u.length,f=l[s]=new Array(d),p,b=0;b<d;++b)(p=u[b]||c[b])&&(f[b]=p);for(;s<r;++s)l[s]=n[s];return new Ae(l,this._parents)}function ts(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],a;--r>=0;)(a=o[r])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function ns(e){e||(e=os);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a=n[i],l=a.length,s=r[i]=new Array(l),u,c=0;c<l;++c)(u=a[c])&&(s[c]=u);s.sort(t)}return new Ae(r,this._parents).order()}function os(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function rs(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function is(){return Array.from(this)}function as(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null}function ls(){let e=0;for(const t of this)++e;return e}function ss(){return!this.node()}function us(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,a=r.length,l;i<a;++i)(l=r[i])&&e.call(l,l.__data__,i,r);return this}function cs(e){return function(){this.removeAttribute(e)}}function ds(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fs(e,t){return function(){this.setAttribute(e,t)}}function hs(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ps(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function gs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function vs(e,t){var n=kn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?ds:cs:typeof t=="function"?n.local?gs:ps:n.local?hs:fs)(n,t))}function gi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ms(e){return function(){this.style.removeProperty(e)}}function ys(e,t,n){return function(){this.style.setProperty(e,t,n)}}function _s(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function ws(e,t,n){return arguments.length>1?this.each((t==null?ms:typeof t=="function"?_s:ys)(e,t,n??"")):It(this.node(),e)}function It(e,t){return e.style.getPropertyValue(t)||gi(e).getComputedStyle(e,null).getPropertyValue(t)}function bs(e){return function(){delete this[e]}}function Es(e,t){return function(){this[e]=t}}function xs(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ss(e,t){return arguments.length>1?this.each((t==null?bs:typeof t=="function"?xs:Es)(e,t)):this.node()[e]}function vi(e){return e.trim().split(/^|\s+/)}function ko(e){return e.classList||new mi(e)}function mi(e){this._node=e,this._names=vi(e.getAttribute("class")||"")}mi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function yi(e,t){for(var n=ko(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function _i(e,t){for(var n=ko(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function Ns(e){return function(){yi(this,e)}}function ks(e){return function(){_i(this,e)}}function Cs(e,t){return function(){(t.apply(this,arguments)?yi:_i)(this,e)}}function Is(e,t){var n=vi(e+"");if(arguments.length<2){for(var o=ko(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Cs:t?Ns:ks)(n,t))}function Ms(){this.textContent=""}function Os(e){return function(){this.textContent=e}}function Ts(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function $s(e){return arguments.length?this.each(e==null?Ms:(typeof e=="function"?Ts:Os)(e)):this.node().textContent}function Ps(){this.innerHTML=""}function Ds(e){return function(){this.innerHTML=e}}function As(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Vs(e){return arguments.length?this.each(e==null?Ps:(typeof e=="function"?As:Ds)(e)):this.node().innerHTML}function Rs(){this.nextSibling&&this.parentNode.appendChild(this)}function zs(){return this.each(Rs)}function Bs(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ls(){return this.each(Bs)}function Fs(e){var t=typeof e=="function"?e:ci(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Gs(){return null}function Hs(e,t){var n=typeof e=="function"?e:ci(e),o=t==null?Gs:typeof t=="function"?t:No(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Ys(){var e=this.parentNode;e&&e.removeChild(this)}function Xs(){return this.each(Ys)}function Ws(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function js(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Us(e){return this.select(e?js:Ws)}function Zs(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ks(e){return function(t){e.call(this,t,this.__data__)}}function qs(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Qs(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function Js(e,t,n){return function(){var o=this.__on,r,i=Ks(t);if(o){for(var a=0,l=o.length;a<l;++a)if((r=o[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function eu(e,t,n){var o=qs(e+""),r,i=o.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,c;s<u;++s)for(r=0,c=l[s];r<i;++r)if((a=o[r]).type===c.type&&a.name===c.name)return c.value}return}for(l=t?Js:Qs,r=0;r<i;++r)this.each(l(o[r],t,n));return this}function wi(e,t,n){var o=gi(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function tu(e,t){return function(){return wi(this,e,t)}}function nu(e,t){return function(){return wi(this,e,t.apply(this,arguments))}}function ou(e,t){return this.each((typeof t=="function"?nu:tu)(e,t))}function*ru(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,a;r<i;++r)(a=o[r])&&(yield a)}var bi=[null];function Ae(e,t){this._groups=e,this._parents=t}function Ut(){return new Ae([[document.documentElement]],bi)}function iu(){return this}Ae.prototype=Ut.prototype={constructor:Ae,select:Tl,selectAll:Al,selectChild:Bl,selectChildren:Hl,filter:Yl,data:Kl,enter:Xl,exit:Ql,join:Jl,merge:es,selection:iu,order:ts,sort:ns,call:rs,nodes:is,node:as,size:ls,empty:ss,each:us,attr:vs,style:ws,property:Ss,classed:Is,text:$s,html:Vs,raise:zs,lower:Ls,append:Fs,insert:Hs,remove:Xs,clone:Us,datum:Zs,on:eu,dispatch:ou,[Symbol.iterator]:ru};function Be(e){return typeof e=="string"?new Ae([[document.querySelector(e)]],[document.documentElement]):new Ae([[e]],bi)}function au(e){let t;for(;t=e.sourceEvent;)e=t;return e}function He(e,t){if(e=au(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const lu={passive:!1},Ft={capture:!0,passive:!1};function Bn(e){e.stopImmediatePropagation()}function St(e){e.preventDefault(),e.stopImmediatePropagation()}function Ei(e){var t=e.document.documentElement,n=Be(e).on("dragstart.drag",St,Ft);"onselectstart"in t?n.on("selectstart.drag",St,Ft):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function xi(e,t){var n=e.document.documentElement,o=Be(e).on("dragstart.drag",null);t&&(o.on("click.drag",St,Ft),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const qt=e=>()=>e;function lo(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:a,y:l,dx:s,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}lo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function su(e){return!e.ctrlKey&&!e.button}function uu(){return this.parentNode}function cu(e,t){return t??{x:e.x,y:e.y}}function du(){return navigator.maxTouchPoints||"ontouchstart"in this}function fu(){var e=su,t=uu,n=cu,o=du,r={},i=Nn("start","drag","end"),a=0,l,s,u,c,d=0;function f(S){S.on("mousedown.drag",p).filter(o).on("touchstart.drag",m).on("touchmove.drag",y,lu).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(S,P){if(!(c||!e.call(this,S,P))){var R=x(this,t.call(this,S,P),S,P,"mouse");R&&(Be(S.view).on("mousemove.drag",b,Ft).on("mouseup.drag",_,Ft),Ei(S.view),Bn(S),u=!1,l=S.clientX,s=S.clientY,R("start",S))}}function b(S){if(St(S),!u){var P=S.clientX-l,R=S.clientY-s;u=P*P+R*R>d}r.mouse("drag",S)}function _(S){Be(S.view).on("mousemove.drag mouseup.drag",null),xi(S.view,u),St(S),r.mouse("end",S)}function m(S,P){if(e.call(this,S,P)){var R=S.changedTouches,$=t.call(this,S,P),W=R.length,j,A;for(j=0;j<W;++j)(A=x(this,$,S,P,R[j].identifier,R[j]))&&(Bn(S),A("start",S,R[j]))}}function y(S){var P=S.changedTouches,R=P.length,$,W;for($=0;$<R;++$)(W=r[P[$].identifier])&&(St(S),W("drag",S,P[$]))}function v(S){var P=S.changedTouches,R=P.length,$,W;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),$=0;$<R;++$)(W=r[P[$].identifier])&&(Bn(S),W("end",S,P[$]))}function x(S,P,R,$,W,j){var A=i.copy(),E=He(j||R,P),J,te,w;if((w=n.call(S,new lo("beforestart",{sourceEvent:R,target:f,identifier:W,active:a,x:E[0],y:E[1],dx:0,dy:0,dispatch:A}),$))!=null)return J=w.x-E[0]||0,te=w.y-E[1]||0,function O(C,M,T){var D=E,z;switch(C){case"start":r[W]=O,z=a++;break;case"end":delete r[W],--a;case"drag":E=He(T||M,P),z=a;break}A.call(C,S,new lo(C,{sourceEvent:M,subject:w,target:f,identifier:W,active:z,x:E[0]+J,y:E[1]+te,dx:E[0]-D[0],dy:E[1]-D[1],dispatch:A}),$)}}return f.filter=function(S){return arguments.length?(e=typeof S=="function"?S:qt(!!S),f):e},f.container=function(S){return arguments.length?(t=typeof S=="function"?S:qt(S),f):t},f.subject=function(S){return arguments.length?(n=typeof S=="function"?S:qt(S),f):n},f.touchable=function(S){return arguments.length?(o=typeof S=="function"?S:qt(!!S),f):o},f.on=function(){var S=i.on.apply(i,arguments);return S===i?f:S},f.clickDistance=function(S){return arguments.length?(d=(S=+S)*S,f):Math.sqrt(d)},f}function Co(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Si(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Zt(){}var Gt=.7,hn=1/Gt,Nt="\\s*([+-]?\\d+)\\s*",Ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hu=/^#([0-9a-f]{3,8})$/,pu=new RegExp(`^rgb\\(${Nt},${Nt},${Nt}\\)$`),gu=new RegExp(`^rgb\\(${Xe},${Xe},${Xe}\\)$`),vu=new RegExp(`^rgba\\(${Nt},${Nt},${Nt},${Ht}\\)$`),mu=new RegExp(`^rgba\\(${Xe},${Xe},${Xe},${Ht}\\)$`),yu=new RegExp(`^hsl\\(${Ht},${Xe},${Xe}\\)$`),_u=new RegExp(`^hsla\\(${Ht},${Xe},${Xe},${Ht}\\)$`),jo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Co(Zt,Yt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Uo,formatHex:Uo,formatHex8:wu,formatHsl:bu,formatRgb:Zo,toString:Zo});function Uo(){return this.rgb().formatHex()}function wu(){return this.rgb().formatHex8()}function bu(){return Ni(this).formatHsl()}function Zo(){return this.rgb().formatRgb()}function Yt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=hu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ko(t):n===3?new Pe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Qt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Qt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=pu.exec(e))?new Pe(t[1],t[2],t[3],1):(t=gu.exec(e))?new Pe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vu.exec(e))?Qt(t[1],t[2],t[3],t[4]):(t=mu.exec(e))?Qt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=yu.exec(e))?Jo(t[1],t[2]/100,t[3]/100,1):(t=_u.exec(e))?Jo(t[1],t[2]/100,t[3]/100,t[4]):jo.hasOwnProperty(e)?Ko(jo[e]):e==="transparent"?new Pe(NaN,NaN,NaN,0):null}function Ko(e){return new Pe(e>>16&255,e>>8&255,e&255,1)}function Qt(e,t,n,o){return o<=0&&(e=t=n=NaN),new Pe(e,t,n,o)}function Eu(e){return e instanceof Zt||(e=Yt(e)),e?(e=e.rgb(),new Pe(e.r,e.g,e.b,e.opacity)):new Pe}function so(e,t,n,o){return arguments.length===1?Eu(e):new Pe(e,t,n,o??1)}function Pe(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Co(Pe,so,Si(Zt,{brighter(e){return e=e==null?hn:Math.pow(hn,e),new Pe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Gt:Math.pow(Gt,e),new Pe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pe(ht(this.r),ht(this.g),ht(this.b),pn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qo,formatHex:qo,formatHex8:xu,formatRgb:Qo,toString:Qo}));function qo(){return`#${ft(this.r)}${ft(this.g)}${ft(this.b)}`}function xu(){return`#${ft(this.r)}${ft(this.g)}${ft(this.b)}${ft((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qo(){const e=pn(this.opacity);return`${e===1?"rgb(":"rgba("}${ht(this.r)}, ${ht(this.g)}, ${ht(this.b)}${e===1?")":`, ${e})`}`}function pn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ht(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ft(e){return e=ht(e),(e<16?"0":"")+e.toString(16)}function Jo(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Le(e,t,n,o)}function Ni(e){if(e instanceof Le)return new Le(e.h,e.s,e.l,e.opacity);if(e instanceof Zt||(e=Yt(e)),!e)return new Le;if(e instanceof Le)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,l=i-r,s=(i+r)/2;return l?(t===i?a=(n-o)/l+(n<o)*6:n===i?a=(o-t)/l+2:a=(t-n)/l+4,l/=s<.5?i+r:2-i-r,a*=60):l=s>0&&s<1?0:a,new Le(a,l,s,e.opacity)}function Su(e,t,n,o){return arguments.length===1?Ni(e):new Le(e,t,n,o??1)}function Le(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Co(Le,Su,Si(Zt,{brighter(e){return e=e==null?hn:Math.pow(hn,e),new Le(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Gt:Math.pow(Gt,e),new Le(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new Pe(Ln(e>=240?e-240:e+120,r,o),Ln(e,r,o),Ln(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new Le(er(this.h),Jt(this.s),Jt(this.l),pn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=pn(this.opacity);return`${e===1?"hsl(":"hsla("}${er(this.h)}, ${Jt(this.s)*100}%, ${Jt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function er(e){return e=(e||0)%360,e<0?e+360:e}function Jt(e){return Math.max(0,Math.min(1,e||0))}function Ln(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ki=e=>()=>e;function Nu(e,t){return function(n){return e+n*t}}function ku(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Cu(e){return(e=+e)==1?Ci:function(t,n){return n-t?ku(t,n,e):ki(isNaN(t)?n:t)}}function Ci(e,t){var n=t-e;return n?Nu(e,n):ki(isNaN(e)?t:e)}const tr=function e(t){var n=Cu(t);function o(r,i){var a=n((r=so(r)).r,(i=so(i)).r),l=n(r.g,i.g),s=n(r.b,i.b),u=Ci(r.opacity,i.opacity);return function(c){return r.r=a(c),r.g=l(c),r.b=s(c),r.opacity=u(c),r+""}}return o.gamma=e,o}(1);function ot(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var uo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fn=new RegExp(uo.source,"g");function Iu(e){return function(){return e}}function Mu(e){return function(t){return e(t)+""}}function Ou(e,t){var n=uo.lastIndex=Fn.lastIndex=0,o,r,i,a=-1,l=[],s=[];for(e=e+"",t=t+"";(o=uo.exec(e))&&(r=Fn.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),l[a]?l[a]+=i:l[++a]=i),(o=o[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,s.push({i:a,x:ot(o,r)})),n=Fn.lastIndex;return n<t.length&&(i=t.slice(n),l[a]?l[a]+=i:l[++a]=i),l.length<2?s[0]?Mu(s[0].x):Iu(t):(t=s.length,function(u){for(var c=0,d;c<t;++c)l[(d=s[c]).i]=d.x(u);return l.join("")})}var nr=180/Math.PI,co={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ii(e,t,n,o,r,i){var a,l,s;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,s/=l),e*o<t*n&&(e=-e,t=-t,s=-s,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*nr,skewX:Math.atan(s)*nr,scaleX:a,scaleY:l}}var en;function Tu(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?co:Ii(t.a,t.b,t.c,t.d,t.e,t.f)}function $u(e){return e==null||(en||(en=document.createElementNS("http://www.w3.org/2000/svg","g")),en.setAttribute("transform",e),!(e=en.transform.baseVal.consolidate()))?co:(e=e.matrix,Ii(e.a,e.b,e.c,e.d,e.e,e.f))}function Mi(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,c,d,f,p,b){if(u!==d||c!==f){var _=p.push("translate(",null,t,null,n);b.push({i:_-4,x:ot(u,d)},{i:_-2,x:ot(c,f)})}else(d||f)&&p.push("translate("+d+t+f+n)}function a(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(r(d)+"rotate(",null,o)-2,x:ot(u,c)})):c&&d.push(r(d)+"rotate("+c+o)}function l(u,c,d,f){u!==c?f.push({i:d.push(r(d)+"skewX(",null,o)-2,x:ot(u,c)}):c&&d.push(r(d)+"skewX("+c+o)}function s(u,c,d,f,p,b){if(u!==d||c!==f){var _=p.push(r(p)+"scale(",null,",",null,")");b.push({i:_-4,x:ot(u,d)},{i:_-2,x:ot(c,f)})}else(d!==1||f!==1)&&p.push(r(p)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),i(u.translateX,u.translateY,c.translateX,c.translateY,d,f),a(u.rotate,c.rotate,d,f),l(u.skewX,c.skewX,d,f),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(p){for(var b=-1,_=f.length,m;++b<_;)d[(m=f[b]).i]=m.x(p);return d.join("")}}}var Pu=Mi(Tu,"px, ","px)","deg)"),Du=Mi($u,", ",")",")"),Au=1e-12;function or(e){return((e=Math.exp(e))+1/e)/2}function Vu(e){return((e=Math.exp(e))-1/e)/2}function Ru(e){return((e=Math.exp(2*e))-1)/(e+1)}const zu=function e(t,n,o){function r(i,a){var l=i[0],s=i[1],u=i[2],c=a[0],d=a[1],f=a[2],p=c-l,b=d-s,_=p*p+b*b,m,y;if(_<Au)y=Math.log(f/u)/t,m=function($){return[l+$*p,s+$*b,u*Math.exp(t*$*y)]};else{var v=Math.sqrt(_),x=(f*f-u*u+o*_)/(2*u*n*v),S=(f*f-u*u-o*_)/(2*f*n*v),P=Math.log(Math.sqrt(x*x+1)-x),R=Math.log(Math.sqrt(S*S+1)-S);y=(R-P)/t,m=function($){var W=$*y,j=or(P),A=u/(n*v)*(j*Ru(t*W+P)-Vu(P));return[l+A*p,s+A*b,u*j/or(t*W+P)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return r.rho=function(i){var a=Math.max(.001,+i),l=a*a,s=l*l;return e(a,l,s)},r}(Math.SQRT2,2,4);var Mt=0,At=0,Pt=0,Oi=1e3,gn,Vt,vn=0,mt=0,Cn=0,Xt=typeof performance=="object"&&performance.now?performance:Date,Ti=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Io(){return mt||(Ti(Bu),mt=Xt.now()+Cn)}function Bu(){mt=0}function mn(){this._call=this._time=this._next=null}mn.prototype=$i.prototype={constructor:mn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Io():+n)+(t==null?0:+t),!this._next&&Vt!==this&&(Vt?Vt._next=this:gn=this,Vt=this),this._call=e,this._time=n,fo()},stop:function(){this._call&&(this._call=null,this._time=1/0,fo())}};function $i(e,t,n){var o=new mn;return o.restart(e,t,n),o}function Lu(){Io(),++Mt;for(var e=gn,t;e;)(t=mt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Mt}function rr(){mt=(vn=Xt.now())+Cn,Mt=At=0;try{Lu()}finally{Mt=0,Gu(),mt=0}}function Fu(){var e=Xt.now(),t=e-vn;t>Oi&&(Cn-=t,vn=e)}function Gu(){for(var e,t=gn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:gn=n);Vt=e,fo(o)}function fo(e){if(!Mt){At&&(At=clearTimeout(At));var t=e-mt;t>24?(e<1/0&&(At=setTimeout(rr,e-Xt.now()-Cn)),Pt&&(Pt=clearInterval(Pt))):(Pt||(vn=Xt.now(),Pt=setInterval(Fu,Oi)),Mt=1,Ti(rr))}}function ir(e,t,n){var o=new mn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Hu=Nn("start","end","cancel","interrupt"),Yu=[],Pi=0,ar=1,ho=2,un=3,lr=4,po=5,cn=6;function In(e,t,n,o,r,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Xu(e,n,{name:t,index:o,group:r,on:Hu,tween:Yu,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Pi})}function Mo(e,t){var n=Fe(e,t);if(n.state>Pi)throw new Error("too late; already scheduled");return n}function We(e,t){var n=Fe(e,t);if(n.state>un)throw new Error("too late; already running");return n}function Fe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Xu(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=$i(i,0,n.time);function i(u){n.state=ar,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,d,f,p;if(n.state!==ar)return s();for(c in o)if(p=o[c],p.name===n.name){if(p.state===un)return ir(a);p.state===lr?(p.state=cn,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[c]):+c<t&&(p.state=cn,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete o[c])}if(ir(function(){n.state===un&&(n.state=lr,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=ho,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ho){for(n.state=un,r=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=p);r.length=d+1}}function l(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=po,1),d=-1,f=r.length;++d<f;)r[d].call(e,c);n.state===po&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=cn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function dn(e,t){var n=e.__transition,o,r,i=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((o=n[a]).name!==t){i=!1;continue}r=o.state>ho&&o.state<po,o.state=cn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[a]}i&&delete e.__transition}}function Wu(e){return this.each(function(){dn(this,e)})}function ju(e,t){var n,o;return function(){var r=We(this,e),i=r.tween;if(i!==n){o=n=i;for(var a=0,l=o.length;a<l;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}r.tween=o}}function Uu(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=We(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var l={name:t,value:n},s=0,u=r.length;s<u;++s)if(r[s].name===t){r[s]=l;break}s===u&&r.push(l)}i.tween=r}}function Zu(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Fe(this.node(),n).tween,r=0,i=o.length,a;r<i;++r)if((a=o[r]).name===e)return a.value;return null}return this.each((t==null?ju:Uu)(n,e,t))}function Oo(e,t,n){var o=e._id;return e.each(function(){var r=We(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Fe(r,o).value[t]}}function Di(e,t){var n;return(typeof t=="number"?ot:t instanceof Yt?tr:(n=Yt(t))?(t=n,tr):Ou)(e,t)}function Ku(e){return function(){this.removeAttribute(e)}}function qu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Qu(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttribute(e);return a===r?null:a===o?i:i=t(o=a,n)}}function Ju(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===o?i:i=t(o=a,n)}}function ec(e,t,n){var o,r,i;return function(){var a,l=n(this),s;return l==null?void this.removeAttribute(e):(a=this.getAttribute(e),s=l+"",a===s?null:a===o&&s===r?i:(r=s,i=t(o=a,l)))}}function tc(e,t,n){var o,r,i;return function(){var a,l=n(this),s;return l==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),s=l+"",a===s?null:a===o&&s===r?i:(r=s,i=t(o=a,l)))}}function nc(e,t){var n=kn(e),o=n==="transform"?Du:Di;return this.attrTween(e,typeof t=="function"?(n.local?tc:ec)(n,o,Oo(this,"attr."+e,t)):t==null?(n.local?qu:Ku)(n):(n.local?Ju:Qu)(n,o,t))}function oc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function rc(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ic(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&rc(e,i)),n}return r._value=t,r}function ac(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&oc(e,i)),n}return r._value=t,r}function lc(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=kn(e);return this.tween(n,(o.local?ic:ac)(o,t))}function sc(e,t){return function(){Mo(this,e).delay=+t.apply(this,arguments)}}function uc(e,t){return t=+t,function(){Mo(this,e).delay=t}}function cc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sc:uc)(t,e)):Fe(this.node(),t).delay}function dc(e,t){return function(){We(this,e).duration=+t.apply(this,arguments)}}function fc(e,t){return t=+t,function(){We(this,e).duration=t}}function hc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?dc:fc)(t,e)):Fe(this.node(),t).duration}function pc(e,t){if(typeof t!="function")throw new Error;return function(){We(this,e).ease=t}}function gc(e){var t=this._id;return arguments.length?this.each(pc(t,e)):Fe(this.node(),t).ease}function vc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;We(this,e).ease=n}}function mc(e){if(typeof e!="function")throw new Error;return this.each(vc(this._id,e))}function yc(e){typeof e!="function"&&(e=fi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,l=o[r]=[],s,u=0;u<a;++u)(s=i[u])&&e.call(s,s.__data__,u,i)&&l.push(s);return new Qe(o,this._parents,this._name,this._id)}function _c(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),l=0;l<i;++l)for(var s=t[l],u=n[l],c=s.length,d=a[l]=new Array(c),f,p=0;p<c;++p)(f=s[p]||u[p])&&(d[p]=f);for(;l<o;++l)a[l]=t[l];return new Qe(a,this._parents,this._name,this._id)}function wc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function bc(e,t,n){var o,r,i=wc(t)?Mo:We;return function(){var a=i(this,e),l=a.on;l!==o&&(r=(o=l).copy()).on(t,n),a.on=r}}function Ec(e,t){var n=this._id;return arguments.length<2?Fe(this.node(),n).on.on(e):this.each(bc(n,e,t))}function xc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Sc(){return this.on("end.remove",xc(this._id))}function Nc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=No(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var l=o[a],s=l.length,u=i[a]=new Array(s),c,d,f=0;f<s;++f)(c=l[f])&&(d=e.call(c,c.__data__,f,l))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,In(u[f],t,n,f,u,Fe(c,n)));return new Qe(i,this._parents,t,n)}function kc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=di(e));for(var o=this._groups,r=o.length,i=[],a=[],l=0;l<r;++l)for(var s=o[l],u=s.length,c,d=0;d<u;++d)if(c=s[d]){for(var f=e.call(c,c.__data__,d,s),p,b=Fe(c,n),_=0,m=f.length;_<m;++_)(p=f[_])&&In(p,t,n,_,f,b);i.push(f),a.push(c)}return new Qe(i,a,t,n)}var Cc=Ut.prototype.constructor;function Ic(){return new Cc(this._groups,this._parents)}function Mc(e,t){var n,o,r;return function(){var i=It(this,e),a=(this.style.removeProperty(e),It(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}function Ai(e){return function(){this.style.removeProperty(e)}}function Oc(e,t,n){var o,r=n+"",i;return function(){var a=It(this,e);return a===r?null:a===o?i:i=t(o=a,n)}}function Tc(e,t,n){var o,r,i;return function(){var a=It(this,e),l=n(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(e),It(this,e))),a===s?null:a===o&&s===r?i:(r=s,i=t(o=a,l))}}function $c(e,t){var n,o,r,i="style."+t,a="end."+i,l;return function(){var s=We(this,e),u=s.on,c=s.value[i]==null?l||(l=Ai(t)):void 0;(u!==n||r!==c)&&(o=(n=u).copy()).on(a,r=c),s.on=o}}function Pc(e,t,n){var o=(e+="")=="transform"?Pu:Di;return t==null?this.styleTween(e,Mc(e,o)).on("end.style."+e,Ai(e)):typeof t=="function"?this.styleTween(e,Tc(e,o,Oo(this,"style."+e,t))).each($c(this._id,e)):this.styleTween(e,Oc(e,o,t),n).on("end.style."+e,null)}function Dc(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Ac(e,t,n){var o,r;function i(){var a=t.apply(this,arguments);return a!==r&&(o=(r=a)&&Dc(e,a,n)),o}return i._value=t,i}function Vc(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Ac(e,t,n??""))}function Rc(e){return function(){this.textContent=e}}function zc(e){return function(){var t=e(this);this.textContent=t??""}}function Bc(e){return this.tween("text",typeof e=="function"?zc(Oo(this,"text",e)):Rc(e==null?"":e+""))}function Lc(e){return function(t){this.textContent=e.call(this,t)}}function Fc(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Lc(r)),t}return o._value=e,o}function Gc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Fc(e))}function Hc(){for(var e=this._name,t=this._id,n=Vi(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],l=a.length,s,u=0;u<l;++u)if(s=a[u]){var c=Fe(s,t);In(s,e,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Qe(o,this._parents,e,n)}function Yc(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,a){var l={value:a},s={value:function(){--r===0&&i()}};n.each(function(){var u=We(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(s)),u.on=t}),r===0&&i()})}var Xc=0;function Qe(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Vi(){return++Xc}var je=Ut.prototype;Qe.prototype={constructor:Qe,select:Nc,selectAll:kc,selectChild:je.selectChild,selectChildren:je.selectChildren,filter:yc,merge:_c,selection:Ic,transition:Hc,call:je.call,nodes:je.nodes,node:je.node,size:je.size,empty:je.empty,each:je.each,on:Ec,attr:nc,attrTween:lc,style:Pc,styleTween:Vc,text:Bc,textTween:Gc,remove:Sc,tween:Zu,delay:cc,duration:hc,ease:gc,easeVarying:mc,end:Yc,[Symbol.iterator]:je[Symbol.iterator]};function Wc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var jc={time:null,delay:0,duration:250,ease:Wc};function Uc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Zc(e){var t,n;e instanceof Qe?(t=e._id,e=e._name):(t=Vi(),(n=jc).time=Io(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],l=a.length,s,u=0;u<l;++u)(s=a[u])&&In(s,e,t,u,a,n||Uc(s,t));return new Qe(o,this._parents,e,t)}Ut.prototype.interrupt=Wu;Ut.prototype.transition=Zc;const tn=e=>()=>e;function Kc(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Ke(e,t,n){this.k=e,this.x=t,this.y=n}Ke.prototype={constructor:Ke,scale:function(e){return e===1?this:new Ke(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ke(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ot=new Ke(1,0,0);Ke.prototype;function Gn(e){e.stopImmediatePropagation()}function Dt(e){e.preventDefault(),e.stopImmediatePropagation()}function qc(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Qc(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function sr(){return this.__zoom||Ot}function Jc(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ed(){return navigator.maxTouchPoints||"ontouchstart"in this}function td(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function nd(){var e=qc,t=Qc,n=td,o=Jc,r=ed,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,s=zu,u=Nn("start","zoom","end"),c,d,f,p=500,b=150,_=0,m=10;function y(w){w.property("__zoom",sr).on("wheel.zoom",W,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",A).filter(r).on("touchstart.zoom",E).on("touchmove.zoom",J).on("touchend.zoom touchcancel.zoom",te).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(w,O,C,M){var T=w.selection?w.selection():w;T.property("__zoom",sr),w!==T?P(w,O,C,M):T.interrupt().each(function(){R(this,arguments).event(M).start().zoom(null,typeof O=="function"?O.apply(this,arguments):O).end()})},y.scaleBy=function(w,O,C,M){y.scaleTo(w,function(){var T=this.__zoom.k,D=typeof O=="function"?O.apply(this,arguments):O;return T*D},C,M)},y.scaleTo=function(w,O,C,M){y.transform(w,function(){var T=t.apply(this,arguments),D=this.__zoom,z=C==null?S(T):typeof C=="function"?C.apply(this,arguments):C,G=D.invert(z),ne=typeof O=="function"?O.apply(this,arguments):O;return n(x(v(D,ne),z,G),T,a)},C,M)},y.translateBy=function(w,O,C,M){y.transform(w,function(){return n(this.__zoom.translate(typeof O=="function"?O.apply(this,arguments):O,typeof C=="function"?C.apply(this,arguments):C),t.apply(this,arguments),a)},null,M)},y.translateTo=function(w,O,C,M,T){y.transform(w,function(){var D=t.apply(this,arguments),z=this.__zoom,G=M==null?S(D):typeof M=="function"?M.apply(this,arguments):M;return n(Ot.translate(G[0],G[1]).scale(z.k).translate(typeof O=="function"?-O.apply(this,arguments):-O,typeof C=="function"?-C.apply(this,arguments):-C),D,a)},M,T)};function v(w,O){return O=Math.max(i[0],Math.min(i[1],O)),O===w.k?w:new Ke(O,w.x,w.y)}function x(w,O,C){var M=O[0]-C[0]*w.k,T=O[1]-C[1]*w.k;return M===w.x&&T===w.y?w:new Ke(w.k,M,T)}function S(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function P(w,O,C,M){w.on("start.zoom",function(){R(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(M).end()}).tween("zoom",function(){var T=this,D=arguments,z=R(T,D).event(M),G=t.apply(T,D),ne=C==null?S(G):typeof C=="function"?C.apply(T,D):C,U=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),B=T.__zoom,K=typeof O=="function"?O.apply(T,D):O,de=s(B.invert(ne).concat(U/B.k),K.invert(ne).concat(U/K.k));return function(ue){if(ue===1)ue=K;else{var fe=de(ue),oe=U/fe[2];ue=new Ke(oe,ne[0]-fe[0]*oe,ne[1]-fe[1]*oe)}z.zoom(null,ue)}})}function R(w,O,C){return!C&&w.__zooming||new $(w,O)}function $(w,O){this.that=w,this.args=O,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,O),this.taps=0}$.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,O){return this.mouse&&w!=="mouse"&&(this.mouse[1]=O.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=O.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=O.invert(this.touch1[0])),this.that.__zoom=O,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var O=Be(this.that).datum();u.call(w,this.that,new Kc(w,{sourceEvent:this.sourceEvent,target:y,type:w,transform:this.that.__zoom,dispatch:u}),O)}};function W(w,...O){if(!e.apply(this,arguments))return;var C=R(this,O).event(w),M=this.__zoom,T=Math.max(i[0],Math.min(i[1],M.k*Math.pow(2,o.apply(this,arguments)))),D=He(w);if(C.wheel)(C.mouse[0][0]!==D[0]||C.mouse[0][1]!==D[1])&&(C.mouse[1]=M.invert(C.mouse[0]=D)),clearTimeout(C.wheel);else{if(M.k===T)return;C.mouse=[D,M.invert(D)],dn(this),C.start()}Dt(w),C.wheel=setTimeout(z,b),C.zoom("mouse",n(x(v(M,T),C.mouse[0],C.mouse[1]),C.extent,a));function z(){C.wheel=null,C.end()}}function j(w,...O){if(f||!e.apply(this,arguments))return;var C=w.currentTarget,M=R(this,O,!0).event(w),T=Be(w.view).on("mousemove.zoom",ne,!0).on("mouseup.zoom",U,!0),D=He(w,C),z=w.clientX,G=w.clientY;Ei(w.view),Gn(w),M.mouse=[D,this.__zoom.invert(D)],dn(this),M.start();function ne(B){if(Dt(B),!M.moved){var K=B.clientX-z,de=B.clientY-G;M.moved=K*K+de*de>_}M.event(B).zoom("mouse",n(x(M.that.__zoom,M.mouse[0]=He(B,C),M.mouse[1]),M.extent,a))}function U(B){T.on("mousemove.zoom mouseup.zoom",null),xi(B.view,M.moved),Dt(B),M.event(B).end()}}function A(w,...O){if(e.apply(this,arguments)){var C=this.__zoom,M=He(w.changedTouches?w.changedTouches[0]:w,this),T=C.invert(M),D=C.k*(w.shiftKey?.5:2),z=n(x(v(C,D),M,T),t.apply(this,O),a);Dt(w),l>0?Be(this).transition().duration(l).call(P,z,M,w):Be(this).call(y.transform,z,M,w)}}function E(w,...O){if(e.apply(this,arguments)){var C=w.touches,M=C.length,T=R(this,O,w.changedTouches.length===M).event(w),D,z,G,ne;for(Gn(w),z=0;z<M;++z)G=C[z],ne=He(G,this),ne=[ne,this.__zoom.invert(ne),G.identifier],T.touch0?!T.touch1&&T.touch0[2]!==ne[2]&&(T.touch1=ne,T.taps=0):(T.touch0=ne,D=!0,T.taps=1+!!c);c&&(c=clearTimeout(c)),D&&(T.taps<2&&(d=ne[0],c=setTimeout(function(){c=null},p)),dn(this),T.start())}}function J(w,...O){if(this.__zooming){var C=R(this,O).event(w),M=w.changedTouches,T=M.length,D,z,G,ne;for(Dt(w),D=0;D<T;++D)z=M[D],G=He(z,this),C.touch0&&C.touch0[2]===z.identifier?C.touch0[0]=G:C.touch1&&C.touch1[2]===z.identifier&&(C.touch1[0]=G);if(z=C.that.__zoom,C.touch1){var U=C.touch0[0],B=C.touch0[1],K=C.touch1[0],de=C.touch1[1],ue=(ue=K[0]-U[0])*ue+(ue=K[1]-U[1])*ue,fe=(fe=de[0]-B[0])*fe+(fe=de[1]-B[1])*fe;z=v(z,Math.sqrt(ue/fe)),G=[(U[0]+K[0])/2,(U[1]+K[1])/2],ne=[(B[0]+de[0])/2,(B[1]+de[1])/2]}else if(C.touch0)G=C.touch0[0],ne=C.touch0[1];else return;C.zoom("touch",n(x(z,G,ne),C.extent,a))}}function te(w,...O){if(this.__zooming){var C=R(this,O).event(w),M=w.changedTouches,T=M.length,D,z;for(Gn(w),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),D=0;D<T;++D)z=M[D],C.touch0&&C.touch0[2]===z.identifier?delete C.touch0:C.touch1&&C.touch1[2]===z.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(z=He(z,this),Math.hypot(d[0]-z[0],d[1]-z[1])<m)){var G=Be(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return y.wheelDelta=function(w){return arguments.length?(o=typeof w=="function"?w:tn(+w),y):o},y.filter=function(w){return arguments.length?(e=typeof w=="function"?w:tn(!!w),y):e},y.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:tn(!!w),y):r},y.extent=function(w){return arguments.length?(t=typeof w=="function"?w:tn([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),y):t},y.scaleExtent=function(w){return arguments.length?(i[0]=+w[0],i[1]=+w[1],y):[i[0],i[1]]},y.translateExtent=function(w){return arguments.length?(a[0][0]=+w[0][0],a[1][0]=+w[1][0],a[0][1]=+w[0][1],a[1][1]=+w[1][1],y):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},y.constrain=function(w){return arguments.length?(n=w,y):n},y.duration=function(w){return arguments.length?(l=+w,y):l},y.interpolate=function(w){return arguments.length?(s=w,y):s},y.on=function(){var w=u.on.apply(u,arguments);return w===u?y:w},y.clickDistance=function(w){return arguments.length?(_=(w=+w)*w,y):Math.sqrt(_)},y.tapDistance=function(w){return arguments.length?(m=+w,y):m},y}var X=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(X||{}),To=(e=>(e.Partial="partial",e.Full="full",e))(To||{}),ct=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(ct||{}),yt=(e=>(e.Strict="strict",e.Loose="loose",e))(yt||{}),go=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(go||{}),Bt=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Bt||{});function vo(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,r=typeof(o==null?void 0:o.hasAttribute)=="function"?o.hasAttribute("contenteditable"):!1,i=typeof(o==null?void 0:o.closest)=="function"?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(o==null?void 0:o.nodeName)||r||!!i}function od(e){return e.ctrlKey||e.metaKey||e.shiftKey}function ur(e,t,n,o){const r=t.split("+").map(i=>i.trim().toLowerCase());return r.length===1?e.toLowerCase()===t.toLowerCase():(o?n.delete(e.toLowerCase()):n.add(e.toLowerCase()),r.every((i,a)=>n.has(i)&&Array.from(n.values())[a]===r[a]))}function rd(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=id(n.code,e);return Array.isArray(e)?e.some(r=>ur(n[o],r,t,n.type==="keyup")):ur(n[o],e,t,n.type==="keyup")}}function id(e,t){return typeof t=="string"?e===t?"code":"key":t.includes(e)?"code":"key"}function Lt(e,t){const n=Ee(()=>pe(t==null?void 0:t.actInsideInputWithModifier)??!1),o=Ee(()=>pe(t==null?void 0:t.target)??window),r=se(pe(e)===!0);let i=!1;const a=new Set;let l=u(pe(e));ve(()=>pe(e),(c,d)=>{typeof d=="boolean"&&typeof c!="boolean"&&s(),l=u(c)},{immediate:!0}),Je(()=>{ui(window,["blur","contextmenu"],s)}),Yo((...c)=>l(...c),c=>{i=od(c),!((!i||i&&!n.value)&&vo(c))&&(c.preventDefault(),r.value=!0)},{eventName:"keydown",target:o}),Yo((...c)=>l(...c),c=>{if(r.value){if((!i||i&&!n.value)&&vo(c))return;s()}},{eventName:"keyup",target:o});function s(){i=!1,a.clear(),r.value=!1}function u(c){return c===null?(s(),()=>!1):typeof c=="boolean"?(s(),r.value=c,()=>!1):Array.isArray(c)||typeof c=="string"?rd(c,a):c}return r}const Ri="vue-flow__node-desc",zi="vue-flow__edge-desc",ad="vue-flow__aria-live",Bi=["Enter"," ","Escape"],kt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function mo(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function yo(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Mn(e){return{width:e.offsetWidth,height:e.offsetHeight}}function _t(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Li(e,t){return{x:_t(e.x,t[0][0],t[1][0]),y:_t(e.y,t[0][1],t[1][1])}}function cr(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function st(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function pt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!st(e)}function Rt(e){return pt(e)&&"computedPosition"in e}function nn(e){return!Number.isNaN(e)&&Number.isFinite(e)}function ld(e){return nn(e.width)&&nn(e.height)&&nn(e.x)&&nn(e.y)}function sd(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:xt({width:0,height:0}),computedPosition:xt({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Ne(e.data)?e.data:{},events:xt(Ne(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function Fi(e,t,n){var o,r;const i={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(r=e.targetHandle)==null?void 0:r.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:Ne(e.data)?e.data:{},events:xt(Ne(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??i,e,{id:e.id.toString()})}function Gi(e,t,n,o){const r=typeof e=="string"?e:e.id,i=new Set,a=o==="source"?"target":"source";for(const l of n)l[a]===r&&i.add(l[o]);return t.filter(l=>i.has(l.id))}function ud(...e){if(e.length===3){const[i,a,l]=e;return Gi(i,a,l,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>st(i)&&i.source===o).map(i=>n.find(a=>pt(a)&&a.id===i.target))}function cd(...e){if(e.length===3){const[i,a,l]=e;return Gi(i,a,l,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>st(i)&&i.target===o).map(i=>n.find(a=>pt(a)&&a.id===i.source))}function Hi({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function dd(e,t){return t.some(n=>st(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Yi({x:e,y:t},{x:n,y:o,zoom:r}){return{x:e*r+n,y:t*r+o}}function yn({x:e,y:t},{x:n,y:o,zoom:r},i=!1,[a,l]=[1,1]){const s={x:(e-n)/r,y:(t-o)/r};return i?{x:a*Math.round(s.x/a),y:l*Math.round(s.y/l)}:s}function fd(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Xi({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function hd({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function Wi(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=fd(t,Xi({...o.computedPosition,...o.dimensions}))}return hd(t)}function ji(e,t,n={x:0,y:0,zoom:1},o=!1,r=!1){const i={...yn(t,n),width:t.width/n.zoom,height:t.height/n.zoom},a=[];for(const l of e){const{dimensions:s,selectable:u=!0,hidden:c=!1}=l,d=s.width??l.width??null,f=s.height??l.height??null;if(r&&!u||c)continue;const p=yo(i,mo(l)),b=d===null||f===null,_=o&&p>0,m=(d??0)*(f??0);(b||_||p>=m||l.dragging)&&a.push(l)}return a}function Ui(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function dr(e,t,n,o,r,i=.1,a={x:0,y:0}){const l=t/(e.width*(1+i)),s=n/(e.height*(1+i)),u=Math.min(l,s),c=_t(u,o,r),d=e.x+e.width/2,f=e.y+e.height/2,p=t/2-d*c+(a.x??0),b=n/2-f*c+(a.y??0);return{x:p,y:b,zoom:c}}function pd(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function Zi(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:Zi(n,t):!1}function Wt(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function fr(e,t,n){return e<t?_t(Math.abs(e-t),1,t)/t:e>n?-_t(Math.abs(e-n),1,t)/t:0}function Ki(e,t,n=15,o=40){const r=fr(e.x,o,t.width-o)*n,i=fr(e.y,o,t.height-o)*n;return[r,i]}function Hn(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let r={};if(typeof t.style=="function"?r={...t.style(t)}:t.style&&(r={...t.style}),r.width=r.width??`${t.dimensions.width}px`,r.height=r.height??`${t.dimensions.height}px`,n>0)if(typeof r.width=="string"){const i=Number(r.width.replace("px",""));r.width=`${i+n}px`}else r.width+=n;if(o>0)if(typeof r.height=="string"){const i=Number(r.height.replace("px",""));r.height=`${i+o}px`}else r.height+=o;if(e.position.x<0){const i=Math.abs(e.position.x);if(t.position.x=t.position.x-i,typeof r.width=="string"){const a=Number(r.width.replace("px",""));r.width=`${a+i}px`}else r.width+=i;e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);if(t.position.y=t.position.y-i,typeof r.height=="string"){const a=Number(r.height.replace("px",""));r.height=`${a+i}px`}else r.height+=i;e.position.y=0}t.dimensions.width=Number(r.width.toString().replace("px","")),t.dimensions.height=Number(r.height.toString().replace("px","")),typeof t.style=="function"?t.style=i=>{const a=t.style;return{...a(i),...r}}:t.style={...t.style,...r}}}}function hr(e,t){var n,o;const r=e.filter(a=>a.type==="add"||a.type==="remove");for(const a of r)if(a.type==="add")t.findIndex(s=>s.id===a.item.id)===-1&&t.push(a.item);else if(a.type==="remove"){const l=t.findIndex(s=>s.id===a.id);l!==-1&&t.splice(l,1)}const i=t.map(a=>a.id);for(const a of t)for(const l of e)if(l.id===a.id)switch(l.type){case"select":a.selected=l.selected;break;case"position":if(Rt(a)&&(typeof l.position<"u"&&(a.position=l.position),typeof l.dragging<"u"&&(a.dragging=l.dragging),a.expandParent&&a.parentNode)){const s=t[i.indexOf(a.parentNode)];s&&Rt(s)&&Hn(a,s)}break;case"dimensions":if(Rt(a)&&(typeof l.dimensions<"u"&&(a.dimensions=l.dimensions),typeof l.updateStyle<"u"&&(a.style={...a.style||{},width:`${(n=l.dimensions)==null?void 0:n.width}px`,height:`${(o=l.dimensions)==null?void 0:o.height}px`}),typeof l.resizing<"u"&&(a.resizing=l.resizing),a.expandParent&&a.parentNode)){const s=t[i.indexOf(a.parentNode)];s&&Rt(s)&&(!!s.dimensions.width&&!!s.dimensions.height?Hn(a,s):qe(()=>{Hn(a,s)}))}break}return t}function nt(e,t){return{id:e,type:"select",selected:t}}function pr(e){return{item:e,type:"add"}}function gr(e){return{id:e,type:"remove"}}function vr(e,t,n,o,r){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:r||null,type:"remove"}}function rt(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const a=t.has(r);!(i.selected===void 0&&!a)&&i.selected!==a&&(n&&(i.selected=a),o.push(nt(i.id,a)))}return o}function F(e){const t=new Set;let n=!1;const o=()=>t.size>0;e&&(n=!0,t.add(e));const r=l=>{t.delete(l)};return{on:l=>{e&&n&&t.delete(e),t.add(l);const s=()=>{r(l),e&&n&&t.add(e)};return Sn(s),{off:s}},off:r,trigger:l=>Promise.all(Array.from(t).map(s=>s(l))),hasListeners:o,fns:t}}function mr(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function gd(e,t,n,o,r){var i,a;const l=[];for(const s of e)(s.selected||s.id===r)&&(!s.parentNode||!Zi(s,o))&&(s.draggable||t&&typeof s.draggable>"u")&&l.push(xt({id:s.id,position:s.position||{x:0,y:0},distance:{x:n.x-((i=s.computedPosition)==null?void 0:i.x)||0,y:n.y-((a=s.computedPosition)==null?void 0:a.y)||0},from:s.computedPosition,extent:s.extent,parentNode:s.parentNode,dimensions:s.dimensions,expandParent:s.expandParent}));return l}function Yn({id:e,dragItems:t,findNode:n}){const o=[];for(const r of t){const i=n(r.id);i&&o.push(i)}return[e?o.find(r=>r.id===e):o[0],o]}function qi(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function vd(e,t,n){const[o,r,i,a]=typeof e!="string"?qi(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+a,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-r,n.computedPosition.y+n.dimensions.height-i]]:!1}function md(e,t,n,o){let r=e.extent||n;if((r==="parent"||!Array.isArray(r)&&(r==null?void 0:r.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const i=vd(r,e,o);i&&(r=i)}else t(new Me(ke.NODE_EXTENT_INVALID,e.id)),r=n;else if(Array.isArray(r)){const i=(o==null?void 0:o.computedPosition.x)||0,a=(o==null?void 0:o.computedPosition.y)||0;r=[[r[0][0]+i,r[0][1]+a],[r[1][0]+i,r[1][1]+a]]}else if(r!=="parent"&&(r!=null&&r.range)&&Array.isArray(r.range)){const[i,a,l,s]=qi(r.padding),u=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;r=[[r.range[0][0]+u+s,r.range[0][1]+c+i],[r.range[1][0]+u-a,r.range[1][1]+c-l]]}return r==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:r}function yd({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function $o(e,t,n,o,r){const i=yd(e.dimensions,md(e,n,o,r)),a=Li(t,i);return{position:{x:a.x-((r==null?void 0:r.computedPosition.x)||0),y:a.y-((r==null?void 0:r.computedPosition.y)||0)},computedPosition:a}}function _n(e,t,n=X.Left){const o=((t==null?void 0:t.x)??0)+e.computedPosition.x,r=((t==null?void 0:t.y)??0)+e.computedPosition.y,{width:i,height:a}=t??bd(e);switch((t==null?void 0:t.position)??n){case X.Top:return{x:o+i/2,y:r};case X.Right:return{x:o+i,y:r+a/2};case X.Bottom:return{x:o+i/2,y:r+a};case X.Left:return{x:o,y:r+a/2}}}function yr(e=[],t){return e.length&&(t?e.find(n=>n.id===t):e[0])||null}function _d({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:a,height:l,viewport:s}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Xi({x:(0-s.x)/s.zoom,y:(0-s.y)/s.zoom,width:a/s.zoom,height:l/s.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*f)>0}function wd(e,t,n=!1){const o=typeof e.zIndex=="number";let r=o?e.zIndex:0;const i=t(e.source),a=t(e.target);return!i||!a?0:(n&&(r=o?e.zIndex:Math.max(i.computedPosition.z||0,a.computedPosition.z||0)),r)}var ke=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(ke||{});const _r={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class Me extends Error{constructor(t,...n){var o;super((o=_r[t])==null?void 0:o.call(_r,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function Po(e){return"clientX"in e}function at(e,t){var n,o;const r=Po(e),i=r?e.clientX:(n=e.touches)==null?void 0:n[0].clientX,a=r?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}}const wn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function bd(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function Qi(){return{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}}function Xn(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function wr(e,t,n,o){const r=[];for(const i of t[n]||[])if(`${e.id}-${i.id}-${n}`!==o){const{x:a,y:l}=_n(e,i);r.push({id:i.id||null,type:n,nodeId:e.id,x:a,y:l})}return r}function Ed(e,t,n,o,r,i){const{x:a,y:l}=at(e),u=t.elementsFromPoint(a,l).find(b=>b.classList.contains("vue-flow__handle"));if(u){const b=u.getAttribute("data-nodeid");if(b){const _=Do(void 0,u),m=u.getAttribute("data-handleid"),y=i({nodeId:b,id:m,type:_});if(y){const v=r.find(x=>x.nodeId===b&&x.type===_&&x.id===m);return{handle:{id:m,type:_,nodeId:b,x:(v==null?void 0:v.x)||n.x,y:(v==null?void 0:v.y)||n.y},validHandleResult:y}}}}let c=[],d=Number.POSITIVE_INFINITY;for(const b of r){const _=Math.sqrt((b.x-n.x)**2+(b.y-n.y)**2);if(_<=o){const m=i(b);_<=d&&(_<d?c=[{handle:b,validHandleResult:m}]:_===d&&c.push({handle:b,validHandleResult:m}),d=_)}}if(!c.length)return{handle:null,validHandleResult:Qi()};if(c.length===1)return c[0];const f=c.some(({validHandleResult:b})=>b.isValid),p=c.some(({handle:b})=>b.type==="target");return c.find(({handle:b,validHandleResult:_})=>p?b.type==="target":f?_.isValid:!0)||c[0]}function br(e,t,n,o,r,i,a,l,s,u,c){const d=i==="target",f=l.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:p,y:b}=at(e),_=l.elementFromPoint(p,b),m=_!=null&&_.classList.contains("vue-flow__handle")?_:f,y=Qi();if(m){y.handleDomNode=m;const v=Do(void 0,m),x=m.getAttribute("data-nodeid"),S=m.getAttribute("data-handleid"),P=m.classList.contains("connectable"),R=m.classList.contains("connectableend"),$={source:d?x:o,sourceHandle:d?S:r,target:d?o:x,targetHandle:d?r:S};y.connection=$,P&&R&&(n===yt.Strict?d&&v==="source"||!d&&v==="target":x!==o||S!==r)&&(y.isValid=a($,{edges:s,nodes:u,sourceNode:c($.source),targetNode:c($.target)}),y.endHandle={nodeId:x,handleId:S,type:v,position:y.isValid?m.getAttribute("data-handlepos"):null})}return y}function xd({nodes:e,nodeId:t,handleId:n,handleType:o}){const r=[];for(let i=0;i<e.length;i++){const a=e[i],{handleBounds:l}=a;let s=[],u=[];l&&(s=wr(a,l,"source",`${t}-${n}-${o}`),u=wr(a,l,"target",`${t}-${n}-${o}`)),r.push(...s,...u)}return r}function Do(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Sd(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const Nd=["production","prod"];function On(e,...t){Ji()&&console.warn(`[Vue Flow]: ${e}`,...t)}function Ji(){return!Nd.includes("production")}function Er(e,t,n,o){const r=t.querySelectorAll(`.vue-flow__handle${e}`);return Array.from(r).map(a=>{const l=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(l.left-n.left)/o,y:(l.top-n.top)/o,...Mn(a)}})}function _o(e,t,n,o,r,i=!1,a){r.value=!1,e.selected?(i||e.selected&&t)&&(o([e]),qe(()=>{a.blur()})):n([e])}function Ne(e){return typeof V(e)<"u"}function kd(e,t,n,o){if(!e||!e.source||!e.target)return n(new Me(ke.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let r;return st(e)?r=e:r={...e,id:Hi(e)},r=Fi(r,void 0,o),dd(r,t)?!1:r}function Cd(e,t,n,o,r,i){if(!t.source||!t.target)return i(new Me(ke.EDGE_INVALID,e.id)),!1;const a=o(e.id);if(!a)return i(new Me(ke.EDGE_NOT_FOUND,e.id)),!1;const{id:l,...s}=e,u={...s,id:r?Hi(t):l,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(a),1,u),u}function xr(e,t,n){const o={},r=[];for(let i=0;i<e.length;++i){const a=e[i];if(!pt(a)){n(new Me(ke.NODE_INVALID,a==null?void 0:a.id)||`[ID UNKNOWN|INDEX ${i}]`);continue}const l=sd(a,t(a.id),a.parentNode);a.parentNode&&(o[a.parentNode]=!0),r[i]=l}for(const i of r){const a=t(i.parentNode)||r.find(l=>l.id===i.parentNode);i.parentNode&&!a&&n(new Me(ke.NODE_MISSING_PARENT,i.id,i.parentNode)),(i.parentNode||o[i.id])&&(o[i.id]&&(i.isParent=!0),a&&(a.isParent=!0))}return r}function Sr(e,t){e.clear();for(const n of t){const{id:o,source:r,target:i,sourceHandle:a=null,targetHandle:l=null}=n,s=`${r}-source-${a}`,u=`${i}-target-${l}`,c=e.get(s)||new Map,d=e.get(u)||new Map,f=xt({edgeId:o,source:r,target:i,sourceHandle:a,targetHandle:l});e.set(s,c.set(`${i}-${l}`,f)),e.set(u,d.set(`${r}-${a}`,f))}}function Nr(e,t,n,o,r,i,a,l){const s=[];for(const u of e){const c=st(u)?u:kd(u,l,r,i);if(!c)continue;const d=n(c.source),f=n(c.target);if(!d||!f){r(new Me(ke.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){r(new Me(ke.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!f){r(new Me(ke.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:l,nodes:a,sourceNode:d,targetNode:f})){r(new Me(ke.EDGE_INVALID,c.id));continue}const p=o(c.id);s.push({...Fi(c,p,i),sourceNode:d,targetNode:f})}return s}const kr=Symbol("vueFlow"),ea=Symbol("nodeId"),ta=Symbol("nodeRef"),Id=Symbol("edgeId"),Md=Symbol("edgeRef"),Tn=Symbol("slots");function na(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:r,nodes:i,nodeExtent:a,nodeDragThreshold:l,viewport:s,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:d,panBy:f,findNode:p,multiSelectionActive:b,nodesSelectionActive:_,selectNodesOnDrag:m,removeSelectedElements:y,addSelectedNodes:v,updateNodePositions:x,emits:S}=xe(),{onStart:P,onDrag:R,onStop:$,onClick:W,el:j,disabled:A,id:E,selectable:J,dragHandle:te}=e,w=se(!1);let O=[],C,M=null,T={x:void 0,y:void 0},D={x:0,y:0},z=null,G=!1,ne=0,U=!1;const B=$d(),K=({x:Z,y:q})=>{T={x:Z,y:q};let g=!1;if(O=O.map(h=>{const I={x:Z-h.distance.x,y:q-h.distance.y};n.value&&(I.x=o.value[0]*Math.round(I.x/o.value[0]),I.y=o.value[1]*Math.round(I.y/o.value[1]));const{computedPosition:N}=$o(h,I,S.error,a.value,h.parentNode?p(h.parentNode):void 0);return g=g||h.position.x!==N.x||h.position.y!==N.y,h.position=N,h}),!!g&&(x(O,!0,!0),w.value=!0,z)){const[h,I]=Yn({id:E,dragItems:O,findNode:p});R({event:z,node:h,nodes:I})}},de=()=>{if(!M)return;const[Z,q]=Ki(D,M,c.value);if(Z!==0||q!==0){const g={x:(T.x??0)-Z/s.value.zoom,y:(T.y??0)-q/s.value.zoom};f({x:Z,y:q})&&K(g)}ne=requestAnimationFrame(de)},ue=(Z,q)=>{G=!0;const g=p(E);!m.value&&!b.value&&g&&(g.selected||y()),g&&pe(J)&&m.value&&_o(g,b.value,v,y,_,!1,q);const h=B(Z);if(T=h,O=gd(i.value,d.value,h,p,E),O.length){const[I,N]=Yn({id:E,dragItems:O,findNode:p});P({event:Z.sourceEvent,node:I,nodes:N})}},fe=(Z,q)=>{var g;Z.sourceEvent.type==="touchmove"&&Z.sourceEvent.touches.length>1||(l.value===0&&ue(Z,q),T=B(Z),M=((g=t.value)==null?void 0:g.getBoundingClientRect())||null,D=at(Z.sourceEvent,M))},oe=(Z,q)=>{const g=B(Z);if(!U&&G&&u.value&&(U=!0,de()),!G){const h=g.xSnapped-(T.x??0),I=g.ySnapped-(T.y??0);Math.sqrt(h*h+I*I)>l.value&&ue(Z,q)}(T.x!==g.xSnapped||T.y!==g.ySnapped)&&O.length&&G&&(z=Z.sourceEvent,D=at(Z.sourceEvent,M),K(g))},ae=Z=>{if(!G){const q=B(Z),g=q.xSnapped-(T.x??0),h=q.ySnapped-(T.y??0),I=Math.sqrt(g*g+h*h);I!==0&&I<=l.value&&(W==null||W(Z.sourceEvent));return}if(w.value=!1,U=!1,G=!1,cancelAnimationFrame(ne),O.length){x(O,!1,!1);const[q,g]=Yn({id:E,dragItems:O,findNode:p});$({event:Z.sourceEvent,node:q,nodes:g})}};return ve([()=>pe(A),j],([Z,q],g,h)=>{if(q){const I=Be(q);Z||(C=fu().on("start",N=>fe(N,q)).on("drag",N=>oe(N,q)).on("end",N=>ae(N)).filter(N=>{const k=N.target,L=pe(te);return!N.button&&(!r.value||!mr(k,`.${r.value}`,q)&&(!L||mr(k,L,q)))}),I.call(C)),h(()=>{I.on(".drag",null),C&&(C.on("start",null),C.on("drag",null),C.on("end",null))})}}),w}function Od(){return{doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),updateStart:F(),update:F(),updateEnd:F()}}function Td(e,t){const n=Od();return n.doubleClick.on(o=>{var r,i;t.edgeDoubleClick(o),(i=(r=e.events)==null?void 0:r.doubleClick)==null||i.call(r,o)}),n.click.on(o=>{var r,i;t.edgeClick(o),(i=(r=e.events)==null?void 0:r.click)==null||i.call(r,o)}),n.mouseEnter.on(o=>{var r,i;t.edgeMouseEnter(o),(i=(r=e.events)==null?void 0:r.mouseEnter)==null||i.call(r,o)}),n.mouseMove.on(o=>{var r,i;t.edgeMouseMove(o),(i=(r=e.events)==null?void 0:r.mouseMove)==null||i.call(r,o)}),n.mouseLeave.on(o=>{var r,i;t.edgeMouseLeave(o),(i=(r=e.events)==null?void 0:r.mouseLeave)==null||i.call(r,o)}),n.contextMenu.on(o=>{var r,i;t.edgeContextMenu(o),(i=(r=e.events)==null?void 0:r.contextMenu)==null||i.call(r,o)}),n.updateStart.on(o=>{var r,i;t.edgeUpdateStart(o),(i=(r=e.events)==null?void 0:r.updateStart)==null||i.call(r,o)}),n.update.on(o=>{var r,i;t.edgeUpdate(o),(i=(r=e.events)==null?void 0:r.update)==null||i.call(r,o)}),n.updateEnd.on(o=>{var r,i;t.edgeUpdateEnd(o),(i=(r=e.events)==null?void 0:r.updateEnd)==null||i.call(r,o)}),Object.entries(n).reduce((o,[r,i])=>(o.emit[r]=i.trigger,o.on[r]=i.on,o),{emit:{},on:{}})}function $d(){const{viewport:e,snapGrid:t,snapToGrid:n}=xe();return({sourceEvent:o})=>{const r=o.touches?o.touches[0].clientX:o.clientX,i=o.touches?o.touches[0].clientY:o.clientY,a={x:(r-e.value.x)/e.value.zoom,y:(i-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(a.x/t.value[0]):a.x,ySnapped:n.value?t.value[1]*Math.round(a.y/t.value[1]):a.y,...a}}}function on(){return!0}function oa({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:r,onEdgeUpdate:i,onEdgeUpdateEnd:a}){const{vueFlowRef:l,connectionMode:s,connectionRadius:u,connectOnClick:c,connectionClickStartHandle:d,nodesConnectable:f,autoPanOnConnect:p,autoPanSpeed:b,findNode:_,panBy:m,startConnection:y,updateConnection:v,endConnection:x,emits:S,viewport:P,edges:R,nodes:$,isValidConnection:W}=xe();let j=null,A=!1,E=null,J=null;function te(O){var C;const M=pe(n)==="target",T=Po(O),D=cr(O.target);if(T&&O.button===0||!T){let z=function(N){q=at(N,ae);const{handle:k,validHandleResult:L}=Ed(N,D,yn(q,P.value,!1,[1,1]),u.value,h,Y=>br(N,Y,s.value,pe(t),pe(e),M?"target":"source",U,D,R.value,$.value,_));if(B=k,g||(I(),g=!0),j=L.connection,A=L.isValid,E=L.handleDomNode,!(A&&B&&(J!=null&&J.endHandle)&&L.endHandle&&J.endHandle.type===L.endHandle.type&&J.endHandle.nodeId===L.endHandle.nodeId&&J.endHandle.handleId===L.endHandle.handleId)){if(v(B&&A?Yi({x:B.x,y:B.y},P.value):q,L.endHandle,Sd(!!B,A)),J=L,!B&&!A&&!E)return Xn(Z);j&&j.source!==j.target&&E&&(Xn(Z),Z=E,E.classList.add("connecting","vue-flow__handle-connecting"),E.classList.toggle("valid",A),E.classList.toggle("vue-flow__handle-valid",A))}},G=function(N){(B||E)&&j&&A&&(i?i(N,j):S.connect(j)),S.connectEnd(N),r&&(a==null||a(N)),Xn(Z),cancelAnimationFrame(K),x(N),g=!1,A=!1,j=null,E=null,D.removeEventListener("mousemove",z),D.removeEventListener("mouseup",G),D.removeEventListener("touchmove",z),D.removeEventListener("touchend",G)};const ne=_(pe(t));let U=pe(o)||W.value||on;!U&&ne&&(U=(M?ne.isValidSourcePos:ne.isValidTargetPos)||on);let B,K=0;const{x:de,y:ue}=at(O),fe=D==null?void 0:D.elementFromPoint(de,ue),oe=Do(pe(r),fe),ae=(C=l.value)==null?void 0:C.getBoundingClientRect();if(!ae||!oe)return;let Z,q=at(O,ae),g=!1;const h=xd({nodes:$.value,nodeId:pe(t),handleId:pe(e),handleType:oe}),I=()=>{if(!p.value)return;const[N,k]=Ki(q,ae,b.value);m({x:N,y:k}),K=requestAnimationFrame(I)};y({nodeId:pe(t),handleId:pe(e),type:oe,position:(fe==null?void 0:fe.getAttribute("data-handlepos"))||X.Top},{x:de-ae.left,y:ue-ae.top}),S.connectStart({event:O,nodeId:pe(t),handleId:pe(e),handleType:oe}),D.addEventListener("mousemove",z),D.addEventListener("mouseup",G),D.addEventListener("touchmove",z),D.addEventListener("touchend",G)}}function w(O){if(!c.value)return;const C=pe(n)==="target";if(!d.value)S.clickConnectStart({event:O,nodeId:pe(t),handleId:pe(e)}),y({nodeId:pe(t),type:pe(n),handleId:pe(e)},void 0,!0);else{let M=pe(o)||W.value||on;const T=_(pe(t));if(!M&&T&&(M=(C?T.isValidSourcePos:T.isValidTargetPos)||on),T&&(typeof T.connectable>"u"?f.value:T.connectable)===!1)return;const D=cr(O.target),{connection:z,isValid:G}=br(O,{nodeId:pe(t),id:pe(e),type:pe(n)},s.value,d.value.nodeId,d.value.handleId||null,d.value.type,M,D,R.value,$.value,_),ne=z.source===z.target;G&&!ne&&S.connect(z),S.clickConnectEnd(O),x(O,!0)}}return{handlePointerDown:te,handleClick:w}}function Pd(){return Tt(ea,"")}function ra(e){const t=e??Pd()??"",n=Tt(ta,se(null)),{findNode:o,edges:r,emits:i}=xe(),a=o(t);return a||i.error(new Me(ke.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:a,parentNode:ie(()=>o(a.parentNode)),connectedEdges:ie(()=>Ui([a],r.value))}}function Dd(){return{doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),dragStart:F(),drag:F(),dragStop:F()}}function Ad(e,t){const n=Dd();return n.doubleClick.on(o=>{var r,i;t.nodeDoubleClick(o),(i=(r=e.events)==null?void 0:r.doubleClick)==null||i.call(r,o)}),n.click.on(o=>{var r,i;t.nodeClick(o),(i=(r=e.events)==null?void 0:r.click)==null||i.call(r,o)}),n.mouseEnter.on(o=>{var r,i;t.nodeMouseEnter(o),(i=(r=e.events)==null?void 0:r.mouseEnter)==null||i.call(r,o)}),n.mouseMove.on(o=>{var r,i;t.nodeMouseMove(o),(i=(r=e.events)==null?void 0:r.mouseMove)==null||i.call(r,o)}),n.mouseLeave.on(o=>{var r,i;t.nodeMouseLeave(o),(i=(r=e.events)==null?void 0:r.mouseLeave)==null||i.call(r,o)}),n.contextMenu.on(o=>{var r,i;t.nodeContextMenu(o),(i=(r=e.events)==null?void 0:r.contextMenu)==null||i.call(r,o)}),n.dragStart.on(o=>{var r,i;t.nodeDragStart(o),(i=(r=e.events)==null?void 0:r.dragStart)==null||i.call(r,o)}),n.drag.on(o=>{var r,i;t.nodeDrag(o),(i=(r=e.events)==null?void 0:r.drag)==null||i.call(r,o)}),n.dragStop.on(o=>{var r,i;t.nodeDragStop(o),(i=(r=e.events)==null?void 0:r.dragStop)==null||i.call(r,o)}),Object.entries(n).reduce((o,[r,i])=>(o.emit[r]=i.trigger,o.on[r]=i.on,o),{emit:{},on:{}})}function ia(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:r,snapToGrid:i,nodesDraggable:a,emits:l}=xe();return(s,u=!1)=>{const c=i.value?r.value[0]:5,d=i.value?r.value[1]:5,f=u?4:1,p=s.x*c*f,b=s.y*d*f,_=[];for(const m of e.value)if(m.draggable||a&&typeof m.draggable>"u"){const y={x:m.computedPosition.x+p,y:m.computedPosition.y+b},{computedPosition:v}=$o(m,y,l.error,t.value,m.parentNode?o(m.parentNode):void 0);_.push({id:m.id,position:v,from:m.position,distance:{x:s.x,y:s.y},dimensions:m.dimensions})}n(_,!0,!1)}}const Wn=.1;function tt(){return On("Viewport not initialized yet."),Promise.resolve(!1)}const Vd={zoomIn:tt,zoomOut:tt,zoomTo:tt,fitView:tt,setCenter:tt,fitBounds:tt,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:tt,setTransform:tt,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function Rd(e){function t(o,r){return new Promise(i=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleBy(jn(e.d3Selection,r,()=>{i(!0)}),o):i(!1)})}function n(o,r,i,a){return new Promise(l=>{const{x:s,y:u}=Li({x:-o,y:-r},e.translateExtent),c=Ot.translate(-s,-u).scale(i);e.d3Selection&&e.d3Zoom?e.d3Zoom.transform(jn(e.d3Selection,a,()=>{l(!0)}),c):l(!1)})}return ie(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:r=>t(1.2,r==null?void 0:r.duration),zoomOut:r=>t(1/1.2,r==null?void 0:r.duration),zoomTo:(r,i)=>new Promise(a=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleTo(jn(e.d3Selection,i==null?void 0:i.duration,()=>{a(!0)}),r):a(!1)}),setViewport:(r,i)=>n(r.x,r.y,r.zoom,i==null?void 0:i.duration),setTransform:(r,i)=>n(r.x,r.y,r.zoom,i==null?void 0:i.duration),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(r={padding:Wn,includeHiddenNodes:!1,duration:0})=>{var i,a;const l=[];for(const f of e.nodes)f.dimensions.width&&f.dimensions.height&&((r==null?void 0:r.includeHiddenNodes)||!f.hidden)&&(!((i=r.nodes)!=null&&i.length)||(a=r.nodes)!=null&&a.length&&r.nodes.includes(f.id))&&l.push(f);if(!l.length)return Promise.resolve(!1);const s=Wi(l),{x:u,y:c,zoom:d}=dr(s,e.dimensions.width,e.dimensions.height,r.minZoom??e.minZoom,r.maxZoom??e.maxZoom,r.padding??Wn,r.offset);return n(u,c,d,r==null?void 0:r.duration)},setCenter:(r,i,a)=>{const l=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:e.maxZoom,s=e.dimensions.width/2-r*l,u=e.dimensions.height/2-i*l;return n(s,u,l,a==null?void 0:a.duration)},fitBounds:(r,i={padding:Wn})=>{const{x:a,y:l,zoom:s}=dr(r,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,i.padding);return n(a,l,s,i==null?void 0:i.duration)},project:r=>yn(r,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:a}=e.vueFlowRef.getBoundingClientRect(),l={x:r.x-i,y:r.y-a};return yn(l,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:a}=e.vueFlowRef.getBoundingClientRect(),l={x:r.x+i,y:r.y+a};return Yi(l,e.viewport)}return{x:0,y:0}}}:Vd)}function jn(e,t=0,n){return e.transition().duration(t).on("end",n)}function zd(e,t,n){const o=ti(!0);return o.run(()=>{const r=()=>{o.run(()=>{let _,m,y=!!(n.nodes.value.length||n.edges.value.length);_=Et([e.modelValue,()=>{var v,x;return(x=(v=e.modelValue)==null?void 0:v.value)==null?void 0:x.length}],([v])=>{v&&Array.isArray(v)&&(m==null||m.pause(),n.setElements(v),!m&&!y&&v.length?y=!0:m==null||m.resume())}),m=Et([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([v,x])=>{var S;(S=e.modelValue)!=null&&S.value&&Array.isArray(e.modelValue.value)&&(_==null||_.pause(),e.modelValue.value=[...v,...x],qe(()=>{_==null||_.resume()}))},{immediate:y}),ln(()=>{_==null||_.stop(),m==null||m.stop()})})},i=()=>{o.run(()=>{let _,m,y=!!n.nodes.value.length;_=Et([e.nodes,()=>{var v,x;return(x=(v=e.nodes)==null?void 0:v.value)==null?void 0:x.length}],([v])=>{v&&Array.isArray(v)&&(m==null||m.pause(),n.setNodes(v),!m&&!y&&v.length?y=!0:m==null||m.resume())}),m=Et([n.nodes,()=>n.nodes.value.length],([v])=>{var x;(x=e.nodes)!=null&&x.value&&Array.isArray(e.nodes.value)&&(_==null||_.pause(),e.nodes.value=[...v],qe(()=>{_==null||_.resume()}))},{immediate:y}),ln(()=>{_==null||_.stop(),m==null||m.stop()})})},a=()=>{o.run(()=>{let _,m,y=!!n.edges.value.length;_=Et([e.edges,()=>{var v,x;return(x=(v=e.edges)==null?void 0:v.value)==null?void 0:x.length}],([v])=>{v&&Array.isArray(v)&&(m==null||m.pause(),n.setEdges(v),!m&&!y&&v.length?y=!0:m==null||m.resume())}),m=Et([n.edges,()=>n.edges.value.length],([v])=>{var x;(x=e.edges)!=null&&x.value&&Array.isArray(e.edges.value)&&(_==null||_.pause(),e.edges.value=[...v],qe(()=>{_==null||_.resume()}))},{immediate:y}),ln(()=>{_==null||_.stop(),m==null||m.stop()})})},l=()=>{o.run(()=>{ve(()=>t.maxZoom,()=>{t.maxZoom&&Ne(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},s=()=>{o.run(()=>{ve(()=>t.minZoom,()=>{t.minZoom&&Ne(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{ve(()=>t.translateExtent,()=>{t.translateExtent&&Ne(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{ve(()=>t.nodeExtent,()=>{t.nodeExtent&&Ne(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{o.run(()=>{ve(()=>t.applyDefault,()=>{Ne(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},f=()=>{o.run(()=>{const _=async m=>{let y=m;typeof t.autoConnect=="function"&&(y=await t.autoConnect(m)),y!==!1&&n.addEdges([y])};ve(()=>t.autoConnect,()=>{Ne(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),ve(n.autoConnect,(m,y,v)=>{m?n.onConnect(_):n.hooks.value.connect.off(_),v(()=>{n.hooks.value.connect.off(_)})},{immediate:!0})})},p=()=>{const _=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const m of Object.keys(t)){const y=m;if(!_.includes(y)){const v=Ee(()=>t[y]),x=n[y];xo(x)&&o.run(()=>{ve(v,S=>{Ne(S)&&(x.value=S)},{immediate:!0})})}}};(()=>{r(),i(),a(),s(),l(),u(),c(),d(),f(),p()})()}),()=>o.stop()}function Bd(){return{edgesChange:F(),nodesChange:F(),nodeDoubleClick:F(),nodeClick:F(),nodeMouseEnter:F(),nodeMouseMove:F(),nodeMouseLeave:F(),nodeContextMenu:F(),nodeDragStart:F(),nodeDrag:F(),nodeDragStop:F(),nodesInitialized:F(),miniMapNodeClick:F(),miniMapNodeDoubleClick:F(),miniMapNodeMouseEnter:F(),miniMapNodeMouseMove:F(),miniMapNodeMouseLeave:F(),connect:F(),connectStart:F(),connectEnd:F(),clickConnectStart:F(),clickConnectEnd:F(),paneReady:F(),init:F(),move:F(),moveStart:F(),moveEnd:F(),selectionDragStart:F(),selectionDrag:F(),selectionDragStop:F(),selectionContextMenu:F(),selectionStart:F(),selectionEnd:F(),viewportChangeStart:F(),viewportChange:F(),viewportChangeEnd:F(),paneScroll:F(),paneClick:F(),paneContextMenu:F(),paneMouseEnter:F(),paneMouseMove:F(),paneMouseLeave:F(),edgeContextMenu:F(),edgeMouseEnter:F(),edgeMouseMove:F(),edgeMouseLeave:F(),edgeDoubleClick:F(),edgeClick:F(),edgeUpdateStart:F(),edgeUpdate:F(),edgeUpdateEnd:F(),updateNodeInternals:F(),error:F(e=>On(e.message))}}function Ld(e,t){qa(()=>{for(const[n,o]of Object.entries(t.value)){const r=i=>{e(n,i)};o.fns.add(r),Sn(()=>{o.off(r)})}})}function aa(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:To.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Bt.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:ct.Bezier,style:{}},connectionMode:yt.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:wn()?"Meta":"Control",zoomActivationKeyCode:wn()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Bd(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const Fd=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function Gd(e,t,n){const o=Rd(e),r=g=>{const h=g??[];e.hooks.updateNodeInternals.trigger(h)},i=g=>cd(g,e.nodes,e.edges),a=g=>ud(g,e.nodes,e.edges),l=g=>Ui(g,e.edges),s=g=>{if(g)return t.value.get(g)},u=g=>{if(g)return n.value.get(g)},c=(g,h,I)=>{var N,k;const L=[];for(const Y of g){const re={id:Y.id,type:"position",dragging:I,from:Y.from};if(h&&(re.position=Y.position,Y.parentNode)){const le=s(Y.parentNode);re.position={x:re.position.x-(((N=le==null?void 0:le.computedPosition)==null?void 0:N.x)??0),y:re.position.y-(((k=le==null?void 0:le.computedPosition)==null?void 0:k.y)??0)}}L.push(re)}L!=null&&L.length&&e.hooks.nodesChange.trigger(L)},d=g=>{if(!e.vueFlowRef)return;const h=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!h)return;const I=window.getComputedStyle(h),{m22:N}=new window.DOMMatrixReadOnly(I.transform),k=[];for(let L=0;L<g.length;++L){const Y=g[L],re=s(Y.id);if(re){const le=Mn(Y.nodeElement);if(!!(le.width&&le.height&&(re.dimensions.width!==le.width||re.dimensions.height!==le.height||Y.forceUpdate))){const he=Y.nodeElement.getBoundingClientRect();re.dimensions=le,re.handleBounds.source=Er(".source",Y.nodeElement,he,N),re.handleBounds.target=Er(".target",Y.nodeElement,he,N),k.push({id:re.id,type:"dimensions",dimensions:le})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),k.length&&e.hooks.nodesChange.trigger(k)},f=(g,h)=>{const I=new Set,N=new Set;for(const Y of g)pt(Y)?I.add(Y.id):st(Y)&&N.add(Y.id);const k=rt(t.value,I,!0),L=rt(n.value,N);if(e.multiSelectionActive){for(const Y of I)k.push(nt(Y,h));for(const Y of N)L.push(nt(Y,h))}k.length&&e.hooks.nodesChange.trigger(k),L.length&&e.hooks.edgesChange.trigger(L)},p=g=>{if(e.multiSelectionActive){const h=g.map(I=>nt(I.id,!0));e.hooks.nodesChange.trigger(h);return}e.hooks.nodesChange.trigger(rt(t.value,new Set(g.map(h=>h.id)),!0)),e.hooks.edgesChange.trigger(rt(n.value))},b=g=>{if(e.multiSelectionActive){const h=g.map(I=>nt(I.id,!0));e.hooks.edgesChange.trigger(h);return}e.hooks.edgesChange.trigger(rt(n.value,new Set(g.map(h=>h.id)))),e.hooks.nodesChange.trigger(rt(t.value,new Set,!0))},_=g=>{f(g,!0)},m=g=>{const I=(g||e.nodes).map(N=>(N.selected=!1,nt(N.id,!1)));e.hooks.nodesChange.trigger(I)},y=g=>{const I=(g||e.edges).map(N=>(N.selected=!1,nt(N.id,!1)));e.hooks.edgesChange.trigger(I)},v=g=>{if(!g||!g.length)return f([],!1);const h=g.reduce((I,N)=>{const k=nt(N.id,!1);return pt(N)?I.nodes.push(k):I.edges.push(k),I},{nodes:[],edges:[]});h.nodes.length&&e.hooks.nodesChange.trigger(h.nodes),h.edges.length&&e.hooks.edgesChange.trigger(h.edges)},x=g=>{var h;(h=e.d3Zoom)==null||h.scaleExtent([g,e.maxZoom]),e.minZoom=g},S=g=>{var h;(h=e.d3Zoom)==null||h.scaleExtent([e.minZoom,g]),e.maxZoom=g},P=g=>{var h;(h=e.d3Zoom)==null||h.translateExtent(g),e.translateExtent=g},R=g=>{e.nodeExtent=g,r()},$=g=>{var h;(h=e.d3Zoom)==null||h.clickDistance(g)},W=g=>{e.nodesDraggable=g,e.nodesConnectable=g,e.elementsSelectable=g},j=g=>{const h=g instanceof Function?g(e.nodes):g;!e.initialized&&!h.length||(e.nodes=xr(h,s,e.hooks.error.trigger))},A=g=>{const h=g instanceof Function?g(e.edges):g;if(!e.initialized&&!h.length)return;const I=Nr(h,e.isValidConnection,s,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);Sr(e.connectionLookup,I),e.edges=I},E=g=>{const h=g instanceof Function?g([...e.nodes,...e.edges]):g;!e.initialized&&!h.length||(j(h.filter(pt)),A(h.filter(st)))},J=g=>{let h=g instanceof Function?g(e.nodes):g;h=Array.isArray(h)?h:[h];const I=xr(h,s,e.hooks.error.trigger),N=[];for(const k of I)N.push(pr(k));N.length&&e.hooks.nodesChange.trigger(N)},te=g=>{let h=g instanceof Function?g(e.edges):g;h=Array.isArray(h)?h:[h];const I=Nr(h,e.isValidConnection,s,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),N=[];for(const k of I)N.push(pr(k));N.length&&e.hooks.edgesChange.trigger(N)},w=(g,h=!0,I=!1)=>{const N=g instanceof Function?g(e.nodes):g,k=Array.isArray(N)?N:[N],L=[],Y=[];function re(_e){const he=l(_e);for(const we of he)(!Ne(we.deletable)||we.deletable)&&Y.push(vr(we.id,we.source,we.target,we.sourceHandle,we.targetHandle))}function le(_e){const he=[];for(const we of e.nodes)we.parentNode===_e&&he.push(we);if(he.length){for(const we of he)L.push(gr(we.id));h&&re(he);for(const we of he)le(we.id)}}for(const _e of k){const he=typeof _e=="string"?s(_e):_e;he&&(Ne(he.deletable)&&!he.deletable||(L.push(gr(he.id)),h&&re([he]),I&&le(he.id)))}Y.length&&e.hooks.edgesChange.trigger(Y),L.length&&e.hooks.nodesChange.trigger(L)},O=g=>{const h=g instanceof Function?g(e.edges):g,I=Array.isArray(h)?h:[h],N=[];for(const k of I){const L=typeof k=="string"?u(k):k;L&&(Ne(L.deletable)&&!L.deletable||N.push(vr(typeof k=="string"?k:k.id,L.source,L.target,L.sourceHandle,L.targetHandle)))}e.hooks.edgesChange.trigger(N)},C=(g,h,I=!0)=>Cd(g,h,e.edges,u,I,e.hooks.error.trigger),M=(g,h,I={replace:!1})=>{const N=u(g);if(!N)return;const k=typeof h=="function"?h(N):h;N.data=I.replace?k:{...N.data,...k}},T=g=>hr(g,e.nodes),D=g=>{const h=hr(g,e.edges);return Sr(e.connectionLookup,h),h},z=(g,h,I={replace:!1})=>{const N=s(g);if(!N)return;const k=typeof h=="function"?h(N):h;I.replace?e.nodes.splice(e.nodes.indexOf(N),1,k):Object.assign(N,k)},G=(g,h,I={replace:!1})=>{const N=s(g);if(!N)return;const k=typeof h=="function"?h(N):h;N.data=I.replace?k:{...N.data,...k}},ne=(g,h,I=!1)=>{I?e.connectionClickStartHandle=g:e.connectionStartHandle=g,e.connectionEndHandle=null,e.connectionStatus=null,h&&(e.connectionPosition=h)},U=(g,h=null,I=null)=>{e.connectionStartHandle&&(e.connectionPosition=g,e.connectionEndHandle=h,e.connectionStatus=I)},B=(g,h)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,h?e.connectionClickStartHandle=null:e.connectionStartHandle=null},K=g=>{const h=ld(g),I=h?null:Rt(g)?g:s(g.id);return!h&&!I?[null,null,h]:[h?g:mo(I),I,h]},de=(g,h=!0,I=e.nodes)=>{const[N,k,L]=K(g);if(!N)return[];const Y=[];for(const re of I||e.nodes){if(!L&&(re.id===k.id||!re.computedPosition))continue;const le=mo(re),_e=yo(le,N);(h&&_e>0||_e>=Number(N.width)*Number(N.height))&&Y.push(re)}return Y},ue=(g,h,I=!0)=>{const[N]=K(g);if(!N)return!1;const k=yo(N,h);return I&&k>0||k>=Number(N.width)*Number(N.height)},fe=g=>{const{viewport:h,dimensions:I,d3Zoom:N,d3Selection:k,translateExtent:L}=e;if(!N||!k||!g.x&&!g.y)return!1;const Y=Ot.translate(h.x+g.x,h.y+g.y).scale(h.zoom),re=[[0,0],[I.width,I.height]],le=N.constrain()(Y,re,L),_e=e.viewport.x!==le.x||e.viewport.y!==le.y||e.viewport.zoom!==le.k;return N.transform(k,le),_e},oe=g=>{const h=g instanceof Function?g(e):g,I=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Ne(h.defaultEdgeOptions)&&(e.defaultEdgeOptions=h.defaultEdgeOptions);const N=h.modelValue||h.nodes||h.edges?[]:void 0;N&&(h.modelValue&&N.push(...h.modelValue),h.nodes&&N.push(...h.nodes),h.edges&&N.push(...h.edges),E(N));const k=()=>{Ne(h.maxZoom)&&S(h.maxZoom),Ne(h.minZoom)&&x(h.minZoom),Ne(h.translateExtent)&&P(h.translateExtent)};for(const L of Object.keys(h)){const Y=L,re=h[Y];![...Fd,...I].includes(Y)&&Ne(re)&&(e[Y]=re)}io(()=>e.d3Zoom).not.toBeNull().then(k),e.initialized||(e.initialized=!0)};return{updateNodePositions:c,updateNodeDimensions:d,setElements:E,setNodes:j,setEdges:A,addNodes:J,addEdges:te,removeNodes:w,removeEdges:O,findNode:s,findEdge:u,updateEdge:C,updateEdgeData:M,updateNode:z,updateNodeData:G,applyEdgeChanges:D,applyNodeChanges:T,addSelectedElements:_,addSelectedNodes:p,addSelectedEdges:b,setMinZoom:x,setMaxZoom:S,setTranslateExtent:P,setNodeExtent:R,setPaneClickDistance:$,removeSelectedElements:v,removeSelectedNodes:m,removeSelectedEdges:y,startConnection:ne,updateConnection:U,endConnection:B,setInteractive:W,setState:oe,getIntersectingNodes:de,getIncomers:i,getOutgoers:a,getConnectedEdges:l,isNodeIntersecting:ue,panBy:fe,fitView:g=>o.value.fitView(g),zoomIn:g=>o.value.zoomIn(g),zoomOut:g=>o.value.zoomOut(g),zoomTo:(g,h)=>o.value.zoomTo(g,h),setViewport:(g,h)=>o.value.setViewport(g,h),setTransform:(g,h)=>o.value.setTransform(g,h),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(g,h,I)=>o.value.setCenter(g,h,I),fitBounds:(g,h)=>o.value.fitBounds(g,h),project:g=>o.value.project(g),screenToFlowCoordinate:g=>o.value.screenToFlowCoordinate(g),flowToScreenCoordinate:g=>o.value.flowToScreenCoordinate(g),toObject:()=>{const g=[],h=[];for(const I of e.nodes){const{computedPosition:N,handleBounds:k,selected:L,dimensions:Y,isParent:re,resizing:le,dragging:_e,events:he,...we}=I;g.push(we)}for(const I of e.edges){const{selected:N,sourceNode:k,targetNode:L,events:Y,...re}=I;h.push(re)}return JSON.parse(JSON.stringify({nodes:g,edges:h,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:g=>new Promise(h=>{const{nodes:I,edges:N,position:k,zoom:L,viewport:Y}=g;if(I&&j(I),N&&A(N),Y!=null&&Y.x&&(Y!=null&&Y.y)||k){const re=(Y==null?void 0:Y.x)||k[0],le=(Y==null?void 0:Y.y)||k[1],_e=(Y==null?void 0:Y.zoom)||L||e.viewport.zoom;return io(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:re,y:le,zoom:_e}).then(()=>{h(!0)})})}else h(!0)}),updateNodeInternals:r,viewportHelper:o,$reset:()=>{const g=aa();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const h=Ot.translate(g.defaultViewport.x??0,g.defaultViewport.y??0).scale(_t(g.defaultViewport.zoom??1,g.minZoom,g.maxZoom)),I=e.viewportRef.getBoundingClientRect(),N=[[0,0],[I.width,I.height]],k=e.d3Zoom.constrain()(h,N,g.translateExtent);e.d3Zoom.transform(e.d3Selection,k)}oe(g)},$destroy:()=>{}}}const Hd=["data-id","data-handleid","data-nodeid","data-handlepos"],Yd={name:"Handle",compatConfig:{MODE:3}},Ye=ye({...Yd,props:{id:{default:null},type:{},position:{default:()=>X.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=ni(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Ee(()=>n.type??"source"),r=Ee(()=>n.isValidConnection??null),{connectionStartHandle:i,connectionClickStartHandle:a,connectionEndHandle:l,vueFlowRef:s,nodesConnectable:u,noDragClassName:c,noPanClassName:d}=xe(),{id:f,node:p,nodeEl:b,connectedEdges:_}=ra(),m=se(),y=Ee(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),v=Ee(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),x=Ee(()=>{var A,E,J,te,w,O;return((A=i.value)==null?void 0:A.nodeId)===f&&((E=i.value)==null?void 0:E.handleId)===e.id&&((J=i.value)==null?void 0:J.type)===o.value||((te=l.value)==null?void 0:te.nodeId)===f&&((w=l.value)==null?void 0:w.handleId)===e.id&&((O=l.value)==null?void 0:O.type)===o.value}),S=Ee(()=>{var A,E,J;return((A=a.value)==null?void 0:A.nodeId)===f&&((E=a.value)==null?void 0:E.handleId)===e.id&&((J=a.value)==null?void 0:J.type)===o.value}),{handlePointerDown:P,handleClick:R}=oa({nodeId:f,handleId:e.id,isValidConnection:r,type:o}),$=ie(()=>typeof e.connectable=="string"&&e.connectable==="single"?!_.value.some(A=>{const E=A[`${o.value}Handle`];return A[o.value]!==f?!1:E?E===e.id:!0}):typeof e.connectable=="number"?_.value.filter(A=>{const E=A[`${o.value}Handle`];return A[o.value]!==f?!1:E?E===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(p,_.value):Ne(e.connectable)?e.connectable:u.value);Je(()=>{var A;if(!p.dimensions.width||!p.dimensions.height)return;const E=(A=p.handleBounds[o.value])==null?void 0:A.find(T=>T.id===e.id);if(!s.value||E)return;const J=s.value.querySelector(".vue-flow__transformationpane");if(!b.value||!m.value||!J||!e.id)return;const te=b.value.getBoundingClientRect(),w=m.value.getBoundingClientRect(),O=window.getComputedStyle(J),{m22:C}=new window.DOMMatrixReadOnly(O.transform),M={id:e.id,position:e.position,x:(w.left-te.left)/C,y:(w.top-te.top)/C,...Mn(m.value)};p.handleBounds[o.value]=[...p.handleBounds[o.value]??[],M]}),ei(()=>{const A=p.handleBounds[o.value];A&&(p.handleBounds[o.value]=A.filter(E=>E.id!==e.id))});function W(A){const E=Po(A);$.value&&y.value&&(E&&A.button===0||!E)&&P(A)}function j(A){!f||!a.value&&!y.value||$.value&&R(A)}return t({handleClick:R,handlePointerDown:P,onClick:j,onPointerDown:W}),(A,E)=>(ee(),ce("div",{ref_key:"handle",ref:m,"data-id":`${V(f)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":V(f),"data-handlepos":A.position,class:gt(["vue-flow__handle",[`vue-flow__handle-${A.position}`,`vue-flow__handle-${e.id}`,V(c),V(d),o.value,{connectable:$.value,connecting:S.value,connectablestart:y.value,connectableend:v.value,connectionindicator:$.value&&(y.value&&!x.value||v.value&&x.value)}]]),onMousedown:W,onTouchstartPassive:W,onClick:j},[lt(A.$slots,"default",{id:A.id})],42,Hd))}}),$n=function({sourcePosition:e=X.Bottom,targetPosition:t=X.Top,label:n,connectable:o=!0,isValidTargetPos:r,isValidSourcePos:i,data:a}){const l=a.label||n;return[me(Ye,{type:"target",position:t,connectable:o,isValidConnection:r}),typeof l!="string"&&l?me(l):me("div",{innerHTML:l}),me(Ye,{type:"source",position:e,connectable:o,isValidConnection:i})]};$n.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];$n.inheritAttrs=!1;$n.compatConfig={MODE:3};const Xd=$n,Pn=function({targetPosition:e=X.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:r}){const i=r.label||t;return[me(Ye,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof i!="string"&&i?me(i):me("div",{innerHTML:i})]};Pn.props=["targetPosition","label","isValidTargetPos","connectable","data"];Pn.inheritAttrs=!1;Pn.compatConfig={MODE:3};const Wd=Pn,Dn=function({sourcePosition:e=X.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:r}){const i=r.label||t;return[typeof i!="string"&&i?me(i):me("div",{innerHTML:i}),me(Ye,{type:"source",position:e,connectable:n,isValidConnection:o})]};Dn.props=["sourcePosition","label","isValidSourcePos","connectable","data"];Dn.inheritAttrs=!1;Dn.compatConfig={MODE:3};const jd=Dn,Ud=["transform"],Zd=["width","height","x","y","rx","ry"],Kd=["y"],qd={name:"EdgeText",compatConfig:{MODE:3}},Qd=ye({...qd,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=se({x:0,y:0,width:0,height:0}),n=se(null),o=ie(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);Je(r),ve([()=>e.x,()=>e.y,n,()=>e.label],r);function r(){if(!n.value)return;const i=n.value.getBBox();(i.width!==t.value.width||i.height!==t.value.height)&&(t.value=i)}return(i,a)=>(ee(),ce("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[i.labelShowBg?(ee(),ce("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*i.labelBgPadding[0]}px`,height:`${t.value.height+2*i.labelBgPadding[1]}px`,x:-i.labelBgPadding[0],y:-i.labelBgPadding[1],style:De(i.labelBgStyle),rx:i.labelBgBorderRadius,ry:i.labelBgBorderRadius},null,12,Zd)):Re("",!0),Ie("text",So(i.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:i.labelStyle}),[lt(i.$slots,"default",{},()=>[typeof i.label!="string"?(ee(),Te(rl(i.label),{key:0})):(ee(),ce(Ve,{key:1},[it(Oe(i.label),1)],64))])],16,Kd)],8,Ud))}}),Jd=["id","d","marker-end","marker-start"],ef=["d","stroke-width"],tf={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},An=ye({...tf,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},style:{},labelStyle:{},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=ni(e,["interactionWidth","labelShowBg"]),o=se(null),r=se(null),i=se(null),a=ol();return t({pathEl:o,interactionEl:r,labelEl:i}),(l,s)=>(ee(),ce(Ve,null,[Ie("path",{id:l.id,ref_key:"pathEl",ref:o,d:l.path,style:De(n.style),class:gt(["vue-flow__edge-path",V(a).class]),"marker-end":l.markerEnd,"marker-start":l.markerStart},null,14,Jd),l.interactionWidth?(ee(),ce("path",{key:0,ref_key:"interactionEl",ref:r,fill:"none",d:l.path,"stroke-width":l.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,ef)):Re("",!0),l.label&&l.labelX&&l.labelY?(ee(),Te(Qd,{key:1,ref_key:"labelEl",ref:i,x:l.labelX,y:l.labelY,label:l.label,"label-show-bg":l.labelShowBg,"label-bg-style":l.labelBgStyle,"label-bg-padding":l.labelBgPadding,"label-bg-border-radius":l.labelBgBorderRadius,"label-style":l.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):Re("",!0)],64))}});function la({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,a=Math.abs(o-t)/2,l=o<t?o+a:o-a;return[i,l,r,a]}function sa({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:a,targetControlY:l}){const s=e*.125+r*.375+a*.375+n*.125,u=t*.125+i*.375+l*.375+o*.125,c=Math.abs(s-e),d=Math.abs(u-t);return[s,u,c,d]}function rn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Cr({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){let a,l;switch(e){case X.Left:a=t-rn(t-o,i),l=n;break;case X.Right:a=t+rn(o-t,i),l=n;break;case X.Top:a=t,l=n-rn(n-r,i);break;case X.Bottom:a=t,l=n+rn(r-n,i);break}return[a,l]}function ua(e){const{sourceX:t,sourceY:n,sourcePosition:o=X.Bottom,targetX:r,targetY:i,targetPosition:a=X.Top,curvature:l=.25}=e,[s,u]=Cr({pos:o,x1:t,y1:n,x2:r,y2:i,c:l}),[c,d]=Cr({pos:a,x1:r,y1:i,x2:t,y2:n,c:l}),[f,p,b,_]=sa({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:s,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${s},${u} ${c},${d} ${r},${i}`,f,p,b,_]}function Ir({pos:e,x1:t,y1:n,x2:o,y2:r}){let i,a;switch(e){case X.Left:case X.Right:i=.5*(t+o),a=n;break;case X.Top:case X.Bottom:i=t,a=.5*(n+r);break}return[i,a]}function ca(e){const{sourceX:t,sourceY:n,sourcePosition:o=X.Bottom,targetX:r,targetY:i,targetPosition:a=X.Top}=e,[l,s]=Ir({pos:o,x1:t,y1:n,x2:r,y2:i}),[u,c]=Ir({pos:a,x1:r,y1:i,x2:t,y2:n}),[d,f,p,b]=sa({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:l,sourceControlY:s,targetControlX:u,targetControlY:c});return[`M${t},${n} C${l},${s} ${u},${c} ${r},${i}`,d,f,p,b]}const Mr={[X.Left]:{x:-1,y:0},[X.Right]:{x:1,y:0},[X.Top]:{x:0,y:-1},[X.Bottom]:{x:0,y:1}};function nf({source:e,sourcePosition:t=X.Bottom,target:n}){return t===X.Left||t===X.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Or(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function of({source:e,sourcePosition:t=X.Bottom,target:n,targetPosition:o=X.Top,center:r,offset:i}){const a=Mr[t],l=Mr[o],s={x:e.x+a.x*i,y:e.y+a.y*i},u={x:n.x+l.x*i,y:n.y+l.y*i},c=nf({source:s,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let p,b,_;const m={x:0,y:0},y={x:0,y:0},[v,x,S,P]=la({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*l[d]===-1){b=r.x??v,_=r.y??x;const $=[{x:b,y:s.y},{x:b,y:u.y}],W=[{x:s.x,y:_},{x:u.x,y:_}];a[d]===f?p=d==="x"?$:W:p=d==="x"?W:$}else{const $=[{x:s.x,y:u.y}],W=[{x:u.x,y:s.y}];if(d==="x"?p=a.x===f?W:$:p=a.y===f?$:W,t===o){const te=Math.abs(e[d]-n[d]);if(te<=i){const w=Math.min(i-1,i-te);a[d]===f?m[d]=(s[d]>e[d]?-1:1)*w:y[d]=(u[d]>n[d]?-1:1)*w}}if(t!==o){const te=d==="x"?"y":"x",w=a[d]===l[te],O=s[te]>u[te],C=s[te]<u[te];(a[d]===1&&(!w&&O||w&&C)||a[d]!==1&&(!w&&C||w&&O))&&(p=d==="x"?$:W)}const j={x:s.x+m.x,y:s.y+m.y},A={x:u.x+y.x,y:u.y+y.y},E=Math.max(Math.abs(j.x-p[0].x),Math.abs(A.x-p[0].x)),J=Math.max(Math.abs(j.y-p[0].y),Math.abs(A.y-p[0].y));E>=J?(b=(j.x+A.x)/2,_=p[0].y):(b=p[0].x,_=(j.y+A.y)/2)}return[[e,{x:s.x+m.x,y:s.y+m.y},...p,{x:u.x+y.x,y:u.y+y.y},n],b,_,S,P]}function rf(e,t,n,o){const r=Math.min(Or(e,t)/2,Or(t,n)/2,o),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${i+r*u},${a}Q ${i},${a} ${i},${a+r*c}`}const l=e.x<n.x?1:-1,s=e.y<n.y?-1:1;return`L ${i},${a+r*s}Q ${i},${a} ${i+r*l},${a}`}function wo(e){const{sourceX:t,sourceY:n,sourcePosition:o=X.Bottom,targetX:r,targetY:i,targetPosition:a=X.Top,borderRadius:l=5,centerX:s,centerY:u,offset:c=20}=e,[d,f,p,b,_]=of({source:{x:t,y:n},sourcePosition:o,target:{x:r,y:i},targetPosition:a,center:{x:s,y:u},offset:c});return[d.reduce((y,v,x)=>{let S;return x>0&&x<d.length-1?S=rf(d[x-1],v,d[x+1],l):S=`${x===0?"M":"L"}${v.x} ${v.y}`,y+=S,y},""),f,p,b,_]}function af(e){const{sourceX:t,sourceY:n,targetX:o,targetY:r}=e,[i,a,l,s]=la({sourceX:t,sourceY:n,targetX:o,targetY:r});return[`M ${t},${n}L ${o},${r}`,i,a,l,s]}const lf=ye({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=af(e);return me(An,{path:n,labelX:o,labelY:r,...t,...e})}}}),sf=lf,uf=ye({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=wo({...e,sourcePosition:e.sourcePosition??X.Bottom,targetPosition:e.targetPosition??X.Top});return me(An,{path:n,labelX:o,labelY:r,...t,...e})}}}),da=uf,cf=ye({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>me(da,{...e,...t,borderRadius:0})}}),df=cf,ff=ye({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=ua({...e,sourcePosition:e.sourcePosition??X.Bottom,targetPosition:e.targetPosition??X.Top});return me(An,{path:n,labelX:o,labelY:r,...t,...e})}}}),hf=ff,pf=ye({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=ca({...e,sourcePosition:e.sourcePosition??X.Bottom,targetPosition:e.targetPosition??X.Top});return me(An,{path:n,labelX:o,labelY:r,...t,...e})}}}),gf=pf,vf={input:jd,default:Xd,output:Wd},mf={default:hf,straight:sf,step:df,smoothstep:da,simplebezier:gf};function yf(e,t,n){const o=ie(()=>_=>t.value.get(_)),r=ie(()=>_=>n.value.get(_)),i=ie(()=>{const _={...mf,...e.edgeTypes},m=Object.keys(_);for(const y of e.edges)y.type&&!m.includes(y.type)&&(_[y.type]=y.type);return _}),a=ie(()=>{const _={...vf,...e.nodeTypes},m=Object.keys(_);for(const y of e.nodes)y.type&&!m.includes(y.type)&&(_[y.type]=y.type);return _}),l=ie(()=>e.onlyRenderVisibleElements?ji(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),s=ie(()=>{if(e.onlyRenderVisibleElements){const _=[];for(const m of e.edges){const y=t.value.get(m.source),v=t.value.get(m.target);_d({sourcePos:y.computedPosition||{x:0,y:0},targetPos:v.computedPosition||{x:0,y:0},sourceWidth:y.dimensions.width,sourceHeight:y.dimensions.height,targetWidth:v.dimensions.width,targetHeight:v.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&_.push(m)}return _}return e.edges}),u=ie(()=>[...l.value,...s.value]),c=ie(()=>{const _=[];for(const m of e.nodes)m.selected&&_.push(m);return _}),d=ie(()=>{const _=[];for(const m of e.edges)m.selected&&_.push(m);return _}),f=ie(()=>[...c.value,...d.value]),p=ie(()=>{const _=[];for(const m of e.nodes)m.dimensions.width&&m.dimensions.height&&m.handleBounds!==void 0&&_.push(m);return _}),b=ie(()=>l.value.length>0&&p.value.length===l.value.length);return{getNode:o,getEdge:r,getElements:u,getEdgeTypes:i,getNodeTypes:a,getEdges:s,getNodes:l,getSelectedElements:f,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:p,areNodesInitialized:b}}class dt{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=jt())==null?void 0:t.appContext.app,o=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??dt.instance;return dt.instance=o??new dt,n&&(n.config.globalProperties.$vueFlowStorage=dt.instance),dt.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=aa(),r=Qa(o),i={};for(const[f,p]of Object.entries(r.hooks)){const b=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;i[b]=p.on}const a={};for(const[f,p]of Object.entries(r.hooks))a[f]=p.trigger;const l=ie(()=>{const f=new Map;for(const p of r.nodes)f.set(p.id,p);return f}),s=ie(()=>{const f=new Map;for(const p of r.edges)f.set(p.id,p);return f}),u=yf(r,l,s),c=Gd(r,l,s);c.setState({...r,...n});const d={...i,...u,...c,...bl(r),nodeLookup:l,edgeLookup:s,emits:a,id:t,vueFlowVersion:"1.40.1",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function xe(e){const t=dt.getInstance(),n=ri(),o=typeof e=="object",r=o?e:{id:e},i=r.id,a=i??(n==null?void 0:n.vueFlowId);let l;if(n){const s=Tt(kr,null);typeof s<"u"&&s!==null&&(!a||s.id===a)&&(l=s)}if(l||a&&(l=t.get(a)),!l||a&&l.id!==a){const s=i??t.getId(),u=t.create(s,r);l=u,(n??ti(!0)).run(()=>{ve(u.applyDefault,(d,f,p)=>{const b=m=>{u.applyNodeChanges(m)},_=m=>{u.applyEdgeChanges(m)};d?(u.onNodesChange(b),u.onEdgesChange(_)):(u.hooks.value.nodesChange.off(b),u.hooks.value.edgesChange.off(_)),p(()=>{u.hooks.value.nodesChange.off(b),u.hooks.value.edgesChange.off(_)})},{immediate:!0}),Sn(()=>{if(l){const d=t.get(l.id);d?d.$destroy():On(`No store instance found for id ${l.id} in storage.`)}})})}else o&&l.setState(r);if(n&&(Ct(kr,l),n.vueFlowId=l.id),o){const s=jt();(s==null?void 0:s.type.name)!=="VueFlow"&&l.emits.error(new Me(ke.USEVUEFLOW_OPTIONS))}return l}function _f(e){const{emits:t,dimensions:n}=xe();let o;Je(()=>{const r=e.value,i=()=>{if(!r)return;const a=Mn(r);(a.width===0||a.height===0)&&t.error(new Me(ke.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:a.width||500,height:a.height||500}};i(),window.addEventListener("resize",i),r&&(o=new ResizeObserver(()=>i()),o.observe(r)),oi(()=>{window.removeEventListener("resize",i),o&&r&&o.unobserve(r)})})}const wf={name:"UserSelection",compatConfig:{MODE:3}},bf=ye({...wf,props:{userSelectionRect:{}},setup(e){return(t,n)=>(ee(),ce("div",{class:"vue-flow__selection vue-flow__container",style:De({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),Ef=["tabIndex"],xf={name:"NodesSelection",compatConfig:{MODE:3}},Sf=ye({...xf,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:r,disableKeyboardA11y:i,userSelectionActive:a}=xe(),l=ia(),s=se(null),u=na({el:s,onStart(b){t.selectionDragStart(b)},onDrag(b){t.selectionDrag(b)},onStop(b){t.selectionDragStop(b)}});Je(()=>{var b;i.value||(b=s.value)==null||b.focus({preventScroll:!0})});const c=ie(()=>Wi(o.value)),d=ie(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function f(b){t.selectionContextMenu({event:b,nodes:o.value})}function p(b){i||kt[b.key]&&l({x:kt[b.key].x,y:kt[b.key].y},b.shiftKey)}return(b,_)=>!V(a)&&c.value.width&&c.value.height?(ee(),ce("div",{key:0,class:gt(["vue-flow__nodesselection vue-flow__container",V(r)]),style:De({transform:`translate(${V(n).x}px,${V(n).y}px) scale(${V(n).zoom})`})},[Ie("div",{ref_key:"el",ref:s,class:gt([{dragging:V(u)},"vue-flow__nodesselection-rect"]),style:De(d.value),tabIndex:V(i)?void 0:-1,onContextmenu:f,onKeydown:p},null,46,Ef)],6)):Re("",!0)}});function Nf(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const kf={name:"Pane",compatConfig:{MODE:3}},Cf=ye({...kf,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:r,userSelectionActive:i,removeSelectedElements:a,panOnDrag:l,userSelectionRect:s,elementsSelectable:u,nodesSelectionActive:c,getSelectedEdges:d,getSelectedNodes:f,removeNodes:p,removeEdges:b,selectionMode:_,deleteKeyCode:m,multiSelectionKeyCode:y,multiSelectionActive:v,edgeLookup:x,nodeLookup:S}=xe(),P=se(null),R=se(0),$=se(0),W=se(),j=se(new Map),A=Ee(()=>u.value&&(e.isSelecting||i.value));let E=!1,J=!1;const te=Lt(m,{actInsideInputWithModifier:!1}),w=Lt(y);ve(te,U=>{U&&(p(f.value),b(d.value),c.value=!1)}),ve(w,U=>{v.value=U});function O(U,B){return K=>{K.target===B&&(U==null||U(K))}}function C(){i.value=!1,s.value=null,R.value=0,$.value=0}function M(U){if(E){E=!1;return}r.paneClick(U),a(),c.value=!1}function T(U){var B;if(Array.isArray(l.value)&&((B=l.value)!=null&&B.includes(2))){U.preventDefault();return}r.paneContextMenu(U)}function D(U){r.paneScroll(U)}function z(U){var B,K,de,ue,fe;if(W.value=(B=t.value)==null?void 0:B.getBoundingClientRect(),!u.value||!e.isSelecting||U.button!==0||U.target!==P.value||!W.value)return;(de=(K=U.target)==null?void 0:K.setPointerCapture)==null||de.call(K,U.pointerId);const{x:oe,y:ae}=Nf(U,W.value);J=!0,E=!1,j.value=new Map;for(const[Z,q]of x.value)j.value.set(q.source,((ue=j.value.get(q.source))==null?void 0:ue.add(Z))||new Set([Z])),j.value.set(q.target,((fe=j.value.get(q.target))==null?void 0:fe.add(Z))||new Set([Z]));a(),s.value={width:0,height:0,startX:oe,startY:ae,x:oe,y:ae},i.value=!0,c.value=!1,r.selectionStart(U)}function G(U){if(!W.value||!s.value)return;E=!0;const{x:B,y:K}=at(U,W.value),{startX:de=0,startY:ue=0}=s.value,fe={startX:de,startY:ue,x:B<de?B:de,y:K<ue?K:ue,width:Math.abs(B-de),height:Math.abs(K-ue)},oe=ji(n.value,fe,o.value,_.value===To.Partial,!0),ae=new Set,Z=new Set;for(const q of oe){Z.add(q.id);const g=j.value.get(q.id);if(g)for(const h of g)ae.add(h)}if(R.value!==Z.size){R.value=Z.size;const q=rt(S.value,Z,!0);r.nodesChange(q)}if($.value!==ae.size){$.value=ae.size;const q=rt(x.value,ae);r.edgesChange(q)}s.value=fe,i.value=!0,c.value=!1}function ne(U){var B;U.button!==0||!J||((B=U.target)==null||B.releasePointerCapture(U.pointerId),!i.value&&s.value&&U.target===P.value&&M(U),R.value>0&&(c.value=!0),C(),r.selectionEnd(U),e.selectionKeyPressed&&(E=!1),J=!1)}return(U,B)=>(ee(),ce("div",{ref_key:"container",ref:P,class:gt(["vue-flow__pane vue-flow__container",{selection:U.isSelecting}]),onClick:B[0]||(B[0]=K=>A.value?void 0:O(M,P.value)(K)),onContextmenu:B[1]||(B[1]=K=>O(T,P.value)(K)),onWheelPassive:B[2]||(B[2]=K=>O(D,P.value)(K)),onPointerenter:B[3]||(B[3]=K=>A.value?void 0:V(r).paneMouseEnter(K)),onPointerdown:B[4]||(B[4]=K=>A.value?z(K):V(r).paneMouseMove(K)),onPointermove:B[5]||(B[5]=K=>A.value?G(K):V(r).paneMouseMove(K)),onPointerup:B[6]||(B[6]=K=>A.value?ne(K):void 0),onPointerleave:B[7]||(B[7]=K=>V(r).paneMouseLeave(K))},[lt(U.$slots,"default"),V(i)&&V(s)?(ee(),Te(bf,{key:0,"user-selection-rect":V(s)},null,8,["user-selection-rect"])):Re("",!0),V(c)&&V(f).length?(ee(),Te(Sf,{key:1})):Re("",!0)],34))}}),If={name:"Transform",compatConfig:{MODE:3}},Mf=ye({...If,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=xe(),r=ie(()=>n.value?!o.value:!1),i=ie(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(a,l)=>(ee(),ce("div",{class:"vue-flow__transformationpane vue-flow__container",style:De({transform:i.value,opacity:r.value?0:void 0})},[lt(a.$slots,"default")],4))}}),Of={name:"Viewport",compatConfig:{MODE:3}},Tf=ye({...Of,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:r,zoomActivationKeyCode:i,selectionKeyCode:a,panActivationKeyCode:l,panOnScroll:s,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:f,zoomOnPinch:p,zoomOnScroll:b,preventScrolling:_,noWheelClassName:m,noPanClassName:y,emits:v,connectionStartHandle:x,userSelectionActive:S,paneDragging:P,d3Zoom:R,d3Selection:$,d3ZoomHandler:W,viewport:j,viewportRef:A,paneClickDistance:E}=xe();_f(A);const J=se(!1),te=se(!1);let w=null,O=!1,C=0,M={x:0,y:0,zoom:0};const T=Lt(l),D=Lt(a),z=Lt(i),G=Ee(()=>T.value||d.value),ne=Ee(()=>T.value||s.value),U=Ee(()=>D.value||a.value===!0&&G.value!==!0);Je(()=>{if(!A.value){On("Viewport element is missing");return}const oe=A.value,ae=oe.getBoundingClientRect(),Z=nd().clickDistance(E.value).scaleExtent([t.value,n.value]).translateExtent(r.value),q=Be(oe).call(Z),g=q.on("wheel.zoom"),h=Ot.translate(o.value.x??0,o.value.y??0).scale(_t(o.value.zoom??1,t.value,n.value)),I=[[0,0],[ae.width,ae.height]],N=Z.constrain()(h,I,r.value);Z.transform(q,N),Z.wheelDelta(K),R.value=Z,$.value=q,W.value=g,j.value={x:N.x,y:N.y,zoom:N.k},Z.on("start",k=>{var L;if(!k.sourceEvent)return null;C=k.sourceEvent.button,J.value=!0;const Y=ue(k.transform);((L=k.sourceEvent)==null?void 0:L.type)==="mousedown"&&(P.value=!0),M=Y,v.viewportChangeStart(Y),v.moveStart({event:k,flowTransform:Y})}),Z.on("end",k=>{if(!k.sourceEvent)return null;if(J.value=!1,P.value=!1,B(G.value,C??0)&&!O&&v.paneContextMenu(k.sourceEvent),O=!1,de(M,k.transform)){const L=ue(k.transform);M=L,v.viewportChangeEnd(L),v.moveEnd({event:k,flowTransform:L})}}),Z.filter(k=>{var L,Y,re;const le=z.value||b.value,_e=p.value&&k.ctrlKey,he=k.button;if((G.value===!0||Array.isArray(G.value)&&G.value.includes(1))&&he===1&&k.type==="mousedown"&&((L=k.target)!=null&&L.closest(".vue-flow__node")||(Y=k.target)!=null&&Y.closest(".vue-flow__edge")))return!0;if(!G.value&&!le&&!ne.value&&!f.value&&!p.value||S.value||!f.value&&k.type==="dblclick"||fe(k,m.value)&&k.type==="wheel"||fe(k,y.value)&&(k.type!=="wheel"||ne.value&&k.type==="wheel"&&!z.value)||!p.value&&k.ctrlKey&&k.type==="wheel"||!le&&!ne.value&&!_e&&k.type==="wheel")return!1;if(!p&&k.type==="touchstart"&&((re=k.touches)==null?void 0:re.length)>1)return k.preventDefault(),!1;if(!G.value&&(k.type==="mousedown"||k.type==="touchstart")||Array.isArray(G.value)&&!G.value.includes(he)&&(k.type==="mousedown"||k.type==="touchstart"))return!1;const we=Array.isArray(G.value)&&G.value.includes(he)||!he||he<=1;return(!k.ctrlKey||k.type==="wheel")&&we}),ve([S,G],()=>{S.value&&!J.value?Z.on("zoom",null):S.value||Z.on("zoom",k=>{j.value={x:k.transform.x,y:k.transform.y,zoom:k.transform.k};const L=ue(k.transform);O=B(G.value,C??0),v.viewportChange(L),v.move({event:k,flowTransform:L})})},{immediate:!0}),ve([S,ne,u,z,p,_,m],()=>{ne.value&&!z.value&&!S.value?q.on("wheel.zoom",k=>{if(fe(k,m.value))return!1;const L=z.value||b.value,Y=p.value&&k.ctrlKey;if(!(!_.value||ne.value||L||Y))return!1;k.preventDefault(),k.stopImmediatePropagation();const le=q.property("__zoom").k||1,_e=wn();if(k.ctrlKey&&p.value&&_e){const Xa=He(k),Wa=K(k),ja=le*2**Wa;Z.scaleTo(q,ja,Xa,k);return}const he=k.deltaMode===1?20:1;let we=u.value===Bt.Vertical?0:k.deltaX*he,et=u.value===Bt.Horizontal?0:k.deltaY*he;!_e&&k.shiftKey&&u.value!==Bt.Vertical&&!we&&et&&(we=et,et=0),Z.translateBy(q,-(we/le)*c.value,-(et/le)*c.value);const bt=ue(q.property("__zoom"));w&&clearTimeout(w),te.value?(v.move({event:k,flowTransform:bt}),v.viewportChange(bt),w=setTimeout(()=>{v.moveEnd({event:k,flowTransform:bt}),v.viewportChangeEnd(bt),te.value=!1},150)):(te.value=!0,v.moveStart({event:k,flowTransform:bt}),v.viewportChangeStart(bt))},{passive:!1}):typeof g<"u"&&q.on("wheel.zoom",function(k,L){const Y=!_.value&&k.type==="wheel"&&!k.ctrlKey,re=z.value||b.value,le=p.value&&k.ctrlKey;if(!re&&!s.value&&!le&&k.type==="wheel"||Y||fe(k,m.value))return null;k.preventDefault(),g.call(this,k,L)},{passive:!1})},{immediate:!0})});function B(oe,ae){return ae===2&&Array.isArray(oe)&&oe.includes(2)}function K(oe){const ae=oe.ctrlKey&&wn()?10:1;return-oe.deltaY*(oe.deltaMode===1?.05:oe.deltaMode?1:.002)*ae}function de(oe,ae){return oe.x!==ae.x&&!Number.isNaN(ae.x)||oe.y!==ae.y&&!Number.isNaN(ae.y)||oe.zoom!==ae.k&&!Number.isNaN(ae.k)}function ue(oe){return{x:oe.x,y:oe.y,zoom:oe.k}}function fe(oe,ae){return oe.target.closest(`.${ae}`)}return(oe,ae)=>(ee(),ce("div",{ref_key:"viewportRef",ref:A,class:"vue-flow__viewport vue-flow__container"},[H(Cf,{"is-selecting":U.value,"selection-key-pressed":V(D),class:gt({connecting:!!V(x),dragging:V(P),draggable:V(d)===!0||Array.isArray(V(d))&&V(d).includes(0)})},{default:Q(()=>[H(Mf,null,{default:Q(()=>[lt(oe.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),$f=["id"],Pf=["id"],Df=["id"],Af={name:"A11yDescriptions",compatConfig:{MODE:3}},Vf=ye({...Af,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=xe();return(r,i)=>(ee(),ce(Ve,null,[Ie("div",{id:`${V(Ri)}-${V(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+Oe(V(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,$f),Ie("div",{id:`${V(zi)}-${V(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Pf),V(n)?Re("",!0):(ee(),ce("div",{key:0,id:`${V(ad)}-${V(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},Oe(V(o)),9,Df))],64))}});function Rf(){const e=xe();ve(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function zf(e,t,n){return n===X.Left?e-t:n===X.Right?e+t:e}function Bf(e,t,n){return n===X.Top?e-t:n===X.Bottom?e+t:e}const Ao=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=X.Top,type:r}){return me("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${r}`,cx:zf(t,e,o),cy:Bf(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};Ao.props=["radius","centerX","centerY","position","type"];Ao.compatConfig={MODE:3};const Tr=Ao,Lf=ye({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:r,emits:i,nodesSelectionActive:a,noPanClassName:l,getEdgeTypes:s,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:f,multiSelectionActive:p,disableKeyboardA11y:b,elementsSelectable:_,edgesUpdatable:m,edgesFocusable:y}=xe(),v=ie(()=>c(e.id)),x=Td(v.value,i),S=Tt(Tn),P=jt(),R=se(!1),$=se(!1),W=se(""),j=se(null),A=se("source"),E=se(null),J=Ee(()=>typeof v.value.selectable>"u"?_.value:v.value.selectable),te=Ee(()=>typeof v.value.updatable>"u"?m.value:v.value.updatable),w=Ee(()=>typeof v.value.focusable>"u"?y.value:v.value.focusable);Ct(Id,e.id),Ct(Md,E);const O=ie(()=>v.value.class instanceof Function?v.value.class(v.value):v.value.class),C=ie(()=>v.value.style instanceof Function?v.value.style(v.value):v.value.style),M=ie(()=>{const g=v.value.type||"default",h=S==null?void 0:S[`edge-${g}`];if(h)return h;let I=v.value.template??s.value[g];if(typeof I=="string"&&P){const N=Object.keys(P.appContext.components);N&&N.includes(g)&&(I=ge(g,!1))}return I&&typeof I!="string"?I:(i.error(new Me(ke.EDGE_TYPE_MISSING,I)),!1)}),{handlePointerDown:T}=oa({nodeId:W,handleId:j,type:A,isValidConnection:f,edgeUpdaterType:A,onEdgeUpdate:G,onEdgeUpdateEnd:ne});return()=>{const g=d(v.value.source),h=d(v.value.target),I="pathOptions"in v.value?v.value.pathOptions:{};if(!g&&!h)return i.error(new Me(ke.EDGE_SOURCE_TARGET_MISSING,v.value.id,v.value.source,v.value.target)),null;if(!g)return i.error(new Me(ke.EDGE_SOURCE_MISSING,v.value.id,v.value.source)),null;if(!h)return i.error(new Me(ke.EDGE_TARGET_MISSING,v.value.id,v.value.target)),null;if(!v.value||v.value.hidden||g.hidden||h.hidden)return null;let N;o.value===yt.Strict?N=g.handleBounds.source:N=[...g.handleBounds.source||[],...g.handleBounds.target||[]];const k=yr(N,v.value.sourceHandle);let L;o.value===yt.Strict?L=h.handleBounds.target:L=[...h.handleBounds.target||[],...h.handleBounds.source||[]];const Y=yr(L,v.value.targetHandle),re=(k==null?void 0:k.position)||X.Bottom,le=(Y==null?void 0:Y.position)||X.Top,{x:_e,y:he}=_n(g,k,re),{x:we,y:et}=_n(h,Y,le);return v.value.sourceX=_e,v.value.sourceY=he,v.value.targetX=we,v.value.targetY=et,me("g",{ref:E,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${M.value===!1?"default":v.value.type||"default"}`,l.value,O.value,{updating:R.value,selected:v.value.selected,animated:v.value.animated,inactive:!J.value}],onClick:B,onContextmenu:K,onDblclick:de,onMouseenter:ue,onMousemove:fe,onMouseleave:oe,onKeyDown:w.value?q:void 0,tabIndex:w.value?0:void 0,"aria-label":v.value.ariaLabel===null?void 0:v.value.ariaLabel||`Edge from ${v.value.source} to ${v.value.target}`,"aria-describedby":w.value?`${zi}-${t}`:void 0,role:w.value?"button":"img"},[$.value?null:me(M.value===!1?s.value.default:M.value,{id:e.id,sourceNode:g,targetNode:h,source:v.value.source,target:v.value.target,type:v.value.type,updatable:te.value,selected:v.value.selected,animated:v.value.animated,label:v.value.label,labelStyle:v.value.labelStyle,labelShowBg:v.value.labelShowBg,labelBgStyle:v.value.labelBgStyle,labelBgPadding:v.value.labelBgPadding,labelBgBorderRadius:v.value.labelBgBorderRadius,data:v.value.data,events:{...v.value.events,...x.on},style:C.value,markerStart:`url('#${Wt(v.value.markerStart,t)}')`,markerEnd:`url('#${Wt(v.value.markerEnd,t)}')`,sourcePosition:re,targetPosition:le,sourceX:_e,sourceY:he,targetX:we,targetY:et,sourceHandleId:v.value.sourceHandle,targetHandleId:v.value.targetHandle,interactionWidth:v.value.interactionWidth,...I}),[te.value==="source"||te.value===!0?[me("g",{onMousedown:ae,onMouseenter:D,onMouseout:z},me(Tr,{position:re,centerX:_e,centerY:he,radius:r.value,type:"source","data-type":"source"}))]:null,te.value==="target"||te.value===!0?[me("g",{onMousedown:Z,onMouseenter:D,onMouseout:z},me(Tr,{position:le,centerX:we,centerY:et,radius:r.value,type:"target","data-type":"target"}))]:null]])};function D(){R.value=!0}function z(){R.value=!1}function G(g,h){x.emit.update({event:g,edge:v.value,connection:h})}function ne(g){x.emit.updateEnd({event:g,edge:v.value}),$.value=!1}function U(g,h){g.button===0&&($.value=!0,W.value=h?v.value.target:v.value.source,j.value=(h?v.value.targetHandle:v.value.sourceHandle)??"",A.value=h?"target":"source",x.emit.updateStart({event:g,edge:v.value}),T(g))}function B(g){var h;const I={event:g,edge:v.value};J.value&&(a.value=!1,v.value.selected&&p.value?(u([v.value]),(h=E.value)==null||h.blur()):n([v.value])),x.emit.click(I)}function K(g){x.emit.contextMenu({event:g,edge:v.value})}function de(g){x.emit.doubleClick({event:g,edge:v.value})}function ue(g){x.emit.mouseEnter({event:g,edge:v.value})}function fe(g){x.emit.mouseMove({event:g,edge:v.value})}function oe(g){x.emit.mouseLeave({event:g,edge:v.value})}function ae(g){U(g,!0)}function Z(g){U(g,!1)}function q(g){var h;!b.value&&Bi.includes(g.key)&&J.value&&(g.key==="Escape"?((h=E.value)==null||h.blur(),u([c(e.id)])):n([c(e.id)]))}}}),Ff=Lf,Gf={[X.Left]:X.Right,[X.Right]:X.Left,[X.Top]:X.Bottom,[X.Bottom]:X.Top},Hf=ye({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:r,connectionPosition:i,connectionLineType:a,connectionLineStyle:l,connectionLineOptions:s,connectionStatus:u,viewport:c,findNode:d}=xe(),f=(e=Tt(Tn))==null?void 0:e["connection-line"],p=ie(()=>{var v;return d((v=o.value)==null?void 0:v.nodeId)}),b=ie(()=>{var v;return d((v=r.value)==null?void 0:v.nodeId)??null}),_=ie(()=>({x:(i.value.x-c.value.x)/c.value.zoom,y:(i.value.y-c.value.y)/c.value.zoom})),m=ie(()=>s.value.markerStart?`url(#${Wt(s.value.markerStart,t)})`:""),y=ie(()=>s.value.markerEnd?`url(#${Wt(s.value.markerEnd,t)})`:"");return()=>{var v,x,S,P;if(!p.value||!o.value)return null;const R=o.value.handleId,$=o.value.type,W=p.value.handleBounds;let j=W==null?void 0:W[$];if(n.value===yt.Loose&&(j=j||(W==null?void 0:W[$==="source"?"target":"source"])),!j)return null;const A=(R?j.find(D=>D.id===R):j[0])??null,E=(A==null?void 0:A.position)||X.Top,{x:J,y:te}=_n(p.value,A,E);let w=null;b.value&&((v=r.value)!=null&&v.handleId)&&(n.value===yt.Strict?w=((x=b.value.handleBounds[$==="source"?"target":"source"])==null?void 0:x.find(D=>{var z;return D.id===((z=r.value)==null?void 0:z.handleId)}))||null:w=((S=[...b.value.handleBounds.source||[],...b.value.handleBounds.target||[]])==null?void 0:S.find(D=>{var z;return D.id===((z=r.value)==null?void 0:z.handleId)}))||null);const O=((P=r.value)==null?void 0:P.position)??(E?Gf[E]:null);if(!E||!O)return null;const C=a.value??s.value.type??ct.Bezier;let M="";const T={sourceX:J,sourceY:te,sourcePosition:E,targetX:_.value.x,targetY:_.value.y,targetPosition:O};return C===ct.Bezier?[M]=ua(T):C===ct.Step?[M]=wo({...T,borderRadius:0}):C===ct.SmoothStep?[M]=wo(T):C===ct.SimpleBezier?[M]=ca(T):M=`M${J},${te} ${_.value.x},${_.value.y}`,me("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},me("g",{class:"vue-flow__connection"},f?me(f,{sourceX:J,sourceY:te,sourcePosition:E,targetX:_.value.x,targetY:_.value.y,targetPosition:O,sourceNode:p.value,sourceHandle:A,targetNode:b.value,targetHandle:w,markerEnd:y.value,markerStart:m.value,connectionStatus:u.value}):me("path",{d:M,class:[s.value.class,u,"vue-flow__connection-path"],style:{...l.value,...s.value.style},"marker-end":y.value,"marker-start":m.value})))}}}),Yf=Hf,Xf=["id","markerWidth","markerHeight","markerUnits","orient"],Wf={name:"MarkerType",compatConfig:{MODE:3}},jf=ye({...Wf,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(ee(),ce("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===V(go).ArrowClosed?(ee(),ce("polyline",{key:0,style:De({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):Re("",!0),t.type===V(go).Arrow?(ee(),ce("polyline",{key:1,style:De({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):Re("",!0)],8,Xf))}}),Uf={class:"vue-flow__marker vue-flow__container"},Zf={name:"MarkerDefinitions",compatConfig:{MODE:3}},Kf=ye({...Zf,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:r}=xe(),i=ie(()=>{const a=new Set,l=[],s=u=>{if(u){const c=Wt(u,t);a.has(c)||(typeof u=="object"?l.push({...u,id:c,color:u.color||r.value}):l.push({id:c,color:r.value,type:u}),a.add(c))}};for(const u of[o.value.markerEnd,o.value.markerStart])s(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])s(c);return l.sort((u,c)=>u.id.localeCompare(c.id))});return(a,l)=>(ee(),ce("svg",Uf,[Ie("defs",null,[(ee(!0),ce(Ve,null,vt(i.value,s=>(ee(),Te(jf,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,"stroke-width":s.strokeWidth,orient:s.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),qf={name:"Edges",compatConfig:{MODE:3}},Qf=ye({...qf,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=xe();return(r,i)=>(ee(),ce(Ve,null,[H(Kf),(ee(!0),ce(Ve,null,vt(V(n),a=>(ee(),ce("svg",{key:a.id,class:"vue-flow__edges vue-flow__container",style:De({zIndex:V(wd)(a,V(t),V(o))})},[H(V(Ff),{id:a.id},null,8,["id"])],4))),128)),H(V(Yf))],64))}}),Jf=ye({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:r,multiSelectionActive:i,emits:a,removeSelectedNodes:l,addSelectedNodes:s,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:f,elevateNodesOnSelect:p,disableKeyboardA11y:b,ariaLiveMessage:_,snapToGrid:m,snapGrid:y,nodeDragThreshold:v,nodesDraggable:x,elementsSelectable:S,nodesConnectable:P,nodesFocusable:R}=xe(),$=se(null);Ct(ta,$),Ct(ea,e.id);const W=Tt(Tn),j=jt(),A=ia(),{node:E,parentNode:J}=ra(e.id),te=Ee(()=>typeof E.draggable>"u"?x.value:E.draggable),w=Ee(()=>typeof E.selectable>"u"?S.value:E.selectable),O=Ee(()=>typeof E.connectable>"u"?P.value:E.connectable),C=Ee(()=>typeof E.focusable>"u"?R.value:E.focusable),M=Ee(()=>!!E.dimensions.width&&!!E.dimensions.height),T=ie(()=>{const h=E.type||"default",I=W==null?void 0:W[`node-${h}`];if(I)return I;let N=E.template||d.value[h];if(typeof N=="string"&&j){const k=Object.keys(j.appContext.components);k&&k.includes(h)&&(N=ge(h,!1))}return N&&typeof N!="string"?N:(a.error(new Me(ke.NODE_TYPE_MISSING,N)),!1)}),{emit:D,on:z}=Ad(E,a),G=na({id:e.id,el:$,disabled:()=>!te.value,selectable:w,dragHandle:()=>E.dragHandle,onStart(h){D.dragStart(h)},onDrag(h){D.drag(h)},onStop(h){D.dragStop(h)},onClick(h){q(h)}}),ne=ie(()=>E.class instanceof Function?E.class(E):E.class),U=ie(()=>{const h=(E.style instanceof Function?E.style(E):E.style)||{},I=E.width instanceof Function?E.width(E):E.width,N=E.height instanceof Function?E.height(E):E.height;return I&&(h.width=typeof I=="string"?I:`${I}px`),N&&(h.height=typeof N=="string"?N:`${N}px`),h}),B=Ee(()=>Number(E.zIndex??U.value.zIndex??0));return c(h=>{(h.includes(e.id)||!h.length)&&de()}),Je(()=>{ve(()=>E.hidden,(h=!1,I,N)=>{!h&&$.value&&(e.resizeObserver.observe($.value),N(()=>{$.value&&e.resizeObserver.unobserve($.value)}))},{immediate:!0,flush:"post"})}),ve([()=>E.type,()=>E.sourcePosition,()=>E.targetPosition],()=>{qe(()=>{u([{id:e.id,nodeElement:$.value,forceUpdate:!0}])})}),ve([()=>E.position.x,()=>E.position.y,()=>{var h;return(h=J.value)==null?void 0:h.computedPosition.x},()=>{var h;return(h=J.value)==null?void 0:h.computedPosition.y},()=>{var h;return(h=J.value)==null?void 0:h.computedPosition.z},B,()=>E.selected,()=>E.dimensions.height,()=>E.dimensions.width,()=>{var h;return(h=J.value)==null?void 0:h.dimensions.height},()=>{var h;return(h=J.value)==null?void 0:h.dimensions.width}],([h,I,N,k,L,Y])=>{const re={x:h,y:I,z:Y+(p.value&&E.selected?1e3:0)};typeof N<"u"&&typeof k<"u"?E.computedPosition=pd({x:N,y:k,z:L},re):E.computedPosition=re},{flush:"post",immediate:!0}),ve([()=>E.extent,f],([h,I],[N,k])=>{(h!==N||I!==k)&&K()}),E.extent==="parent"||typeof E.extent=="object"&&"range"in E.extent&&E.extent.range==="parent"?io(()=>M).toBe(!0).then(K):K(),()=>E.hidden?null:me("div",{ref:$,"data-id":E.id,class:["vue-flow__node",`vue-flow__node-${T.value===!1?"default":E.type||"default"}`,{[n.value]:te.value,dragging:G==null?void 0:G.value,draggable:te.value,selected:E.selected,selectable:w.value,parent:E.isParent},ne.value],style:{visibility:M.value?"visible":"hidden",zIndex:E.computedPosition.z??B.value,transform:`translate(${E.computedPosition.x}px,${E.computedPosition.y}px)`,pointerEvents:w.value||te.value?"all":"none",...U.value},tabIndex:C.value?0:void 0,role:C.value?"button":void 0,"aria-describedby":b.value?void 0:`${Ri}-${t}`,"aria-label":E.ariaLabel,onMouseenter:ue,onMousemove:fe,onMouseleave:oe,onContextmenu:ae,onClick:q,onDblclick:Z,onKeydown:g},[me(T.value===!1?d.value.default:T.value,{id:E.id,type:E.type,data:E.data,events:{...E.events,...z},selected:E.selected,resizing:E.resizing,dragging:G.value,connectable:O.value,position:E.computedPosition,dimensions:E.dimensions,isValidTargetPos:E.isValidTargetPos,isValidSourcePos:E.isValidSourcePos,parent:E.parentNode,parentNodeId:E.parentNode,zIndex:E.computedPosition.z??B.value,targetPosition:E.targetPosition,sourcePosition:E.sourcePosition,label:E.label,dragHandle:E.dragHandle,onUpdateNodeInternals:de})]);function K(){const h=E.computedPosition;m.value&&(h.x=y.value[0]*Math.round(h.x/y.value[0]),h.y=y.value[1]*Math.round(h.y/y.value[1]));const{computedPosition:I,position:N}=$o(E,h,a.error,f.value,J.value);(E.computedPosition.x!==I.x||E.computedPosition.y!==I.y)&&(E.computedPosition={...E.computedPosition,...I}),(E.position.x!==N.x||E.position.y!==N.y)&&(E.position=N)}function de(){$.value&&u([{id:e.id,nodeElement:$.value,forceUpdate:!0}])}function ue(h){G!=null&&G.value||D.mouseEnter({event:h,node:E})}function fe(h){G!=null&&G.value||D.mouseMove({event:h,node:E})}function oe(h){G!=null&&G.value||D.mouseLeave({event:h,node:E})}function ae(h){return D.contextMenu({event:h,node:E})}function Z(h){return D.doubleClick({event:h,node:E})}function q(h){w.value&&(!o.value||!te.value||v.value>0)&&_o(E,i.value,s,l,r,!1,$.value),D.click({event:h,node:E})}function g(h){if(!(vo(h)||b.value))if(Bi.includes(h.key)&&w.value){const I=h.key==="Escape";_o(E,i.value,s,l,r,I,$.value)}else te.value&&E.selected&&kt[h.key]&&(_.value=`Moved selected node ${h.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~E.position.x}, y: ${~~E.position.y}`,A({x:kt[h.key].x,y:kt[h.key].y},h.shiftKey))}}}),eh=Jf;function th(e={includeHiddenNodes:!1}){const{nodes:t}=xe();return ie(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const nh={class:"vue-flow__nodes vue-flow__container"},oh={name:"Nodes",compatConfig:{MODE:3}},rh=ye({...oh,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=xe(),r=th(),i=se();return ve(r,a=>{a&&qe(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),Je(()=>{i.value=new ResizeObserver(a=>{const l=a.map(s=>({id:s.target.getAttribute("data-id"),nodeElement:s.target,forceUpdate:!0}));qe(()=>n(l))})}),oi(()=>{var a;return(a=i.value)==null?void 0:a.disconnect()}),(a,l)=>(ee(),ce("div",nh,[i.value?(ee(!0),ce(Ve,{key:0},vt(V(t),(s,u,c,d)=>{const f=[s.id];if(d&&d.key===s.id&&Ja(d,f))return d;const p=(ee(),Te(V(eh),{id:s.id,key:s.id,"resize-observer":i.value},null,8,["id","resize-observer"]));return p.memo=f,p},l,0),128)):Re("",!0)]))}});function ih(){const{emits:e}=xe();Je(()=>{if(Ji()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new Me(ke.MISSING_STYLES))}})}const ah=Ie("div",{class:"vue-flow__edge-labels"},null,-1),lh={name:"VueFlow",compatConfig:{MODE:3}},sh=ye({...lh,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,r=Ka(),i=zn(o,"modelValue",n),a=zn(o,"nodes",n),l=zn(o,"edges",n),s=xe(o),u=zd({modelValue:i,nodes:a,edges:l},o,s);return Ld(n,s.hooks),Rf(),ih(),Ct(Tn,r),ei(()=>{u()}),t(s),(c,d)=>(ee(),ce("div",{ref:V(s).vueFlowRef,class:"vue-flow"},[H(Tf,null,{default:Q(()=>[H(Qf),ah,H(rh),lt(c.$slots,"zoom-pane")]),_:3}),lt(c.$slots,"default"),H(Vf)],512))}});var uh="\0",ut="\0",$r="";let ch=class{constructor(t){be(this,"_isDirected",!0);be(this,"_isMultigraph",!1);be(this,"_isCompound",!1);be(this,"_label");be(this,"_defaultNodeLabelFn",()=>{});be(this,"_defaultEdgeLabelFn",()=>{});be(this,"_nodes",{});be(this,"_in",{});be(this,"_preds",{});be(this,"_out",{});be(this,"_sucs",{});be(this,"_edgeObjs",{});be(this,"_edgeLabels",{});be(this,"_nodeCount",0);be(this,"_edgeCount",0);be(this,"_parent");be(this,"_children");t&&(this._isDirected=Object.hasOwn(t,"directed")?t.directed:!0,this._isMultigraph=Object.hasOwn(t,"multigraph")?t.multigraph:!1,this._isCompound=Object.hasOwn(t,"compound")?t.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[ut]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return this._defaultNodeLabelFn=t,typeof t!="function"&&(this._defaultNodeLabelFn=()=>t),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var t=this;return this.nodes().filter(n=>Object.keys(t._in[n]).length===0)}sinks(){var t=this;return this.nodes().filter(n=>Object.keys(t._out[n]).length===0)}setNodes(t,n){var o=arguments,r=this;return t.forEach(function(i){o.length>1?r.setNode(i,n):r.setNode(i)}),this}setNode(t,n){return Object.hasOwn(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=n),this):(this._nodes[t]=arguments.length>1?n:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=ut,this._children[t]={},this._children[ut][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}node(t){return this._nodes[t]}hasNode(t){return Object.hasOwn(this._nodes,t)}removeNode(t){var n=this;if(Object.hasOwn(this._nodes,t)){var o=r=>n.removeEdge(n._edgeObjs[r]);delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],this.children(t).forEach(function(r){n.setParent(r)}),delete this._children[t]),Object.keys(this._in[t]).forEach(o),delete this._in[t],delete this._preds[t],Object.keys(this._out[t]).forEach(o),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n===void 0)n=ut;else{n+="";for(var o=n;o!==void 0;o=this.parent(o))if(o===t)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");this.setNode(n)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=n,this._children[n][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var n=this._parent[t];if(n!==ut)return n}}children(t=ut){if(this._isCompound){var n=this._children[t];if(n)return Object.keys(n)}else{if(t===ut)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var n=this._preds[t];if(n)return Object.keys(n)}successors(t){var n=this._sucs[t];if(n)return Object.keys(n)}neighbors(t){var n=this.predecessors(t);if(n){const r=new Set(n);for(var o of this.successors(t))r.add(o);return Array.from(r.values())}}isLeaf(t){var n;return this.isDirected()?n=this.successors(t):n=this.neighbors(t),n.length===0}filterNodes(t){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var o=this;Object.entries(this._nodes).forEach(function([a,l]){t(a)&&n.setNode(a,l)}),Object.values(this._edgeObjs).forEach(function(a){n.hasNode(a.v)&&n.hasNode(a.w)&&n.setEdge(a,o.edge(a))});var r={};function i(a){var l=o.parent(a);return l===void 0||n.hasNode(l)?(r[a]=l,l):l in r?r[l]:i(l)}return this._isCompound&&n.nodes().forEach(a=>n.setParent(a,i(a))),n}setDefaultEdgeLabel(t){return this._defaultEdgeLabelFn=t,typeof t!="function"&&(this._defaultEdgeLabelFn=()=>t),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(t,n){var o=this,r=arguments;return t.reduce(function(i,a){return r.length>1?o.setEdge(i,a,n):o.setEdge(i,a),a}),this}setEdge(){var t,n,o,r,i=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(t=a.v,n=a.w,o=a.name,arguments.length===2&&(r=arguments[1],i=!0)):(t=a,n=arguments[1],o=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),t=""+t,n=""+n,o!==void 0&&(o=""+o);var l=zt(this._isDirected,t,n,o);if(Object.hasOwn(this._edgeLabels,l))return i&&(this._edgeLabels[l]=r),this;if(o!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(n),this._edgeLabels[l]=i?r:this._defaultEdgeLabelFn(t,n,o);var s=dh(this._isDirected,t,n,o);return t=s.v,n=s.w,Object.freeze(s),this._edgeObjs[l]=s,Pr(this._preds[n],t),Pr(this._sucs[t],n),this._in[n][l]=s,this._out[t][l]=s,this._edgeCount++,this}edge(t,n,o){var r=arguments.length===1?Un(this._isDirected,arguments[0]):zt(this._isDirected,t,n,o);return this._edgeLabels[r]}edgeAsObj(){const t=this.edge(...arguments);return typeof t!="object"?{label:t}:t}hasEdge(t,n,o){var r=arguments.length===1?Un(this._isDirected,arguments[0]):zt(this._isDirected,t,n,o);return Object.hasOwn(this._edgeLabels,r)}removeEdge(t,n,o){var r=arguments.length===1?Un(this._isDirected,arguments[0]):zt(this._isDirected,t,n,o),i=this._edgeObjs[r];return i&&(t=i.v,n=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],Dr(this._preds[n],t),Dr(this._sucs[t],n),delete this._in[n][r],delete this._out[t][r],this._edgeCount--),this}inEdges(t,n){var o=this._in[t];if(o){var r=Object.values(o);return n?r.filter(i=>i.v===n):r}}outEdges(t,n){var o=this._out[t];if(o){var r=Object.values(o);return n?r.filter(i=>i.w===n):r}}nodeEdges(t,n){var o=this.inEdges(t,n);if(o)return o.concat(this.outEdges(t,n))}};function Pr(e,t){e[t]?e[t]++:e[t]=1}function Dr(e,t){--e[t]||delete e[t]}function zt(e,t,n,o){var r=""+t,i=""+n;if(!e&&r>i){var a=r;r=i,i=a}return r+$r+i+$r+(o===void 0?uh:o)}function dh(e,t,n,o){var r=""+t,i=""+n;if(!e&&r>i){var a=r;r=i,i=a}var l={v:r,w:i};return o&&(l.name=o),l}function Un(e,t){return zt(e,t.v,t.w,t.name)}var Vo=ch,fh="2.2.4",hh={Graph:Vo,version:fh},ph=Vo,gh={write:vh,read:_h};function vh(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:mh(e),edges:yh(e)};return e.graph()!==void 0&&(t.value=structuredClone(e.graph())),t}function mh(e){return e.nodes().map(function(t){var n=e.node(t),o=e.parent(t),r={v:t};return n!==void 0&&(r.value=n),o!==void 0&&(r.parent=o),r})}function yh(e){return e.edges().map(function(t){var n=e.edge(t),o={v:t.v,w:t.w};return t.name!==void 0&&(o.name=t.name),n!==void 0&&(o.value=n),o})}function _h(e){var t=new ph(e.options).setGraph(e.value);return e.nodes.forEach(function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),e.edges.forEach(function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}var wh=bh;function bh(e){var t={},n=[],o;function r(i){Object.hasOwn(t,i)||(t[i]=!0,o.push(i),e.successors(i).forEach(r),e.predecessors(i).forEach(r))}return e.nodes().forEach(function(i){o=[],r(i),o.length&&n.push(o)}),n}let Eh=class{constructor(){be(this,"_arr",[]);be(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(t){return t.key})}has(t){return Object.hasOwn(this._keyIndices,t)}priority(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(t,n){var o=this._keyIndices;if(t=String(t),!Object.hasOwn(o,t)){var r=this._arr,i=r.length;return o[t]=i,r.push({key:t,priority:n}),this._decrease(i),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key}decrease(t,n){var o=this._keyIndices[t];if(n>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[o].priority+" New: "+n);this._arr[o].priority=n,this._decrease(o)}_heapify(t){var n=this._arr,o=2*t,r=o+1,i=t;o<n.length&&(i=n[o].priority<n[i].priority?o:i,r<n.length&&(i=n[r].priority<n[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))}_decrease(t){for(var n=this._arr,o=n[t].priority,r;t!==0&&(r=t>>1,!(n[r].priority<o));)this._swap(t,r),t=r}_swap(t,n){var o=this._arr,r=this._keyIndices,i=o[t],a=o[n];o[t]=a,o[n]=i,r[a.key]=t,r[i.key]=n}};var fa=Eh,xh=fa,ha=Nh,Sh=()=>1;function Nh(e,t,n,o){return kh(e,String(t),n||Sh,o||function(r){return e.outEdges(r)})}function kh(e,t,n,o){var r={},i=new xh,a,l,s=function(u){var c=u.v!==a?u.v:u.w,d=r[c],f=n(u),p=l.distance+f;if(f<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+u+" Weight: "+f);p<d.distance&&(d.distance=p,d.predecessor=a,i.decrease(c,p))};for(e.nodes().forEach(function(u){var c=u===t?0:Number.POSITIVE_INFINITY;r[u]={distance:c},i.add(u,c)});i.size()>0&&(a=i.removeMin(),l=r[a],l.distance!==Number.POSITIVE_INFINITY);)o(a).forEach(s);return r}var Ch=ha,Ih=Mh;function Mh(e,t,n){return e.nodes().reduce(function(o,r){return o[r]=Ch(e,r,t,n),o},{})}var pa=Oh;function Oh(e){var t=0,n=[],o={},r=[];function i(a){var l=o[a]={onStack:!0,lowlink:t,index:t++};if(n.push(a),e.successors(a).forEach(function(c){Object.hasOwn(o,c)?o[c].onStack&&(l.lowlink=Math.min(l.lowlink,o[c].index)):(i(c),l.lowlink=Math.min(l.lowlink,o[c].lowlink))}),l.lowlink===l.index){var s=[],u;do u=n.pop(),o[u].onStack=!1,s.push(u);while(a!==u);r.push(s)}}return e.nodes().forEach(function(a){Object.hasOwn(o,a)||i(a)}),r}var Th=pa,$h=Ph;function Ph(e){return Th(e).filter(function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})}var Dh=Vh,Ah=()=>1;function Vh(e,t,n){return Rh(e,t||Ah,n||function(o){return e.outEdges(o)})}function Rh(e,t,n){var o={},r=e.nodes();return r.forEach(function(i){o[i]={},o[i][i]={distance:0},r.forEach(function(a){i!==a&&(o[i][a]={distance:Number.POSITIVE_INFINITY})}),n(i).forEach(function(a){var l=a.v===i?a.w:a.v,s=t(a);o[i][l]={distance:s,predecessor:i}})}),r.forEach(function(i){var a=o[i];r.forEach(function(l){var s=o[l];r.forEach(function(u){var c=s[i],d=a[u],f=s[u],p=c.distance+d.distance;p<f.distance&&(f.distance=p,f.predecessor=d.predecessor)})})}),o}function ga(e){var t={},n={},o=[];function r(i){if(Object.hasOwn(n,i))throw new bo;Object.hasOwn(t,i)||(n[i]=!0,t[i]=!0,e.predecessors(i).forEach(r),delete n[i],o.push(i))}if(e.sinks().forEach(r),Object.keys(t).length!==e.nodeCount())throw new bo;return o}class bo extends Error{constructor(){super(...arguments)}}var va=ga;ga.CycleException=bo;var Ar=va,zh=Bh;function Bh(e){try{Ar(e)}catch(t){if(t instanceof Ar.CycleException)return!1;throw t}return!0}var ma=Lh;function Lh(e,t,n){Array.isArray(t)||(t=[t]);var o=e.isDirected()?l=>e.successors(l):l=>e.neighbors(l),r=n==="post"?Fh:Gh,i=[],a={};return t.forEach(l=>{if(!e.hasNode(l))throw new Error("Graph does not have node: "+l);r(l,o,a,i)}),i}function Fh(e,t,n,o){for(var r=[[e,!1]];r.length>0;){var i=r.pop();i[1]?o.push(i[0]):Object.hasOwn(n,i[0])||(n[i[0]]=!0,r.push([i[0],!0]),ya(t(i[0]),a=>r.push([a,!1])))}}function Gh(e,t,n,o){for(var r=[e];r.length>0;){var i=r.pop();Object.hasOwn(n,i)||(n[i]=!0,o.push(i),ya(t(i),a=>r.push(a)))}}function ya(e,t){for(var n=e.length;n--;)t(e[n],n,e);return e}var Hh=ma,Yh=Xh;function Xh(e,t){return Hh(e,t,"post")}var Wh=ma,jh=Uh;function Uh(e,t){return Wh(e,t,"pre")}var Zh=Vo,Kh=fa,qh=Qh;function Qh(e,t){var n=new Zh,o={},r=new Kh,i;function a(s){var u=s.v===i?s.w:s.v,c=r.priority(u);if(c!==void 0){var d=t(s);d<c&&(o[u]=i,r.decrease(u,d))}}if(e.nodeCount()===0)return n;e.nodes().forEach(function(s){r.add(s,Number.POSITIVE_INFINITY),n.setNode(s)}),r.decrease(e.nodes()[0],0);for(var l=!1;r.size()>0;){if(i=r.removeMin(),Object.hasOwn(o,i))n.setEdge(i,o[i]);else{if(l)throw new Error("Input graph is not connected: "+e);l=!0}e.nodeEdges(i).forEach(a)}return n}var Jh={components:wh,dijkstra:ha,dijkstraAll:Ih,findCycles:$h,floydWarshall:Dh,isAcyclic:zh,postorder:Yh,preorder:jh,prim:qh,tarjan:pa,topsort:va},Vr=hh,Ge={Graph:Vr.Graph,json:gh,alg:Jh,version:Vr.version};let ep=class{constructor(){let t={};t._next=t._prev=t,this._sentinel=t}dequeue(){let t=this._sentinel,n=t._prev;if(n!==t)return Rr(n),n}enqueue(t){let n=this._sentinel;t._prev&&t._next&&Rr(t),t._next=n._next,n._next._prev=t,n._next=t,t._prev=n}toString(){let t=[],n=this._sentinel,o=n._prev;for(;o!==n;)t.push(JSON.stringify(o,tp)),o=o._prev;return"["+t.join(", ")+"]"}};function Rr(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function tp(e,t){if(e!=="_next"&&e!=="_prev")return t}var np=ep;let op=Ge.Graph,rp=np;var ip=lp;let ap=()=>1;function lp(e,t){if(e.nodeCount()<=1)return[];let n=up(e,t||ap);return sp(n.graph,n.buckets,n.zeroIdx).flatMap(r=>e.outEdges(r.v,r.w))}function sp(e,t,n){let o=[],r=t[t.length-1],i=t[0],a;for(;e.nodeCount();){for(;a=i.dequeue();)Zn(e,t,n,a);for(;a=r.dequeue();)Zn(e,t,n,a);if(e.nodeCount()){for(let l=t.length-2;l>0;--l)if(a=t[l].dequeue(),a){o=o.concat(Zn(e,t,n,a,!0));break}}}return o}function Zn(e,t,n,o,r){let i=r?[]:void 0;return e.inEdges(o.v).forEach(a=>{let l=e.edge(a),s=e.node(a.v);r&&i.push({v:a.v,w:a.w}),s.out-=l,Eo(t,n,s)}),e.outEdges(o.v).forEach(a=>{let l=e.edge(a),s=a.w,u=e.node(s);u.in-=l,Eo(t,n,u)}),e.removeNode(o.v),i}function up(e,t){let n=new op,o=0,r=0;e.nodes().forEach(l=>{n.setNode(l,{v:l,in:0,out:0})}),e.edges().forEach(l=>{let s=n.edge(l.v,l.w)||0,u=t(l),c=s+u;n.setEdge(l.v,l.w,c),r=Math.max(r,n.node(l.v).out+=u),o=Math.max(o,n.node(l.w).in+=u)});let i=cp(r+o+3).map(()=>new rp),a=o+1;return n.nodes().forEach(l=>{Eo(i,a,n.node(l))}),{graph:n,buckets:i,zeroIdx:a}}function Eo(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}function cp(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}let _a=Ge.Graph;var Ce={addBorderNode:_p,addDummyNode:wa,applyWithChunking:Vn,asNonCompoundGraph:fp,buildLayerMatrix:vp,intersectRect:gp,mapValues:kp,maxRank:Ea,normalizeRanks:mp,notime:xp,partition:bp,pick:Np,predecessorWeights:pp,range:Sa,removeEmptyRanks:yp,simplify:dp,successorWeights:hp,time:Ep,uniqueId:xa,zipObject:Ro};function wa(e,t,n,o){let r;do r=xa(o);while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r}function dp(e){let t=new _a().setGraph(e.graph());return e.nodes().forEach(n=>t.setNode(n,e.node(n))),e.edges().forEach(n=>{let o=t.edge(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+r.weight,minlen:Math.max(o.minlen,r.minlen)})}),t}function fp(e){let t=new _a({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{e.children(n).length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdge(n,e.edge(n))}),t}function hp(e){let t=e.nodes().map(n=>{let o={};return e.outEdges(n).forEach(r=>{o[r.w]=(o[r.w]||0)+e.edge(r).weight}),o});return Ro(e.nodes(),t)}function pp(e){let t=e.nodes().map(n=>{let o={};return e.inEdges(n).forEach(r=>{o[r.v]=(o[r.v]||0)+e.edge(r).weight}),o});return Ro(e.nodes(),t)}function gp(e,t){let n=e.x,o=e.y,r=t.x-n,i=t.y-o,a=e.width/2,l=e.height/2;if(!r&&!i)throw new Error("Not possible to find intersection inside of the rectangle");let s,u;return Math.abs(i)*a>Math.abs(r)*l?(i<0&&(l=-l),s=l*r/i,u=l):(r<0&&(a=-a),s=a,u=a*i/r),{x:n+s,y:o+u}}function vp(e){let t=Sa(Ea(e)+1).map(()=>[]);return e.nodes().forEach(n=>{let o=e.node(n),r=o.rank;r!==void 0&&(t[r][o.order]=n)}),t}function mp(e){let t=e.nodes().map(o=>{let r=e.node(o).rank;return r===void 0?Number.MAX_VALUE:r}),n=Vn(Math.min,t);e.nodes().forEach(o=>{let r=e.node(o);Object.hasOwn(r,"rank")&&(r.rank-=n)})}function yp(e){let t=e.nodes().map(a=>e.node(a).rank),n=Vn(Math.min,t),o=[];e.nodes().forEach(a=>{let l=e.node(a).rank-n;o[l]||(o[l]=[]),o[l].push(a)});let r=0,i=e.graph().nodeRankFactor;Array.from(o).forEach((a,l)=>{a===void 0&&l%i!==0?--r:a!==void 0&&r&&a.forEach(s=>e.node(s).rank+=r)})}function _p(e,t,n,o){let r={width:0,height:0};return arguments.length>=4&&(r.rank=n,r.order=o),wa(e,"border",r,t)}function wp(e,t=ba){const n=[];for(let o=0;o<e.length;o+=t){const r=e.slice(o,o+t);n.push(r)}return n}const ba=65535;function Vn(e,t){if(t.length>ba){const n=wp(t);return e.apply(null,n.map(o=>e.apply(null,o)))}else return e.apply(null,t)}function Ea(e){const n=e.nodes().map(o=>{let r=e.node(o).rank;return r===void 0?Number.MIN_VALUE:r});return Vn(Math.max,n)}function bp(e,t){let n={lhs:[],rhs:[]};return e.forEach(o=>{t(o)?n.lhs.push(o):n.rhs.push(o)}),n}function Ep(e,t){let n=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-n)+"ms")}}function xp(e,t){return t()}let Sp=0;function xa(e){var t=++Sp;return toString(e)+t}function Sa(e,t,n=1){t==null&&(t=e,e=0);let o=i=>i<t;n<0&&(o=i=>t<i);const r=[];for(let i=e;o(i);i+=n)r.push(i);return r}function Np(e,t){const n={};for(const o of t)e[o]!==void 0&&(n[o]=e[o]);return n}function kp(e,t){let n=t;return typeof t=="string"&&(n=o=>o[t]),Object.entries(e).reduce((o,[r,i])=>(o[r]=n(i,r),o),{})}function Ro(e,t){return e.reduce((n,o,r)=>(n[o]=t[r],n),{})}let Cp=ip,Ip=Ce.uniqueId;var Mp={run:Op,undo:$p};function Op(e){(e.graph().acyclicer==="greedy"?Cp(e,n(e)):Tp(e)).forEach(o=>{let r=e.edge(o);e.removeEdge(o),r.forwardName=o.name,r.reversed=!0,e.setEdge(o.w,o.v,r,Ip("rev"))});function n(o){return r=>o.edge(r).weight}}function Tp(e){let t=[],n={},o={};function r(i){Object.hasOwn(o,i)||(o[i]=!0,n[i]=!0,e.outEdges(i).forEach(a=>{Object.hasOwn(n,a.w)?t.push(a):r(a.w)}),delete n[i])}return e.nodes().forEach(r),t}function $p(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.reversed){e.removeEdge(t);let o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}})}let Pp=Ce;var Dp={run:Ap,undo:Rp};function Ap(e){e.graph().dummyChains=[],e.edges().forEach(t=>Vp(e,t))}function Vp(e,t){let n=t.v,o=e.node(n).rank,r=t.w,i=e.node(r).rank,a=t.name,l=e.edge(t),s=l.labelRank;if(i===o+1)return;e.removeEdge(t);let u,c,d;for(d=0,++o;o<i;++d,++o)l.points=[],c={width:0,height:0,edgeLabel:l,edgeObj:t,rank:o},u=Pp.addDummyNode(e,"edge",c,"_d"),o===s&&(c.width=l.width,c.height=l.height,c.dummy="edge-label",c.labelpos=l.labelpos),e.setEdge(n,u,{weight:l.weight},a),d===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,r,{weight:l.weight},a)}function Rp(e){e.graph().dummyChains.forEach(t=>{let n=e.node(t),o=n.edgeLabel,r;for(e.setEdge(n.edgeObj,o);n.dummy;)r=e.successors(t)[0],e.removeNode(t),o.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),t=r,n=e.node(t)})}const{applyWithChunking:zp}=Ce;var Rn={longestPath:Bp,slack:Lp};function Bp(e){var t={};function n(o){var r=e.node(o);if(Object.hasOwn(t,o))return r.rank;t[o]=!0;let i=e.outEdges(o).map(l=>l==null?Number.POSITIVE_INFINITY:n(l.w)-e.edge(l).minlen);var a=zp(Math.min,i);return a===Number.POSITIVE_INFINITY&&(a=0),r.rank=a}e.sources().forEach(n)}function Lp(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Fp=Ge.Graph,bn=Rn.slack,Na=Gp;function Gp(e){var t=new Fp({directed:!1}),n=e.nodes()[0],o=e.nodeCount();t.setNode(n,{});for(var r,i;Hp(t,e)<o;)r=Yp(t,e),i=t.hasNode(r.v)?bn(e,r):-bn(e,r),Xp(t,e,i);return t}function Hp(e,t){function n(o){t.nodeEdges(o).forEach(r=>{var i=r.v,a=o===i?r.w:i;!e.hasNode(a)&&!bn(t,r)&&(e.setNode(a,{}),e.setEdge(o,a,{}),n(a))})}return e.nodes().forEach(n),e.nodeCount()}function Yp(e,t){return t.edges().reduce((o,r)=>{let i=Number.POSITIVE_INFINITY;return e.hasNode(r.v)!==e.hasNode(r.w)&&(i=bn(t,r)),i<o[0]?[i,r]:o},[Number.POSITIVE_INFINITY,null])[1]}function Xp(e,t,n){e.nodes().forEach(o=>t.node(o).rank+=n)}var Wp=Na,zr=Rn.slack,jp=Rn.longestPath,Up=Ge.alg.preorder,Zp=Ge.alg.postorder,Kp=Ce.simplify,qp=wt;wt.initLowLimValues=Bo;wt.initCutValues=zo;wt.calcCutValue=ka;wt.leaveEdge=Ia;wt.enterEdge=Ma;wt.exchangeEdges=Oa;function wt(e){e=Kp(e),jp(e);var t=Wp(e);Bo(t),zo(t,e);for(var n,o;n=Ia(t);)o=Ma(t,e,n),Oa(t,e,n,o)}function zo(e,t){var n=Zp(e,e.nodes());n=n.slice(0,n.length-1),n.forEach(o=>Qp(e,t,o))}function Qp(e,t,n){var o=e.node(n),r=o.parent;e.edge(n,r).cutvalue=ka(e,t,n)}function ka(e,t,n){var o=e.node(n),r=o.parent,i=!0,a=t.edge(n,r),l=0;return a||(i=!1,a=t.edge(r,n)),l=a.weight,t.nodeEdges(n).forEach(s=>{var u=s.v===n,c=u?s.w:s.v;if(c!==r){var d=u===i,f=t.edge(s).weight;if(l+=d?f:-f,eg(e,n,c)){var p=e.edge(n,c).cutvalue;l+=d?-p:p}}}),l}function Bo(e,t){arguments.length<2&&(t=e.nodes()[0]),Ca(e,{},1,t)}function Ca(e,t,n,o,r){var i=n,a=e.node(o);return t[o]=!0,e.neighbors(o).forEach(l=>{Object.hasOwn(t,l)||(n=Ca(e,t,n,l,o))}),a.low=i,a.lim=n++,r?a.parent=r:delete a.parent,n}function Ia(e){return e.edges().find(t=>e.edge(t).cutvalue<0)}function Ma(e,t,n){var o=n.v,r=n.w;t.hasEdge(o,r)||(o=n.w,r=n.v);var i=e.node(o),a=e.node(r),l=i,s=!1;i.lim>a.lim&&(l=a,s=!0);var u=t.edges().filter(c=>s===Br(e,e.node(c.v),l)&&s!==Br(e,e.node(c.w),l));return u.reduce((c,d)=>zr(t,d)<zr(t,c)?d:c)}function Oa(e,t,n,o){var r=n.v,i=n.w;e.removeEdge(r,i),e.setEdge(o.v,o.w,{}),Bo(e),zo(e,t),Jp(e,t)}function Jp(e,t){var n=e.nodes().find(r=>!t.node(r).parent),o=Up(e,n);o=o.slice(1),o.forEach(r=>{var i=e.node(r).parent,a=t.edge(r,i),l=!1;a||(a=t.edge(i,r),l=!0),t.node(r).rank=t.node(i).rank+(l?a.minlen:-a.minlen)})}function eg(e,t,n){return e.hasEdge(t,n)}function Br(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var tg=Rn,Ta=tg.longestPath,ng=Na,og=qp,rg=ig;function ig(e){switch(e.graph().ranker){case"network-simplex":Lr(e);break;case"tight-tree":lg(e);break;case"longest-path":ag(e);break;default:Lr(e)}}var ag=Ta;function lg(e){Ta(e),ng(e)}function Lr(e){og(e)}var sg=ug;function ug(e){let t=dg(e);e.graph().dummyChains.forEach(n=>{let o=e.node(n),r=o.edgeObj,i=cg(e,t,r.v,r.w),a=i.path,l=i.lca,s=0,u=a[s],c=!0;for(;n!==r.w;){if(o=e.node(n),c){for(;(u=a[s])!==l&&e.node(u).maxRank<o.rank;)s++;u===l&&(c=!1)}if(!c){for(;s<a.length-1&&e.node(u=a[s+1]).minRank<=o.rank;)s++;u=a[s]}e.setParent(n,u),n=e.successors(n)[0]}})}function cg(e,t,n,o){let r=[],i=[],a=Math.min(t[n].low,t[o].low),l=Math.max(t[n].lim,t[o].lim),s,u;s=n;do s=e.parent(s),r.push(s);while(s&&(t[s].low>a||l>t[s].lim));for(u=s,s=o;(s=e.parent(s))!==u;)i.push(s);return{path:r.concat(i.reverse()),lca:u}}function dg(e){let t={},n=0;function o(r){let i=n;e.children(r).forEach(o),t[r]={low:i,lim:n++}}return e.children().forEach(o),t}let En=Ce;var fg={run:hg,cleanup:vg};function hg(e){let t=En.addDummyNode(e,"root",{},"_root"),n=pg(e),o=Object.values(n),r=En.applyWithChunking(Math.max,o)-1,i=2*r+1;e.graph().nestingRoot=t,e.edges().forEach(l=>e.edge(l).minlen*=i);let a=gg(e)+1;e.children().forEach(l=>$a(e,t,i,a,r,n,l)),e.graph().nodeRankFactor=i}function $a(e,t,n,o,r,i,a){let l=e.children(a);if(!l.length){a!==t&&e.setEdge(t,a,{weight:0,minlen:n});return}let s=En.addBorderNode(e,"_bt"),u=En.addBorderNode(e,"_bb"),c=e.node(a);e.setParent(s,a),c.borderTop=s,e.setParent(u,a),c.borderBottom=u,l.forEach(d=>{$a(e,t,n,o,r,i,d);let f=e.node(d),p=f.borderTop?f.borderTop:d,b=f.borderBottom?f.borderBottom:d,_=f.borderTop?o:2*o,m=p!==b?1:r-i[a]+1;e.setEdge(s,p,{weight:_,minlen:m,nestingEdge:!0}),e.setEdge(b,u,{weight:_,minlen:m,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,s,{weight:0,minlen:r+i[a]})}function pg(e){var t={};function n(o,r){var i=e.children(o);i&&i.length&&i.forEach(a=>n(a,r+1)),t[o]=r}return e.children().forEach(o=>n(o,1)),t}function gg(e){return e.edges().reduce((t,n)=>t+e.edge(n).weight,0)}function vg(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{var o=e.edge(n);o.nestingEdge&&e.removeEdge(n)})}let mg=Ce;var yg=_g;function _g(e){function t(n){let o=e.children(n),r=e.node(n);if(o.length&&o.forEach(t),Object.hasOwn(r,"minRank")){r.borderLeft=[],r.borderRight=[];for(let i=r.minRank,a=r.maxRank+1;i<a;++i)Fr(e,"borderLeft","_bl",n,r,i),Fr(e,"borderRight","_br",n,r,i)}}e.children().forEach(t)}function Fr(e,t,n,o,r,i){let a={width:0,height:0,rank:i,borderType:t},l=r[t][i-1],s=mg.addDummyNode(e,"border",a,n);r[t][i]=s,e.setParent(s,o),l&&e.setEdge(l,s,{weight:1})}var wg={adjust:bg,undo:Eg};function bg(e){let t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Pa(e)}function Eg(e){let t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&xg(e),(t==="lr"||t==="rl")&&(Sg(e),Pa(e))}function Pa(e){e.nodes().forEach(t=>Gr(e.node(t))),e.edges().forEach(t=>Gr(e.edge(t)))}function Gr(e){let t=e.width;e.width=e.height,e.height=t}function xg(e){e.nodes().forEach(t=>Kn(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(Kn),Object.hasOwn(n,"y")&&Kn(n)})}function Kn(e){e.y=-e.y}function Sg(e){e.nodes().forEach(t=>qn(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(qn),Object.hasOwn(n,"x")&&qn(n)})}function qn(e){let t=e.x;e.x=e.y,e.y=t}let Hr=Ce;var Ng=kg;function kg(e){let t={},n=e.nodes().filter(s=>!e.children(s).length),o=n.map(s=>e.node(s).rank),r=Hr.applyWithChunking(Math.max,o),i=Hr.range(r+1).map(()=>[]);function a(s){if(t[s])return;t[s]=!0;let u=e.node(s);i[u.rank].push(s),e.successors(s).forEach(a)}return n.sort((s,u)=>e.node(s).rank-e.node(u).rank).forEach(a),i}let Cg=Ce.zipObject;var Ig=Mg;function Mg(e,t){let n=0;for(let o=1;o<t.length;++o)n+=Og(e,t[o-1],t[o]);return n}function Og(e,t,n){let o=Cg(n,n.map((u,c)=>c)),r=t.flatMap(u=>e.outEdges(u).map(c=>({pos:o[c.w],weight:e.edge(c).weight})).sort((c,d)=>c.pos-d.pos)),i=1;for(;i<n.length;)i<<=1;let a=2*i-1;i-=1;let l=new Array(a).fill(0),s=0;return r.forEach(u=>{let c=u.pos+i;l[c]+=u.weight;let d=0;for(;c>0;)c%2&&(d+=l[c+1]),c=c-1>>1,l[c]+=u.weight;s+=u.weight*d}),s}var Tg=$g;function $g(e,t=[]){return t.map(n=>{let o=e.inEdges(n);if(o.length){let r=o.reduce((i,a)=>{let l=e.edge(a),s=e.node(a.v);return{sum:i.sum+l.weight*s.order,weight:i.weight+l.weight}},{sum:0,weight:0});return{v:n,barycenter:r.sum/r.weight,weight:r.weight}}else return{v:n}})}let Pg=Ce;var Dg=Ag;function Ag(e,t){let n={};e.forEach((r,i)=>{let a=n[r.v]={indegree:0,in:[],out:[],vs:[r.v],i};r.barycenter!==void 0&&(a.barycenter=r.barycenter,a.weight=r.weight)}),t.edges().forEach(r=>{let i=n[r.v],a=n[r.w];i!==void 0&&a!==void 0&&(a.indegree++,i.out.push(n[r.w]))});let o=Object.values(n).filter(r=>!r.indegree);return Vg(o)}function Vg(e){let t=[];function n(r){return i=>{i.merged||(i.barycenter===void 0||r.barycenter===void 0||i.barycenter>=r.barycenter)&&Rg(r,i)}}function o(r){return i=>{i.in.push(r),--i.indegree===0&&e.push(i)}}for(;e.length;){let r=e.pop();t.push(r),r.in.reverse().forEach(n(r)),r.out.forEach(o(r))}return t.filter(r=>!r.merged).map(r=>Pg.pick(r,["vs","i","barycenter","weight"]))}function Rg(e,t){let n=0,o=0;e.weight&&(n+=e.barycenter*e.weight,o+=e.weight),t.weight&&(n+=t.barycenter*t.weight,o+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/o,e.weight=o,e.i=Math.min(t.i,e.i),t.merged=!0}let zg=Ce;var Bg=Lg;function Lg(e,t){let n=zg.partition(e,c=>Object.hasOwn(c,"barycenter")),o=n.lhs,r=n.rhs.sort((c,d)=>d.i-c.i),i=[],a=0,l=0,s=0;o.sort(Fg(!!t)),s=Yr(i,r,s),o.forEach(c=>{s+=c.vs.length,i.push(c.vs),a+=c.barycenter*c.weight,l+=c.weight,s=Yr(i,r,s)});let u={vs:i.flat(!0)};return l&&(u.barycenter=a/l,u.weight=l),u}function Yr(e,t,n){let o;for(;t.length&&(o=t[t.length-1]).i<=n;)t.pop(),e.push(o.vs),n++;return n}function Fg(e){return(t,n)=>t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}let Gg=Tg,Hg=Dg,Yg=Bg;var Xg=Da;function Da(e,t,n,o){let r=e.children(t),i=e.node(t),a=i?i.borderLeft:void 0,l=i?i.borderRight:void 0,s={};a&&(r=r.filter(f=>f!==a&&f!==l));let u=Gg(e,r);u.forEach(f=>{if(e.children(f.v).length){let p=Da(e,f.v,n,o);s[f.v]=p,Object.hasOwn(p,"barycenter")&&jg(f,p)}});let c=Hg(u,n);Wg(c,s);let d=Yg(c,o);if(a&&(d.vs=[a,d.vs,l].flat(!0),e.predecessors(a).length)){let f=e.node(e.predecessors(a)[0]),p=e.node(e.predecessors(l)[0]);Object.hasOwn(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+p.order)/(d.weight+2),d.weight+=2}return d}function Wg(e,t){e.forEach(n=>{n.vs=n.vs.flatMap(o=>t[o]?t[o].vs:o)})}function jg(e,t){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)}let Ug=Ge.Graph,Zg=Ce;var Kg=qg;function qg(e,t,n){let o=Qg(e),r=new Ug({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(i=>e.node(i));return e.nodes().forEach(i=>{let a=e.node(i),l=e.parent(i);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(r.setNode(i),r.setParent(i,l||o),e[n](i).forEach(s=>{let u=s.v===i?s.w:s.v,c=r.edge(u,i),d=c!==void 0?c.weight:0;r.setEdge(u,i,{weight:e.edge(s).weight+d})}),Object.hasOwn(a,"minRank")&&r.setNode(i,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),r}function Qg(e){for(var t;e.hasNode(t=Zg.uniqueId("_root")););return t}var Jg=ev;function ev(e,t,n){let o={},r;n.forEach(i=>{let a=e.parent(i),l,s;for(;a;){if(l=e.parent(a),l?(s=o[l],o[l]=a):(s=r,r=a),s&&s!==a){t.setEdge(s,a);return}a=l}})}let tv=Ng,nv=Ig,ov=Xg,rv=Kg,iv=Jg,av=Ge.Graph,an=Ce;var lv=Aa;function Aa(e,t){if(t&&typeof t.customOrder=="function"){t.customOrder(e,Aa);return}let n=an.maxRank(e),o=Xr(e,an.range(1,n+1),"inEdges"),r=Xr(e,an.range(n-1,-1,-1),"outEdges"),i=tv(e);if(Wr(e,i),t&&t.disableOptimalOrderHeuristic)return;let a=Number.POSITIVE_INFINITY,l;for(let s=0,u=0;u<4;++s,++u){sv(s%2?o:r,s%4>=2),i=an.buildLayerMatrix(e);let c=nv(e,i);c<a&&(u=0,l=Object.assign({},i),a=c)}Wr(e,l)}function Xr(e,t,n){return t.map(function(o){return rv(e,o,n)})}function sv(e,t){let n=new av;e.forEach(function(o){let r=o.graph().root,i=ov(o,r,n,t);i.vs.forEach((a,l)=>o.node(a).order=l),iv(o,n,i.vs)})}function Wr(e,t){Object.values(t).forEach(n=>n.forEach((o,r)=>e.node(o).order=r))}let uv=Ge.Graph,Ze=Ce;var cv={positionX:hv,findType1Conflicts:Va,findType2Conflicts:Ra,addConflict:Lo,hasConflict:za,verticalAlignment:Ba,horizontalCompaction:La,alignCoordinates:Ga,findSmallestWidthAlignment:Fa,balance:Ha};function Va(e,t){let n={};function o(r,i){let a=0,l=0,s=r.length,u=i[i.length-1];return i.forEach((c,d)=>{let f=dv(e,c),p=f?e.node(f).order:s;(f||c===u)&&(i.slice(l,d+1).forEach(b=>{e.predecessors(b).forEach(_=>{let m=e.node(_),y=m.order;(y<a||p<y)&&!(m.dummy&&e.node(b).dummy)&&Lo(n,_,b)})}),l=d+1,a=p)}),i}return t.length&&t.reduce(o),n}function Ra(e,t){let n={};function o(i,a,l,s,u){let c;Ze.range(a,l).forEach(d=>{c=i[d],e.node(c).dummy&&e.predecessors(c).forEach(f=>{let p=e.node(f);p.dummy&&(p.order<s||p.order>u)&&Lo(n,f,c)})})}function r(i,a){let l=-1,s,u=0;return a.forEach((c,d)=>{if(e.node(c).dummy==="border"){let f=e.predecessors(c);f.length&&(s=e.node(f[0]).order,o(a,u,d,l,s),u=d,l=s)}o(a,u,a.length,s,i.length)}),a}return t.length&&t.reduce(r),n}function dv(e,t){if(e.node(t).dummy)return e.predecessors(t).find(n=>e.node(n).dummy)}function Lo(e,t,n){if(t>n){let r=t;t=n,n=r}let o=e[t];o||(e[t]=o={}),o[n]=!0}function za(e,t,n){if(t>n){let o=t;t=n,n=o}return!!e[t]&&Object.hasOwn(e[t],n)}function Ba(e,t,n,o){let r={},i={},a={};return t.forEach(l=>{l.forEach((s,u)=>{r[s]=s,i[s]=s,a[s]=u})}),t.forEach(l=>{let s=-1;l.forEach(u=>{let c=o(u);if(c.length){c=c.sort((f,p)=>a[f]-a[p]);let d=(c.length-1)/2;for(let f=Math.floor(d),p=Math.ceil(d);f<=p;++f){let b=c[f];i[u]===u&&s<a[b]&&!za(n,u,b)&&(i[b]=u,i[u]=r[u]=r[b],s=a[b])}}})}),{root:r,align:i}}function La(e,t,n,o,r){let i={},a=fv(e,t,n,r),l=r?"borderLeft":"borderRight";function s(d,f){let p=a.nodes(),b=p.pop(),_={};for(;b;)_[b]?d(b):(_[b]=!0,p.push(b),p=p.concat(f(b))),b=p.pop()}function u(d){i[d]=a.inEdges(d).reduce((f,p)=>Math.max(f,i[p.v]+a.edge(p)),0)}function c(d){let f=a.outEdges(d).reduce((b,_)=>Math.min(b,i[_.w]-a.edge(_)),Number.POSITIVE_INFINITY),p=e.node(d);f!==Number.POSITIVE_INFINITY&&p.borderType!==l&&(i[d]=Math.max(i[d],f))}return s(u,a.predecessors.bind(a)),s(c,a.successors.bind(a)),Object.keys(o).forEach(d=>i[d]=i[n[d]]),i}function fv(e,t,n,o){let r=new uv,i=e.graph(),a=pv(i.nodesep,i.edgesep,o);return t.forEach(l=>{let s;l.forEach(u=>{let c=n[u];if(r.setNode(c),s){var d=n[s],f=r.edge(d,c);r.setEdge(d,c,Math.max(a(e,u,s),f||0))}s=u})}),r}function Fa(e,t){return Object.values(t).reduce((n,o)=>{let r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;Object.entries(o).forEach(([l,s])=>{let u=gv(e,l)/2;r=Math.max(s+u,r),i=Math.min(s-u,i)});const a=r-i;return a<n[0]&&(n=[a,o]),n},[Number.POSITIVE_INFINITY,null])[1]}function Ga(e,t){let n=Object.values(t),o=Ze.applyWithChunking(Math.min,n),r=Ze.applyWithChunking(Math.max,n);["u","d"].forEach(i=>{["l","r"].forEach(a=>{let l=i+a,s=e[l];if(s===t)return;let u=Object.values(s),c=o-Ze.applyWithChunking(Math.min,u);a!=="l"&&(c=r-Ze.applyWithChunking(Math.max,u)),c&&(e[l]=Ze.mapValues(s,d=>d+c))})})}function Ha(e,t){return Ze.mapValues(e.ul,(n,o)=>{if(t)return e[t.toLowerCase()][o];{let r=Object.values(e).map(i=>i[o]).sort((i,a)=>i-a);return(r[1]+r[2])/2}})}function hv(e){let t=Ze.buildLayerMatrix(e),n=Object.assign(Va(e,t),Ra(e,t)),o={},r;["u","d"].forEach(a=>{r=a==="u"?t:Object.values(t).reverse(),["l","r"].forEach(l=>{l==="r"&&(r=r.map(d=>Object.values(d).reverse()));let s=(a==="u"?e.predecessors:e.successors).bind(e),u=Ba(e,r,n,s),c=La(e,r,u.root,u.align,l==="r");l==="r"&&(c=Ze.mapValues(c,d=>-d)),o[a+l]=c})});let i=Fa(e,o);return Ga(o,i),Ha(o,e.graph().align)}function pv(e,t,n){return(o,r,i)=>{let a=o.node(r),l=o.node(i),s=0,u;if(s+=a.width/2,Object.hasOwn(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=-a.width/2;break;case"r":u=a.width/2;break}if(u&&(s+=n?u:-u),u=0,s+=(a.dummy?t:e)/2,s+=(l.dummy?t:e)/2,s+=l.width/2,Object.hasOwn(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":u=l.width/2;break;case"r":u=-l.width/2;break}return u&&(s+=n?u:-u),u=0,s}}function gv(e,t){return e.node(t).width}let Ya=Ce,vv=cv.positionX;var mv=yv;function yv(e){e=Ya.asNonCompoundGraph(e),_v(e),Object.entries(vv(e)).forEach(([t,n])=>e.node(t).x=n)}function _v(e){let t=Ya.buildLayerMatrix(e),n=e.graph().ranksep,o=0;t.forEach(r=>{const i=r.reduce((a,l)=>{const s=e.node(l).height;return a>s?a:s},0);r.forEach(a=>e.node(a).y=o+i/2),o+=i+n})}let jr=Mp,Ur=Dp,wv=rg,bv=Ce.normalizeRanks,Ev=sg,xv=Ce.removeEmptyRanks,Zr=fg,Sv=yg,Kr=wg,Nv=lv,kv=mv,ze=Ce,Cv=Ge.Graph;var Iv=Mv;function Mv(e,t){let n=t&&t.debugTiming?ze.time:ze.notime;n("layout",()=>{let o=n("  buildLayoutGraph",()=>Bv(e));n("  runLayout",()=>Ov(o,n,t)),n("  updateInputGraph",()=>Tv(e,o))})}function Ov(e,t,n){t("    makeSpaceForEdgeLabels",()=>Lv(e)),t("    removeSelfEdges",()=>Zv(e)),t("    acyclic",()=>jr.run(e)),t("    nestingGraph.run",()=>Zr.run(e)),t("    rank",()=>wv(ze.asNonCompoundGraph(e))),t("    injectEdgeLabelProxies",()=>Fv(e)),t("    removeEmptyRanks",()=>xv(e)),t("    nestingGraph.cleanup",()=>Zr.cleanup(e)),t("    normalizeRanks",()=>bv(e)),t("    assignRankMinMax",()=>Gv(e)),t("    removeEdgeLabelProxies",()=>Hv(e)),t("    normalize.run",()=>Ur.run(e)),t("    parentDummyChains",()=>Ev(e)),t("    addBorderSegments",()=>Sv(e)),t("    order",()=>Nv(e,n)),t("    insertSelfEdges",()=>Kv(e)),t("    adjustCoordinateSystem",()=>Kr.adjust(e)),t("    position",()=>kv(e)),t("    positionSelfEdges",()=>qv(e)),t("    removeBorderNodes",()=>Uv(e)),t("    normalize.undo",()=>Ur.undo(e)),t("    fixupEdgeLabelCoords",()=>Wv(e)),t("    undoCoordinateSystem",()=>Kr.undo(e)),t("    translateGraph",()=>Yv(e)),t("    assignNodeIntersects",()=>Xv(e)),t("    reversePoints",()=>jv(e)),t("    acyclic.undo",()=>jr.undo(e))}function Tv(e,t){e.nodes().forEach(n=>{let o=e.node(n),r=t.node(n);o&&(o.x=r.x,o.y=r.y,o.rank=r.rank,t.children(n).length&&(o.width=r.width,o.height=r.height))}),e.edges().forEach(n=>{let o=e.edge(n),r=t.edge(n);o.points=r.points,Object.hasOwn(r,"x")&&(o.x=r.x,o.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}let $v=["nodesep","edgesep","ranksep","marginx","marginy"],Pv={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Dv=["acyclicer","ranker","rankdir","align"],Av=["width","height"],qr={width:0,height:0},Vv=["minlen","weight","width","height","labeloffset"],Rv={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},zv=["labelpos"];function Bv(e){let t=new Cv({multigraph:!0,compound:!0}),n=Jn(e.graph());return t.setGraph(Object.assign({},Pv,Qn(n,$v),ze.pick(n,Dv))),e.nodes().forEach(o=>{let r=Jn(e.node(o));const i=Qn(r,Av);Object.keys(qr).forEach(a=>{i[a]===void 0&&(i[a]=qr[a])}),t.setNode(o,i),t.setParent(o,e.parent(o))}),e.edges().forEach(o=>{let r=Jn(e.edge(o));t.setEdge(o,Object.assign({},Rv,Qn(r,Vv),ze.pick(r,zv)))}),t}function Lv(e){let t=e.graph();t.ranksep/=2,e.edges().forEach(n=>{let o=e.edge(n);o.minlen*=2,o.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?o.width+=o.labeloffset:o.height+=o.labeloffset)})}function Fv(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.width&&n.height){let o=e.node(t.v),i={rank:(e.node(t.w).rank-o.rank)/2+o.rank,e:t};ze.addDummyNode(e,"edge-proxy",i,"_ep")}})}function Gv(e){let t=0;e.nodes().forEach(n=>{let o=e.node(n);o.borderTop&&(o.minRank=e.node(o.borderTop).rank,o.maxRank=e.node(o.borderBottom).rank,t=Math.max(t,o.maxRank))}),e.graph().maxRank=t}function Hv(e){e.nodes().forEach(t=>{let n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function Yv(e){let t=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,r=0,i=e.graph(),a=i.marginx||0,l=i.marginy||0;function s(u){let c=u.x,d=u.y,f=u.width,p=u.height;t=Math.min(t,c-f/2),n=Math.max(n,c+f/2),o=Math.min(o,d-p/2),r=Math.max(r,d+p/2)}e.nodes().forEach(u=>s(e.node(u))),e.edges().forEach(u=>{let c=e.edge(u);Object.hasOwn(c,"x")&&s(c)}),t-=a,o-=l,e.nodes().forEach(u=>{let c=e.node(u);c.x-=t,c.y-=o}),e.edges().forEach(u=>{let c=e.edge(u);c.points.forEach(d=>{d.x-=t,d.y-=o}),Object.hasOwn(c,"x")&&(c.x-=t),Object.hasOwn(c,"y")&&(c.y-=o)}),i.width=n-t+a,i.height=r-o+l}function Xv(e){e.edges().forEach(t=>{let n=e.edge(t),o=e.node(t.v),r=e.node(t.w),i,a;n.points?(i=n.points[0],a=n.points[n.points.length-1]):(n.points=[],i=r,a=o),n.points.unshift(ze.intersectRect(o,i)),n.points.push(ze.intersectRect(r,a))})}function Wv(e){e.edges().forEach(t=>{let n=e.edge(t);if(Object.hasOwn(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function jv(e){e.edges().forEach(t=>{let n=e.edge(t);n.reversed&&n.points.reverse()})}function Uv(e){e.nodes().forEach(t=>{if(e.children(t).length){let n=e.node(t),o=e.node(n.borderTop),r=e.node(n.borderBottom),i=e.node(n.borderLeft[n.borderLeft.length-1]),a=e.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(a.x-i.x),n.height=Math.abs(r.y-o.y),n.x=i.x+n.width/2,n.y=o.y+n.height/2}}),e.nodes().forEach(t=>{e.node(t).dummy==="border"&&e.removeNode(t)})}function Zv(e){e.edges().forEach(t=>{if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function Kv(e){var t=ze.buildLayerMatrix(e);t.forEach(n=>{var o=0;n.forEach((r,i)=>{var a=e.node(r);a.order=i+o,(a.selfEdges||[]).forEach(l=>{ze.addDummyNode(e,"selfedge",{width:l.label.width,height:l.label.height,rank:a.rank,order:i+ ++o,e:l.e,label:l.label},"_se")}),delete a.selfEdges})})}function qv(e){e.nodes().forEach(t=>{var n=e.node(t);if(n.dummy==="selfedge"){var o=e.node(n.e.v),r=o.x+o.width/2,i=o.y,a=n.x-r,l=o.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*a/3,y:i-l},{x:r+5*a/6,y:i-l},{x:r+a,y:i},{x:r+5*a/6,y:i+l},{x:r+2*a/3,y:i+l}],n.label.x=n.x,n.label.y=n.y}})}function Qn(e,t){return ze.mapValues(ze.pick(e,t),Number)}function Jn(e){var t={};return e&&Object.entries(e).forEach(([n,o])=>{typeof n=="string"&&(n=n.toLowerCase()),t[n]=o}),t}let Qv=Ce,Jv=Ge.Graph;var em={debugOrdering:tm};function tm(e){let t=Qv.buildLayerMatrix(e),n=new Jv({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(o=>{n.setNode(o,{label:o}),n.setParent(o,"layer"+e.node(o).rank)}),e.edges().forEach(o=>n.setEdge(o.v,o.w,{},o.name)),t.forEach((o,r)=>{let i="layer"+r;n.setNode(i,{rank:"same"}),o.reduce((a,l)=>(n.setEdge(a,l,{style:"invis"}),l))}),n}var nm="1.1.4",om={graphlib:Ge,layout:Iv,debug:em,util:{time:Ce.time,notime:Ce.notime},version:nm};const Qr=fl(om),rm=ye({__name:"AxialLeadBar",props:ii({color:null,luster:{type:Boolean}},{luster:!1}),setup(e){return ai(t=>({"57d50bcd":t.color})),(t,n)=>(ee(),ce("div",{class:gt(["axial-lead-bar",{luster:t.luster}])},null,2))}}),im={class:"axial-lead"},am={class:"label"},eo=ye({__name:"AxialLead",props:ii({text:null,color:null,colorCodes:null,barsAlign:null,barWidth:null,separatorWidth:null},{text:"",color:"white",barsAlign:"center",barWidth:8,separatorWidth:4}),setup(e){return ai(t=>({"7000277e":t.color})),(t,n)=>(ee(),ce("div",im,[Ie("div",am,Oe(t.text),1),Ie("div",{class:"bar-container",style:De({justifyContent:t.barsAlign})},[(ee(!0),ce(Ve,null,vt(t.colorCodes,(o,r)=>(ee(),Te(rm,{key:r,color:o.color.hex,luster:o.color.luster,style:De({width:t.barWidth+"px",margin:`0 ${t.separatorWidth}px`})},null,8,["color","luster","style"]))),128))],4)]))}}),lm=25,sm=5,Jr=15,um=ye({__name:"CombinationDialog",props:{result:null,combination:null},setup(e){const t={x:0,y:0},n={width:7.5,height:7.5,borderWidth:3},o={width:2.5,height:2.5,borderWidth:0},r={width:70,height:20,borderWidth:1};function i(s){const u=[{id:"S",type:"start",position:t}],c=[];let d=0;function f(b,_){if(b.type==="term"){const m=(d++).toString();u.push({id:m,type:"component",data:{value:b.children,label:`${xn.fit(b.children,e.result.componentType.prefixSymbols).toSimpleString(3)}${e.result.componentType.unit}`},position:t});for(const y of _)c.push({id:`e${y}-${m}`,source:y,target:m});return[m]}else if(b.type==="series"){let m=_;return b.children.forEach(y=>{const v=f(y,m);if(m.length>1&&v.length>1){const x=m,S=new Set(x.flatMap(R=>c.filter($=>$.source===R).map($=>$.target))),P=`j${d++}`;u.push({id:P,type:"junction",position:t});for(const R of m)for(const $ of S)c.splice(c.findIndex(W=>W.source===R&&W.target===$),1);for(const R of m)c.push({id:`e${R}-${P}`,source:R,target:P});for(const R of S)c.push({id:`e${P}-${R}`,source:P,target:R})}return m=v,v}),m}else if(b.type==="parallel")return b.children.flatMap(m=>f(m,_));return[]}return f(s,["S"]).forEach(b=>{c.push({id:`e${b}-E`,source:b,target:"E"})}),u.push({id:"E",type:"end",position:t}),{nodes:u,edges:c}}const a=ie(()=>i(e.combination.nodes)),l=ie(()=>{const s=new Qr.graphlib.Graph;s.setDefaultEdgeLabel(()=>({})),s.setGraph({rankdir:"LR",nodesep:sm,ranksep:lm});for(const u of a.value.nodes)switch(u.type){case"start":case"end":case"junction":{s.setNode(u.id,{width:n.width+Jr,height:n.height});break}case"component":{s.setNode(u.id,{label:u.data.label,width:r.width,height:r.height});break}}for(const u of a.value.edges)s.setEdge(u.source,u.target);return Qr.layout(s),a.value.nodes.map(u=>{const c=s.node(u.id);return{...u,position:{x:c.x-c.width/2+(u.type==="component"?0:Jr/2),y:c.y-c.height/2}}})});return(s,u)=>{const c=ge("v-card-text"),d=ge("v-spacer"),f=ge("v-btn"),p=ge("v-card-actions"),b=ge("v-card"),_=ge("v-dialog");return ee(),Te(_,{style:{"max-width":"600px"}},{activator:Q(({props:m})=>[lt(s.$slots,"activator",{props:m},void 0,!0)]),default:Q(({isActive:m})=>[H(b,null,{default:Q(()=>[H(c,{style:{height:"150px"}},{default:Q(()=>[H(V(sh),{nodes:l.value,edges:a.value.edges,"nodes-draggable":!1,"nodes-connectable":!1,"fit-view-on-init":""},{"node-start":Q(()=>[Ie("div",{class:"node-terminal",style:De({width:n.width+"px",height:n.height+"px",borderWidth:n.borderWidth+"px"})},null,4),H(V(Ye),{class:"no-handle",type:"source",position:V(X).Right},null,8,["position"])]),"node-end":Q(()=>[Ie("div",{class:"node-terminal",style:De({width:n.width+"px",height:n.height+"px",borderWidth:n.borderWidth+"px"})},null,4),H(V(Ye),{class:"no-handle",type:"target",position:V(X).Left},null,8,["position"])]),"node-junction":Q(()=>[Ie("div",{class:"node-junction",style:De({width:o.width+"px",height:o.height+"px",borderWidth:o.borderWidth+"px"})},null,4),H(V(Ye),{class:"no-handle",type:"target",position:V(X).Left},null,8,["position"]),H(V(Ye),{class:"no-handle",type:"source",position:V(X).Right},null,8,["position"])]),"node-component":Q(({data:y})=>[e.result.componentType.value==="resistor"?(ee(),Te(eo,{key:0,text:y.label,color:"#fbddc9",barsAlign:"right",colorCodes:V(Go)(y.value,5,"4-band"),barWidth:4,separatorWidth:1,style:{color:"black",width:"70px",height:"15px","font-size":"50%",margin:"2px",padding:"0 5px"}},null,8,["text","colorCodes"])):e.result.componentType.value==="capacitor"?(ee(),Te(eo,{key:1,text:y.label,color:"#111111",style:{color:"white",width:"70px",height:"15px","font-size":"50%",margin:"2px",padding:"0 5px"}},null,8,["text"])):e.result.componentType.value==="inductor"?(ee(),Te(eo,{key:2,text:y.label,color:"#68b697",barsAlign:"right",colorCodes:V(Go)(y.value*1e6,10,"4-band"),barWidth:4,separatorWidth:1,style:{color:"black",width:"70px",height:"15px","font-size":"50%",margin:"2px",padding:"0 5px"}},null,8,["text","colorCodes"])):Re("",!0),H(V(Ye),{class:"no-handle",type:"target",position:V(X).Left},null,8,["position"]),H(V(Ye),{class:"no-handle",type:"source",position:V(X).Right},null,8,["position"])]),_:1},8,["nodes","edges"])]),_:1}),H(c,null,{default:Q(()=>[it(" çµã¿åããå¼: "+Oe(e.combination.toString(e.result.componentType.prefixSymbols)),1)]),_:1}),H(p,null,{default:Q(()=>[H(d),H(f,{text:"éãã",onClick:y=>m.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:3})}}}),cm=ul(um,[["__scopeId","data-v-0586735d"]]),dm=["onClick"],fm=ye({__name:"ResultTable",props:{results:null},setup(e){const t=se();function n(i,a){const l=i.calcValue(a.componentType.value);if(l===a.targetComponentValue)return"= æ­£ç¢º";const s=(l-a.targetComponentValue)/a.targetComponentValue*100;return Math.abs(s)<.001?s>0?"< +0.001":"< -0.001":(s>0?"+":"")+s.toFixed(3)}function o(i){return[{title:`${i.componentType.valueLabel} (${i.componentType.unit})`,value:"value"},{title:"èª¤å·®ç (%)",value:"error"},{title:"çµã¿åãã",value:"combination"},{title:"ç´ å­ã®ç¨®é¡æ°",value:"numberOfTypes"}]}function r(i,a){return i.map(l=>{const s=l.calcValue(a.componentType.value);return{value:xn.fit(s,a.componentType.prefixSymbols).toSimpleString(3),isBestValue:s===a.bestComponentValue,error:n(l,a),combinationText:l.toString(a.componentType.prefixSymbols),numberOfTypes:l.numberOfTypes,combination:l}})}return(i,a)=>{const l=ge("v-tab"),s=ge("v-tabs"),u=ge("v-data-table"),c=ge("v-tabs-window-item"),d=ge("v-tabs-window");return ee(),ce(Ve,null,[H(s,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=f=>t.value=f),"align-tabs":"center","bg-color":"secondary"},{default:Q(()=>[(ee(!0),ce(Ve,null,vt(e.results,f=>(ee(),Te(l,{key:f.componentNumber,"prepend-icon":V(dl)(f.finished,f.finishReason==="finishedAllCombination"?"mdi-check-all":f.finishReason==="aborted"?"mdi-progress-alert":"mdi-check","mdi-timer-sand","mdi-circle-medium")},{default:Q(()=>[it(Oe(f.componentNumber)+"æ¬ã®è§£ ",1)]),_:2},1032,["prepend-icon"]))),128))]),_:1},8,["modelValue"]),H(d,{modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=f=>t.value=f)},{default:Q(()=>[(ee(!0),ce(Ve,null,vt(e.results,f=>(ee(),Te(c,{key:f.componentNumber},{default:Q(()=>[H(u,{items:r(f.resultCombinations??[],f),headers:o(f),density:"compact",class:"result-table","no-data-text":"ã¾ã è¨ç®ããã¦ãã¾ãã","items-per-page-text":"ãã¼ã¸ãã¨ã®è¡¨ç¤ºæ°:","page-text":"å¨{2}åã®çµæ / {0}-{1}"},{item:Q(({item:p})=>[H(cm,{combination:p.combination,result:f},{activator:Q(({props:b})=>[Ie("tr",So({ref_for:!0},b,{class:["calculated",{"best-combination":p.isBestValue}],onClick:_=>console.info(f)}),[Ie("td",null,Oe(p.value),1),Ie("td",null,Oe(p.error),1),Ie("td",null,Oe(p.combinationText),1),Ie("td",null,Oe(p.numberOfTypes),1)],16,dm)]),_:2},1032,["combination","result"])]),_:2},1032,["items","headers"])]),_:2},1024))),128))]),_:1},8,["modelValue"])],64)}}});function hm(e){return new Worker("/tools/assets/worker-BENgzEqm.js",{name:e==null?void 0:e.name})}const to=[{title:"æµæå¨ (Î©)",value:"resistor",unit:"Î©",valueLabel:"æµæå¤",prefixSymbols:["G","M","k","","m","Î¼"]},{title:"ã³ã³ãã³ãµ (F)",value:"capacitor",unit:"F",valueLabel:"éé»å®¹é",prefixSymbols:["","m","Î¼","n","p"]},{title:"ã¤ã³ãã¯ã¿ (H)",value:"inductor",unit:"H",valueLabel:"ã¤ã³ãã¯ã¿ã³ã¹",prefixSymbols:["","m","Î¼","n"]}],no=[{title:"E1",value:"E1"},{title:"E3",value:"E3"},{title:"E6",value:"E6"},{title:"E12",value:"E12"},{title:"E24",value:"E24"},{title:"E48",value:"E48"},{title:"E96",value:"E96"},{title:"E192",value:"E192"}],oo=[{title:"< 0.1%",value:.001},{title:"< 0.01%",value:1e-4},{title:"< 0.001%",value:1e-5},{title:"= 0.0%ï¼æ­£ç¢ºï¼",value:0},{title:"å¨æ¢ç´¢",value:void 0}],pm={resistor:{componentTargetValue:1234,minValue:10,maxValue:1e6,excludedValuePlaceholder:1e3,excludedValues:[]},capacitor:{componentTargetValue:1234e-9,minValue:1e-12,maxValue:1,excludedValuePlaceholder:1e-6,excludedValues:[]},inductor:{componentTargetValue:1234e-7,minValue:1e-9,maxValue:1,excludedValuePlaceholder:1e-5,excludedValues:[]}},gm={key:0},vm={key:1},mm={key:2},ym={key:3},_m={key:4},wm=Ie("div",null,"è¨ç®ä¸­",-1),bm=Ie("div",{class:"text-caption"},"ã¯ãªãã¯ã§ä¸­æ­¢",-1),Em=ye({__name:"App",setup(e){const t=se([2,3,4,5].map(m=>({componentNumber:m,componentType:to[0],targetComponentValue:1234,series:Fo[no[3].value],minValue:0,maxValue:0,excludedValues:[],targetErrorRate:oo[2]}))),n=se(0),o=se(to[0]),r=se(pm),i=ie(()=>r.value[o.value.value]),a=se(no[3]),l=se(oo[2]),s=se(),u=se(),c=se(1e3),d=new cl(hm),f=ie(()=>{if(!s.value)return 0;const m=t.value[n.value];return typeof m.currentCombination>"u"||typeof m.totalCombinations>"u"||m.totalCombinations===0?0:m.currentCombination/m.totalCombinations*100});async function p(){var y,v;s.value=!0;let m=0;for(const x of t.value)x.componentType=o.value,x.targetComponentValue=i.value.componentTargetValue,x.minValue=i.value.minValue,x.maxValue=i.value.maxValue,x.excludedValues=i.value.excludedValues,x.series=Fo[a.value.value],x.targetErrorRate=l.value,x.finished=void 0,x.finishReason=void 0,x.bestComponentValue=0,x.resultCombinations=[],x.totalCombinations=0,x.currentCombination=0;for(const x of t.value){if(u.value)break;for(n.value=m++,x.finished=!1,x.finishReason="calculating",await d.invoke({type:"initialize",value:x.targetComponentValue,componentType:x.componentType.value,componentNumber:x.componentNumber,series:[...x.series],minValue:x.minValue,maxValue:x.maxValue,excludedValues:[...x.excludedValues],progressBeacon:1e6});!u.value;){const S=await d.invoke({type:"invoke"});if(S.type!=="invoke"){x.finishReason="error";break}if(S.result){const P=S.result;if(x.currentCombination=P.current,x.totalCombinations=P.total,P.componentNodes){const R=new $e(P.componentNodes);if(!((y=x.resultCombinations)!=null&&y.some($=>$.equals(R)))){(v=x.resultCombinations)==null||v.unshift(R),x.bestComponentValue=R.calcValue(x.componentType.value);const $=(x.bestComponentValue-x.targetComponentValue)/x.targetComponentValue;if(typeof x.targetErrorRate.value=="number"&&Math.abs($)<=x.targetErrorRate.value){x.finishReason="finishedByUnderErrorRate";break}}}}if(S.done){x.finishReason="finishedAllCombination";break}}u.value&&(x.finishReason="aborted"),x.finished=!0}u.value=!1,s.value=!1}function b(){[Se.required,Se.value,Se.notNegative,Se.notZero].every(m=>m(c.value.toString())===!0)&&!i.value.excludedValues.includes(c.value)&&i.value.excludedValues.push(c.value)}async function _(){s.value?u.value=!0:await p()}return(m,y)=>{const v=ge("v-select"),x=ge("v-col"),S=ge("v-row"),P=ge("v-combobox"),R=ge("v-card-text"),$=ge("v-btn"),W=ge("v-form"),j=ge("v-icon"),A=ge("v-list-item"),E=ge("v-list"),J=ge("v-spacer"),te=ge("v-card-actions"),w=ge("v-card"),O=ge("v-dialog"),C=ge("v-progress-linear");return ee(),Te(ll,{"page-id":"electric/combination","toolbar-title":"ååç´ å­ çµã¿åããè¨ç®æ©"},{default:Q(()=>[H(S,null,{default:Q(()=>[H(x,{cols:"4"},{default:Q(()=>[H(v,{label:"ç´ å­ã®ç¨®é¡",density:"compact",variant:"underlined",modelValue:o.value,"onUpdate:modelValue":y[0]||(y[0]=M=>o.value=M),items:V(to),"hide-details":"","return-object":""},null,8,["modelValue","items"])]),_:1}),H(x,{cols:"8"},{default:Q(()=>[H(Kt,{value:i.value.componentTargetValue,"onUpdate:value":y[1]||(y[1]=M=>i.value.componentTargetValue=M),label:`æ±ãã${o.value.valueLabel}`,variant:"underlined",density:"compact",unit:o.value.unit,"fraction-digits":3,"prefix-symbols":o.value.prefixSymbols,rule:[V(Se).required,V(Se).value,V(Se).notNegative,V(Se).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1})]),_:1}),H(S,null,{default:Q(()=>[H(x,{cols:"4"},{default:Q(()=>[H(v,{label:"Eç³»å",density:"compact",variant:"underlined",modelValue:a.value,"onUpdate:modelValue":y[2]||(y[2]=M=>a.value=M),items:V(no),"hide-details":"","return-object":""},null,8,["modelValue","items"])]),_:1}),H(x,{cols:"8"},{default:Q(()=>[H(O,{"max-width":"600"},{activator:Q(({props:M})=>[H(P,So(M,{multiple:"","model-value":i.value.excludedValues,label:`é¤å¤ãã${o.value.valueLabel}ï¼ãªãã·ã§ã³ï¼`,suffix:o.value.unit,density:"compact",variant:"underlined","hide-details":"",readonly:""}),null,16,["model-value","label","suffix"])]),default:Q(({isActive:M})=>[H(w,{title:`é¤å¤ãã${o.value.valueLabel}`},{default:Q(()=>[H(R,null,{default:Q(()=>[it(" ç®æ¨ã®"+Oe(o.value.valueLabel)+"ä»¥å¤ã«ããçµã¿åããã«ä½¿ç¨ããªã"+Oe(o.value.valueLabel)+"ãè¤æ°æå®ã§ãã¾ãã ",1)]),_:1}),H(R,null,{default:Q(()=>[H(W,{onSubmit:il(b,["prevent"])},{default:Q(()=>[H(S,null,{default:Q(()=>[H(x,null,{default:Q(()=>[H(Kt,{value:c.value,"onUpdate:value":y[3]||(y[3]=T=>c.value=T),label:`é¤å¤ã®å¯¾è±¡ã«è¿½å ãã${o.value.valueLabel}`,variant:"underlined",density:"compact",unit:o.value.unit,"fraction-digits":3,"prefix-symbols":o.value.prefixSymbols,rule:[V(Se).required,V(Se).value,V(Se).notNegative,V(Se).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1}),H(x,{cols:"3"},{default:Q(()=>[H($,{color:"success",type:"submit",variant:"outlined",block:""},{default:Q(()=>[it("è¿½å ")]),_:1})]),_:1}),H(x,{cols:"3"},{default:Q(()=>[H($,{variant:"outlined",block:"",onClick:y[4]||(y[4]=T=>i.value.excludedValues=[])},{default:Q(()=>[it(" å¨ã¦ã¯ãªã¢ ")]),_:1})]),_:1})]),_:1})]),_:1}),H(E,{density:"compact","onClick:select":y[5]||(y[5]=T=>i.value.excludedValues=i.value.excludedValues.filter(D=>D!==T.id))},{default:Q(()=>[(ee(!0),ce(Ve,null,vt(i.value.excludedValues,(T,D)=>(ee(),Te(A,{key:D,value:T,slim:""},{prepend:Q(()=>[H(j,{icon:"mdi-close"})]),default:Q(()=>[it(Oe(V(xn).fit(T,o.value.prefixSymbols))+Oe(o.value.unit)+" ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1}),H(te,null,{default:Q(()=>[H(J),H($,{text:"éãã",onClick:T=>M.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["title"])]),_:1})]),_:1})]),_:1}),H(S,null,{default:Q(()=>[H(x,{cols:"4"},{default:Q(()=>[H(Kt,{value:i.value.minValue,"onUpdate:value":y[6]||(y[6]=M=>i.value.minValue=M),label:`ä½¿ç¨ããæå°ã®${o.value.valueLabel}`,variant:"underlined",density:"compact",unit:o.value.unit,"fraction-digits":0,"prefix-symbols":o.value.prefixSymbols,rule:[V(Se).required,V(Se).value,V(Se).notNegative,V(Se).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1}),H(x,{cols:"4"},{default:Q(()=>[H(Kt,{value:i.value.maxValue,"onUpdate:value":y[7]||(y[7]=M=>i.value.maxValue=M),label:`ä½¿ç¨ããæå¤§ã®${o.value.valueLabel}`,variant:"underlined",density:"compact",unit:o.value.unit,"fraction-digits":0,"prefix-symbols":o.value.prefixSymbols,rule:[V(Se).required,V(Se).value,V(Se).notNegative,V(Se).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1}),H(x,{cols:"4"},{default:Q(()=>[H(v,{label:"è¨ç®ãçµããèª¤å·®ç",density:"compact",variant:"underlined",modelValue:l.value,"onUpdate:modelValue":y[8]||(y[8]=M=>l.value=M),items:V(oo),"hide-details":"","return-object":""},null,8,["modelValue","items"])]),_:1})]),_:1}),H(S,null,{default:Q(()=>[H(x,{"align-self":"center"},{default:Q(()=>[H(C,{color:"light-blue",modelValue:f.value,"onUpdate:modelValue":y[9]||(y[9]=M=>f.value=M),height:"20",striped:s.value},{default:Q(()=>[s.value?(ee(),ce("strong",gm,"è¨ç®ä¸­... "+Oe(f.value.toFixed(3))+"%",1)):t.value.some(M=>M.finishReason==="aborted")?(ee(),ce("strong",vm,"è¨ç®ãä¸­æ­¢ãã¾ãã")):t.value.some(M=>M.finishReason==="error")?(ee(),ce("strong",mm," ã¨ã©ã¼ã«ããè¨ç®ãä¸­æ­¢ãã¾ãã ")):t.value.some(M=>M.finishReason==="finishedByUnderErrorRate")?(ee(),ce("strong",ym," è¨ç®ãå®äºãã¾ãã ")):t.value.every(M=>M.finishReason==="finishedAllCombination")?(ee(),ce("strong",_m," å¨æ¢ç´¢ãå®äºãã¾ãã ")):Re("",!0)]),_:1},8,["modelValue","striped"])]),_:1}),H(x,{cols:"4"},{default:Q(()=>[H($,{"prepend-icon":s.value?"mdi-timer-sand":"mdi-play",variant:s.value?"outlined":"flat",color:s.value?"error":"success",onClick:_,block:""},al({_:2},[s.value?{name:"default",fn:Q(()=>[wm,bm]),key:"0"}:{name:"default",fn:Q(()=>[it("è¨ç®éå§")]),key:"1"}]),1032,["prepend-icon","variant","color"])]),_:1})]),_:1}),H(S,null,{default:Q(()=>[H(x,null,{default:Q(()=>[H(fm,{results:t.value},null,8,["results"])]),_:1})]),_:1})]),_:1})}}});sl("#app",Em);
