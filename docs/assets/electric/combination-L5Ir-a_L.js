var Ha=Object.defineProperty;var Ya=(e,t,n)=>t in e?Ha(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var be=(e,t,n)=>Ya(e,typeof t!="symbol"?t+"":t,n);import{S as En,d as we,t as Ee,r as le,i as re,j as Je,k as qi,o as ie,l as ce,m as st,u as V,n as Nt,p as Qi,w as ve,q as Xa,s as kt,e as H,b as Q,v as qe,x as Tt,y as ja,z as Ji,A as jt,B as Ua,f as Me,C as Te,D as Be,F as ze,E as Ct,G as Pe,H as er,I as Wa,c as Le,J as bo,K as Za,L as Ka,M as pe,N as tr,O as an,a as ge,P as me,Q as bt,T as qa,U as Qa,V as Ja,W as rt,X as Eo,h as Zt,R as Se,Y as es,Z as ts,_ as ns,g as os}from"../tools-SIValueInput.vue_vue_type_script_setup_true_lang-Dh9RVlMc.js";import{_ as is,W as rs}from"../tools-_plugin-vue_export-helper-Q6zYeb5r.js";import{t as as}from"../tools-object-DXBQZyn3.js";import{g as ss}from"../tools-_commonjsHelpers-Cpj98o6Y.js";const Bo={E1:[100],E3:[100,220,470],E6:[100,150,220,330,470,680],E12:[100,120,150,180,220,270,330,390,470,560,680,820],E24:[100,110,120,130,150,160,180,200,220,240,270,300,330,360,390,430,470,510,560,620,680,750,820,910],E48:[100,105,110,115,121,127,133,140,147,154,162,169,178,187,196,205,215,226,237,249,261,274,287,301,316,332,348,365,383,402,422,442,464,487,511,536,562,590,619,649,681,715,750,787,825,866,909,953],E96:[100,102,105,107,110,113,115,118,121,124,127,130,133,137,140,143,147,150,154,158,162,165,169,174,178,182,187,191,196,200,205,210,215,221,226,232,237,243,249,261,267,274,280,287,294,301,309,316,324,332,340,348,357,365,374,383,392,402,412,422,432,442,453,464,475,487,499,511,523,536,549,562,576,590,604,619,634,649,681,698,715,732,750,768,787,806,825,845,866,887,909,931,953,976],E192:[100,101,102,104,105,106,107,109,110,111,113,114,115,117,118,120,121,123,124,126,127,129,130,132,133,135,137,138,140,142,143,145,147,149,150,152,154,156,158,160,162,164,165,167,169,172,174,176,178,180,182,184,187,189,191,193,196,198,200,203,205,208,210,213,215,218,221,223,226,229,232,234,237,240,243,246,249,252,255,258,261,264,267,271,274,277,280,284,287,291,294,298,301,305,309,312,316,320,324,328,332,336,340,344,348,352,357,361,365,370,374,379,383,388,392,397,402,407,412,417,422,427,432,437,442,448,453,459,464,470,475,481,487,493,499,505,511,517,523,530,536,542,549,556,562,569,576,583,590,597,604,612,619,626,634,642,649,657,665,673,681,690,698,706,715,723,732,741,750,759,768,777,787,796,806,816,825,835,845,856,866,876,887,898,909,920,931,942,953,965,976,988]};class Oe{constructor(t){be(this,"componentNodes");be(this,"nodes");this.componentNodes=structuredClone(t),this.nodes=Oe.generateSyntaxTree(t)}equals(t){return Oe.equalsInternal(this.nodes,t.nodes)}toString(t=["T","G","M","k","","m","Î¼","n","p","f"],n=3){return Oe.toStringInternal(this.nodes,t,n)}calcValue(t){return t==="capacitor"?Oe.calcValueForCapacitorInternal(this.componentNodes):Oe.calcValueInternal(this.componentNodes)}static calcValue(t,n){return n==="capacitor"?Oe.calcValueForCapacitorInternal(t):Oe.calcValueInternal(t)}static equalsInternal(t,n){if(t.type!==n.type||t.children.length!==n.children.length)return!1;const o=[...t.children].sort(Oe.compareNodes),i=[...n.children].sort(Oe.compareNodes);return o.every((r,a)=>Oe.deepCompare(r,i[a]))}static compareNodes(t,n){return t.type==="term"&&n.type==="term"?t.children-n.children:t.type==="term"?-1:n.type==="term"?1:t.type.localeCompare(n.type)}static deepCompare(t,n){return t.type!==n.type?!1:t.type==="term"&&n.type==="term"?t.children===n.children:t.type!=="term"&&n.type!=="term"?Oe.equalsInternal(t,n):!1}static generateSyntaxTree(t){const n=[];for(let o=t.length-1;o>=0;o--){const i=t[o],r=[];if(i==="+"){const a=n.pop(),s=n.pop();a.type==="series"?r.push(...a.children):r.push(a),s.type==="series"?r.push(...s.children):r.push(s),n.push({type:"series",children:r})}else if(i==="|"){const a=n.pop(),s=n.pop();a.type==="parallel"?r.push(...a.children):r.push(a),s.type==="parallel"?r.push(...s.children):r.push(s),n.push({type:"parallel",children:r})}else n.push({type:"term",children:i.value})}if(n[0].type!=="term")return n[0];throw new Error("invalid nodes")}static toStringInternal(t,n,o){return t.children.map(i=>i.type==="term"?En.fit(i.children,n).toSimpleString(o):`(${Oe.toStringInternal(i,n,o)})`).join(t.type==="series"?" + ":" | ")}static calcValueInternal(t){const n=[];for(let o=t.length-1;o>=0;o--){const i=t[o];if(i==="+"){const r=n.pop(),a=n.pop();n.push(r+a)}else if(i==="|"){const r=n.pop(),a=n.pop();n.push(r*a/(r+a))}else n.push(i.value)}return n[0]}static calcValueForCapacitorInternal(t){const n=[];for(let o=t.length-1;o>=0;o--){const i=t[o];if(i==="+"){const r=n.pop(),a=n.pop();n.push(r*a/(r+a))}else if(i==="|"){const r=n.pop(),a=n.pop();n.push(r+a)}else n.push(i.value)}return n[0]}}function xn(e){return tr()?(an(e),!0):!1}function We(e){return typeof e=="function"?e():V(e)}const ls=typeof window<"u"&&typeof document<"u",us=e=>typeof e<"u",cs=Object.prototype.toString,ds=e=>cs.call(e)==="[object Object]",fs=()=>{};function hs(e,t){function n(...o){return new Promise((i,r)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(r)})}return n}const nr=e=>e();function ps(e=nr){const t=le(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...r)=>{t.value&&e(...r)};return{isActive:qa(t),pause:n,resume:o,eventFilter:i}}function Lo(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function gs(e,t,n={}){const{eventFilter:o=nr,...i}=n;return ve(e,hs(o,t),i)}function wt(e,t,n={}){const{eventFilter:o,...i}=n,{eventFilter:r,pause:a,resume:s,isActive:l}=ps(o);return{stop:gs(e,t,{...i,eventFilter:r}),pause:a,resume:s,isActive:l}}function vs(e,t={}){if(!bo(e))return Za(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=Ka(()=>({get(){return e.value[o]},set(i){var r;if((r=We(t.replaceRef))!=null?r:!0)if(Array.isArray(e.value)){const s=[...e.value];s[o]=i,e.value=s}else{const s={...e.value,[o]:i};Object.setPrototypeOf(s,Object.getPrototypeOf(e.value)),e.value=s}else e.value[o]=i}}));return n}function no(e,t=!1){function n(d,{flush:f="sync",deep:p=!1,timeout:b,throwOnTimeout:y}={}){let m=null;const v=[new Promise(x=>{m=ve(e,S=>{d(S)!==t&&(m==null||m(),x(S))},{flush:f,deep:p,immediate:!0})})];return b!=null&&v.push(Lo(b,y).then(()=>We(e)).finally(()=>m==null?void 0:m())),Promise.race(v)}function o(d,f){if(!bo(d))return n(S=>S===d,f);const{flush:p="sync",deep:b=!1,timeout:y,throwOnTimeout:m}=f??{};let w=null;const x=[new Promise(S=>{w=ve([e,d],([P,R])=>{t!==(P===R)&&(w==null||w(),S(P))},{flush:p,deep:b,immediate:!0})})];return y!=null&&x.push(Lo(y,m).then(()=>We(e)).finally(()=>(w==null||w(),We(e)))),Promise.race(x)}function i(d){return n(f=>!!f,d)}function r(d){return o(null,d)}function a(d){return o(void 0,d)}function s(d){return n(Number.isNaN,d)}function l(d,f){return n(p=>{const b=Array.from(p);return b.includes(d)||b.includes(We(d))},f)}function u(d){return c(1,d)}function c(d=1,f){let p=-1;return n(()=>(p+=1,p>=d),f)}return Array.isArray(We(e))?{toMatch:n,toContains:l,changed:u,changedTimes:c,get not(){return no(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:r,toBeNaN:s,toBeUndefined:a,changed:u,changedTimes:c,get not(){return no(e,!t)}}}function oo(e){return no(e)}function ms(e){var t;const n=We(e);return(t=n==null?void 0:n.$el)!=null?t:n}const or=ls?window:void 0;function ir(...e){let t,n,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,i]=e,t=or):[t,n,o,i]=e,!t)return fs;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],a=()=>{r.forEach(c=>c()),r.length=0},s=(c,d,f,p)=>(c.addEventListener(d,f,p),()=>c.removeEventListener(d,f,p)),l=ve(()=>[ms(t),We(i)],([c,d])=>{if(a(),!c)return;const f=ds(d)?{...d}:d;r.push(...n.flatMap(p=>o.map(b=>s(c,p,b,f))))},{immediate:!0,flush:"post"}),u=()=>{l(),a()};return xn(u),u}function ys(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Fo(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=or,eventName:r="keydown",passive:a=!1,dedupe:s=!1}=o,l=ys(t);return ir(i,r,c=>{c.repeat&&We(s)||l(c)&&n(c)},a)}function _s(e){return JSON.parse(JSON.stringify(e))}function Rn(e,t,n,o={}){var i,r,a;const{clone:s=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:f}=o,p=jt(),b=n||(p==null?void 0:p.emit)||((i=p==null?void 0:p.$emit)==null?void 0:i.bind(p))||((a=(r=p==null?void 0:p.proxy)==null?void 0:r.$emit)==null?void 0:a.bind(p==null?void 0:p.proxy));let y=u;t||(t="modelValue"),y=y||`update:${t.toString()}`;const m=x=>s?typeof s=="function"?s(x):_s(x):x,w=()=>us(e[t])?m(e[t]):d,v=x=>{f?f(x)&&b(y,x):b(y,x)};if(l){const x=w(),S=le(x);let P=!1;return ve(()=>e[t],R=>{P||(P=!0,S.value=m(R),qe(()=>P=!1))}),ve(S,R=>{!P&&(R!==e[t]||c)&&v(R)},{deep:c}),S}else return re({get(){return w()},set(x){v(x)}})}var ws={value:()=>{}};function Sn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new sn(n)}function sn(e){this._=e}function bs(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}sn.prototype=Sn.prototype={constructor:sn,on:function(e,t){var n=this._,o=bs(e+"",n),i,r=-1,a=o.length;if(arguments.length<2){for(;++r<a;)if((i=(e=o[r]).type)&&(i=Es(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<a;)if(i=(e=o[r]).type)n[i]=Go(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Go(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new sn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,r;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};function Es(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function Go(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=ws,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var io="http://www.w3.org/1999/xhtml";const Ho={svg:"http://www.w3.org/2000/svg",xhtml:io,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Nn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ho.hasOwnProperty(t)?{space:Ho[t],local:e}:e}function xs(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===io&&t.documentElement.namespaceURI===io?t.createElement(e):t.createElementNS(n,e)}}function Ss(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function rr(e){var t=Nn(e);return(t.local?Ss:xs)(t)}function Ns(){}function xo(e){return e==null?Ns:function(){return this.querySelector(e)}}function ks(e){typeof e!="function"&&(e=xo(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],a=r.length,s=o[i]=new Array(a),l,u,c=0;c<a;++c)(l=r[c])&&(u=e.call(l,l.__data__,c,r))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new De(o,this._parents)}function Cs(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Is(){return[]}function ar(e){return e==null?Is:function(){return this.querySelectorAll(e)}}function Ms(e){return function(){return Cs(e.apply(this,arguments))}}function Os(e){typeof e=="function"?e=Ms(e):e=ar(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var a=t[r],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(o.push(e.call(l,l.__data__,u,a)),i.push(l));return new De(o,i)}function sr(e){return function(){return this.matches(e)}}function lr(e){return function(t){return t.matches(e)}}var Ts=Array.prototype.find;function $s(e){return function(){return Ts.call(this.children,e)}}function Ps(){return this.firstElementChild}function Ds(e){return this.select(e==null?Ps:$s(typeof e=="function"?e:lr(e)))}var As=Array.prototype.filter;function Vs(){return Array.from(this.children)}function Rs(e){return function(){return As.call(this.children,e)}}function zs(e){return this.selectAll(e==null?Vs:Rs(typeof e=="function"?e:lr(e)))}function Bs(e){typeof e!="function"&&(e=sr(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],a=r.length,s=o[i]=[],l,u=0;u<a;++u)(l=r[u])&&e.call(l,l.__data__,u,r)&&s.push(l);return new De(o,this._parents)}function ur(e){return new Array(e.length)}function Ls(){return new De(this._enter||this._groups.map(ur),this._parents)}function dn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}dn.prototype={constructor:dn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Fs(e){return function(){return e}}function Gs(e,t,n,o,i,r){for(var a=0,s,l=t.length,u=r.length;a<u;++a)(s=t[a])?(s.__data__=r[a],o[a]=s):n[a]=new dn(e,r[a]);for(;a<l;++a)(s=t[a])&&(i[a]=s)}function Hs(e,t,n,o,i,r,a){var s,l,u=new Map,c=t.length,d=r.length,f=new Array(c),p;for(s=0;s<c;++s)(l=t[s])&&(f[s]=p=a.call(l,l.__data__,s,t)+"",u.has(p)?i[s]=l:u.set(p,l));for(s=0;s<d;++s)p=a.call(e,r[s],s,r)+"",(l=u.get(p))?(o[s]=l,l.__data__=r[s],u.delete(p)):n[s]=new dn(e,r[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(f[s])===l&&(i[s]=l)}function Ys(e){return e.__data__}function Xs(e,t){if(!arguments.length)return Array.from(this,Ys);var n=t?Hs:Gs,o=this._parents,i=this._groups;typeof e!="function"&&(e=Fs(e));for(var r=i.length,a=new Array(r),s=new Array(r),l=new Array(r),u=0;u<r;++u){var c=o[u],d=i[u],f=d.length,p=js(e.call(c,c&&c.__data__,u,o)),b=p.length,y=s[u]=new Array(b),m=a[u]=new Array(b),w=l[u]=new Array(f);n(c,d,y,m,w,p,t);for(var v=0,x=0,S,P;v<b;++v)if(S=y[v]){for(v>=x&&(x=v+1);!(P=m[x])&&++x<b;);S._next=P||null}}return a=new De(a,o),a._enter=s,a._exit=l,a}function js(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Us(){return new De(this._exit||this._groups.map(ur),this._parents)}function Ws(e,t,n){var o=this.enter(),i=this,r=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?r.remove():n(r),o&&i?o.merge(i).order():i}function Zs(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,a=Math.min(i,r),s=new Array(i),l=0;l<a;++l)for(var u=n[l],c=o[l],d=u.length,f=s[l]=new Array(d),p,b=0;b<d;++b)(p=u[b]||c[b])&&(f[b]=p);for(;l<i;++l)s[l]=n[l];return new De(s,this._parents)}function Ks(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,r=o[i],a;--i>=0;)(a=o[i])&&(r&&a.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(a,r),r=a);return this}function qs(e){e||(e=Qs);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var a=n[r],s=a.length,l=i[r]=new Array(s),u,c=0;c<s;++c)(u=a[c])&&(l[c]=u);l.sort(t)}return new De(i,this._parents).order()}function Qs(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Js(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function el(){return Array.from(this)}function tl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var a=o[i];if(a)return a}return null}function nl(){let e=0;for(const t of this)++e;return e}function ol(){return!this.node()}function il(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],r=0,a=i.length,s;r<a;++r)(s=i[r])&&e.call(s,s.__data__,r,i);return this}function rl(e){return function(){this.removeAttribute(e)}}function al(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sl(e,t){return function(){this.setAttribute(e,t)}}function ll(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ul(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function cl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function dl(e,t){var n=Nn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?al:rl:typeof t=="function"?n.local?cl:ul:n.local?ll:sl)(n,t))}function cr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function fl(e){return function(){this.style.removeProperty(e)}}function hl(e,t,n){return function(){this.style.setProperty(e,t,n)}}function pl(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function gl(e,t,n){return arguments.length>1?this.each((t==null?fl:typeof t=="function"?pl:hl)(e,t,n??"")):It(this.node(),e)}function It(e,t){return e.style.getPropertyValue(t)||cr(e).getComputedStyle(e,null).getPropertyValue(t)}function vl(e){return function(){delete this[e]}}function ml(e,t){return function(){this[e]=t}}function yl(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function _l(e,t){return arguments.length>1?this.each((t==null?vl:typeof t=="function"?yl:ml)(e,t)):this.node()[e]}function dr(e){return e.trim().split(/^|\s+/)}function So(e){return e.classList||new fr(e)}function fr(e){this._node=e,this._names=dr(e.getAttribute("class")||"")}fr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function hr(e,t){for(var n=So(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function pr(e,t){for(var n=So(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function wl(e){return function(){hr(this,e)}}function bl(e){return function(){pr(this,e)}}function El(e,t){return function(){(t.apply(this,arguments)?hr:pr)(this,e)}}function xl(e,t){var n=dr(e+"");if(arguments.length<2){for(var o=So(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?El:t?wl:bl)(n,t))}function Sl(){this.textContent=""}function Nl(e){return function(){this.textContent=e}}function kl(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Cl(e){return arguments.length?this.each(e==null?Sl:(typeof e=="function"?kl:Nl)(e)):this.node().textContent}function Il(){this.innerHTML=""}function Ml(e){return function(){this.innerHTML=e}}function Ol(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Tl(e){return arguments.length?this.each(e==null?Il:(typeof e=="function"?Ol:Ml)(e)):this.node().innerHTML}function $l(){this.nextSibling&&this.parentNode.appendChild(this)}function Pl(){return this.each($l)}function Dl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Al(){return this.each(Dl)}function Vl(e){var t=typeof e=="function"?e:rr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Rl(){return null}function zl(e,t){var n=typeof e=="function"?e:rr(e),o=t==null?Rl:typeof t=="function"?t:xo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Bl(){var e=this.parentNode;e&&e.removeChild(this)}function Ll(){return this.each(Bl)}function Fl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Gl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Hl(e){return this.select(e?Gl:Fl)}function Yl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Xl(e){return function(t){e.call(this,t,this.__data__)}}function jl(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Ul(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,r;n<i;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++o]=r;++o?t.length=o:delete this.__on}}}function Wl(e,t,n){return function(){var o=this.__on,i,r=Xl(t);if(o){for(var a=0,s=o.length;a<s;++a)if((i=o[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=n),i.value=t;return}}this.addEventListener(e.type,r,n),i={type:e.type,name:e.name,value:t,listener:r,options:n},o?o.push(i):this.__on=[i]}}function Zl(e,t,n){var o=jl(e+""),i,r=o.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(i=0,c=s[l];i<r;++i)if((a=o[i]).type===c.type&&a.name===c.name)return c.value}return}for(s=t?Wl:Ul,i=0;i<r;++i)this.each(s(o[i],t,n));return this}function gr(e,t,n){var o=cr(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Kl(e,t){return function(){return gr(this,e,t)}}function ql(e,t){return function(){return gr(this,e,t.apply(this,arguments))}}function Ql(e,t){return this.each((typeof t=="function"?ql:Kl)(e,t))}function*Jl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length,a;i<r;++i)(a=o[i])&&(yield a)}var vr=[null];function De(e,t){this._groups=e,this._parents=t}function Ut(){return new De([[document.documentElement]],vr)}function eu(){return this}De.prototype=Ut.prototype={constructor:De,select:ks,selectAll:Os,selectChild:Ds,selectChildren:zs,filter:Bs,data:Xs,enter:Ls,exit:Us,join:Ws,merge:Zs,selection:eu,order:Ks,sort:qs,call:Js,nodes:el,node:tl,size:nl,empty:ol,each:il,attr:dl,style:gl,property:_l,classed:xl,text:Cl,html:Tl,raise:Pl,lower:Al,append:Vl,insert:zl,remove:Ll,clone:Hl,datum:Yl,on:Zl,dispatch:Ql,[Symbol.iterator]:Jl};function Ve(e){return typeof e=="string"?new De([[document.querySelector(e)]],[document.documentElement]):new De([[e]],vr)}function tu(e){let t;for(;t=e.sourceEvent;)e=t;return e}function He(e,t){if(e=tu(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const nu={passive:!1},Lt={capture:!0,passive:!1};function zn(e){e.stopImmediatePropagation()}function Et(e){e.preventDefault(),e.stopImmediatePropagation()}function mr(e){var t=e.document.documentElement,n=Ve(e).on("dragstart.drag",Et,Lt);"onselectstart"in t?n.on("selectstart.drag",Et,Lt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function yr(e,t){var n=e.document.documentElement,o=Ve(e).on("dragstart.drag",null);t&&(o.on("click.drag",Et,Lt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Kt=e=>()=>e;function ro(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:r,x:a,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}ro.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ou(e){return!e.ctrlKey&&!e.button}function iu(){return this.parentNode}function ru(e,t){return t??{x:e.x,y:e.y}}function au(){return navigator.maxTouchPoints||"ontouchstart"in this}function su(){var e=ou,t=iu,n=ru,o=au,i={},r=Sn("start","drag","end"),a=0,s,l,u,c,d=0;function f(S){S.on("mousedown.drag",p).filter(o).on("touchstart.drag",m).on("touchmove.drag",w,nu).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(S,P){if(!(c||!e.call(this,S,P))){var R=x(this,t.call(this,S,P),S,P,"mouse");R&&(Ve(S.view).on("mousemove.drag",b,Lt).on("mouseup.drag",y,Lt),mr(S.view),zn(S),u=!1,s=S.clientX,l=S.clientY,R("start",S))}}function b(S){if(Et(S),!u){var P=S.clientX-s,R=S.clientY-l;u=P*P+R*R>d}i.mouse("drag",S)}function y(S){Ve(S.view).on("mousemove.drag mouseup.drag",null),yr(S.view,u),Et(S),i.mouse("end",S)}function m(S,P){if(e.call(this,S,P)){var R=S.changedTouches,$=t.call(this,S,P),j=R.length,U,A;for(U=0;U<j;++U)(A=x(this,$,S,P,R[U].identifier,R[U]))&&(zn(S),A("start",S,R[U]))}}function w(S){var P=S.changedTouches,R=P.length,$,j;for($=0;$<R;++$)(j=i[P[$].identifier])&&(Et(S),j("drag",S,P[$]))}function v(S){var P=S.changedTouches,R=P.length,$,j;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),$=0;$<R;++$)(j=i[P[$].identifier])&&(zn(S),j("end",S,P[$]))}function x(S,P,R,$,j,U){var A=r.copy(),E=He(U||R,P),J,ee,_;if((_=n.call(S,new ro("beforestart",{sourceEvent:R,target:f,identifier:j,active:a,x:E[0],y:E[1],dx:0,dy:0,dispatch:A}),$))!=null)return J=_.x-E[0]||0,ee=_.y-E[1]||0,function O(C,M,T){var D=E,z;switch(C){case"start":i[j]=O,z=a++;break;case"end":delete i[j],--a;case"drag":E=He(T||M,P),z=a;break}A.call(C,S,new ro(C,{sourceEvent:M,subject:_,target:f,identifier:j,active:z,x:E[0]+J,y:E[1]+ee,dx:E[0]-D[0],dy:E[1]-D[1],dispatch:A}),$)}}return f.filter=function(S){return arguments.length?(e=typeof S=="function"?S:Kt(!!S),f):e},f.container=function(S){return arguments.length?(t=typeof S=="function"?S:Kt(S),f):t},f.subject=function(S){return arguments.length?(n=typeof S=="function"?S:Kt(S),f):n},f.touchable=function(S){return arguments.length?(o=typeof S=="function"?S:Kt(!!S),f):o},f.on=function(){var S=r.on.apply(r,arguments);return S===r?f:S},f.clickDistance=function(S){return arguments.length?(d=(S=+S)*S,f):Math.sqrt(d)},f}function No(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _r(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Wt(){}var Ft=.7,fn=1/Ft,xt="\\s*([+-]?\\d+)\\s*",Gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lu=/^#([0-9a-f]{3,8})$/,uu=new RegExp(`^rgb\\(${xt},${xt},${xt}\\)$`),cu=new RegExp(`^rgb\\(${Xe},${Xe},${Xe}\\)$`),du=new RegExp(`^rgba\\(${xt},${xt},${xt},${Gt}\\)$`),fu=new RegExp(`^rgba\\(${Xe},${Xe},${Xe},${Gt}\\)$`),hu=new RegExp(`^hsl\\(${Gt},${Xe},${Xe}\\)$`),pu=new RegExp(`^hsla\\(${Gt},${Xe},${Xe},${Gt}\\)$`),Yo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};No(Wt,Ht,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Xo,formatHex:Xo,formatHex8:gu,formatHsl:vu,formatRgb:jo,toString:jo});function Xo(){return this.rgb().formatHex()}function gu(){return this.rgb().formatHex8()}function vu(){return wr(this).formatHsl()}function jo(){return this.rgb().formatRgb()}function Ht(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=lu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Uo(t):n===3?new $e(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?qt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?qt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=uu.exec(e))?new $e(t[1],t[2],t[3],1):(t=cu.exec(e))?new $e(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=du.exec(e))?qt(t[1],t[2],t[3],t[4]):(t=fu.exec(e))?qt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=hu.exec(e))?Ko(t[1],t[2]/100,t[3]/100,1):(t=pu.exec(e))?Ko(t[1],t[2]/100,t[3]/100,t[4]):Yo.hasOwnProperty(e)?Uo(Yo[e]):e==="transparent"?new $e(NaN,NaN,NaN,0):null}function Uo(e){return new $e(e>>16&255,e>>8&255,e&255,1)}function qt(e,t,n,o){return o<=0&&(e=t=n=NaN),new $e(e,t,n,o)}function mu(e){return e instanceof Wt||(e=Ht(e)),e?(e=e.rgb(),new $e(e.r,e.g,e.b,e.opacity)):new $e}function ao(e,t,n,o){return arguments.length===1?mu(e):new $e(e,t,n,o??1)}function $e(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}No($e,ao,_r(Wt,{brighter(e){return e=e==null?fn:Math.pow(fn,e),new $e(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ft:Math.pow(Ft,e),new $e(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $e(ht(this.r),ht(this.g),ht(this.b),hn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wo,formatHex:Wo,formatHex8:yu,formatRgb:Zo,toString:Zo}));function Wo(){return`#${ft(this.r)}${ft(this.g)}${ft(this.b)}`}function yu(){return`#${ft(this.r)}${ft(this.g)}${ft(this.b)}${ft((isNaN(this.opacity)?1:this.opacity)*255)}`}function Zo(){const e=hn(this.opacity);return`${e===1?"rgb(":"rgba("}${ht(this.r)}, ${ht(this.g)}, ${ht(this.b)}${e===1?")":`, ${e})`}`}function hn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ht(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ft(e){return e=ht(e),(e<16?"0":"")+e.toString(16)}function Ko(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Re(e,t,n,o)}function wr(e){if(e instanceof Re)return new Re(e.h,e.s,e.l,e.opacity);if(e instanceof Wt||(e=Ht(e)),!e)return new Re;if(e instanceof Re)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),a=NaN,s=r-i,l=(r+i)/2;return s?(t===r?a=(n-o)/s+(n<o)*6:n===r?a=(o-t)/s+2:a=(t-n)/s+4,s/=l<.5?r+i:2-r-i,a*=60):s=l>0&&l<1?0:a,new Re(a,s,l,e.opacity)}function _u(e,t,n,o){return arguments.length===1?wr(e):new Re(e,t,n,o??1)}function Re(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}No(Re,_u,_r(Wt,{brighter(e){return e=e==null?fn:Math.pow(fn,e),new Re(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ft:Math.pow(Ft,e),new Re(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new $e(Bn(e>=240?e-240:e+120,i,o),Bn(e,i,o),Bn(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Re(qo(this.h),Qt(this.s),Qt(this.l),hn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=hn(this.opacity);return`${e===1?"hsl(":"hsla("}${qo(this.h)}, ${Qt(this.s)*100}%, ${Qt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function qo(e){return e=(e||0)%360,e<0?e+360:e}function Qt(e){return Math.max(0,Math.min(1,e||0))}function Bn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const br=e=>()=>e;function wu(e,t){return function(n){return e+n*t}}function bu(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Eu(e){return(e=+e)==1?Er:function(t,n){return n-t?bu(t,n,e):br(isNaN(t)?n:t)}}function Er(e,t){var n=t-e;return n?wu(e,n):br(isNaN(e)?t:e)}const Qo=function e(t){var n=Eu(t);function o(i,r){var a=n((i=ao(i)).r,(r=ao(r)).r),s=n(i.g,r.g),l=n(i.b,r.b),u=Er(i.opacity,r.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return o.gamma=e,o}(1);function ot(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var so=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ln=new RegExp(so.source,"g");function xu(e){return function(){return e}}function Su(e){return function(t){return e(t)+""}}function Nu(e,t){var n=so.lastIndex=Ln.lastIndex=0,o,i,r,a=-1,s=[],l=[];for(e=e+"",t=t+"";(o=so.exec(e))&&(i=Ln.exec(t));)(r=i.index)>n&&(r=t.slice(n,r),s[a]?s[a]+=r:s[++a]=r),(o=o[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:ot(o,i)})),n=Ln.lastIndex;return n<t.length&&(r=t.slice(n),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?Su(l[0].x):xu(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}var Jo=180/Math.PI,lo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xr(e,t,n,o,i,r){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*Jo,skewX:Math.atan(l)*Jo,scaleX:a,scaleY:s}}var Jt;function ku(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?lo:xr(t.a,t.b,t.c,t.d,t.e,t.f)}function Cu(e){return e==null||(Jt||(Jt=document.createElementNS("http://www.w3.org/2000/svg","g")),Jt.setAttribute("transform",e),!(e=Jt.transform.baseVal.consolidate()))?lo:(e=e.matrix,xr(e.a,e.b,e.c,e.d,e.e,e.f))}function Sr(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function r(u,c,d,f,p,b){if(u!==d||c!==f){var y=p.push("translate(",null,t,null,n);b.push({i:y-4,x:ot(u,d)},{i:y-2,x:ot(c,f)})}else(d||f)&&p.push("translate("+d+t+f+n)}function a(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,o)-2,x:ot(u,c)})):c&&d.push(i(d)+"rotate("+c+o)}function s(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,o)-2,x:ot(u,c)}):c&&d.push(i(d)+"skewX("+c+o)}function l(u,c,d,f,p,b){if(u!==d||c!==f){var y=p.push(i(p)+"scale(",null,",",null,")");b.push({i:y-4,x:ot(u,d)},{i:y-2,x:ot(c,f)})}else(d!==1||f!==1)&&p.push(i(p)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),r(u.translateX,u.translateY,c.translateX,c.translateY,d,f),a(u.rotate,c.rotate,d,f),s(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(p){for(var b=-1,y=f.length,m;++b<y;)d[(m=f[b]).i]=m.x(p);return d.join("")}}}var Iu=Sr(ku,"px, ","px)","deg)"),Mu=Sr(Cu,", ",")",")"),Ou=1e-12;function ei(e){return((e=Math.exp(e))+1/e)/2}function Tu(e){return((e=Math.exp(e))-1/e)/2}function $u(e){return((e=Math.exp(2*e))-1)/(e+1)}const Pu=function e(t,n,o){function i(r,a){var s=r[0],l=r[1],u=r[2],c=a[0],d=a[1],f=a[2],p=c-s,b=d-l,y=p*p+b*b,m,w;if(y<Ou)w=Math.log(f/u)/t,m=function($){return[s+$*p,l+$*b,u*Math.exp(t*$*w)]};else{var v=Math.sqrt(y),x=(f*f-u*u+o*y)/(2*u*n*v),S=(f*f-u*u-o*y)/(2*f*n*v),P=Math.log(Math.sqrt(x*x+1)-x),R=Math.log(Math.sqrt(S*S+1)-S);w=(R-P)/t,m=function($){var j=$*w,U=ei(P),A=u/(n*v)*(U*$u(t*j+P)-Tu(P));return[s+A*p,l+A*b,u*U/ei(t*j+P)]}}return m.duration=w*1e3*t/Math.SQRT2,m}return i.rho=function(r){var a=Math.max(.001,+r),s=a*a,l=s*s;return e(a,s,l)},i}(Math.SQRT2,2,4);var Mt=0,Dt=0,$t=0,Nr=1e3,pn,At,gn=0,gt=0,kn=0,Yt=typeof performance=="object"&&performance.now?performance:Date,kr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ko(){return gt||(kr(Du),gt=Yt.now()+kn)}function Du(){gt=0}function vn(){this._call=this._time=this._next=null}vn.prototype=Cr.prototype={constructor:vn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ko():+n)+(t==null?0:+t),!this._next&&At!==this&&(At?At._next=this:pn=this,At=this),this._call=e,this._time=n,uo()},stop:function(){this._call&&(this._call=null,this._time=1/0,uo())}};function Cr(e,t,n){var o=new vn;return o.restart(e,t,n),o}function Au(){ko(),++Mt;for(var e=pn,t;e;)(t=gt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Mt}function ti(){gt=(gn=Yt.now())+kn,Mt=Dt=0;try{Au()}finally{Mt=0,Ru(),gt=0}}function Vu(){var e=Yt.now(),t=e-gn;t>Nr&&(kn-=t,gn=e)}function Ru(){for(var e,t=pn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:pn=n);At=e,uo(o)}function uo(e){if(!Mt){Dt&&(Dt=clearTimeout(Dt));var t=e-gt;t>24?(e<1/0&&(Dt=setTimeout(ti,e-Yt.now()-kn)),$t&&($t=clearInterval($t))):($t||(gn=Yt.now(),$t=setInterval(Vu,Nr)),Mt=1,kr(ti))}}function ni(e,t,n){var o=new vn;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var zu=Sn("start","end","cancel","interrupt"),Bu=[],Ir=0,oi=1,co=2,ln=3,ii=4,fo=5,un=6;function Cn(e,t,n,o,i,r){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Lu(e,n,{name:t,index:o,group:i,on:zu,tween:Bu,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Ir})}function Co(e,t){var n=Fe(e,t);if(n.state>Ir)throw new Error("too late; already scheduled");return n}function je(e,t){var n=Fe(e,t);if(n.state>ln)throw new Error("too late; already running");return n}function Fe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Lu(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=Cr(r,0,n.time);function r(u){n.state=oi,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,d,f,p;if(n.state!==oi)return l();for(c in o)if(p=o[c],p.name===n.name){if(p.state===ln)return ni(a);p.state===ii?(p.state=un,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[c]):+c<t&&(p.state=un,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete o[c])}if(ni(function(){n.state===ln&&(n.state=ii,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=co,n.on.call("start",e,e.__data__,n.index,n.group),n.state===co){for(n.state=ln,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=p);i.length=d+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=fo,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===fo&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=un,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function cn(e,t){var n=e.__transition,o,i,r=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((o=n[a]).name!==t){r=!1;continue}i=o.state>co&&o.state<fo,o.state=un,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[a]}r&&delete e.__transition}}function Fu(e){return this.each(function(){cn(this,e)})}function Gu(e,t){var n,o;return function(){var i=je(this,e),r=i.tween;if(r!==n){o=n=r;for(var a=0,s=o.length;a<s;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}i.tween=o}}function Hu(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var r=je(this,e),a=r.tween;if(a!==o){i=(o=a).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}r.tween=i}}function Yu(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Fe(this.node(),n).tween,i=0,r=o.length,a;i<r;++i)if((a=o[i]).name===e)return a.value;return null}return this.each((t==null?Gu:Hu)(n,e,t))}function Io(e,t,n){var o=e._id;return e.each(function(){var i=je(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Fe(i,o).value[t]}}function Mr(e,t){var n;return(typeof t=="number"?ot:t instanceof Ht?Qo:(n=Ht(t))?(t=n,Qo):Nu)(e,t)}function Xu(e){return function(){this.removeAttribute(e)}}function ju(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Uu(e,t,n){var o,i=n+"",r;return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=t(o=a,n)}}function Wu(e,t,n){var o,i=n+"",r;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=t(o=a,n)}}function Zu(e,t,n){var o,i,r;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===o&&l===i?r:(i=l,r=t(o=a,s)))}}function Ku(e,t,n){var o,i,r;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===o&&l===i?r:(i=l,r=t(o=a,s)))}}function qu(e,t){var n=Nn(e),o=n==="transform"?Mu:Mr;return this.attrTween(e,typeof t=="function"?(n.local?Ku:Zu)(n,o,Io(this,"attr."+e,t)):t==null?(n.local?ju:Xu)(n):(n.local?Wu:Uu)(n,o,t))}function Qu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Ju(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ec(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&Ju(e,r)),n}return i._value=t,i}function tc(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&Qu(e,r)),n}return i._value=t,i}function nc(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Nn(e);return this.tween(n,(o.local?ec:tc)(o,t))}function oc(e,t){return function(){Co(this,e).delay=+t.apply(this,arguments)}}function ic(e,t){return t=+t,function(){Co(this,e).delay=t}}function rc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?oc:ic)(t,e)):Fe(this.node(),t).delay}function ac(e,t){return function(){je(this,e).duration=+t.apply(this,arguments)}}function sc(e,t){return t=+t,function(){je(this,e).duration=t}}function lc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ac:sc)(t,e)):Fe(this.node(),t).duration}function uc(e,t){if(typeof t!="function")throw new Error;return function(){je(this,e).ease=t}}function cc(e){var t=this._id;return arguments.length?this.each(uc(t,e)):Fe(this.node(),t).ease}function dc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;je(this,e).ease=n}}function fc(e){if(typeof e!="function")throw new Error;return this.each(dc(this._id,e))}function hc(e){typeof e!="function"&&(e=sr(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],a=r.length,s=o[i]=[],l,u=0;u<a;++u)(l=r[u])&&e.call(l,l.__data__,u,r)&&s.push(l);return new Qe(o,this._parents,this._name,this._id)}function pc(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),a=new Array(o),s=0;s<r;++s)for(var l=t[s],u=n[s],c=l.length,d=a[s]=new Array(c),f,p=0;p<c;++p)(f=l[p]||u[p])&&(d[p]=f);for(;s<o;++s)a[s]=t[s];return new Qe(a,this._parents,this._name,this._id)}function gc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function vc(e,t,n){var o,i,r=gc(t)?Co:je;return function(){var a=r(this,e),s=a.on;s!==o&&(i=(o=s).copy()).on(t,n),a.on=i}}function mc(e,t){var n=this._id;return arguments.length<2?Fe(this.node(),n).on.on(e):this.each(vc(n,e,t))}function yc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function _c(){return this.on("end.remove",yc(this._id))}function wc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=xo(e));for(var o=this._groups,i=o.length,r=new Array(i),a=0;a<i;++a)for(var s=o[a],l=s.length,u=r[a]=new Array(l),c,d,f=0;f<l;++f)(c=s[f])&&(d=e.call(c,c.__data__,f,s))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,Cn(u[f],t,n,f,u,Fe(c,n)));return new Qe(r,this._parents,t,n)}function bc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ar(e));for(var o=this._groups,i=o.length,r=[],a=[],s=0;s<i;++s)for(var l=o[s],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),p,b=Fe(c,n),y=0,m=f.length;y<m;++y)(p=f[y])&&Cn(p,t,n,y,f,b);r.push(f),a.push(c)}return new Qe(r,a,t,n)}var Ec=Ut.prototype.constructor;function xc(){return new Ec(this._groups,this._parents)}function Sc(e,t){var n,o,i;return function(){var r=It(this,e),a=(this.style.removeProperty(e),It(this,e));return r===a?null:r===n&&a===o?i:i=t(n=r,o=a)}}function Or(e){return function(){this.style.removeProperty(e)}}function Nc(e,t,n){var o,i=n+"",r;return function(){var a=It(this,e);return a===i?null:a===o?r:r=t(o=a,n)}}function kc(e,t,n){var o,i,r;return function(){var a=It(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),It(this,e))),a===l?null:a===o&&l===i?r:(i=l,r=t(o=a,s))}}function Cc(e,t){var n,o,i,r="style."+t,a="end."+r,s;return function(){var l=je(this,e),u=l.on,c=l.value[r]==null?s||(s=Or(t)):void 0;(u!==n||i!==c)&&(o=(n=u).copy()).on(a,i=c),l.on=o}}function Ic(e,t,n){var o=(e+="")=="transform"?Iu:Mr;return t==null?this.styleTween(e,Sc(e,o)).on("end.style."+e,Or(e)):typeof t=="function"?this.styleTween(e,kc(e,o,Io(this,"style."+e,t))).each(Cc(this._id,e)):this.styleTween(e,Nc(e,o,t),n).on("end.style."+e,null)}function Mc(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Oc(e,t,n){var o,i;function r(){var a=t.apply(this,arguments);return a!==i&&(o=(i=a)&&Mc(e,a,n)),o}return r._value=t,r}function Tc(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Oc(e,t,n??""))}function $c(e){return function(){this.textContent=e}}function Pc(e){return function(){var t=e(this);this.textContent=t??""}}function Dc(e){return this.tween("text",typeof e=="function"?Pc(Io(this,"text",e)):$c(e==null?"":e+""))}function Ac(e){return function(t){this.textContent=e.call(this,t)}}function Vc(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Ac(i)),t}return o._value=e,o}function Rc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Vc(e))}function zc(){for(var e=this._name,t=this._id,n=Tr(),o=this._groups,i=o.length,r=0;r<i;++r)for(var a=o[r],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var c=Fe(l,t);Cn(l,e,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Qe(o,this._parents,e,n)}function Bc(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(r,a){var s={value:a},l={value:function(){--i===0&&r()}};n.each(function(){var u=je(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),i===0&&r()})}var Lc=0;function Qe(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Tr(){return++Lc}var Ue=Ut.prototype;Qe.prototype={constructor:Qe,select:wc,selectAll:bc,selectChild:Ue.selectChild,selectChildren:Ue.selectChildren,filter:hc,merge:pc,selection:xc,transition:zc,call:Ue.call,nodes:Ue.nodes,node:Ue.node,size:Ue.size,empty:Ue.empty,each:Ue.each,on:mc,attr:qu,attrTween:nc,style:Ic,styleTween:Tc,text:Dc,textTween:Rc,remove:_c,tween:Yu,delay:rc,duration:lc,ease:cc,easeVarying:fc,end:Bc,[Symbol.iterator]:Ue[Symbol.iterator]};function Fc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Gc={time:null,delay:0,duration:250,ease:Fc};function Hc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Yc(e){var t,n;e instanceof Qe?(t=e._id,e=e._name):(t=Tr(),(n=Gc).time=ko(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var a=o[r],s=a.length,l,u=0;u<s;++u)(l=a[u])&&Cn(l,e,t,u,a,n||Hc(l,t));return new Qe(o,this._parents,e,t)}Ut.prototype.interrupt=Fu;Ut.prototype.transition=Yc;const en=e=>()=>e;function Xc(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Ke(e,t,n){this.k=e,this.x=t,this.y=n}Ke.prototype={constructor:Ke,scale:function(e){return e===1?this:new Ke(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ke(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ot=new Ke(1,0,0);Ke.prototype;function Fn(e){e.stopImmediatePropagation()}function Pt(e){e.preventDefault(),e.stopImmediatePropagation()}function jc(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Uc(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ri(){return this.__zoom||Ot}function Wc(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Zc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Kc(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a))}function qc(){var e=jc,t=Uc,n=Kc,o=Wc,i=Zc,r=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Pu,u=Sn("start","zoom","end"),c,d,f,p=500,b=150,y=0,m=10;function w(_){_.property("__zoom",ri).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",A).filter(i).on("touchstart.zoom",E).on("touchmove.zoom",J).on("touchend.zoom touchcancel.zoom",ee).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(_,O,C,M){var T=_.selection?_.selection():_;T.property("__zoom",ri),_!==T?P(_,O,C,M):T.interrupt().each(function(){R(this,arguments).event(M).start().zoom(null,typeof O=="function"?O.apply(this,arguments):O).end()})},w.scaleBy=function(_,O,C,M){w.scaleTo(_,function(){var T=this.__zoom.k,D=typeof O=="function"?O.apply(this,arguments):O;return T*D},C,M)},w.scaleTo=function(_,O,C,M){w.transform(_,function(){var T=t.apply(this,arguments),D=this.__zoom,z=C==null?S(T):typeof C=="function"?C.apply(this,arguments):C,G=D.invert(z),te=typeof O=="function"?O.apply(this,arguments):O;return n(x(v(D,te),z,G),T,a)},C,M)},w.translateBy=function(_,O,C,M){w.transform(_,function(){return n(this.__zoom.translate(typeof O=="function"?O.apply(this,arguments):O,typeof C=="function"?C.apply(this,arguments):C),t.apply(this,arguments),a)},null,M)},w.translateTo=function(_,O,C,M,T){w.transform(_,function(){var D=t.apply(this,arguments),z=this.__zoom,G=M==null?S(D):typeof M=="function"?M.apply(this,arguments):M;return n(Ot.translate(G[0],G[1]).scale(z.k).translate(typeof O=="function"?-O.apply(this,arguments):-O,typeof C=="function"?-C.apply(this,arguments):-C),D,a)},M,T)};function v(_,O){return O=Math.max(r[0],Math.min(r[1],O)),O===_.k?_:new Ke(O,_.x,_.y)}function x(_,O,C){var M=O[0]-C[0]*_.k,T=O[1]-C[1]*_.k;return M===_.x&&T===_.y?_:new Ke(_.k,M,T)}function S(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function P(_,O,C,M){_.on("start.zoom",function(){R(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(M).end()}).tween("zoom",function(){var T=this,D=arguments,z=R(T,D).event(M),G=t.apply(T,D),te=C==null?S(G):typeof C=="function"?C.apply(T,D):C,W=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),B=T.__zoom,K=typeof O=="function"?O.apply(T,D):O,de=l(B.invert(te).concat(W/B.k),K.invert(te).concat(W/K.k));return function(ue){if(ue===1)ue=K;else{var fe=de(ue),ne=W/fe[2];ue=new Ke(ne,te[0]-fe[0]*ne,te[1]-fe[1]*ne)}z.zoom(null,ue)}})}function R(_,O,C){return!C&&_.__zooming||new $(_,O)}function $(_,O){this.that=_,this.args=O,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,O),this.taps=0}$.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,O){return this.mouse&&_!=="mouse"&&(this.mouse[1]=O.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=O.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=O.invert(this.touch1[0])),this.that.__zoom=O,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var O=Ve(this.that).datum();u.call(_,this.that,new Xc(_,{sourceEvent:this.sourceEvent,target:w,type:_,transform:this.that.__zoom,dispatch:u}),O)}};function j(_,...O){if(!e.apply(this,arguments))return;var C=R(this,O).event(_),M=this.__zoom,T=Math.max(r[0],Math.min(r[1],M.k*Math.pow(2,o.apply(this,arguments)))),D=He(_);if(C.wheel)(C.mouse[0][0]!==D[0]||C.mouse[0][1]!==D[1])&&(C.mouse[1]=M.invert(C.mouse[0]=D)),clearTimeout(C.wheel);else{if(M.k===T)return;C.mouse=[D,M.invert(D)],cn(this),C.start()}Pt(_),C.wheel=setTimeout(z,b),C.zoom("mouse",n(x(v(M,T),C.mouse[0],C.mouse[1]),C.extent,a));function z(){C.wheel=null,C.end()}}function U(_,...O){if(f||!e.apply(this,arguments))return;var C=_.currentTarget,M=R(this,O,!0).event(_),T=Ve(_.view).on("mousemove.zoom",te,!0).on("mouseup.zoom",W,!0),D=He(_,C),z=_.clientX,G=_.clientY;mr(_.view),Fn(_),M.mouse=[D,this.__zoom.invert(D)],cn(this),M.start();function te(B){if(Pt(B),!M.moved){var K=B.clientX-z,de=B.clientY-G;M.moved=K*K+de*de>y}M.event(B).zoom("mouse",n(x(M.that.__zoom,M.mouse[0]=He(B,C),M.mouse[1]),M.extent,a))}function W(B){T.on("mousemove.zoom mouseup.zoom",null),yr(B.view,M.moved),Pt(B),M.event(B).end()}}function A(_,...O){if(e.apply(this,arguments)){var C=this.__zoom,M=He(_.changedTouches?_.changedTouches[0]:_,this),T=C.invert(M),D=C.k*(_.shiftKey?.5:2),z=n(x(v(C,D),M,T),t.apply(this,O),a);Pt(_),s>0?Ve(this).transition().duration(s).call(P,z,M,_):Ve(this).call(w.transform,z,M,_)}}function E(_,...O){if(e.apply(this,arguments)){var C=_.touches,M=C.length,T=R(this,O,_.changedTouches.length===M).event(_),D,z,G,te;for(Fn(_),z=0;z<M;++z)G=C[z],te=He(G,this),te=[te,this.__zoom.invert(te),G.identifier],T.touch0?!T.touch1&&T.touch0[2]!==te[2]&&(T.touch1=te,T.taps=0):(T.touch0=te,D=!0,T.taps=1+!!c);c&&(c=clearTimeout(c)),D&&(T.taps<2&&(d=te[0],c=setTimeout(function(){c=null},p)),cn(this),T.start())}}function J(_,...O){if(this.__zooming){var C=R(this,O).event(_),M=_.changedTouches,T=M.length,D,z,G,te;for(Pt(_),D=0;D<T;++D)z=M[D],G=He(z,this),C.touch0&&C.touch0[2]===z.identifier?C.touch0[0]=G:C.touch1&&C.touch1[2]===z.identifier&&(C.touch1[0]=G);if(z=C.that.__zoom,C.touch1){var W=C.touch0[0],B=C.touch0[1],K=C.touch1[0],de=C.touch1[1],ue=(ue=K[0]-W[0])*ue+(ue=K[1]-W[1])*ue,fe=(fe=de[0]-B[0])*fe+(fe=de[1]-B[1])*fe;z=v(z,Math.sqrt(ue/fe)),G=[(W[0]+K[0])/2,(W[1]+K[1])/2],te=[(B[0]+de[0])/2,(B[1]+de[1])/2]}else if(C.touch0)G=C.touch0[0],te=C.touch0[1];else return;C.zoom("touch",n(x(z,G,te),C.extent,a))}}function ee(_,...O){if(this.__zooming){var C=R(this,O).event(_),M=_.changedTouches,T=M.length,D,z;for(Fn(_),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),D=0;D<T;++D)z=M[D],C.touch0&&C.touch0[2]===z.identifier?delete C.touch0:C.touch1&&C.touch1[2]===z.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(z=He(z,this),Math.hypot(d[0]-z[0],d[1]-z[1])<m)){var G=Ve(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return w.wheelDelta=function(_){return arguments.length?(o=typeof _=="function"?_:en(+_),w):o},w.filter=function(_){return arguments.length?(e=typeof _=="function"?_:en(!!_),w):e},w.touchable=function(_){return arguments.length?(i=typeof _=="function"?_:en(!!_),w):i},w.extent=function(_){return arguments.length?(t=typeof _=="function"?_:en([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),w):t},w.scaleExtent=function(_){return arguments.length?(r[0]=+_[0],r[1]=+_[1],w):[r[0],r[1]]},w.translateExtent=function(_){return arguments.length?(a[0][0]=+_[0][0],a[1][0]=+_[1][0],a[0][1]=+_[0][1],a[1][1]=+_[1][1],w):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},w.constrain=function(_){return arguments.length?(n=_,w):n},w.duration=function(_){return arguments.length?(s=+_,w):s},w.interpolate=function(_){return arguments.length?(l=_,w):l},w.on=function(){var _=u.on.apply(u,arguments);return _===u?w:_},w.clickDistance=function(_){return arguments.length?(y=(_=+_)*_,w):Math.sqrt(y)},w.tapDistance=function(_){return arguments.length?(m=+_,w):m},w}var X=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(X||{}),Mo=(e=>(e.Partial="partial",e.Full="full",e))(Mo||{}),ct=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(ct||{}),vt=(e=>(e.Strict="strict",e.Loose="loose",e))(vt||{}),ho=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(ho||{}),zt=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(zt||{});function po(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,i=typeof(o==null?void 0:o.hasAttribute)=="function"?o.hasAttribute("contenteditable"):!1,r=typeof(o==null?void 0:o.closest)=="function"?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(o==null?void 0:o.nodeName)||i||!!r}function Qc(e){return e.ctrlKey||e.metaKey||e.shiftKey}function ai(e,t,n,o){const i=t.split("+").map(r=>r.trim().toLowerCase());return i.length===1?e.toLowerCase()===t.toLowerCase():(o?n.delete(e.toLowerCase()):n.add(e.toLowerCase()),i.every((r,a)=>n.has(r)&&Array.from(n.values())[a]===i[a]))}function Jc(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=ed(n.code,e);return Array.isArray(e)?e.some(i=>ai(n[o],i,t,n.type==="keyup")):ai(n[o],e,t,n.type==="keyup")}}function ed(e,t){return typeof t=="string"?e===t?"code":"key":t.includes(e)?"code":"key"}function Bt(e,t){const n=Ee(()=>pe(t==null?void 0:t.actInsideInputWithModifier)??!1),o=Ee(()=>pe(t==null?void 0:t.target)??window),i=le(pe(e)===!0);let r=!1;const a=new Set;let s=u(pe(e));ve(()=>pe(e),(c,d)=>{typeof d=="boolean"&&typeof c!="boolean"&&l(),s=u(c)},{immediate:!0}),Je(()=>{ir(window,["blur","contextmenu"],l)}),Fo((...c)=>s(...c),c=>{r=Qc(c),!((!r||r&&!n.value)&&po(c))&&(c.preventDefault(),i.value=!0)},{eventName:"keydown",target:o}),Fo((...c)=>s(...c),c=>{if(i.value){if((!r||r&&!n.value)&&po(c))return;l()}},{eventName:"keyup",target:o});function l(){r=!1,a.clear(),i.value=!1}function u(c){return c===null?(l(),()=>!1):typeof c=="boolean"?(l(),i.value=c,()=>!1):Array.isArray(c)||typeof c=="string"?Jc(c,a):c}return i}const $r="vue-flow__node-desc",Pr="vue-flow__edge-desc",td="vue-flow__aria-live",Dr=["Enter"," ","Escape"],St={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function go(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function vo(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function In(e){return{width:e.offsetWidth,height:e.offsetHeight}}function mt(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Ar(e,t){return{x:mt(e.x,t[0][0],t[1][0]),y:mt(e.y,t[0][1],t[1][1])}}function si(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function lt(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function pt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!lt(e)}function Vt(e){return pt(e)&&"computedPosition"in e}function tn(e){return!Number.isNaN(e)&&Number.isFinite(e)}function nd(e){return tn(e.width)&&tn(e.height)&&tn(e.x)&&tn(e.y)}function od(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:bt({width:0,height:0}),computedPosition:bt({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Ne(e.data)?e.data:{},events:bt(Ne(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function Vr(e,t,n){var o,i;const r={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(i=e.targetHandle)==null?void 0:i.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:Ne(e.data)?e.data:{},events:bt(Ne(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??r,e,{id:e.id.toString()})}function Rr(e,t,n,o){const i=typeof e=="string"?e:e.id,r=new Set,a=o==="source"?"target":"source";for(const s of n)s[a]===i&&r.add(s[o]);return t.filter(s=>r.has(s.id))}function id(...e){if(e.length===3){const[r,a,s]=e;return Rr(r,a,s,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(r=>lt(r)&&r.source===o).map(r=>n.find(a=>pt(a)&&a.id===r.target))}function rd(...e){if(e.length===3){const[r,a,s]=e;return Rr(r,a,s,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(r=>lt(r)&&r.target===o).map(r=>n.find(a=>pt(a)&&a.id===r.source))}function zr({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function ad(e,t){return t.some(n=>lt(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Br({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function mn({x:e,y:t},{x:n,y:o,zoom:i},r=!1,[a,s]=[1,1]){const l={x:(e-n)/i,y:(t-o)/i};return r?{x:a*Math.round(l.x/a),y:s*Math.round(l.y/s)}:l}function sd(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Lr({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function ld({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function Fr(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=sd(t,Lr({...o.computedPosition,...o.dimensions}))}return ld(t)}function Gr(e,t,n={x:0,y:0,zoom:1},o=!1,i=!1){const r={...mn(t,n),width:t.width/n.zoom,height:t.height/n.zoom},a=[];for(const s of e){const{dimensions:l,selectable:u=!0,hidden:c=!1}=s,d=l.width??s.width??null,f=l.height??s.height??null;if(i&&!u||c)continue;const p=vo(r,go(s)),b=d===null||f===null,y=o&&p>0,m=(d??0)*(f??0);(b||y||p>=m||s.dragging)&&a.push(s)}return a}function Hr(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function li(e,t,n,o,i,r=.1,a={x:0,y:0}){const s=t/(e.width*(1+r)),l=n/(e.height*(1+r)),u=Math.min(s,l),c=mt(u,o,i),d=e.x+e.width/2,f=e.y+e.height/2,p=t/2-d*c+(a.x??0),b=n/2-f*c+(a.y??0);return{x:p,y:b,zoom:c}}function ud(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function Yr(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:Yr(n,t):!1}function Xt(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function ui(e,t,n){return e<t?mt(Math.abs(e-t),1,t)/t:e>n?-mt(Math.abs(e-n),1,t)/t:0}function Xr(e,t,n=15,o=40){const i=ui(e.x,o,t.width-o)*n,r=ui(e.y,o,t.height-o)*n;return[i,r]}function Gn(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if(typeof t.style=="function"?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if(typeof i.width=="string"){const r=Number(i.width.replace("px",""));i.width=`${r+n}px`}else i.width+=n;if(o>0)if(typeof i.height=="string"){const r=Number(i.height.replace("px",""));i.height=`${r+o}px`}else i.height+=o;if(e.position.x<0){const r=Math.abs(e.position.x);if(t.position.x=t.position.x-r,typeof i.width=="string"){const a=Number(i.width.replace("px",""));i.width=`${a+r}px`}else i.width+=r;e.position.x=0}if(e.position.y<0){const r=Math.abs(e.position.y);if(t.position.y=t.position.y-r,typeof i.height=="string"){const a=Number(i.height.replace("px",""));i.height=`${a+r}px`}else i.height+=r;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),typeof t.style=="function"?t.style=r=>{const a=t.style;return{...a(r),...i}}:t.style={...t.style,...i}}}}function ci(e,t){var n,o;const i=e.filter(a=>a.type==="add"||a.type==="remove");for(const a of i)if(a.type==="add")t.findIndex(l=>l.id===a.item.id)===-1&&t.push(a.item);else if(a.type==="remove"){const s=t.findIndex(l=>l.id===a.id);s!==-1&&t.splice(s,1)}const r=t.map(a=>a.id);for(const a of t)for(const s of e)if(s.id===a.id)switch(s.type){case"select":a.selected=s.selected;break;case"position":if(Vt(a)&&(typeof s.position<"u"&&(a.position=s.position),typeof s.dragging<"u"&&(a.dragging=s.dragging),a.expandParent&&a.parentNode)){const l=t[r.indexOf(a.parentNode)];l&&Vt(l)&&Gn(a,l)}break;case"dimensions":if(Vt(a)&&(typeof s.dimensions<"u"&&(a.dimensions=s.dimensions),typeof s.updateStyle<"u"&&(a.style={...a.style||{},width:`${(n=s.dimensions)==null?void 0:n.width}px`,height:`${(o=s.dimensions)==null?void 0:o.height}px`}),typeof s.resizing<"u"&&(a.resizing=s.resizing),a.expandParent&&a.parentNode)){const l=t[r.indexOf(a.parentNode)];l&&Vt(l)&&(!!l.dimensions.width&&!!l.dimensions.height?Gn(a,l):qe(()=>{Gn(a,l)}))}break}return t}function nt(e,t){return{id:e,type:"select",selected:t}}function di(e){return{item:e,type:"add"}}function fi(e){return{id:e,type:"remove"}}function hi(e,t,n,o,i){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:i||null,type:"remove"}}function it(e,t=new Set,n=!1){const o=[];for(const[i,r]of e){const a=t.has(i);!(r.selected===void 0&&!a)&&r.selected!==a&&(n&&(r.selected=a),o.push(nt(r.id,a)))}return o}function F(e){const t=new Set;let n=!1;const o=()=>t.size>0;e&&(n=!0,t.add(e));const i=s=>{t.delete(s)};return{on:s=>{e&&n&&t.delete(e),t.add(s);const l=()=>{i(s),e&&n&&t.add(e)};return xn(l),{off:l}},off:i,trigger:s=>Promise.all(Array.from(t).map(l=>l(s))),hasListeners:o,fns:t}}function pi(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function cd(e,t,n,o,i){var r,a;const s=[];for(const l of e)(l.selected||l.id===i)&&(!l.parentNode||!Yr(l,o))&&(l.draggable||t&&typeof l.draggable>"u")&&s.push(bt({id:l.id,position:l.position||{x:0,y:0},distance:{x:n.x-((r=l.computedPosition)==null?void 0:r.x)||0,y:n.y-((a=l.computedPosition)==null?void 0:a.y)||0},from:l.computedPosition,extent:l.extent,parentNode:l.parentNode,dimensions:l.dimensions,expandParent:l.expandParent}));return s}function Hn({id:e,dragItems:t,findNode:n}){const o=[];for(const i of t){const r=n(i.id);r&&o.push(r)}return[e?o.find(i=>i.id===e):o[0],o]}function jr(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function dd(e,t,n){const[o,i,r,a]=typeof e!="string"?jr(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+a,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-i,n.computedPosition.y+n.dimensions.height-r]]:!1}function fd(e,t,n,o){let i=e.extent||n;if((i==="parent"||!Array.isArray(i)&&(i==null?void 0:i.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const r=dd(i,e,o);r&&(i=r)}else t(new Ie(ke.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(i)){const r=(o==null?void 0:o.computedPosition.x)||0,a=(o==null?void 0:o.computedPosition.y)||0;i=[[i[0][0]+r,i[0][1]+a],[i[1][0]+r,i[1][1]+a]]}else if(i!=="parent"&&(i!=null&&i.range)&&Array.isArray(i.range)){const[r,a,s,l]=jr(i.padding),u=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;i=[[i.range[0][0]+u+l,i.range[0][1]+c+r],[i.range[1][0]+u-a,i.range[1][1]+c-s]]}return i==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:i}function hd({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function Oo(e,t,n,o,i){const r=hd(e.dimensions,fd(e,n,o,i)),a=Ar(t,r);return{position:{x:a.x-((i==null?void 0:i.computedPosition.x)||0),y:a.y-((i==null?void 0:i.computedPosition.y)||0)},computedPosition:a}}function yn(e,t,n=X.Left){const o=((t==null?void 0:t.x)??0)+e.computedPosition.x,i=((t==null?void 0:t.y)??0)+e.computedPosition.y,{width:r,height:a}=t??vd(e);switch((t==null?void 0:t.position)??n){case X.Top:return{x:o+r/2,y:i};case X.Right:return{x:o+r,y:i+a/2};case X.Bottom:return{x:o+r/2,y:i+a};case X.Left:return{x:o,y:i+a/2}}}function gi(e=[],t){return e.length&&(t?e.find(n=>n.id===t):e[0])||null}function pd({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:r,width:a,height:s,viewport:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+r)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Lr({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:a/l.zoom,height:s/l.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*f)>0}function gd(e,t,n=!1){const o=typeof e.zIndex=="number";let i=o?e.zIndex:0;const r=t(e.source),a=t(e.target);return!r||!a?0:(n&&(i=o?e.zIndex:Math.max(r.computedPosition.z||0,a.computedPosition.z||0)),i)}var ke=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(ke||{});const vi={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class Ie extends Error{constructor(t,...n){var o;super((o=vi[t])==null?void 0:o.call(vi,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function To(e){return"clientX"in e}function at(e,t){var n,o;const i=To(e),r=i?e.clientX:(n=e.touches)==null?void 0:n[0].clientX,a=i?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}}const _n=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function vd(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function Ur(){return{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}}function Yn(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function mi(e,t,n,o){const i=[];for(const r of t[n]||[])if(`${e.id}-${r.id}-${n}`!==o){const{x:a,y:s}=yn(e,r);i.push({id:r.id||null,type:n,nodeId:e.id,x:a,y:s})}return i}function md(e,t,n,o,i,r){const{x:a,y:s}=at(e),u=t.elementsFromPoint(a,s).find(b=>b.classList.contains("vue-flow__handle"));if(u){const b=u.getAttribute("data-nodeid");if(b){const y=$o(void 0,u),m=u.getAttribute("data-handleid"),w=r({nodeId:b,id:m,type:y});if(w){const v=i.find(x=>x.nodeId===b&&x.type===y&&x.id===m);return{handle:{id:m,type:y,nodeId:b,x:(v==null?void 0:v.x)||n.x,y:(v==null?void 0:v.y)||n.y},validHandleResult:w}}}}let c=[],d=Number.POSITIVE_INFINITY;for(const b of i){const y=Math.sqrt((b.x-n.x)**2+(b.y-n.y)**2);if(y<=o){const m=r(b);y<=d&&(y<d?c=[{handle:b,validHandleResult:m}]:y===d&&c.push({handle:b,validHandleResult:m}),d=y)}}if(!c.length)return{handle:null,validHandleResult:Ur()};if(c.length===1)return c[0];const f=c.some(({validHandleResult:b})=>b.isValid),p=c.some(({handle:b})=>b.type==="target");return c.find(({handle:b,validHandleResult:y})=>p?b.type==="target":f?y.isValid:!0)||c[0]}function yi(e,t,n,o,i,r,a,s,l,u,c){const d=r==="target",f=s.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:p,y:b}=at(e),y=s.elementFromPoint(p,b),m=y!=null&&y.classList.contains("vue-flow__handle")?y:f,w=Ur();if(m){w.handleDomNode=m;const v=$o(void 0,m),x=m.getAttribute("data-nodeid"),S=m.getAttribute("data-handleid"),P=m.classList.contains("connectable"),R=m.classList.contains("connectableend"),$={source:d?x:o,sourceHandle:d?S:i,target:d?o:x,targetHandle:d?i:S};w.connection=$,P&&R&&(n===vt.Strict?d&&v==="source"||!d&&v==="target":x!==o||S!==i)&&(w.isValid=a($,{edges:l,nodes:u,sourceNode:c($.source),targetNode:c($.target)}),w.endHandle={nodeId:x,handleId:S,type:v,position:w.isValid?m.getAttribute("data-handlepos"):null})}return w}function yd({nodes:e,nodeId:t,handleId:n,handleType:o}){const i=[];for(let r=0;r<e.length;r++){const a=e[r],{handleBounds:s}=a;let l=[],u=[];s&&(l=mi(a,s,"source",`${t}-${n}-${o}`),u=mi(a,s,"target",`${t}-${n}-${o}`)),i.push(...l,...u)}return i}function $o(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function _d(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const wd=["production","prod"];function Mn(e,...t){Wr()&&console.warn(`[Vue Flow]: ${e}`,...t)}function Wr(){return!wd.includes("production")}function _i(e,t,n,o){const i=t.querySelectorAll(`.vue-flow__handle${e}`);return Array.from(i).map(a=>{const s=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(s.left-n.left)/o,y:(s.top-n.top)/o,...In(a)}})}function mo(e,t,n,o,i,r=!1,a){i.value=!1,e.selected?(r||e.selected&&t)&&(o([e]),qe(()=>{a.blur()})):n([e])}function Ne(e){return typeof V(e)<"u"}function bd(e,t,n,o){if(!e||!e.source||!e.target)return n(new Ie(ke.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let i;return lt(e)?i=e:i={...e,id:zr(e)},i=Vr(i,void 0,o),ad(i,t)?!1:i}function Ed(e,t,n,o,i,r){if(!t.source||!t.target)return r(new Ie(ke.EDGE_INVALID,e.id)),!1;const a=o(e.id);if(!a)return r(new Ie(ke.EDGE_NOT_FOUND,e.id)),!1;const{id:s,...l}=e,u={...l,id:i?zr(t):s,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(a),1,u),u}function wi(e,t,n){const o={},i=[];for(let r=0;r<e.length;++r){const a=e[r];if(!pt(a)){n(new Ie(ke.NODE_INVALID,a==null?void 0:a.id)||`[ID UNKNOWN|INDEX ${r}]`);continue}const s=od(a,t(a.id),a.parentNode);a.parentNode&&(o[a.parentNode]=!0),i[r]=s}for(const r of i){const a=t(r.parentNode)||i.find(s=>s.id===r.parentNode);r.parentNode&&!a&&n(new Ie(ke.NODE_MISSING_PARENT,r.id,r.parentNode)),(r.parentNode||o[r.id])&&(o[r.id]&&(r.isParent=!0),a&&(a.isParent=!0))}return i}function bi(e,t){e.clear();for(const n of t){const{id:o,source:i,target:r,sourceHandle:a=null,targetHandle:s=null}=n,l=`${i}-source-${a}`,u=`${r}-target-${s}`,c=e.get(l)||new Map,d=e.get(u)||new Map,f=bt({edgeId:o,source:i,target:r,sourceHandle:a,targetHandle:s});e.set(l,c.set(`${r}-${s}`,f)),e.set(u,d.set(`${i}-${a}`,f))}}function Ei(e,t,n,o,i,r,a,s){const l=[];for(const u of e){const c=lt(u)?u:bd(u,s,i,r);if(!c)continue;const d=n(c.source),f=n(c.target);if(!d||!f){i(new Ie(ke.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){i(new Ie(ke.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!f){i(new Ie(ke.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:s,nodes:a,sourceNode:d,targetNode:f})){i(new Ie(ke.EDGE_INVALID,c.id));continue}const p=o(c.id);l.push({...Vr(c,p,r),sourceNode:d,targetNode:f})}return l}const xi=Symbol("vueFlow"),Zr=Symbol("nodeId"),Kr=Symbol("nodeRef"),xd=Symbol("edgeId"),Sd=Symbol("edgeRef"),On=Symbol("slots");function qr(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:i,nodes:r,nodeExtent:a,nodeDragThreshold:s,viewport:l,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:d,panBy:f,findNode:p,multiSelectionActive:b,nodesSelectionActive:y,selectNodesOnDrag:m,removeSelectedElements:w,addSelectedNodes:v,updateNodePositions:x,emits:S}=xe(),{onStart:P,onDrag:R,onStop:$,onClick:j,el:U,disabled:A,id:E,selectable:J,dragHandle:ee}=e,_=le(!1);let O=[],C,M=null,T={x:void 0,y:void 0},D={x:0,y:0},z=null,G=!1,te=0,W=!1;const B=Cd(),K=({x:Z,y:q})=>{T={x:Z,y:q};let g=!1;if(O=O.map(h=>{const I={x:Z-h.distance.x,y:q-h.distance.y};n.value&&(I.x=o.value[0]*Math.round(I.x/o.value[0]),I.y=o.value[1]*Math.round(I.y/o.value[1]));const{computedPosition:N}=Oo(h,I,S.error,a.value,h.parentNode?p(h.parentNode):void 0);return g=g||h.position.x!==N.x||h.position.y!==N.y,h.position=N,h}),!!g&&(x(O,!0,!0),_.value=!0,z)){const[h,I]=Hn({id:E,dragItems:O,findNode:p});R({event:z,node:h,nodes:I})}},de=()=>{if(!M)return;const[Z,q]=Xr(D,M,c.value);if(Z!==0||q!==0){const g={x:(T.x??0)-Z/l.value.zoom,y:(T.y??0)-q/l.value.zoom};f({x:Z,y:q})&&K(g)}te=requestAnimationFrame(de)},ue=(Z,q)=>{G=!0;const g=p(E);!m.value&&!b.value&&g&&(g.selected||w()),g&&pe(J)&&m.value&&mo(g,b.value,v,w,y,!1,q);const h=B(Z);if(T=h,O=cd(r.value,d.value,h,p,E),O.length){const[I,N]=Hn({id:E,dragItems:O,findNode:p});P({event:Z.sourceEvent,node:I,nodes:N})}},fe=(Z,q)=>{var g;Z.sourceEvent.type==="touchmove"&&Z.sourceEvent.touches.length>1||(s.value===0&&ue(Z,q),T=B(Z),M=((g=t.value)==null?void 0:g.getBoundingClientRect())||null,D=at(Z.sourceEvent,M))},ne=(Z,q)=>{const g=B(Z);if(!W&&G&&u.value&&(W=!0,de()),!G){const h=g.xSnapped-(T.x??0),I=g.ySnapped-(T.y??0);Math.sqrt(h*h+I*I)>s.value&&ue(Z,q)}(T.x!==g.xSnapped||T.y!==g.ySnapped)&&O.length&&G&&(z=Z.sourceEvent,D=at(Z.sourceEvent,M),K(g))},ae=Z=>{if(!G){const q=B(Z),g=q.xSnapped-(T.x??0),h=q.ySnapped-(T.y??0),I=Math.sqrt(g*g+h*h);I!==0&&I<=s.value&&(j==null||j(Z.sourceEvent));return}if(_.value=!1,W=!1,G=!1,cancelAnimationFrame(te),O.length){x(O,!1,!1);const[q,g]=Hn({id:E,dragItems:O,findNode:p});$({event:Z.sourceEvent,node:q,nodes:g})}};return ve([()=>pe(A),U],([Z,q],g,h)=>{if(q){const I=Ve(q);Z||(C=su().on("start",N=>fe(N,q)).on("drag",N=>ne(N,q)).on("end",N=>ae(N)).filter(N=>{const k=N.target,L=pe(ee);return!N.button&&(!i.value||!pi(k,`.${i.value}`,q)&&(!L||pi(k,L,q)))}),I.call(C)),h(()=>{I.on(".drag",null),C&&(C.on("start",null),C.on("drag",null),C.on("end",null))})}}),_}function Nd(){return{doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),updateStart:F(),update:F(),updateEnd:F()}}function kd(e,t){const n=Nd();return n.doubleClick.on(o=>{var i,r;t.edgeDoubleClick(o),(r=(i=e.events)==null?void 0:i.doubleClick)==null||r.call(i,o)}),n.click.on(o=>{var i,r;t.edgeClick(o),(r=(i=e.events)==null?void 0:i.click)==null||r.call(i,o)}),n.mouseEnter.on(o=>{var i,r;t.edgeMouseEnter(o),(r=(i=e.events)==null?void 0:i.mouseEnter)==null||r.call(i,o)}),n.mouseMove.on(o=>{var i,r;t.edgeMouseMove(o),(r=(i=e.events)==null?void 0:i.mouseMove)==null||r.call(i,o)}),n.mouseLeave.on(o=>{var i,r;t.edgeMouseLeave(o),(r=(i=e.events)==null?void 0:i.mouseLeave)==null||r.call(i,o)}),n.contextMenu.on(o=>{var i,r;t.edgeContextMenu(o),(r=(i=e.events)==null?void 0:i.contextMenu)==null||r.call(i,o)}),n.updateStart.on(o=>{var i,r;t.edgeUpdateStart(o),(r=(i=e.events)==null?void 0:i.updateStart)==null||r.call(i,o)}),n.update.on(o=>{var i,r;t.edgeUpdate(o),(r=(i=e.events)==null?void 0:i.update)==null||r.call(i,o)}),n.updateEnd.on(o=>{var i,r;t.edgeUpdateEnd(o),(r=(i=e.events)==null?void 0:i.updateEnd)==null||r.call(i,o)}),Object.entries(n).reduce((o,[i,r])=>(o.emit[i]=r.trigger,o.on[i]=r.on,o),{emit:{},on:{}})}function Cd(){const{viewport:e,snapGrid:t,snapToGrid:n}=xe();return({sourceEvent:o})=>{const i=o.touches?o.touches[0].clientX:o.clientX,r=o.touches?o.touches[0].clientY:o.clientY,a={x:(i-e.value.x)/e.value.zoom,y:(r-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(a.x/t.value[0]):a.x,ySnapped:n.value?t.value[1]*Math.round(a.y/t.value[1]):a.y,...a}}}function nn(){return!0}function Qr({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:r,onEdgeUpdateEnd:a}){const{vueFlowRef:s,connectionMode:l,connectionRadius:u,connectOnClick:c,connectionClickStartHandle:d,nodesConnectable:f,autoPanOnConnect:p,autoPanSpeed:b,findNode:y,panBy:m,startConnection:w,updateConnection:v,endConnection:x,emits:S,viewport:P,edges:R,nodes:$,isValidConnection:j}=xe();let U=null,A=!1,E=null,J=null;function ee(O){var C;const M=pe(n)==="target",T=To(O),D=si(O.target);if(T&&O.button===0||!T){let z=function(N){q=at(N,ae);const{handle:k,validHandleResult:L}=md(N,D,mn(q,P.value,!1,[1,1]),u.value,h,Y=>yi(N,Y,l.value,pe(t),pe(e),M?"target":"source",W,D,R.value,$.value,y));if(B=k,g||(I(),g=!0),U=L.connection,A=L.isValid,E=L.handleDomNode,!(A&&B&&(J!=null&&J.endHandle)&&L.endHandle&&J.endHandle.type===L.endHandle.type&&J.endHandle.nodeId===L.endHandle.nodeId&&J.endHandle.handleId===L.endHandle.handleId)){if(v(B&&A?Br({x:B.x,y:B.y},P.value):q,L.endHandle,_d(!!B,A)),J=L,!B&&!A&&!E)return Yn(Z);U&&U.source!==U.target&&E&&(Yn(Z),Z=E,E.classList.add("connecting","vue-flow__handle-connecting"),E.classList.toggle("valid",A),E.classList.toggle("vue-flow__handle-valid",A))}},G=function(N){(B||E)&&U&&A&&(r?r(N,U):S.connect(U)),S.connectEnd(N),i&&(a==null||a(N)),Yn(Z),cancelAnimationFrame(K),x(N),g=!1,A=!1,U=null,E=null,D.removeEventListener("mousemove",z),D.removeEventListener("mouseup",G),D.removeEventListener("touchmove",z),D.removeEventListener("touchend",G)};const te=y(pe(t));let W=pe(o)||j.value||nn;!W&&te&&(W=(M?te.isValidSourcePos:te.isValidTargetPos)||nn);let B,K=0;const{x:de,y:ue}=at(O),fe=D==null?void 0:D.elementFromPoint(de,ue),ne=$o(pe(i),fe),ae=(C=s.value)==null?void 0:C.getBoundingClientRect();if(!ae||!ne)return;let Z,q=at(O,ae),g=!1;const h=yd({nodes:$.value,nodeId:pe(t),handleId:pe(e),handleType:ne}),I=()=>{if(!p.value)return;const[N,k]=Xr(q,ae,b.value);m({x:N,y:k}),K=requestAnimationFrame(I)};w({nodeId:pe(t),handleId:pe(e),type:ne,position:(fe==null?void 0:fe.getAttribute("data-handlepos"))||X.Top},{x:de-ae.left,y:ue-ae.top}),S.connectStart({event:O,nodeId:pe(t),handleId:pe(e),handleType:ne}),D.addEventListener("mousemove",z),D.addEventListener("mouseup",G),D.addEventListener("touchmove",z),D.addEventListener("touchend",G)}}function _(O){if(!c.value)return;const C=pe(n)==="target";if(!d.value)S.clickConnectStart({event:O,nodeId:pe(t),handleId:pe(e)}),w({nodeId:pe(t),type:pe(n),handleId:pe(e)},void 0,!0);else{let M=pe(o)||j.value||nn;const T=y(pe(t));if(!M&&T&&(M=(C?T.isValidSourcePos:T.isValidTargetPos)||nn),T&&(typeof T.connectable>"u"?f.value:T.connectable)===!1)return;const D=si(O.target),{connection:z,isValid:G}=yi(O,{nodeId:pe(t),id:pe(e),type:pe(n)},l.value,d.value.nodeId,d.value.handleId||null,d.value.type,M,D,R.value,$.value,y),te=z.source===z.target;G&&!te&&S.connect(z),S.clickConnectEnd(O),x(O,!0)}}return{handlePointerDown:ee,handleClick:_}}function Id(){return Tt(Zr,"")}function Jr(e){const t=e??Id()??"",n=Tt(Kr,le(null)),{findNode:o,edges:i,emits:r}=xe(),a=o(t);return a||r.error(new Ie(ke.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:a,parentNode:re(()=>o(a.parentNode)),connectedEdges:re(()=>Hr([a],i.value))}}function Md(){return{doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),dragStart:F(),drag:F(),dragStop:F()}}function Od(e,t){const n=Md();return n.doubleClick.on(o=>{var i,r;t.nodeDoubleClick(o),(r=(i=e.events)==null?void 0:i.doubleClick)==null||r.call(i,o)}),n.click.on(o=>{var i,r;t.nodeClick(o),(r=(i=e.events)==null?void 0:i.click)==null||r.call(i,o)}),n.mouseEnter.on(o=>{var i,r;t.nodeMouseEnter(o),(r=(i=e.events)==null?void 0:i.mouseEnter)==null||r.call(i,o)}),n.mouseMove.on(o=>{var i,r;t.nodeMouseMove(o),(r=(i=e.events)==null?void 0:i.mouseMove)==null||r.call(i,o)}),n.mouseLeave.on(o=>{var i,r;t.nodeMouseLeave(o),(r=(i=e.events)==null?void 0:i.mouseLeave)==null||r.call(i,o)}),n.contextMenu.on(o=>{var i,r;t.nodeContextMenu(o),(r=(i=e.events)==null?void 0:i.contextMenu)==null||r.call(i,o)}),n.dragStart.on(o=>{var i,r;t.nodeDragStart(o),(r=(i=e.events)==null?void 0:i.dragStart)==null||r.call(i,o)}),n.drag.on(o=>{var i,r;t.nodeDrag(o),(r=(i=e.events)==null?void 0:i.drag)==null||r.call(i,o)}),n.dragStop.on(o=>{var i,r;t.nodeDragStop(o),(r=(i=e.events)==null?void 0:i.dragStop)==null||r.call(i,o)}),Object.entries(n).reduce((o,[i,r])=>(o.emit[i]=r.trigger,o.on[i]=r.on,o),{emit:{},on:{}})}function ea(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:r,nodesDraggable:a,emits:s}=xe();return(l,u=!1)=>{const c=r.value?i.value[0]:5,d=r.value?i.value[1]:5,f=u?4:1,p=l.x*c*f,b=l.y*d*f,y=[];for(const m of e.value)if(m.draggable||a&&typeof m.draggable>"u"){const w={x:m.computedPosition.x+p,y:m.computedPosition.y+b},{computedPosition:v}=Oo(m,w,s.error,t.value,m.parentNode?o(m.parentNode):void 0);y.push({id:m.id,position:v,from:m.position,distance:{x:l.x,y:l.y},dimensions:m.dimensions})}n(y,!0,!1)}}const Xn=.1;function tt(){return Mn("Viewport not initialized yet."),Promise.resolve(!1)}const Td={zoomIn:tt,zoomOut:tt,zoomTo:tt,fitView:tt,setCenter:tt,fitBounds:tt,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:tt,setTransform:tt,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function $d(e){function t(o,i){return new Promise(r=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleBy(jn(e.d3Selection,i,()=>{r(!0)}),o):r(!1)})}function n(o,i,r,a){return new Promise(s=>{const{x:l,y:u}=Ar({x:-o,y:-i},e.translateExtent),c=Ot.translate(-l,-u).scale(r);e.d3Selection&&e.d3Zoom?e.d3Zoom.transform(jn(e.d3Selection,a,()=>{s(!0)}),c):s(!1)})}return re(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:i=>t(1.2,i==null?void 0:i.duration),zoomOut:i=>t(1/1.2,i==null?void 0:i.duration),zoomTo:(i,r)=>new Promise(a=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleTo(jn(e.d3Selection,r==null?void 0:r.duration,()=>{a(!0)}),i):a(!1)}),setViewport:(i,r)=>n(i.x,i.y,i.zoom,r==null?void 0:r.duration),setTransform:(i,r)=>n(i.x,i.y,i.zoom,r==null?void 0:r.duration),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(i={padding:Xn,includeHiddenNodes:!1,duration:0})=>{var r,a;const s=[];for(const f of e.nodes)f.dimensions.width&&f.dimensions.height&&((i==null?void 0:i.includeHiddenNodes)||!f.hidden)&&(!((r=i.nodes)!=null&&r.length)||(a=i.nodes)!=null&&a.length&&i.nodes.includes(f.id))&&s.push(f);if(!s.length)return Promise.resolve(!1);const l=Fr(s),{x:u,y:c,zoom:d}=li(l,e.dimensions.width,e.dimensions.height,i.minZoom??e.minZoom,i.maxZoom??e.maxZoom,i.padding??Xn,i.offset);return n(u,c,d,i==null?void 0:i.duration)},setCenter:(i,r,a)=>{const s=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:e.maxZoom,l=e.dimensions.width/2-i*s,u=e.dimensions.height/2-r*s;return n(l,u,s,a==null?void 0:a.duration)},fitBounds:(i,r={padding:Xn})=>{const{x:a,y:s,zoom:l}=li(i,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,r.padding);return n(a,s,l,r==null?void 0:r.duration)},project:i=>mn(i,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:i=>{if(e.vueFlowRef){const{x:r,y:a}=e.vueFlowRef.getBoundingClientRect(),s={x:i.x-r,y:i.y-a};return mn(s,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:i=>{if(e.vueFlowRef){const{x:r,y:a}=e.vueFlowRef.getBoundingClientRect(),s={x:i.x+r,y:i.y+a};return Br(s,e.viewport)}return{x:0,y:0}}}:Td)}function jn(e,t=0,n){return e.transition().duration(t).on("end",n)}function Pd(e,t,n){const o=Qi(!0);return o.run(()=>{const i=()=>{o.run(()=>{let y,m,w=!!(n.nodes.value.length||n.edges.value.length);y=wt([e.modelValue,()=>{var v,x;return(x=(v=e.modelValue)==null?void 0:v.value)==null?void 0:x.length}],([v])=>{v&&Array.isArray(v)&&(m==null||m.pause(),n.setElements(v),!m&&!w&&v.length?w=!0:m==null||m.resume())}),m=wt([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([v,x])=>{var S;(S=e.modelValue)!=null&&S.value&&Array.isArray(e.modelValue.value)&&(y==null||y.pause(),e.modelValue.value=[...v,...x],qe(()=>{y==null||y.resume()}))},{immediate:w}),an(()=>{y==null||y.stop(),m==null||m.stop()})})},r=()=>{o.run(()=>{let y,m,w=!!n.nodes.value.length;y=wt([e.nodes,()=>{var v,x;return(x=(v=e.nodes)==null?void 0:v.value)==null?void 0:x.length}],([v])=>{v&&Array.isArray(v)&&(m==null||m.pause(),n.setNodes(v),!m&&!w&&v.length?w=!0:m==null||m.resume())}),m=wt([n.nodes,()=>n.nodes.value.length],([v])=>{var x;(x=e.nodes)!=null&&x.value&&Array.isArray(e.nodes.value)&&(y==null||y.pause(),e.nodes.value=[...v],qe(()=>{y==null||y.resume()}))},{immediate:w}),an(()=>{y==null||y.stop(),m==null||m.stop()})})},a=()=>{o.run(()=>{let y,m,w=!!n.edges.value.length;y=wt([e.edges,()=>{var v,x;return(x=(v=e.edges)==null?void 0:v.value)==null?void 0:x.length}],([v])=>{v&&Array.isArray(v)&&(m==null||m.pause(),n.setEdges(v),!m&&!w&&v.length?w=!0:m==null||m.resume())}),m=wt([n.edges,()=>n.edges.value.length],([v])=>{var x;(x=e.edges)!=null&&x.value&&Array.isArray(e.edges.value)&&(y==null||y.pause(),e.edges.value=[...v],qe(()=>{y==null||y.resume()}))},{immediate:w}),an(()=>{y==null||y.stop(),m==null||m.stop()})})},s=()=>{o.run(()=>{ve(()=>t.maxZoom,()=>{t.maxZoom&&Ne(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},l=()=>{o.run(()=>{ve(()=>t.minZoom,()=>{t.minZoom&&Ne(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{ve(()=>t.translateExtent,()=>{t.translateExtent&&Ne(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{ve(()=>t.nodeExtent,()=>{t.nodeExtent&&Ne(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{o.run(()=>{ve(()=>t.applyDefault,()=>{Ne(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},f=()=>{o.run(()=>{const y=async m=>{let w=m;typeof t.autoConnect=="function"&&(w=await t.autoConnect(m)),w!==!1&&n.addEdges([w])};ve(()=>t.autoConnect,()=>{Ne(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),ve(n.autoConnect,(m,w,v)=>{m?n.onConnect(y):n.hooks.value.connect.off(y),v(()=>{n.hooks.value.connect.off(y)})},{immediate:!0})})},p=()=>{const y=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const m of Object.keys(t)){const w=m;if(!y.includes(w)){const v=Ee(()=>t[w]),x=n[w];bo(x)&&o.run(()=>{ve(v,S=>{Ne(S)&&(x.value=S)},{immediate:!0})})}}};(()=>{i(),r(),a(),l(),s(),u(),c(),d(),f(),p()})()}),()=>o.stop()}function Dd(){return{edgesChange:F(),nodesChange:F(),nodeDoubleClick:F(),nodeClick:F(),nodeMouseEnter:F(),nodeMouseMove:F(),nodeMouseLeave:F(),nodeContextMenu:F(),nodeDragStart:F(),nodeDrag:F(),nodeDragStop:F(),nodesInitialized:F(),miniMapNodeClick:F(),miniMapNodeDoubleClick:F(),miniMapNodeMouseEnter:F(),miniMapNodeMouseMove:F(),miniMapNodeMouseLeave:F(),connect:F(),connectStart:F(),connectEnd:F(),clickConnectStart:F(),clickConnectEnd:F(),paneReady:F(),init:F(),move:F(),moveStart:F(),moveEnd:F(),selectionDragStart:F(),selectionDrag:F(),selectionDragStop:F(),selectionContextMenu:F(),selectionStart:F(),selectionEnd:F(),viewportChangeStart:F(),viewportChange:F(),viewportChangeEnd:F(),paneScroll:F(),paneClick:F(),paneContextMenu:F(),paneMouseEnter:F(),paneMouseMove:F(),paneMouseLeave:F(),edgeContextMenu:F(),edgeMouseEnter:F(),edgeMouseMove:F(),edgeMouseLeave:F(),edgeDoubleClick:F(),edgeClick:F(),edgeUpdateStart:F(),edgeUpdate:F(),edgeUpdateEnd:F(),updateNodeInternals:F(),error:F(e=>Mn(e.message))}}function Ad(e,t){ja(()=>{for(const[n,o]of Object.entries(t.value)){const i=r=>{e(n,r)};o.fns.add(i),xn(()=>{o.off(i)})}})}function ta(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Mo.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:zt.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:ct.Bezier,style:{}},connectionMode:vt.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:_n()?"Meta":"Control",zoomActivationKeyCode:_n()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Dd(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const Vd=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function Rd(e,t,n){const o=$d(e),i=g=>{const h=g??[];e.hooks.updateNodeInternals.trigger(h)},r=g=>rd(g,e.nodes,e.edges),a=g=>id(g,e.nodes,e.edges),s=g=>Hr(g,e.edges),l=g=>{if(g)return t.value.get(g)},u=g=>{if(g)return n.value.get(g)},c=(g,h,I)=>{var N,k;const L=[];for(const Y of g){const oe={id:Y.id,type:"position",dragging:I,from:Y.from};if(h&&(oe.position=Y.position,Y.parentNode)){const se=l(Y.parentNode);oe.position={x:oe.position.x-(((N=se==null?void 0:se.computedPosition)==null?void 0:N.x)??0),y:oe.position.y-(((k=se==null?void 0:se.computedPosition)==null?void 0:k.y)??0)}}L.push(oe)}L!=null&&L.length&&e.hooks.nodesChange.trigger(L)},d=g=>{if(!e.vueFlowRef)return;const h=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!h)return;const I=window.getComputedStyle(h),{m22:N}=new window.DOMMatrixReadOnly(I.transform),k=[];for(let L=0;L<g.length;++L){const Y=g[L],oe=l(Y.id);if(oe){const se=In(Y.nodeElement);if(!!(se.width&&se.height&&(oe.dimensions.width!==se.width||oe.dimensions.height!==se.height||Y.forceUpdate))){const he=Y.nodeElement.getBoundingClientRect();oe.dimensions=se,oe.handleBounds.source=_i(".source",Y.nodeElement,he,N),oe.handleBounds.target=_i(".target",Y.nodeElement,he,N),k.push({id:oe.id,type:"dimensions",dimensions:se})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),k.length&&e.hooks.nodesChange.trigger(k)},f=(g,h)=>{const I=new Set,N=new Set;for(const Y of g)pt(Y)?I.add(Y.id):lt(Y)&&N.add(Y.id);const k=it(t.value,I,!0),L=it(n.value,N);if(e.multiSelectionActive){for(const Y of I)k.push(nt(Y,h));for(const Y of N)L.push(nt(Y,h))}k.length&&e.hooks.nodesChange.trigger(k),L.length&&e.hooks.edgesChange.trigger(L)},p=g=>{if(e.multiSelectionActive){const h=g.map(I=>nt(I.id,!0));e.hooks.nodesChange.trigger(h);return}e.hooks.nodesChange.trigger(it(t.value,new Set(g.map(h=>h.id)),!0)),e.hooks.edgesChange.trigger(it(n.value))},b=g=>{if(e.multiSelectionActive){const h=g.map(I=>nt(I.id,!0));e.hooks.edgesChange.trigger(h);return}e.hooks.edgesChange.trigger(it(n.value,new Set(g.map(h=>h.id)))),e.hooks.nodesChange.trigger(it(t.value,new Set,!0))},y=g=>{f(g,!0)},m=g=>{const I=(g||e.nodes).map(N=>(N.selected=!1,nt(N.id,!1)));e.hooks.nodesChange.trigger(I)},w=g=>{const I=(g||e.edges).map(N=>(N.selected=!1,nt(N.id,!1)));e.hooks.edgesChange.trigger(I)},v=g=>{if(!g||!g.length)return f([],!1);const h=g.reduce((I,N)=>{const k=nt(N.id,!1);return pt(N)?I.nodes.push(k):I.edges.push(k),I},{nodes:[],edges:[]});h.nodes.length&&e.hooks.nodesChange.trigger(h.nodes),h.edges.length&&e.hooks.edgesChange.trigger(h.edges)},x=g=>{var h;(h=e.d3Zoom)==null||h.scaleExtent([g,e.maxZoom]),e.minZoom=g},S=g=>{var h;(h=e.d3Zoom)==null||h.scaleExtent([e.minZoom,g]),e.maxZoom=g},P=g=>{var h;(h=e.d3Zoom)==null||h.translateExtent(g),e.translateExtent=g},R=g=>{e.nodeExtent=g,i()},$=g=>{var h;(h=e.d3Zoom)==null||h.clickDistance(g)},j=g=>{e.nodesDraggable=g,e.nodesConnectable=g,e.elementsSelectable=g},U=g=>{const h=g instanceof Function?g(e.nodes):g;!e.initialized&&!h.length||(e.nodes=wi(h,l,e.hooks.error.trigger))},A=g=>{const h=g instanceof Function?g(e.edges):g;if(!e.initialized&&!h.length)return;const I=Ei(h,e.isValidConnection,l,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);bi(e.connectionLookup,I),e.edges=I},E=g=>{const h=g instanceof Function?g([...e.nodes,...e.edges]):g;!e.initialized&&!h.length||(U(h.filter(pt)),A(h.filter(lt)))},J=g=>{let h=g instanceof Function?g(e.nodes):g;h=Array.isArray(h)?h:[h];const I=wi(h,l,e.hooks.error.trigger),N=[];for(const k of I)N.push(di(k));N.length&&e.hooks.nodesChange.trigger(N)},ee=g=>{let h=g instanceof Function?g(e.edges):g;h=Array.isArray(h)?h:[h];const I=Ei(h,e.isValidConnection,l,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),N=[];for(const k of I)N.push(di(k));N.length&&e.hooks.edgesChange.trigger(N)},_=(g,h=!0,I=!1)=>{const N=g instanceof Function?g(e.nodes):g,k=Array.isArray(N)?N:[N],L=[],Y=[];function oe(ye){const he=s(ye);for(const _e of he)(!Ne(_e.deletable)||_e.deletable)&&Y.push(hi(_e.id,_e.source,_e.target,_e.sourceHandle,_e.targetHandle))}function se(ye){const he=[];for(const _e of e.nodes)_e.parentNode===ye&&he.push(_e);if(he.length){for(const _e of he)L.push(fi(_e.id));h&&oe(he);for(const _e of he)se(_e.id)}}for(const ye of k){const he=typeof ye=="string"?l(ye):ye;he&&(Ne(he.deletable)&&!he.deletable||(L.push(fi(he.id)),h&&oe([he]),I&&se(he.id)))}Y.length&&e.hooks.edgesChange.trigger(Y),L.length&&e.hooks.nodesChange.trigger(L)},O=g=>{const h=g instanceof Function?g(e.edges):g,I=Array.isArray(h)?h:[h],N=[];for(const k of I){const L=typeof k=="string"?u(k):k;L&&(Ne(L.deletable)&&!L.deletable||N.push(hi(typeof k=="string"?k:k.id,L.source,L.target,L.sourceHandle,L.targetHandle)))}e.hooks.edgesChange.trigger(N)},C=(g,h,I=!0)=>Ed(g,h,e.edges,u,I,e.hooks.error.trigger),M=(g,h,I={replace:!1})=>{const N=u(g);if(!N)return;const k=typeof h=="function"?h(N):h;N.data=I.replace?k:{...N.data,...k}},T=g=>ci(g,e.nodes),D=g=>{const h=ci(g,e.edges);return bi(e.connectionLookup,h),h},z=(g,h,I={replace:!1})=>{const N=l(g);if(!N)return;const k=typeof h=="function"?h(N):h;I.replace?e.nodes.splice(e.nodes.indexOf(N),1,k):Object.assign(N,k)},G=(g,h,I={replace:!1})=>{const N=l(g);if(!N)return;const k=typeof h=="function"?h(N):h;N.data=I.replace?k:{...N.data,...k}},te=(g,h,I=!1)=>{I?e.connectionClickStartHandle=g:e.connectionStartHandle=g,e.connectionEndHandle=null,e.connectionStatus=null,h&&(e.connectionPosition=h)},W=(g,h=null,I=null)=>{e.connectionStartHandle&&(e.connectionPosition=g,e.connectionEndHandle=h,e.connectionStatus=I)},B=(g,h)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,h?e.connectionClickStartHandle=null:e.connectionStartHandle=null},K=g=>{const h=nd(g),I=h?null:Vt(g)?g:l(g.id);return!h&&!I?[null,null,h]:[h?g:go(I),I,h]},de=(g,h=!0,I=e.nodes)=>{const[N,k,L]=K(g);if(!N)return[];const Y=[];for(const oe of I||e.nodes){if(!L&&(oe.id===k.id||!oe.computedPosition))continue;const se=go(oe),ye=vo(se,N);(h&&ye>0||ye>=Number(N.width)*Number(N.height))&&Y.push(oe)}return Y},ue=(g,h,I=!0)=>{const[N]=K(g);if(!N)return!1;const k=vo(N,h);return I&&k>0||k>=Number(N.width)*Number(N.height)},fe=g=>{const{viewport:h,dimensions:I,d3Zoom:N,d3Selection:k,translateExtent:L}=e;if(!N||!k||!g.x&&!g.y)return!1;const Y=Ot.translate(h.x+g.x,h.y+g.y).scale(h.zoom),oe=[[0,0],[I.width,I.height]],se=N.constrain()(Y,oe,L),ye=e.viewport.x!==se.x||e.viewport.y!==se.y||e.viewport.zoom!==se.k;return N.transform(k,se),ye},ne=g=>{const h=g instanceof Function?g(e):g,I=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Ne(h.defaultEdgeOptions)&&(e.defaultEdgeOptions=h.defaultEdgeOptions);const N=h.modelValue||h.nodes||h.edges?[]:void 0;N&&(h.modelValue&&N.push(...h.modelValue),h.nodes&&N.push(...h.nodes),h.edges&&N.push(...h.edges),E(N));const k=()=>{Ne(h.maxZoom)&&S(h.maxZoom),Ne(h.minZoom)&&x(h.minZoom),Ne(h.translateExtent)&&P(h.translateExtent)};for(const L of Object.keys(h)){const Y=L,oe=h[Y];![...Vd,...I].includes(Y)&&Ne(oe)&&(e[Y]=oe)}oo(()=>e.d3Zoom).not.toBeNull().then(k),e.initialized||(e.initialized=!0)};return{updateNodePositions:c,updateNodeDimensions:d,setElements:E,setNodes:U,setEdges:A,addNodes:J,addEdges:ee,removeNodes:_,removeEdges:O,findNode:l,findEdge:u,updateEdge:C,updateEdgeData:M,updateNode:z,updateNodeData:G,applyEdgeChanges:D,applyNodeChanges:T,addSelectedElements:y,addSelectedNodes:p,addSelectedEdges:b,setMinZoom:x,setMaxZoom:S,setTranslateExtent:P,setNodeExtent:R,setPaneClickDistance:$,removeSelectedElements:v,removeSelectedNodes:m,removeSelectedEdges:w,startConnection:te,updateConnection:W,endConnection:B,setInteractive:j,setState:ne,getIntersectingNodes:de,getIncomers:r,getOutgoers:a,getConnectedEdges:s,isNodeIntersecting:ue,panBy:fe,fitView:g=>o.value.fitView(g),zoomIn:g=>o.value.zoomIn(g),zoomOut:g=>o.value.zoomOut(g),zoomTo:(g,h)=>o.value.zoomTo(g,h),setViewport:(g,h)=>o.value.setViewport(g,h),setTransform:(g,h)=>o.value.setTransform(g,h),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(g,h,I)=>o.value.setCenter(g,h,I),fitBounds:(g,h)=>o.value.fitBounds(g,h),project:g=>o.value.project(g),screenToFlowCoordinate:g=>o.value.screenToFlowCoordinate(g),flowToScreenCoordinate:g=>o.value.flowToScreenCoordinate(g),toObject:()=>{const g=[],h=[];for(const I of e.nodes){const{computedPosition:N,handleBounds:k,selected:L,dimensions:Y,isParent:oe,resizing:se,dragging:ye,events:he,..._e}=I;g.push(_e)}for(const I of e.edges){const{selected:N,sourceNode:k,targetNode:L,events:Y,...oe}=I;h.push(oe)}return JSON.parse(JSON.stringify({nodes:g,edges:h,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:g=>new Promise(h=>{const{nodes:I,edges:N,position:k,zoom:L,viewport:Y}=g;if(I&&U(I),N&&A(N),Y!=null&&Y.x&&(Y!=null&&Y.y)||k){const oe=(Y==null?void 0:Y.x)||k[0],se=(Y==null?void 0:Y.y)||k[1],ye=(Y==null?void 0:Y.zoom)||L||e.viewport.zoom;return oo(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:oe,y:se,zoom:ye}).then(()=>{h(!0)})})}else h(!0)}),updateNodeInternals:i,viewportHelper:o,$reset:()=>{const g=ta();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const h=Ot.translate(g.defaultViewport.x??0,g.defaultViewport.y??0).scale(mt(g.defaultViewport.zoom??1,g.minZoom,g.maxZoom)),I=e.viewportRef.getBoundingClientRect(),N=[[0,0],[I.width,I.height]],k=e.d3Zoom.constrain()(h,N,g.translateExtent);e.d3Zoom.transform(e.d3Selection,k)}ne(g)},$destroy:()=>{}}}const zd=["data-id","data-handleid","data-nodeid","data-handlepos"],Bd={name:"Handle",compatConfig:{MODE:3}},Ye=we({...Bd,props:{id:{default:null},type:{},position:{default:()=>X.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=Ji(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Ee(()=>n.type??"source"),i=Ee(()=>n.isValidConnection??null),{connectionStartHandle:r,connectionClickStartHandle:a,connectionEndHandle:s,vueFlowRef:l,nodesConnectable:u,noDragClassName:c,noPanClassName:d}=xe(),{id:f,node:p,nodeEl:b,connectedEdges:y}=Jr(),m=le(),w=Ee(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),v=Ee(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),x=Ee(()=>{var A,E,J,ee,_,O;return((A=r.value)==null?void 0:A.nodeId)===f&&((E=r.value)==null?void 0:E.handleId)===e.id&&((J=r.value)==null?void 0:J.type)===o.value||((ee=s.value)==null?void 0:ee.nodeId)===f&&((_=s.value)==null?void 0:_.handleId)===e.id&&((O=s.value)==null?void 0:O.type)===o.value}),S=Ee(()=>{var A,E,J;return((A=a.value)==null?void 0:A.nodeId)===f&&((E=a.value)==null?void 0:E.handleId)===e.id&&((J=a.value)==null?void 0:J.type)===o.value}),{handlePointerDown:P,handleClick:R}=Qr({nodeId:f,handleId:e.id,isValidConnection:i,type:o}),$=re(()=>typeof e.connectable=="string"&&e.connectable==="single"?!y.value.some(A=>{const E=A[`${o.value}Handle`];return A[o.value]!==f?!1:E?E===e.id:!0}):typeof e.connectable=="number"?y.value.filter(A=>{const E=A[`${o.value}Handle`];return A[o.value]!==f?!1:E?E===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(p,y.value):Ne(e.connectable)?e.connectable:u.value);Je(()=>{var A;if(!p.dimensions.width||!p.dimensions.height)return;const E=(A=p.handleBounds[o.value])==null?void 0:A.find(T=>T.id===e.id);if(!l.value||E)return;const J=l.value.querySelector(".vue-flow__transformationpane");if(!b.value||!m.value||!J||!e.id)return;const ee=b.value.getBoundingClientRect(),_=m.value.getBoundingClientRect(),O=window.getComputedStyle(J),{m22:C}=new window.DOMMatrixReadOnly(O.transform),M={id:e.id,position:e.position,x:(_.left-ee.left)/C,y:(_.top-ee.top)/C,...In(m.value)};p.handleBounds[o.value]=[...p.handleBounds[o.value]??[],M]}),qi(()=>{const A=p.handleBounds[o.value];A&&(p.handleBounds[o.value]=A.filter(E=>E.id!==e.id))});function j(A){const E=To(A);$.value&&w.value&&(E&&A.button===0||!E)&&P(A)}function U(A){!f||!a.value&&!w.value||$.value&&R(A)}return t({handleClick:R,handlePointerDown:P,onClick:U,onPointerDown:j}),(A,E)=>(ie(),ce("div",{ref_key:"handle",ref:m,"data-id":`${V(f)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":V(f),"data-handlepos":A.position,class:Nt(["vue-flow__handle",[`vue-flow__handle-${A.position}`,`vue-flow__handle-${e.id}`,V(c),V(d),o.value,{connectable:$.value,connecting:S.value,connectablestart:w.value,connectableend:v.value,connectionindicator:$.value&&(w.value&&!x.value||v.value&&x.value)}]]),onMousedown:j,onTouchstartPassive:j,onClick:U},[st(A.$slots,"default",{id:A.id})],42,zd))}}),Tn=function({sourcePosition:e=X.Bottom,targetPosition:t=X.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:r,data:a}){const s=a.label||n;return[me(Ye,{type:"target",position:t,connectable:o,isValidConnection:i}),typeof s!="string"&&s?me(s):me("div",{innerHTML:s}),me(Ye,{type:"source",position:e,connectable:o,isValidConnection:r})]};Tn.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];Tn.inheritAttrs=!1;Tn.compatConfig={MODE:3};const Ld=Tn,$n=function({targetPosition:e=X.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:i}){const r=i.label||t;return[me(Ye,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof r!="string"&&r?me(r):me("div",{innerHTML:r})]};$n.props=["targetPosition","label","isValidTargetPos","connectable","data"];$n.inheritAttrs=!1;$n.compatConfig={MODE:3};const Fd=$n,Pn=function({sourcePosition:e=X.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:i}){const r=i.label||t;return[typeof r!="string"&&r?me(r):me("div",{innerHTML:r}),me(Ye,{type:"source",position:e,connectable:n,isValidConnection:o})]};Pn.props=["sourcePosition","label","isValidSourcePos","connectable","data"];Pn.inheritAttrs=!1;Pn.compatConfig={MODE:3};const Gd=Pn,Hd=["transform"],Yd=["width","height","x","y","rx","ry"],Xd=["y"],jd={name:"EdgeText",compatConfig:{MODE:3}},Ud=we({...jd,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=le({x:0,y:0,width:0,height:0}),n=le(null),o=re(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);Je(i),ve([()=>e.x,()=>e.y,n,()=>e.label],i);function i(){if(!n.value)return;const r=n.value.getBBox();(r.width!==t.value.width||r.height!==t.value.height)&&(t.value=r)}return(r,a)=>(ie(),ce("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[r.labelShowBg?(ie(),ce("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*r.labelBgPadding[0]}px`,height:`${t.value.height+2*r.labelBgPadding[1]}px`,x:-r.labelBgPadding[0],y:-r.labelBgPadding[1],style:Pe(r.labelBgStyle),rx:r.labelBgBorderRadius,ry:r.labelBgBorderRadius},null,12,Yd)):Be("",!0),Me("text",Eo(r.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:r.labelStyle}),[st(r.$slots,"default",{},()=>[typeof r.label!="string"?(ie(),Le(Ja(r.label),{key:0})):(ie(),ce(ze,{key:1},[rt(Te(r.label),1)],64))])],16,Xd)],8,Hd))}}),Wd=["id","d","marker-end","marker-start"],Zd=["d","stroke-width"],Kd={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},Dn=we({...Kd,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},style:{},labelStyle:{},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=Ji(e,["interactionWidth","labelShowBg"]),o=le(null),i=le(null),r=le(null),a=Qa();return t({pathEl:o,interactionEl:i,labelEl:r}),(s,l)=>(ie(),ce(ze,null,[Me("path",{id:s.id,ref_key:"pathEl",ref:o,d:s.path,style:Pe(n.style),class:Nt(["vue-flow__edge-path",V(a).class]),"marker-end":s.markerEnd,"marker-start":s.markerStart},null,14,Wd),s.interactionWidth?(ie(),ce("path",{key:0,ref_key:"interactionEl",ref:i,fill:"none",d:s.path,"stroke-width":s.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,Zd)):Be("",!0),s.label&&s.labelX&&s.labelY?(ie(),Le(Ud,{key:1,ref_key:"labelEl",ref:r,x:s.labelX,y:s.labelY,label:s.label,"label-show-bg":s.labelShowBg,"label-bg-style":s.labelBgStyle,"label-bg-padding":s.labelBgPadding,"label-bg-border-radius":s.labelBgBorderRadius,"label-style":s.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):Be("",!0)],64))}});function na({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,r=n<e?n+i:n-i,a=Math.abs(o-t)/2,s=o<t?o+a:o-a;return[r,s,i,a]}function oa({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:r,targetControlX:a,targetControlY:s}){const l=e*.125+i*.375+a*.375+n*.125,u=t*.125+r*.375+s*.375+o*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}function on(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Si({pos:e,x1:t,y1:n,x2:o,y2:i,c:r}){let a,s;switch(e){case X.Left:a=t-on(t-o,r),s=n;break;case X.Right:a=t+on(o-t,r),s=n;break;case X.Top:a=t,s=n-on(n-i,r);break;case X.Bottom:a=t,s=n+on(i-n,r);break}return[a,s]}function ia(e){const{sourceX:t,sourceY:n,sourcePosition:o=X.Bottom,targetX:i,targetY:r,targetPosition:a=X.Top,curvature:s=.25}=e,[l,u]=Si({pos:o,x1:t,y1:n,x2:i,y2:r,c:s}),[c,d]=Si({pos:a,x1:i,y1:r,x2:t,y2:n,c:s}),[f,p,b,y]=oa({sourceX:t,sourceY:n,targetX:i,targetY:r,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${l},${u} ${c},${d} ${i},${r}`,f,p,b,y]}function Ni({pos:e,x1:t,y1:n,x2:o,y2:i}){let r,a;switch(e){case X.Left:case X.Right:r=.5*(t+o),a=n;break;case X.Top:case X.Bottom:r=t,a=.5*(n+i);break}return[r,a]}function ra(e){const{sourceX:t,sourceY:n,sourcePosition:o=X.Bottom,targetX:i,targetY:r,targetPosition:a=X.Top}=e,[s,l]=Ni({pos:o,x1:t,y1:n,x2:i,y2:r}),[u,c]=Ni({pos:a,x1:i,y1:r,x2:t,y2:n}),[d,f,p,b]=oa({sourceX:t,sourceY:n,targetX:i,targetY:r,sourceControlX:s,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${t},${n} C${s},${l} ${u},${c} ${i},${r}`,d,f,p,b]}const ki={[X.Left]:{x:-1,y:0},[X.Right]:{x:1,y:0},[X.Top]:{x:0,y:-1},[X.Bottom]:{x:0,y:1}};function qd({source:e,sourcePosition:t=X.Bottom,target:n}){return t===X.Left||t===X.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Ci(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function Qd({source:e,sourcePosition:t=X.Bottom,target:n,targetPosition:o=X.Top,center:i,offset:r}){const a=ki[t],s=ki[o],l={x:e.x+a.x*r,y:e.y+a.y*r},u={x:n.x+s.x*r,y:n.y+s.y*r},c=qd({source:l,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let p,b,y;const m={x:0,y:0},w={x:0,y:0},[v,x,S,P]=na({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*s[d]===-1){b=i.x??v,y=i.y??x;const $=[{x:b,y:l.y},{x:b,y:u.y}],j=[{x:l.x,y},{x:u.x,y}];a[d]===f?p=d==="x"?$:j:p=d==="x"?j:$}else{const $=[{x:l.x,y:u.y}],j=[{x:u.x,y:l.y}];if(d==="x"?p=a.x===f?j:$:p=a.y===f?$:j,t===o){const ee=Math.abs(e[d]-n[d]);if(ee<=r){const _=Math.min(r-1,r-ee);a[d]===f?m[d]=(l[d]>e[d]?-1:1)*_:w[d]=(u[d]>n[d]?-1:1)*_}}if(t!==o){const ee=d==="x"?"y":"x",_=a[d]===s[ee],O=l[ee]>u[ee],C=l[ee]<u[ee];(a[d]===1&&(!_&&O||_&&C)||a[d]!==1&&(!_&&C||_&&O))&&(p=d==="x"?$:j)}const U={x:l.x+m.x,y:l.y+m.y},A={x:u.x+w.x,y:u.y+w.y},E=Math.max(Math.abs(U.x-p[0].x),Math.abs(A.x-p[0].x)),J=Math.max(Math.abs(U.y-p[0].y),Math.abs(A.y-p[0].y));E>=J?(b=(U.x+A.x)/2,y=p[0].y):(b=p[0].x,y=(U.y+A.y)/2)}return[[e,{x:l.x+m.x,y:l.y+m.y},...p,{x:u.x+w.x,y:u.y+w.y},n],b,y,S,P]}function Jd(e,t,n,o){const i=Math.min(Ci(e,t)/2,Ci(t,n)/2,o),{x:r,y:a}=t;if(e.x===r&&r===n.x||e.y===a&&a===n.y)return`L${r} ${a}`;if(e.y===a){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${r+i*u},${a}Q ${r},${a} ${r},${a+i*c}`}const s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${r},${a+i*l}Q ${r},${a} ${r+i*s},${a}`}function yo(e){const{sourceX:t,sourceY:n,sourcePosition:o=X.Bottom,targetX:i,targetY:r,targetPosition:a=X.Top,borderRadius:s=5,centerX:l,centerY:u,offset:c=20}=e,[d,f,p,b,y]=Qd({source:{x:t,y:n},sourcePosition:o,target:{x:i,y:r},targetPosition:a,center:{x:l,y:u},offset:c});return[d.reduce((w,v,x)=>{let S;return x>0&&x<d.length-1?S=Jd(d[x-1],v,d[x+1],s):S=`${x===0?"M":"L"}${v.x} ${v.y}`,w+=S,w},""),f,p,b,y]}function ef(e){const{sourceX:t,sourceY:n,targetX:o,targetY:i}=e,[r,a,s,l]=na({sourceX:t,sourceY:n,targetX:o,targetY:i});return[`M ${t},${n}L ${o},${i}`,r,a,s,l]}const tf=we({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=ef(e);return me(Dn,{path:n,labelX:o,labelY:i,...t,...e})}}}),nf=tf,of=we({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=yo({...e,sourcePosition:e.sourcePosition??X.Bottom,targetPosition:e.targetPosition??X.Top});return me(Dn,{path:n,labelX:o,labelY:i,...t,...e})}}}),aa=of,rf=we({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>me(aa,{...e,...t,borderRadius:0})}}),af=rf,sf=we({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=ia({...e,sourcePosition:e.sourcePosition??X.Bottom,targetPosition:e.targetPosition??X.Top});return me(Dn,{path:n,labelX:o,labelY:i,...t,...e})}}}),lf=sf,uf=we({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=ra({...e,sourcePosition:e.sourcePosition??X.Bottom,targetPosition:e.targetPosition??X.Top});return me(Dn,{path:n,labelX:o,labelY:i,...t,...e})}}}),cf=uf,df={input:Gd,default:Ld,output:Fd},ff={default:lf,straight:nf,step:af,smoothstep:aa,simplebezier:cf};function hf(e,t,n){const o=re(()=>y=>t.value.get(y)),i=re(()=>y=>n.value.get(y)),r=re(()=>{const y={...ff,...e.edgeTypes},m=Object.keys(y);for(const w of e.edges)w.type&&!m.includes(w.type)&&(y[w.type]=w.type);return y}),a=re(()=>{const y={...df,...e.nodeTypes},m=Object.keys(y);for(const w of e.nodes)w.type&&!m.includes(w.type)&&(y[w.type]=w.type);return y}),s=re(()=>e.onlyRenderVisibleElements?Gr(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),l=re(()=>{if(e.onlyRenderVisibleElements){const y=[];for(const m of e.edges){const w=t.value.get(m.source),v=t.value.get(m.target);pd({sourcePos:w.computedPosition||{x:0,y:0},targetPos:v.computedPosition||{x:0,y:0},sourceWidth:w.dimensions.width,sourceHeight:w.dimensions.height,targetWidth:v.dimensions.width,targetHeight:v.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&y.push(m)}return y}return e.edges}),u=re(()=>[...s.value,...l.value]),c=re(()=>{const y=[];for(const m of e.nodes)m.selected&&y.push(m);return y}),d=re(()=>{const y=[];for(const m of e.edges)m.selected&&y.push(m);return y}),f=re(()=>[...c.value,...d.value]),p=re(()=>{const y=[];for(const m of e.nodes)m.dimensions.width&&m.dimensions.height&&m.handleBounds!==void 0&&y.push(m);return y}),b=re(()=>s.value.length>0&&p.value.length===s.value.length);return{getNode:o,getEdge:i,getElements:u,getEdgeTypes:r,getNodeTypes:a,getEdges:l,getNodes:s,getSelectedElements:f,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:p,areNodesInitialized:b}}class dt{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=jt())==null?void 0:t.appContext.app,o=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??dt.instance;return dt.instance=o??new dt,n&&(n.config.globalProperties.$vueFlowStorage=dt.instance),dt.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=ta(),i=Ua(o),r={};for(const[f,p]of Object.entries(i.hooks)){const b=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;r[b]=p.on}const a={};for(const[f,p]of Object.entries(i.hooks))a[f]=p.trigger;const s=re(()=>{const f=new Map;for(const p of i.nodes)f.set(p.id,p);return f}),l=re(()=>{const f=new Map;for(const p of i.edges)f.set(p.id,p);return f}),u=hf(i,s,l),c=Rd(i,s,l);c.setState({...i,...n});const d={...r,...u,...c,...vs(i),nodeLookup:s,edgeLookup:l,emits:a,id:t,vueFlowVersion:"1.40.1",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function xe(e){const t=dt.getInstance(),n=tr(),o=typeof e=="object",i=o?e:{id:e},r=i.id,a=r??(n==null?void 0:n.vueFlowId);let s;if(n){const l=Tt(xi,null);typeof l<"u"&&l!==null&&(!a||l.id===a)&&(s=l)}if(s||a&&(s=t.get(a)),!s||a&&s.id!==a){const l=r??t.getId(),u=t.create(l,i);s=u,(n??Qi(!0)).run(()=>{ve(u.applyDefault,(d,f,p)=>{const b=m=>{u.applyNodeChanges(m)},y=m=>{u.applyEdgeChanges(m)};d?(u.onNodesChange(b),u.onEdgesChange(y)):(u.hooks.value.nodesChange.off(b),u.hooks.value.edgesChange.off(y)),p(()=>{u.hooks.value.nodesChange.off(b),u.hooks.value.edgesChange.off(y)})},{immediate:!0}),xn(()=>{if(s){const d=t.get(s.id);d?d.$destroy():Mn(`No store instance found for id ${s.id} in storage.`)}})})}else o&&s.setState(i);if(n&&(kt(xi,s),n.vueFlowId=s.id),o){const l=jt();(l==null?void 0:l.type.name)!=="VueFlow"&&s.emits.error(new Ie(ke.USEVUEFLOW_OPTIONS))}return s}function pf(e){const{emits:t,dimensions:n}=xe();let o;Je(()=>{const i=e.value,r=()=>{if(!i)return;const a=In(i);(a.width===0||a.height===0)&&t.error(new Ie(ke.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:a.width||500,height:a.height||500}};r(),window.addEventListener("resize",r),i&&(o=new ResizeObserver(()=>r()),o.observe(i)),er(()=>{window.removeEventListener("resize",r),o&&i&&o.unobserve(i)})})}const gf={name:"UserSelection",compatConfig:{MODE:3}},vf=we({...gf,props:{userSelectionRect:{}},setup(e){return(t,n)=>(ie(),ce("div",{class:"vue-flow__selection vue-flow__container",style:Pe({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),mf=["tabIndex"],yf={name:"NodesSelection",compatConfig:{MODE:3}},_f=we({...yf,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:i,disableKeyboardA11y:r,userSelectionActive:a}=xe(),s=ea(),l=le(null),u=qr({el:l,onStart(b){t.selectionDragStart(b)},onDrag(b){t.selectionDrag(b)},onStop(b){t.selectionDragStop(b)}});Je(()=>{var b;r.value||(b=l.value)==null||b.focus({preventScroll:!0})});const c=re(()=>Fr(o.value)),d=re(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function f(b){t.selectionContextMenu({event:b,nodes:o.value})}function p(b){r||St[b.key]&&s({x:St[b.key].x,y:St[b.key].y},b.shiftKey)}return(b,y)=>!V(a)&&c.value.width&&c.value.height?(ie(),ce("div",{key:0,class:Nt(["vue-flow__nodesselection vue-flow__container",V(i)]),style:Pe({transform:`translate(${V(n).x}px,${V(n).y}px) scale(${V(n).zoom})`})},[Me("div",{ref_key:"el",ref:l,class:Nt([{dragging:V(u)},"vue-flow__nodesselection-rect"]),style:Pe(d.value),tabIndex:V(r)?void 0:-1,onContextmenu:f,onKeydown:p},null,46,mf)],6)):Be("",!0)}});function wf(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const bf={name:"Pane",compatConfig:{MODE:3}},Ef=we({...bf,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:i,userSelectionActive:r,removeSelectedElements:a,panOnDrag:s,userSelectionRect:l,elementsSelectable:u,nodesSelectionActive:c,getSelectedEdges:d,getSelectedNodes:f,removeNodes:p,removeEdges:b,selectionMode:y,deleteKeyCode:m,multiSelectionKeyCode:w,multiSelectionActive:v,edgeLookup:x,nodeLookup:S}=xe(),P=le(null),R=le(0),$=le(0),j=le(),U=le(new Map),A=Ee(()=>u.value&&(e.isSelecting||r.value));let E=!1,J=!1;const ee=Bt(m,{actInsideInputWithModifier:!1}),_=Bt(w);ve(ee,W=>{W&&(p(f.value),b(d.value),c.value=!1)}),ve(_,W=>{v.value=W});function O(W,B){return K=>{K.target===B&&(W==null||W(K))}}function C(){r.value=!1,l.value=null,R.value=0,$.value=0}function M(W){if(E){E=!1;return}i.paneClick(W),a(),c.value=!1}function T(W){var B;if(Array.isArray(s.value)&&((B=s.value)!=null&&B.includes(2))){W.preventDefault();return}i.paneContextMenu(W)}function D(W){i.paneScroll(W)}function z(W){var B,K,de,ue,fe;if(j.value=(B=t.value)==null?void 0:B.getBoundingClientRect(),!u.value||!e.isSelecting||W.button!==0||W.target!==P.value||!j.value)return;(de=(K=W.target)==null?void 0:K.setPointerCapture)==null||de.call(K,W.pointerId);const{x:ne,y:ae}=wf(W,j.value);J=!0,E=!1,U.value=new Map;for(const[Z,q]of x.value)U.value.set(q.source,((ue=U.value.get(q.source))==null?void 0:ue.add(Z))||new Set([Z])),U.value.set(q.target,((fe=U.value.get(q.target))==null?void 0:fe.add(Z))||new Set([Z]));a(),l.value={width:0,height:0,startX:ne,startY:ae,x:ne,y:ae},r.value=!0,c.value=!1,i.selectionStart(W)}function G(W){if(!j.value||!l.value)return;E=!0;const{x:B,y:K}=at(W,j.value),{startX:de=0,startY:ue=0}=l.value,fe={startX:de,startY:ue,x:B<de?B:de,y:K<ue?K:ue,width:Math.abs(B-de),height:Math.abs(K-ue)},ne=Gr(n.value,fe,o.value,y.value===Mo.Partial,!0),ae=new Set,Z=new Set;for(const q of ne){Z.add(q.id);const g=U.value.get(q.id);if(g)for(const h of g)ae.add(h)}if(R.value!==Z.size){R.value=Z.size;const q=it(S.value,Z,!0);i.nodesChange(q)}if($.value!==ae.size){$.value=ae.size;const q=it(x.value,ae);i.edgesChange(q)}l.value=fe,r.value=!0,c.value=!1}function te(W){var B;W.button!==0||!J||((B=W.target)==null||B.releasePointerCapture(W.pointerId),!r.value&&l.value&&W.target===P.value&&M(W),R.value>0&&(c.value=!0),C(),i.selectionEnd(W),e.selectionKeyPressed&&(E=!1),J=!1)}return(W,B)=>(ie(),ce("div",{ref_key:"container",ref:P,class:Nt(["vue-flow__pane vue-flow__container",{selection:W.isSelecting}]),onClick:B[0]||(B[0]=K=>A.value?void 0:O(M,P.value)(K)),onContextmenu:B[1]||(B[1]=K=>O(T,P.value)(K)),onWheelPassive:B[2]||(B[2]=K=>O(D,P.value)(K)),onPointerenter:B[3]||(B[3]=K=>A.value?void 0:V(i).paneMouseEnter(K)),onPointerdown:B[4]||(B[4]=K=>A.value?z(K):V(i).paneMouseMove(K)),onPointermove:B[5]||(B[5]=K=>A.value?G(K):V(i).paneMouseMove(K)),onPointerup:B[6]||(B[6]=K=>A.value?te(K):void 0),onPointerleave:B[7]||(B[7]=K=>V(i).paneMouseLeave(K))},[st(W.$slots,"default"),V(r)&&V(l)?(ie(),Le(vf,{key:0,"user-selection-rect":V(l)},null,8,["user-selection-rect"])):Be("",!0),V(c)&&V(f).length?(ie(),Le(_f,{key:1})):Be("",!0)],34))}}),xf={name:"Transform",compatConfig:{MODE:3}},Sf=we({...xf,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=xe(),i=re(()=>n.value?!o.value:!1),r=re(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(a,s)=>(ie(),ce("div",{class:"vue-flow__transformationpane vue-flow__container",style:Pe({transform:r.value,opacity:i.value?0:void 0})},[st(a.$slots,"default")],4))}}),Nf={name:"Viewport",compatConfig:{MODE:3}},kf=we({...Nf,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:i,zoomActivationKeyCode:r,selectionKeyCode:a,panActivationKeyCode:s,panOnScroll:l,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:f,zoomOnPinch:p,zoomOnScroll:b,preventScrolling:y,noWheelClassName:m,noPanClassName:w,emits:v,connectionStartHandle:x,userSelectionActive:S,paneDragging:P,d3Zoom:R,d3Selection:$,d3ZoomHandler:j,viewport:U,viewportRef:A,paneClickDistance:E}=xe();pf(A);const J=le(!1),ee=le(!1);let _=null,O=!1,C=0,M={x:0,y:0,zoom:0};const T=Bt(s),D=Bt(a),z=Bt(r),G=Ee(()=>T.value||d.value),te=Ee(()=>T.value||l.value),W=Ee(()=>D.value||a.value===!0&&G.value!==!0);Je(()=>{if(!A.value){Mn("Viewport element is missing");return}const ne=A.value,ae=ne.getBoundingClientRect(),Z=qc().clickDistance(E.value).scaleExtent([t.value,n.value]).translateExtent(i.value),q=Ve(ne).call(Z),g=q.on("wheel.zoom"),h=Ot.translate(o.value.x??0,o.value.y??0).scale(mt(o.value.zoom??1,t.value,n.value)),I=[[0,0],[ae.width,ae.height]],N=Z.constrain()(h,I,i.value);Z.transform(q,N),Z.wheelDelta(K),R.value=Z,$.value=q,j.value=g,U.value={x:N.x,y:N.y,zoom:N.k},Z.on("start",k=>{var L;if(!k.sourceEvent)return null;C=k.sourceEvent.button,J.value=!0;const Y=ue(k.transform);((L=k.sourceEvent)==null?void 0:L.type)==="mousedown"&&(P.value=!0),M=Y,v.viewportChangeStart(Y),v.moveStart({event:k,flowTransform:Y})}),Z.on("end",k=>{if(!k.sourceEvent)return null;if(J.value=!1,P.value=!1,B(G.value,C??0)&&!O&&v.paneContextMenu(k.sourceEvent),O=!1,de(M,k.transform)){const L=ue(k.transform);M=L,v.viewportChangeEnd(L),v.moveEnd({event:k,flowTransform:L})}}),Z.filter(k=>{var L,Y,oe;const se=z.value||b.value,ye=p.value&&k.ctrlKey,he=k.button;if((G.value===!0||Array.isArray(G.value)&&G.value.includes(1))&&he===1&&k.type==="mousedown"&&((L=k.target)!=null&&L.closest(".vue-flow__node")||(Y=k.target)!=null&&Y.closest(".vue-flow__edge")))return!0;if(!G.value&&!se&&!te.value&&!f.value&&!p.value||S.value||!f.value&&k.type==="dblclick"||fe(k,m.value)&&k.type==="wheel"||fe(k,w.value)&&(k.type!=="wheel"||te.value&&k.type==="wheel"&&!z.value)||!p.value&&k.ctrlKey&&k.type==="wheel"||!se&&!te.value&&!ye&&k.type==="wheel")return!1;if(!p&&k.type==="touchstart"&&((oe=k.touches)==null?void 0:oe.length)>1)return k.preventDefault(),!1;if(!G.value&&(k.type==="mousedown"||k.type==="touchstart")||Array.isArray(G.value)&&!G.value.includes(he)&&(k.type==="mousedown"||k.type==="touchstart"))return!1;const _e=Array.isArray(G.value)&&G.value.includes(he)||!he||he<=1;return(!k.ctrlKey||k.type==="wheel")&&_e}),ve([S,G],()=>{S.value&&!J.value?Z.on("zoom",null):S.value||Z.on("zoom",k=>{U.value={x:k.transform.x,y:k.transform.y,zoom:k.transform.k};const L=ue(k.transform);O=B(G.value,C??0),v.viewportChange(L),v.move({event:k,flowTransform:L})})},{immediate:!0}),ve([S,te,u,z,p,y,m],()=>{te.value&&!z.value&&!S.value?q.on("wheel.zoom",k=>{if(fe(k,m.value))return!1;const L=z.value||b.value,Y=p.value&&k.ctrlKey;if(!(!y.value||te.value||L||Y))return!1;k.preventDefault(),k.stopImmediatePropagation();const se=q.property("__zoom").k||1,ye=_n();if(k.ctrlKey&&p.value&&ye){const La=He(k),Fa=K(k),Ga=se*2**Fa;Z.scaleTo(q,Ga,La,k);return}const he=k.deltaMode===1?20:1;let _e=u.value===zt.Vertical?0:k.deltaX*he,et=u.value===zt.Horizontal?0:k.deltaY*he;!ye&&k.shiftKey&&u.value!==zt.Vertical&&!_e&&et&&(_e=et,et=0),Z.translateBy(q,-(_e/se)*c.value,-(et/se)*c.value);const _t=ue(q.property("__zoom"));_&&clearTimeout(_),ee.value?(v.move({event:k,flowTransform:_t}),v.viewportChange(_t),_=setTimeout(()=>{v.moveEnd({event:k,flowTransform:_t}),v.viewportChangeEnd(_t),ee.value=!1},150)):(ee.value=!0,v.moveStart({event:k,flowTransform:_t}),v.viewportChangeStart(_t))},{passive:!1}):typeof g<"u"&&q.on("wheel.zoom",function(k,L){const Y=!y.value&&k.type==="wheel"&&!k.ctrlKey,oe=z.value||b.value,se=p.value&&k.ctrlKey;if(!oe&&!l.value&&!se&&k.type==="wheel"||Y||fe(k,m.value))return null;k.preventDefault(),g.call(this,k,L)},{passive:!1})},{immediate:!0})});function B(ne,ae){return ae===2&&Array.isArray(ne)&&ne.includes(2)}function K(ne){const ae=ne.ctrlKey&&_n()?10:1;return-ne.deltaY*(ne.deltaMode===1?.05:ne.deltaMode?1:.002)*ae}function de(ne,ae){return ne.x!==ae.x&&!Number.isNaN(ae.x)||ne.y!==ae.y&&!Number.isNaN(ae.y)||ne.zoom!==ae.k&&!Number.isNaN(ae.k)}function ue(ne){return{x:ne.x,y:ne.y,zoom:ne.k}}function fe(ne,ae){return ne.target.closest(`.${ae}`)}return(ne,ae)=>(ie(),ce("div",{ref_key:"viewportRef",ref:A,class:"vue-flow__viewport vue-flow__container"},[H(Ef,{"is-selecting":W.value,"selection-key-pressed":V(D),class:Nt({connecting:!!V(x),dragging:V(P),draggable:V(d)===!0||Array.isArray(V(d))&&V(d).includes(0)})},{default:Q(()=>[H(Sf,null,{default:Q(()=>[st(ne.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),Cf=["id"],If=["id"],Mf=["id"],Of={name:"A11yDescriptions",compatConfig:{MODE:3}},Tf=we({...Of,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=xe();return(i,r)=>(ie(),ce(ze,null,[Me("div",{id:`${V($r)}-${V(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+Te(V(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Cf),Me("div",{id:`${V(Pr)}-${V(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,If),V(n)?Be("",!0):(ie(),ce("div",{key:0,id:`${V(td)}-${V(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},Te(V(o)),9,Mf))],64))}});function $f(){const e=xe();ve(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function Pf(e,t,n){return n===X.Left?e-t:n===X.Right?e+t:e}function Df(e,t,n){return n===X.Top?e-t:n===X.Bottom?e+t:e}const Po=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=X.Top,type:i}){return me("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:Pf(t,e,o),cy:Df(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};Po.props=["radius","centerX","centerY","position","type"];Po.compatConfig={MODE:3};const Ii=Po,Af=we({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:r,nodesSelectionActive:a,noPanClassName:s,getEdgeTypes:l,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:f,multiSelectionActive:p,disableKeyboardA11y:b,elementsSelectable:y,edgesUpdatable:m,edgesFocusable:w}=xe(),v=re(()=>c(e.id)),x=kd(v.value,r),S=Tt(On),P=jt(),R=le(!1),$=le(!1),j=le(""),U=le(null),A=le("source"),E=le(null),J=Ee(()=>typeof v.value.selectable>"u"?y.value:v.value.selectable),ee=Ee(()=>typeof v.value.updatable>"u"?m.value:v.value.updatable),_=Ee(()=>typeof v.value.focusable>"u"?w.value:v.value.focusable);kt(xd,e.id),kt(Sd,E);const O=re(()=>v.value.class instanceof Function?v.value.class(v.value):v.value.class),C=re(()=>v.value.style instanceof Function?v.value.style(v.value):v.value.style),M=re(()=>{const g=v.value.type||"default",h=S==null?void 0:S[`edge-${g}`];if(h)return h;let I=v.value.template??l.value[g];if(typeof I=="string"&&P){const N=Object.keys(P.appContext.components);N&&N.includes(g)&&(I=ge(g,!1))}return I&&typeof I!="string"?I:(r.error(new Ie(ke.EDGE_TYPE_MISSING,I)),!1)}),{handlePointerDown:T}=Qr({nodeId:j,handleId:U,type:A,isValidConnection:f,edgeUpdaterType:A,onEdgeUpdate:G,onEdgeUpdateEnd:te});return()=>{const g=d(v.value.source),h=d(v.value.target),I="pathOptions"in v.value?v.value.pathOptions:{};if(!g&&!h)return r.error(new Ie(ke.EDGE_SOURCE_TARGET_MISSING,v.value.id,v.value.source,v.value.target)),null;if(!g)return r.error(new Ie(ke.EDGE_SOURCE_MISSING,v.value.id,v.value.source)),null;if(!h)return r.error(new Ie(ke.EDGE_TARGET_MISSING,v.value.id,v.value.target)),null;if(!v.value||v.value.hidden||g.hidden||h.hidden)return null;let N;o.value===vt.Strict?N=g.handleBounds.source:N=[...g.handleBounds.source||[],...g.handleBounds.target||[]];const k=gi(N,v.value.sourceHandle);let L;o.value===vt.Strict?L=h.handleBounds.target:L=[...h.handleBounds.target||[],...h.handleBounds.source||[]];const Y=gi(L,v.value.targetHandle),oe=(k==null?void 0:k.position)||X.Bottom,se=(Y==null?void 0:Y.position)||X.Top,{x:ye,y:he}=yn(g,k,oe),{x:_e,y:et}=yn(h,Y,se);return v.value.sourceX=ye,v.value.sourceY=he,v.value.targetX=_e,v.value.targetY=et,me("g",{ref:E,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${M.value===!1?"default":v.value.type||"default"}`,s.value,O.value,{updating:R.value,selected:v.value.selected,animated:v.value.animated,inactive:!J.value}],onClick:B,onContextmenu:K,onDblclick:de,onMouseenter:ue,onMousemove:fe,onMouseleave:ne,onKeyDown:_.value?q:void 0,tabIndex:_.value?0:void 0,"aria-label":v.value.ariaLabel===null?void 0:v.value.ariaLabel||`Edge from ${v.value.source} to ${v.value.target}`,"aria-describedby":_.value?`${Pr}-${t}`:void 0,role:_.value?"button":"img"},[$.value?null:me(M.value===!1?l.value.default:M.value,{id:e.id,sourceNode:g,targetNode:h,source:v.value.source,target:v.value.target,type:v.value.type,updatable:ee.value,selected:v.value.selected,animated:v.value.animated,label:v.value.label,labelStyle:v.value.labelStyle,labelShowBg:v.value.labelShowBg,labelBgStyle:v.value.labelBgStyle,labelBgPadding:v.value.labelBgPadding,labelBgBorderRadius:v.value.labelBgBorderRadius,data:v.value.data,events:{...v.value.events,...x.on},style:C.value,markerStart:`url('#${Xt(v.value.markerStart,t)}')`,markerEnd:`url('#${Xt(v.value.markerEnd,t)}')`,sourcePosition:oe,targetPosition:se,sourceX:ye,sourceY:he,targetX:_e,targetY:et,sourceHandleId:v.value.sourceHandle,targetHandleId:v.value.targetHandle,interactionWidth:v.value.interactionWidth,...I}),[ee.value==="source"||ee.value===!0?[me("g",{onMousedown:ae,onMouseenter:D,onMouseout:z},me(Ii,{position:oe,centerX:ye,centerY:he,radius:i.value,type:"source","data-type":"source"}))]:null,ee.value==="target"||ee.value===!0?[me("g",{onMousedown:Z,onMouseenter:D,onMouseout:z},me(Ii,{position:se,centerX:_e,centerY:et,radius:i.value,type:"target","data-type":"target"}))]:null]])};function D(){R.value=!0}function z(){R.value=!1}function G(g,h){x.emit.update({event:g,edge:v.value,connection:h})}function te(g){x.emit.updateEnd({event:g,edge:v.value}),$.value=!1}function W(g,h){g.button===0&&($.value=!0,j.value=h?v.value.target:v.value.source,U.value=(h?v.value.targetHandle:v.value.sourceHandle)??"",A.value=h?"target":"source",x.emit.updateStart({event:g,edge:v.value}),T(g))}function B(g){var h;const I={event:g,edge:v.value};J.value&&(a.value=!1,v.value.selected&&p.value?(u([v.value]),(h=E.value)==null||h.blur()):n([v.value])),x.emit.click(I)}function K(g){x.emit.contextMenu({event:g,edge:v.value})}function de(g){x.emit.doubleClick({event:g,edge:v.value})}function ue(g){x.emit.mouseEnter({event:g,edge:v.value})}function fe(g){x.emit.mouseMove({event:g,edge:v.value})}function ne(g){x.emit.mouseLeave({event:g,edge:v.value})}function ae(g){W(g,!0)}function Z(g){W(g,!1)}function q(g){var h;!b.value&&Dr.includes(g.key)&&J.value&&(g.key==="Escape"?((h=E.value)==null||h.blur(),u([c(e.id)])):n([c(e.id)]))}}}),Vf=Af,Rf={[X.Left]:X.Right,[X.Right]:X.Left,[X.Top]:X.Bottom,[X.Bottom]:X.Top},zf=we({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:i,connectionPosition:r,connectionLineType:a,connectionLineStyle:s,connectionLineOptions:l,connectionStatus:u,viewport:c,findNode:d}=xe(),f=(e=Tt(On))==null?void 0:e["connection-line"],p=re(()=>{var v;return d((v=o.value)==null?void 0:v.nodeId)}),b=re(()=>{var v;return d((v=i.value)==null?void 0:v.nodeId)??null}),y=re(()=>({x:(r.value.x-c.value.x)/c.value.zoom,y:(r.value.y-c.value.y)/c.value.zoom})),m=re(()=>l.value.markerStart?`url(#${Xt(l.value.markerStart,t)})`:""),w=re(()=>l.value.markerEnd?`url(#${Xt(l.value.markerEnd,t)})`:"");return()=>{var v,x,S,P;if(!p.value||!o.value)return null;const R=o.value.handleId,$=o.value.type,j=p.value.handleBounds;let U=j==null?void 0:j[$];if(n.value===vt.Loose&&(U=U||(j==null?void 0:j[$==="source"?"target":"source"])),!U)return null;const A=(R?U.find(D=>D.id===R):U[0])??null,E=(A==null?void 0:A.position)||X.Top,{x:J,y:ee}=yn(p.value,A,E);let _=null;b.value&&((v=i.value)!=null&&v.handleId)&&(n.value===vt.Strict?_=((x=b.value.handleBounds[$==="source"?"target":"source"])==null?void 0:x.find(D=>{var z;return D.id===((z=i.value)==null?void 0:z.handleId)}))||null:_=((S=[...b.value.handleBounds.source||[],...b.value.handleBounds.target||[]])==null?void 0:S.find(D=>{var z;return D.id===((z=i.value)==null?void 0:z.handleId)}))||null);const O=((P=i.value)==null?void 0:P.position)??(E?Rf[E]:null);if(!E||!O)return null;const C=a.value??l.value.type??ct.Bezier;let M="";const T={sourceX:J,sourceY:ee,sourcePosition:E,targetX:y.value.x,targetY:y.value.y,targetPosition:O};return C===ct.Bezier?[M]=ia(T):C===ct.Step?[M]=yo({...T,borderRadius:0}):C===ct.SmoothStep?[M]=yo(T):C===ct.SimpleBezier?[M]=ra(T):M=`M${J},${ee} ${y.value.x},${y.value.y}`,me("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},me("g",{class:"vue-flow__connection"},f?me(f,{sourceX:J,sourceY:ee,sourcePosition:E,targetX:y.value.x,targetY:y.value.y,targetPosition:O,sourceNode:p.value,sourceHandle:A,targetNode:b.value,targetHandle:_,markerEnd:w.value,markerStart:m.value,connectionStatus:u.value}):me("path",{d:M,class:[l.value.class,u,"vue-flow__connection-path"],style:{...s.value,...l.value.style},"marker-end":w.value,"marker-start":m.value})))}}}),Bf=zf,Lf=["id","markerWidth","markerHeight","markerUnits","orient"],Ff={name:"MarkerType",compatConfig:{MODE:3}},Gf=we({...Ff,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(ie(),ce("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===V(ho).ArrowClosed?(ie(),ce("polyline",{key:0,style:Pe({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):Be("",!0),t.type===V(ho).Arrow?(ie(),ce("polyline",{key:1,style:Pe({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):Be("",!0)],8,Lf))}}),Hf={class:"vue-flow__marker vue-flow__container"},Yf={name:"MarkerDefinitions",compatConfig:{MODE:3}},Xf=we({...Yf,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:i}=xe(),r=re(()=>{const a=new Set,s=[],l=u=>{if(u){const c=Xt(u,t);a.has(c)||(typeof u=="object"?s.push({...u,id:c,color:u.color||i.value}):s.push({id:c,color:i.value,type:u}),a.add(c))}};for(const u of[o.value.markerEnd,o.value.markerStart])l(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])l(c);return s.sort((u,c)=>u.id.localeCompare(c.id))});return(a,s)=>(ie(),ce("svg",Hf,[Me("defs",null,[(ie(!0),ce(ze,null,Ct(r.value,l=>(ie(),Le(Gf,{id:l.id,key:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,"stroke-width":l.strokeWidth,orient:l.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),jf={name:"Edges",compatConfig:{MODE:3}},Uf=we({...jf,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=xe();return(i,r)=>(ie(),ce(ze,null,[H(Xf),(ie(!0),ce(ze,null,Ct(V(n),a=>(ie(),ce("svg",{key:a.id,class:"vue-flow__edges vue-flow__container",style:Pe({zIndex:V(gd)(a,V(t),V(o))})},[H(V(Vf),{id:a.id},null,8,["id"])],4))),128)),H(V(Bf))],64))}}),Wf=we({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:i,multiSelectionActive:r,emits:a,removeSelectedNodes:s,addSelectedNodes:l,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:f,elevateNodesOnSelect:p,disableKeyboardA11y:b,ariaLiveMessage:y,snapToGrid:m,snapGrid:w,nodeDragThreshold:v,nodesDraggable:x,elementsSelectable:S,nodesConnectable:P,nodesFocusable:R}=xe(),$=le(null);kt(Kr,$),kt(Zr,e.id);const j=Tt(On),U=jt(),A=ea(),{node:E,parentNode:J}=Jr(e.id),ee=Ee(()=>typeof E.draggable>"u"?x.value:E.draggable),_=Ee(()=>typeof E.selectable>"u"?S.value:E.selectable),O=Ee(()=>typeof E.connectable>"u"?P.value:E.connectable),C=Ee(()=>typeof E.focusable>"u"?R.value:E.focusable),M=Ee(()=>!!E.dimensions.width&&!!E.dimensions.height),T=re(()=>{const h=E.type||"default",I=j==null?void 0:j[`node-${h}`];if(I)return I;let N=E.template||d.value[h];if(typeof N=="string"&&U){const k=Object.keys(U.appContext.components);k&&k.includes(h)&&(N=ge(h,!1))}return N&&typeof N!="string"?N:(a.error(new Ie(ke.NODE_TYPE_MISSING,N)),!1)}),{emit:D,on:z}=Od(E,a),G=qr({id:e.id,el:$,disabled:()=>!ee.value,selectable:_,dragHandle:()=>E.dragHandle,onStart(h){D.dragStart(h)},onDrag(h){D.drag(h)},onStop(h){D.dragStop(h)},onClick(h){q(h)}}),te=re(()=>E.class instanceof Function?E.class(E):E.class),W=re(()=>{const h=(E.style instanceof Function?E.style(E):E.style)||{},I=E.width instanceof Function?E.width(E):E.width,N=E.height instanceof Function?E.height(E):E.height;return I&&(h.width=typeof I=="string"?I:`${I}px`),N&&(h.height=typeof N=="string"?N:`${N}px`),h}),B=Ee(()=>Number(E.zIndex??W.value.zIndex??0));return c(h=>{(h.includes(e.id)||!h.length)&&de()}),Je(()=>{ve(()=>E.hidden,(h=!1,I,N)=>{!h&&$.value&&(e.resizeObserver.observe($.value),N(()=>{$.value&&e.resizeObserver.unobserve($.value)}))},{immediate:!0,flush:"post"})}),ve([()=>E.type,()=>E.sourcePosition,()=>E.targetPosition],()=>{qe(()=>{u([{id:e.id,nodeElement:$.value,forceUpdate:!0}])})}),ve([()=>E.position.x,()=>E.position.y,()=>{var h;return(h=J.value)==null?void 0:h.computedPosition.x},()=>{var h;return(h=J.value)==null?void 0:h.computedPosition.y},()=>{var h;return(h=J.value)==null?void 0:h.computedPosition.z},B,()=>E.selected,()=>E.dimensions.height,()=>E.dimensions.width,()=>{var h;return(h=J.value)==null?void 0:h.dimensions.height},()=>{var h;return(h=J.value)==null?void 0:h.dimensions.width}],([h,I,N,k,L,Y])=>{const oe={x:h,y:I,z:Y+(p.value&&E.selected?1e3:0)};typeof N<"u"&&typeof k<"u"?E.computedPosition=ud({x:N,y:k,z:L},oe):E.computedPosition=oe},{flush:"post",immediate:!0}),ve([()=>E.extent,f],([h,I],[N,k])=>{(h!==N||I!==k)&&K()}),E.extent==="parent"||typeof E.extent=="object"&&"range"in E.extent&&E.extent.range==="parent"?oo(()=>M).toBe(!0).then(K):K(),()=>E.hidden?null:me("div",{ref:$,"data-id":E.id,class:["vue-flow__node",`vue-flow__node-${T.value===!1?"default":E.type||"default"}`,{[n.value]:ee.value,dragging:G==null?void 0:G.value,draggable:ee.value,selected:E.selected,selectable:_.value,parent:E.isParent},te.value],style:{visibility:M.value?"visible":"hidden",zIndex:E.computedPosition.z??B.value,transform:`translate(${E.computedPosition.x}px,${E.computedPosition.y}px)`,pointerEvents:_.value||ee.value?"all":"none",...W.value},tabIndex:C.value?0:void 0,role:C.value?"button":void 0,"aria-describedby":b.value?void 0:`${$r}-${t}`,"aria-label":E.ariaLabel,onMouseenter:ue,onMousemove:fe,onMouseleave:ne,onContextmenu:ae,onClick:q,onDblclick:Z,onKeydown:g},[me(T.value===!1?d.value.default:T.value,{id:E.id,type:E.type,data:E.data,events:{...E.events,...z},selected:E.selected,resizing:E.resizing,dragging:G.value,connectable:O.value,position:E.computedPosition,dimensions:E.dimensions,isValidTargetPos:E.isValidTargetPos,isValidSourcePos:E.isValidSourcePos,parent:E.parentNode,parentNodeId:E.parentNode,zIndex:E.computedPosition.z??B.value,targetPosition:E.targetPosition,sourcePosition:E.sourcePosition,label:E.label,dragHandle:E.dragHandle,onUpdateNodeInternals:de})]);function K(){const h=E.computedPosition;m.value&&(h.x=w.value[0]*Math.round(h.x/w.value[0]),h.y=w.value[1]*Math.round(h.y/w.value[1]));const{computedPosition:I,position:N}=Oo(E,h,a.error,f.value,J.value);(E.computedPosition.x!==I.x||E.computedPosition.y!==I.y)&&(E.computedPosition={...E.computedPosition,...I}),(E.position.x!==N.x||E.position.y!==N.y)&&(E.position=N)}function de(){$.value&&u([{id:e.id,nodeElement:$.value,forceUpdate:!0}])}function ue(h){G!=null&&G.value||D.mouseEnter({event:h,node:E})}function fe(h){G!=null&&G.value||D.mouseMove({event:h,node:E})}function ne(h){G!=null&&G.value||D.mouseLeave({event:h,node:E})}function ae(h){return D.contextMenu({event:h,node:E})}function Z(h){return D.doubleClick({event:h,node:E})}function q(h){_.value&&(!o.value||!ee.value||v.value>0)&&mo(E,r.value,l,s,i,!1,$.value),D.click({event:h,node:E})}function g(h){if(!(po(h)||b.value))if(Dr.includes(h.key)&&_.value){const I=h.key==="Escape";mo(E,r.value,l,s,i,I,$.value)}else ee.value&&E.selected&&St[h.key]&&(y.value=`Moved selected node ${h.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~E.position.x}, y: ${~~E.position.y}`,A({x:St[h.key].x,y:St[h.key].y},h.shiftKey))}}}),Zf=Wf;function Kf(e={includeHiddenNodes:!1}){const{nodes:t}=xe();return re(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const qf={class:"vue-flow__nodes vue-flow__container"},Qf={name:"Nodes",compatConfig:{MODE:3}},Jf=we({...Qf,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=xe(),i=Kf(),r=le();return ve(i,a=>{a&&qe(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),Je(()=>{r.value=new ResizeObserver(a=>{const s=a.map(l=>({id:l.target.getAttribute("data-id"),nodeElement:l.target,forceUpdate:!0}));qe(()=>n(s))})}),er(()=>{var a;return(a=r.value)==null?void 0:a.disconnect()}),(a,s)=>(ie(),ce("div",qf,[r.value?(ie(!0),ce(ze,{key:0},Ct(V(t),(l,u,c,d)=>{const f=[l.id];if(d&&d.key===l.id&&Wa(d,f))return d;const p=(ie(),Le(V(Zf),{id:l.id,key:l.id,"resize-observer":r.value},null,8,["id","resize-observer"]));return p.memo=f,p},s,0),128)):Be("",!0)]))}});function eh(){const{emits:e}=xe();Je(()=>{if(Wr()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new Ie(ke.MISSING_STYLES))}})}const th=Me("div",{class:"vue-flow__edge-labels"},null,-1),nh={name:"VueFlow",compatConfig:{MODE:3}},oh=we({...nh,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=Xa(),r=Rn(o,"modelValue",n),a=Rn(o,"nodes",n),s=Rn(o,"edges",n),l=xe(o),u=Pd({modelValue:r,nodes:a,edges:s},o,l);return Ad(n,l.hooks),$f(),eh(),kt(On,i),qi(()=>{u()}),t(l),(c,d)=>(ie(),ce("div",{ref:V(l).vueFlowRef,class:"vue-flow"},[H(kf,null,{default:Q(()=>[H(Uf),th,H(Jf),st(c.$slots,"zoom-pane")]),_:3}),st(c.$slots,"default"),H(Tf)],512))}});var ih="\0",ut="\0",Mi="";let rh=class{constructor(t){be(this,"_isDirected",!0);be(this,"_isMultigraph",!1);be(this,"_isCompound",!1);be(this,"_label");be(this,"_defaultNodeLabelFn",()=>{});be(this,"_defaultEdgeLabelFn",()=>{});be(this,"_nodes",{});be(this,"_in",{});be(this,"_preds",{});be(this,"_out",{});be(this,"_sucs",{});be(this,"_edgeObjs",{});be(this,"_edgeLabels",{});be(this,"_nodeCount",0);be(this,"_edgeCount",0);be(this,"_parent");be(this,"_children");t&&(this._isDirected=Object.hasOwn(t,"directed")?t.directed:!0,this._isMultigraph=Object.hasOwn(t,"multigraph")?t.multigraph:!1,this._isCompound=Object.hasOwn(t,"compound")?t.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[ut]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return this._defaultNodeLabelFn=t,typeof t!="function"&&(this._defaultNodeLabelFn=()=>t),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var t=this;return this.nodes().filter(n=>Object.keys(t._in[n]).length===0)}sinks(){var t=this;return this.nodes().filter(n=>Object.keys(t._out[n]).length===0)}setNodes(t,n){var o=arguments,i=this;return t.forEach(function(r){o.length>1?i.setNode(r,n):i.setNode(r)}),this}setNode(t,n){return Object.hasOwn(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=n),this):(this._nodes[t]=arguments.length>1?n:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=ut,this._children[t]={},this._children[ut][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}node(t){return this._nodes[t]}hasNode(t){return Object.hasOwn(this._nodes,t)}removeNode(t){var n=this;if(Object.hasOwn(this._nodes,t)){var o=i=>n.removeEdge(n._edgeObjs[i]);delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],this.children(t).forEach(function(i){n.setParent(i)}),delete this._children[t]),Object.keys(this._in[t]).forEach(o),delete this._in[t],delete this._preds[t],Object.keys(this._out[t]).forEach(o),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n===void 0)n=ut;else{n+="";for(var o=n;o!==void 0;o=this.parent(o))if(o===t)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");this.setNode(n)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=n,this._children[n][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var n=this._parent[t];if(n!==ut)return n}}children(t=ut){if(this._isCompound){var n=this._children[t];if(n)return Object.keys(n)}else{if(t===ut)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var n=this._preds[t];if(n)return Object.keys(n)}successors(t){var n=this._sucs[t];if(n)return Object.keys(n)}neighbors(t){var n=this.predecessors(t);if(n){const i=new Set(n);for(var o of this.successors(t))i.add(o);return Array.from(i.values())}}isLeaf(t){var n;return this.isDirected()?n=this.successors(t):n=this.neighbors(t),n.length===0}filterNodes(t){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var o=this;Object.entries(this._nodes).forEach(function([a,s]){t(a)&&n.setNode(a,s)}),Object.values(this._edgeObjs).forEach(function(a){n.hasNode(a.v)&&n.hasNode(a.w)&&n.setEdge(a,o.edge(a))});var i={};function r(a){var s=o.parent(a);return s===void 0||n.hasNode(s)?(i[a]=s,s):s in i?i[s]:r(s)}return this._isCompound&&n.nodes().forEach(a=>n.setParent(a,r(a))),n}setDefaultEdgeLabel(t){return this._defaultEdgeLabelFn=t,typeof t!="function"&&(this._defaultEdgeLabelFn=()=>t),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(t,n){var o=this,i=arguments;return t.reduce(function(r,a){return i.length>1?o.setEdge(r,a,n):o.setEdge(r,a),a}),this}setEdge(){var t,n,o,i,r=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(t=a.v,n=a.w,o=a.name,arguments.length===2&&(i=arguments[1],r=!0)):(t=a,n=arguments[1],o=arguments[3],arguments.length>2&&(i=arguments[2],r=!0)),t=""+t,n=""+n,o!==void 0&&(o=""+o);var s=Rt(this._isDirected,t,n,o);if(Object.hasOwn(this._edgeLabels,s))return r&&(this._edgeLabels[s]=i),this;if(o!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(n),this._edgeLabels[s]=r?i:this._defaultEdgeLabelFn(t,n,o);var l=ah(this._isDirected,t,n,o);return t=l.v,n=l.w,Object.freeze(l),this._edgeObjs[s]=l,Oi(this._preds[n],t),Oi(this._sucs[t],n),this._in[n][s]=l,this._out[t][s]=l,this._edgeCount++,this}edge(t,n,o){var i=arguments.length===1?Un(this._isDirected,arguments[0]):Rt(this._isDirected,t,n,o);return this._edgeLabels[i]}edgeAsObj(){const t=this.edge(...arguments);return typeof t!="object"?{label:t}:t}hasEdge(t,n,o){var i=arguments.length===1?Un(this._isDirected,arguments[0]):Rt(this._isDirected,t,n,o);return Object.hasOwn(this._edgeLabels,i)}removeEdge(t,n,o){var i=arguments.length===1?Un(this._isDirected,arguments[0]):Rt(this._isDirected,t,n,o),r=this._edgeObjs[i];return r&&(t=r.v,n=r.w,delete this._edgeLabels[i],delete this._edgeObjs[i],Ti(this._preds[n],t),Ti(this._sucs[t],n),delete this._in[n][i],delete this._out[t][i],this._edgeCount--),this}inEdges(t,n){var o=this._in[t];if(o){var i=Object.values(o);return n?i.filter(r=>r.v===n):i}}outEdges(t,n){var o=this._out[t];if(o){var i=Object.values(o);return n?i.filter(r=>r.w===n):i}}nodeEdges(t,n){var o=this.inEdges(t,n);if(o)return o.concat(this.outEdges(t,n))}};function Oi(e,t){e[t]?e[t]++:e[t]=1}function Ti(e,t){--e[t]||delete e[t]}function Rt(e,t,n,o){var i=""+t,r=""+n;if(!e&&i>r){var a=i;i=r,r=a}return i+Mi+r+Mi+(o===void 0?ih:o)}function ah(e,t,n,o){var i=""+t,r=""+n;if(!e&&i>r){var a=i;i=r,r=a}var s={v:i,w:r};return o&&(s.name=o),s}function Un(e,t){return Rt(e,t.v,t.w,t.name)}var Do=rh,sh="2.2.4",lh={Graph:Do,version:sh},uh=Do,ch={write:dh,read:ph};function dh(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:fh(e),edges:hh(e)};return e.graph()!==void 0&&(t.value=structuredClone(e.graph())),t}function fh(e){return e.nodes().map(function(t){var n=e.node(t),o=e.parent(t),i={v:t};return n!==void 0&&(i.value=n),o!==void 0&&(i.parent=o),i})}function hh(e){return e.edges().map(function(t){var n=e.edge(t),o={v:t.v,w:t.w};return t.name!==void 0&&(o.name=t.name),n!==void 0&&(o.value=n),o})}function ph(e){var t=new uh(e.options).setGraph(e.value);return e.nodes.forEach(function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),e.edges.forEach(function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}var gh=vh;function vh(e){var t={},n=[],o;function i(r){Object.hasOwn(t,r)||(t[r]=!0,o.push(r),e.successors(r).forEach(i),e.predecessors(r).forEach(i))}return e.nodes().forEach(function(r){o=[],i(r),o.length&&n.push(o)}),n}let mh=class{constructor(){be(this,"_arr",[]);be(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(t){return t.key})}has(t){return Object.hasOwn(this._keyIndices,t)}priority(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(t,n){var o=this._keyIndices;if(t=String(t),!Object.hasOwn(o,t)){var i=this._arr,r=i.length;return o[t]=r,i.push({key:t,priority:n}),this._decrease(r),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key}decrease(t,n){var o=this._keyIndices[t];if(n>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[o].priority+" New: "+n);this._arr[o].priority=n,this._decrease(o)}_heapify(t){var n=this._arr,o=2*t,i=o+1,r=t;o<n.length&&(r=n[o].priority<n[r].priority?o:r,i<n.length&&(r=n[i].priority<n[r].priority?i:r),r!==t&&(this._swap(t,r),this._heapify(r)))}_decrease(t){for(var n=this._arr,o=n[t].priority,i;t!==0&&(i=t>>1,!(n[i].priority<o));)this._swap(t,i),t=i}_swap(t,n){var o=this._arr,i=this._keyIndices,r=o[t],a=o[n];o[t]=a,o[n]=r,i[a.key]=t,i[r.key]=n}};var sa=mh,yh=sa,la=wh,_h=()=>1;function wh(e,t,n,o){return bh(e,String(t),n||_h,o||function(i){return e.outEdges(i)})}function bh(e,t,n,o){var i={},r=new yh,a,s,l=function(u){var c=u.v!==a?u.v:u.w,d=i[c],f=n(u),p=s.distance+f;if(f<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+u+" Weight: "+f);p<d.distance&&(d.distance=p,d.predecessor=a,r.decrease(c,p))};for(e.nodes().forEach(function(u){var c=u===t?0:Number.POSITIVE_INFINITY;i[u]={distance:c},r.add(u,c)});r.size()>0&&(a=r.removeMin(),s=i[a],s.distance!==Number.POSITIVE_INFINITY);)o(a).forEach(l);return i}var Eh=la,xh=Sh;function Sh(e,t,n){return e.nodes().reduce(function(o,i){return o[i]=Eh(e,i,t,n),o},{})}var ua=Nh;function Nh(e){var t=0,n=[],o={},i=[];function r(a){var s=o[a]={onStack:!0,lowlink:t,index:t++};if(n.push(a),e.successors(a).forEach(function(c){Object.hasOwn(o,c)?o[c].onStack&&(s.lowlink=Math.min(s.lowlink,o[c].index)):(r(c),s.lowlink=Math.min(s.lowlink,o[c].lowlink))}),s.lowlink===s.index){var l=[],u;do u=n.pop(),o[u].onStack=!1,l.push(u);while(a!==u);i.push(l)}}return e.nodes().forEach(function(a){Object.hasOwn(o,a)||r(a)}),i}var kh=ua,Ch=Ih;function Ih(e){return kh(e).filter(function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})}var Mh=Th,Oh=()=>1;function Th(e,t,n){return $h(e,t||Oh,n||function(o){return e.outEdges(o)})}function $h(e,t,n){var o={},i=e.nodes();return i.forEach(function(r){o[r]={},o[r][r]={distance:0},i.forEach(function(a){r!==a&&(o[r][a]={distance:Number.POSITIVE_INFINITY})}),n(r).forEach(function(a){var s=a.v===r?a.w:a.v,l=t(a);o[r][s]={distance:l,predecessor:r}})}),i.forEach(function(r){var a=o[r];i.forEach(function(s){var l=o[s];i.forEach(function(u){var c=l[r],d=a[u],f=l[u],p=c.distance+d.distance;p<f.distance&&(f.distance=p,f.predecessor=d.predecessor)})})}),o}function ca(e){var t={},n={},o=[];function i(r){if(Object.hasOwn(n,r))throw new _o;Object.hasOwn(t,r)||(n[r]=!0,t[r]=!0,e.predecessors(r).forEach(i),delete n[r],o.push(r))}if(e.sinks().forEach(i),Object.keys(t).length!==e.nodeCount())throw new _o;return o}class _o extends Error{constructor(){super(...arguments)}}var da=ca;ca.CycleException=_o;var $i=da,Ph=Dh;function Dh(e){try{$i(e)}catch(t){if(t instanceof $i.CycleException)return!1;throw t}return!0}var fa=Ah;function Ah(e,t,n){Array.isArray(t)||(t=[t]);var o=e.isDirected()?s=>e.successors(s):s=>e.neighbors(s),i=n==="post"?Vh:Rh,r=[],a={};return t.forEach(s=>{if(!e.hasNode(s))throw new Error("Graph does not have node: "+s);i(s,o,a,r)}),r}function Vh(e,t,n,o){for(var i=[[e,!1]];i.length>0;){var r=i.pop();r[1]?o.push(r[0]):Object.hasOwn(n,r[0])||(n[r[0]]=!0,i.push([r[0],!0]),ha(t(r[0]),a=>i.push([a,!1])))}}function Rh(e,t,n,o){for(var i=[e];i.length>0;){var r=i.pop();Object.hasOwn(n,r)||(n[r]=!0,o.push(r),ha(t(r),a=>i.push(a)))}}function ha(e,t){for(var n=e.length;n--;)t(e[n],n,e);return e}var zh=fa,Bh=Lh;function Lh(e,t){return zh(e,t,"post")}var Fh=fa,Gh=Hh;function Hh(e,t){return Fh(e,t,"pre")}var Yh=Do,Xh=sa,jh=Uh;function Uh(e,t){var n=new Yh,o={},i=new Xh,r;function a(l){var u=l.v===r?l.w:l.v,c=i.priority(u);if(c!==void 0){var d=t(l);d<c&&(o[u]=r,i.decrease(u,d))}}if(e.nodeCount()===0)return n;e.nodes().forEach(function(l){i.add(l,Number.POSITIVE_INFINITY),n.setNode(l)}),i.decrease(e.nodes()[0],0);for(var s=!1;i.size()>0;){if(r=i.removeMin(),Object.hasOwn(o,r))n.setEdge(r,o[r]);else{if(s)throw new Error("Input graph is not connected: "+e);s=!0}e.nodeEdges(r).forEach(a)}return n}var Wh={components:gh,dijkstra:la,dijkstraAll:xh,findCycles:Ch,floydWarshall:Mh,isAcyclic:Ph,postorder:Bh,preorder:Gh,prim:jh,tarjan:ua,topsort:da},Pi=lh,Ge={Graph:Pi.Graph,json:ch,alg:Wh,version:Pi.version};let Zh=class{constructor(){let t={};t._next=t._prev=t,this._sentinel=t}dequeue(){let t=this._sentinel,n=t._prev;if(n!==t)return Di(n),n}enqueue(t){let n=this._sentinel;t._prev&&t._next&&Di(t),t._next=n._next,n._next._prev=t,n._next=t,t._prev=n}toString(){let t=[],n=this._sentinel,o=n._prev;for(;o!==n;)t.push(JSON.stringify(o,Kh)),o=o._prev;return"["+t.join(", ")+"]"}};function Di(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Kh(e,t){if(e!=="_next"&&e!=="_prev")return t}var qh=Zh;let Qh=Ge.Graph,Jh=qh;var ep=np;let tp=()=>1;function np(e,t){if(e.nodeCount()<=1)return[];let n=ip(e,t||tp);return op(n.graph,n.buckets,n.zeroIdx).flatMap(i=>e.outEdges(i.v,i.w))}function op(e,t,n){let o=[],i=t[t.length-1],r=t[0],a;for(;e.nodeCount();){for(;a=r.dequeue();)Wn(e,t,n,a);for(;a=i.dequeue();)Wn(e,t,n,a);if(e.nodeCount()){for(let s=t.length-2;s>0;--s)if(a=t[s].dequeue(),a){o=o.concat(Wn(e,t,n,a,!0));break}}}return o}function Wn(e,t,n,o,i){let r=i?[]:void 0;return e.inEdges(o.v).forEach(a=>{let s=e.edge(a),l=e.node(a.v);i&&r.push({v:a.v,w:a.w}),l.out-=s,wo(t,n,l)}),e.outEdges(o.v).forEach(a=>{let s=e.edge(a),l=a.w,u=e.node(l);u.in-=s,wo(t,n,u)}),e.removeNode(o.v),r}function ip(e,t){let n=new Qh,o=0,i=0;e.nodes().forEach(s=>{n.setNode(s,{v:s,in:0,out:0})}),e.edges().forEach(s=>{let l=n.edge(s.v,s.w)||0,u=t(s),c=l+u;n.setEdge(s.v,s.w,c),i=Math.max(i,n.node(s.v).out+=u),o=Math.max(o,n.node(s.w).in+=u)});let r=rp(i+o+3).map(()=>new Jh),a=o+1;return n.nodes().forEach(s=>{wo(r,a,n.node(s))}),{graph:n,buckets:r,zeroIdx:a}}function wo(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}function rp(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}let pa=Ge.Graph;var Ce={addBorderNode:pp,addDummyNode:ga,applyWithChunking:An,asNonCompoundGraph:sp,buildLayerMatrix:dp,intersectRect:cp,mapValues:bp,maxRank:ma,normalizeRanks:fp,notime:yp,partition:vp,pick:wp,predecessorWeights:up,range:_a,removeEmptyRanks:hp,simplify:ap,successorWeights:lp,time:mp,uniqueId:ya,zipObject:Ao};function ga(e,t,n,o){let i;do i=ya(o);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function ap(e){let t=new pa().setGraph(e.graph());return e.nodes().forEach(n=>t.setNode(n,e.node(n))),e.edges().forEach(n=>{let o=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+i.weight,minlen:Math.max(o.minlen,i.minlen)})}),t}function sp(e){let t=new pa({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{e.children(n).length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdge(n,e.edge(n))}),t}function lp(e){let t=e.nodes().map(n=>{let o={};return e.outEdges(n).forEach(i=>{o[i.w]=(o[i.w]||0)+e.edge(i).weight}),o});return Ao(e.nodes(),t)}function up(e){let t=e.nodes().map(n=>{let o={};return e.inEdges(n).forEach(i=>{o[i.v]=(o[i.v]||0)+e.edge(i).weight}),o});return Ao(e.nodes(),t)}function cp(e,t){let n=e.x,o=e.y,i=t.x-n,r=t.y-o,a=e.width/2,s=e.height/2;if(!i&&!r)throw new Error("Not possible to find intersection inside of the rectangle");let l,u;return Math.abs(r)*a>Math.abs(i)*s?(r<0&&(s=-s),l=s*i/r,u=s):(i<0&&(a=-a),l=a,u=a*r/i),{x:n+l,y:o+u}}function dp(e){let t=_a(ma(e)+1).map(()=>[]);return e.nodes().forEach(n=>{let o=e.node(n),i=o.rank;i!==void 0&&(t[i][o.order]=n)}),t}function fp(e){let t=e.nodes().map(o=>{let i=e.node(o).rank;return i===void 0?Number.MAX_VALUE:i}),n=An(Math.min,t);e.nodes().forEach(o=>{let i=e.node(o);Object.hasOwn(i,"rank")&&(i.rank-=n)})}function hp(e){let t=e.nodes().map(a=>e.node(a).rank),n=An(Math.min,t),o=[];e.nodes().forEach(a=>{let s=e.node(a).rank-n;o[s]||(o[s]=[]),o[s].push(a)});let i=0,r=e.graph().nodeRankFactor;Array.from(o).forEach((a,s)=>{a===void 0&&s%r!==0?--i:a!==void 0&&i&&a.forEach(l=>e.node(l).rank+=i)})}function pp(e,t,n,o){let i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=o),ga(e,"border",i,t)}function gp(e,t=va){const n=[];for(let o=0;o<e.length;o+=t){const i=e.slice(o,o+t);n.push(i)}return n}const va=65535;function An(e,t){if(t.length>va){const n=gp(t);return e.apply(null,n.map(o=>e.apply(null,o)))}else return e.apply(null,t)}function ma(e){const n=e.nodes().map(o=>{let i=e.node(o).rank;return i===void 0?Number.MIN_VALUE:i});return An(Math.max,n)}function vp(e,t){let n={lhs:[],rhs:[]};return e.forEach(o=>{t(o)?n.lhs.push(o):n.rhs.push(o)}),n}function mp(e,t){let n=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-n)+"ms")}}function yp(e,t){return t()}let _p=0;function ya(e){var t=++_p;return toString(e)+t}function _a(e,t,n=1){t==null&&(t=e,e=0);let o=r=>r<t;n<0&&(o=r=>t<r);const i=[];for(let r=e;o(r);r+=n)i.push(r);return i}function wp(e,t){const n={};for(const o of t)e[o]!==void 0&&(n[o]=e[o]);return n}function bp(e,t){let n=t;return typeof t=="string"&&(n=o=>o[t]),Object.entries(e).reduce((o,[i,r])=>(o[i]=n(r,i),o),{})}function Ao(e,t){return e.reduce((n,o,i)=>(n[o]=t[i],n),{})}let Ep=ep,xp=Ce.uniqueId;var Sp={run:Np,undo:Cp};function Np(e){(e.graph().acyclicer==="greedy"?Ep(e,n(e)):kp(e)).forEach(o=>{let i=e.edge(o);e.removeEdge(o),i.forwardName=o.name,i.reversed=!0,e.setEdge(o.w,o.v,i,xp("rev"))});function n(o){return i=>o.edge(i).weight}}function kp(e){let t=[],n={},o={};function i(r){Object.hasOwn(o,r)||(o[r]=!0,n[r]=!0,e.outEdges(r).forEach(a=>{Object.hasOwn(n,a.w)?t.push(a):i(a.w)}),delete n[r])}return e.nodes().forEach(i),t}function Cp(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.reversed){e.removeEdge(t);let o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}})}let Ip=Ce;var Mp={run:Op,undo:$p};function Op(e){e.graph().dummyChains=[],e.edges().forEach(t=>Tp(e,t))}function Tp(e,t){let n=t.v,o=e.node(n).rank,i=t.w,r=e.node(i).rank,a=t.name,s=e.edge(t),l=s.labelRank;if(r===o+1)return;e.removeEdge(t);let u,c,d;for(d=0,++o;o<r;++d,++o)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:t,rank:o},u=Ip.addDummyNode(e,"edge",c,"_d"),o===l&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),e.setEdge(n,u,{weight:s.weight},a),d===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,i,{weight:s.weight},a)}function $p(e){e.graph().dummyChains.forEach(t=>{let n=e.node(t),o=n.edgeLabel,i;for(e.setEdge(n.edgeObj,o);n.dummy;)i=e.successors(t)[0],e.removeNode(t),o.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),t=i,n=e.node(t)})}const{applyWithChunking:Pp}=Ce;var Vn={longestPath:Dp,slack:Ap};function Dp(e){var t={};function n(o){var i=e.node(o);if(Object.hasOwn(t,o))return i.rank;t[o]=!0;let r=e.outEdges(o).map(s=>s==null?Number.POSITIVE_INFINITY:n(s.w)-e.edge(s).minlen);var a=Pp(Math.min,r);return a===Number.POSITIVE_INFINITY&&(a=0),i.rank=a}e.sources().forEach(n)}function Ap(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Vp=Ge.Graph,wn=Vn.slack,wa=Rp;function Rp(e){var t=new Vp({directed:!1}),n=e.nodes()[0],o=e.nodeCount();t.setNode(n,{});for(var i,r;zp(t,e)<o;)i=Bp(t,e),r=t.hasNode(i.v)?wn(e,i):-wn(e,i),Lp(t,e,r);return t}function zp(e,t){function n(o){t.nodeEdges(o).forEach(i=>{var r=i.v,a=o===r?i.w:r;!e.hasNode(a)&&!wn(t,i)&&(e.setNode(a,{}),e.setEdge(o,a,{}),n(a))})}return e.nodes().forEach(n),e.nodeCount()}function Bp(e,t){return t.edges().reduce((o,i)=>{let r=Number.POSITIVE_INFINITY;return e.hasNode(i.v)!==e.hasNode(i.w)&&(r=wn(t,i)),r<o[0]?[r,i]:o},[Number.POSITIVE_INFINITY,null])[1]}function Lp(e,t,n){e.nodes().forEach(o=>t.node(o).rank+=n)}var Fp=wa,Ai=Vn.slack,Gp=Vn.longestPath,Hp=Ge.alg.preorder,Yp=Ge.alg.postorder,Xp=Ce.simplify,jp=yt;yt.initLowLimValues=Ro;yt.initCutValues=Vo;yt.calcCutValue=ba;yt.leaveEdge=xa;yt.enterEdge=Sa;yt.exchangeEdges=Na;function yt(e){e=Xp(e),Gp(e);var t=Fp(e);Ro(t),Vo(t,e);for(var n,o;n=xa(t);)o=Sa(t,e,n),Na(t,e,n,o)}function Vo(e,t){var n=Yp(e,e.nodes());n=n.slice(0,n.length-1),n.forEach(o=>Up(e,t,o))}function Up(e,t,n){var o=e.node(n),i=o.parent;e.edge(n,i).cutvalue=ba(e,t,n)}function ba(e,t,n){var o=e.node(n),i=o.parent,r=!0,a=t.edge(n,i),s=0;return a||(r=!1,a=t.edge(i,n)),s=a.weight,t.nodeEdges(n).forEach(l=>{var u=l.v===n,c=u?l.w:l.v;if(c!==i){var d=u===r,f=t.edge(l).weight;if(s+=d?f:-f,Zp(e,n,c)){var p=e.edge(n,c).cutvalue;s+=d?-p:p}}}),s}function Ro(e,t){arguments.length<2&&(t=e.nodes()[0]),Ea(e,{},1,t)}function Ea(e,t,n,o,i){var r=n,a=e.node(o);return t[o]=!0,e.neighbors(o).forEach(s=>{Object.hasOwn(t,s)||(n=Ea(e,t,n,s,o))}),a.low=r,a.lim=n++,i?a.parent=i:delete a.parent,n}function xa(e){return e.edges().find(t=>e.edge(t).cutvalue<0)}function Sa(e,t,n){var o=n.v,i=n.w;t.hasEdge(o,i)||(o=n.w,i=n.v);var r=e.node(o),a=e.node(i),s=r,l=!1;r.lim>a.lim&&(s=a,l=!0);var u=t.edges().filter(c=>l===Vi(e,e.node(c.v),s)&&l!==Vi(e,e.node(c.w),s));return u.reduce((c,d)=>Ai(t,d)<Ai(t,c)?d:c)}function Na(e,t,n,o){var i=n.v,r=n.w;e.removeEdge(i,r),e.setEdge(o.v,o.w,{}),Ro(e),Vo(e,t),Wp(e,t)}function Wp(e,t){var n=e.nodes().find(i=>!t.node(i).parent),o=Hp(e,n);o=o.slice(1),o.forEach(i=>{var r=e.node(i).parent,a=t.edge(i,r),s=!1;a||(a=t.edge(r,i),s=!0),t.node(i).rank=t.node(r).rank+(s?a.minlen:-a.minlen)})}function Zp(e,t,n){return e.hasEdge(t,n)}function Vi(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var Kp=Vn,ka=Kp.longestPath,qp=wa,Qp=jp,Jp=eg;function eg(e){switch(e.graph().ranker){case"network-simplex":Ri(e);break;case"tight-tree":ng(e);break;case"longest-path":tg(e);break;default:Ri(e)}}var tg=ka;function ng(e){ka(e),qp(e)}function Ri(e){Qp(e)}var og=ig;function ig(e){let t=ag(e);e.graph().dummyChains.forEach(n=>{let o=e.node(n),i=o.edgeObj,r=rg(e,t,i.v,i.w),a=r.path,s=r.lca,l=0,u=a[l],c=!0;for(;n!==i.w;){if(o=e.node(n),c){for(;(u=a[l])!==s&&e.node(u).maxRank<o.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<a.length-1&&e.node(u=a[l+1]).minRank<=o.rank;)l++;u=a[l]}e.setParent(n,u),n=e.successors(n)[0]}})}function rg(e,t,n,o){let i=[],r=[],a=Math.min(t[n].low,t[o].low),s=Math.max(t[n].lim,t[o].lim),l,u;l=n;do l=e.parent(l),i.push(l);while(l&&(t[l].low>a||s>t[l].lim));for(u=l,l=o;(l=e.parent(l))!==u;)r.push(l);return{path:i.concat(r.reverse()),lca:u}}function ag(e){let t={},n=0;function o(i){let r=n;e.children(i).forEach(o),t[i]={low:r,lim:n++}}return e.children().forEach(o),t}let bn=Ce;var sg={run:lg,cleanup:dg};function lg(e){let t=bn.addDummyNode(e,"root",{},"_root"),n=ug(e),o=Object.values(n),i=bn.applyWithChunking(Math.max,o)-1,r=2*i+1;e.graph().nestingRoot=t,e.edges().forEach(s=>e.edge(s).minlen*=r);let a=cg(e)+1;e.children().forEach(s=>Ca(e,t,r,a,i,n,s)),e.graph().nodeRankFactor=r}function Ca(e,t,n,o,i,r,a){let s=e.children(a);if(!s.length){a!==t&&e.setEdge(t,a,{weight:0,minlen:n});return}let l=bn.addBorderNode(e,"_bt"),u=bn.addBorderNode(e,"_bb"),c=e.node(a);e.setParent(l,a),c.borderTop=l,e.setParent(u,a),c.borderBottom=u,s.forEach(d=>{Ca(e,t,n,o,i,r,d);let f=e.node(d),p=f.borderTop?f.borderTop:d,b=f.borderBottom?f.borderBottom:d,y=f.borderTop?o:2*o,m=p!==b?1:i-r[a]+1;e.setEdge(l,p,{weight:y,minlen:m,nestingEdge:!0}),e.setEdge(b,u,{weight:y,minlen:m,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,l,{weight:0,minlen:i+r[a]})}function ug(e){var t={};function n(o,i){var r=e.children(o);r&&r.length&&r.forEach(a=>n(a,i+1)),t[o]=i}return e.children().forEach(o=>n(o,1)),t}function cg(e){return e.edges().reduce((t,n)=>t+e.edge(n).weight,0)}function dg(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{var o=e.edge(n);o.nestingEdge&&e.removeEdge(n)})}let fg=Ce;var hg=pg;function pg(e){function t(n){let o=e.children(n),i=e.node(n);if(o.length&&o.forEach(t),Object.hasOwn(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(let r=i.minRank,a=i.maxRank+1;r<a;++r)zi(e,"borderLeft","_bl",n,i,r),zi(e,"borderRight","_br",n,i,r)}}e.children().forEach(t)}function zi(e,t,n,o,i,r){let a={width:0,height:0,rank:r,borderType:t},s=i[t][r-1],l=fg.addDummyNode(e,"border",a,n);i[t][r]=l,e.setParent(l,o),s&&e.setEdge(s,l,{weight:1})}var gg={adjust:vg,undo:mg};function vg(e){let t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Ia(e)}function mg(e){let t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&yg(e),(t==="lr"||t==="rl")&&(_g(e),Ia(e))}function Ia(e){e.nodes().forEach(t=>Bi(e.node(t))),e.edges().forEach(t=>Bi(e.edge(t)))}function Bi(e){let t=e.width;e.width=e.height,e.height=t}function yg(e){e.nodes().forEach(t=>Zn(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(Zn),Object.hasOwn(n,"y")&&Zn(n)})}function Zn(e){e.y=-e.y}function _g(e){e.nodes().forEach(t=>Kn(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(Kn),Object.hasOwn(n,"x")&&Kn(n)})}function Kn(e){let t=e.x;e.x=e.y,e.y=t}let Li=Ce;var wg=bg;function bg(e){let t={},n=e.nodes().filter(l=>!e.children(l).length),o=n.map(l=>e.node(l).rank),i=Li.applyWithChunking(Math.max,o),r=Li.range(i+1).map(()=>[]);function a(l){if(t[l])return;t[l]=!0;let u=e.node(l);r[u.rank].push(l),e.successors(l).forEach(a)}return n.sort((l,u)=>e.node(l).rank-e.node(u).rank).forEach(a),r}let Eg=Ce.zipObject;var xg=Sg;function Sg(e,t){let n=0;for(let o=1;o<t.length;++o)n+=Ng(e,t[o-1],t[o]);return n}function Ng(e,t,n){let o=Eg(n,n.map((u,c)=>c)),i=t.flatMap(u=>e.outEdges(u).map(c=>({pos:o[c.w],weight:e.edge(c).weight})).sort((c,d)=>c.pos-d.pos)),r=1;for(;r<n.length;)r<<=1;let a=2*r-1;r-=1;let s=new Array(a).fill(0),l=0;return i.forEach(u=>{let c=u.pos+r;s[c]+=u.weight;let d=0;for(;c>0;)c%2&&(d+=s[c+1]),c=c-1>>1,s[c]+=u.weight;l+=u.weight*d}),l}var kg=Cg;function Cg(e,t=[]){return t.map(n=>{let o=e.inEdges(n);if(o.length){let i=o.reduce((r,a)=>{let s=e.edge(a),l=e.node(a.v);return{sum:r.sum+s.weight*l.order,weight:r.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}let Ig=Ce;var Mg=Og;function Og(e,t){let n={};e.forEach((i,r)=>{let a=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:r};i.barycenter!==void 0&&(a.barycenter=i.barycenter,a.weight=i.weight)}),t.edges().forEach(i=>{let r=n[i.v],a=n[i.w];r!==void 0&&a!==void 0&&(a.indegree++,r.out.push(n[i.w]))});let o=Object.values(n).filter(i=>!i.indegree);return Tg(o)}function Tg(e){let t=[];function n(i){return r=>{r.merged||(r.barycenter===void 0||i.barycenter===void 0||r.barycenter>=i.barycenter)&&$g(i,r)}}function o(i){return r=>{r.in.push(i),--r.indegree===0&&e.push(r)}}for(;e.length;){let i=e.pop();t.push(i),i.in.reverse().forEach(n(i)),i.out.forEach(o(i))}return t.filter(i=>!i.merged).map(i=>Ig.pick(i,["vs","i","barycenter","weight"]))}function $g(e,t){let n=0,o=0;e.weight&&(n+=e.barycenter*e.weight,o+=e.weight),t.weight&&(n+=t.barycenter*t.weight,o+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/o,e.weight=o,e.i=Math.min(t.i,e.i),t.merged=!0}let Pg=Ce;var Dg=Ag;function Ag(e,t){let n=Pg.partition(e,c=>Object.hasOwn(c,"barycenter")),o=n.lhs,i=n.rhs.sort((c,d)=>d.i-c.i),r=[],a=0,s=0,l=0;o.sort(Vg(!!t)),l=Fi(r,i,l),o.forEach(c=>{l+=c.vs.length,r.push(c.vs),a+=c.barycenter*c.weight,s+=c.weight,l=Fi(r,i,l)});let u={vs:r.flat(!0)};return s&&(u.barycenter=a/s,u.weight=s),u}function Fi(e,t,n){let o;for(;t.length&&(o=t[t.length-1]).i<=n;)t.pop(),e.push(o.vs),n++;return n}function Vg(e){return(t,n)=>t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}let Rg=kg,zg=Mg,Bg=Dg;var Lg=Ma;function Ma(e,t,n,o){let i=e.children(t),r=e.node(t),a=r?r.borderLeft:void 0,s=r?r.borderRight:void 0,l={};a&&(i=i.filter(f=>f!==a&&f!==s));let u=Rg(e,i);u.forEach(f=>{if(e.children(f.v).length){let p=Ma(e,f.v,n,o);l[f.v]=p,Object.hasOwn(p,"barycenter")&&Gg(f,p)}});let c=zg(u,n);Fg(c,l);let d=Bg(c,o);if(a&&(d.vs=[a,d.vs,s].flat(!0),e.predecessors(a).length)){let f=e.node(e.predecessors(a)[0]),p=e.node(e.predecessors(s)[0]);Object.hasOwn(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+p.order)/(d.weight+2),d.weight+=2}return d}function Fg(e,t){e.forEach(n=>{n.vs=n.vs.flatMap(o=>t[o]?t[o].vs:o)})}function Gg(e,t){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)}let Hg=Ge.Graph,Yg=Ce;var Xg=jg;function jg(e,t,n){let o=Ug(e),i=new Hg({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(r=>e.node(r));return e.nodes().forEach(r=>{let a=e.node(r),s=e.parent(r);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(i.setNode(r),i.setParent(r,s||o),e[n](r).forEach(l=>{let u=l.v===r?l.w:l.v,c=i.edge(u,r),d=c!==void 0?c.weight:0;i.setEdge(u,r,{weight:e.edge(l).weight+d})}),Object.hasOwn(a,"minRank")&&i.setNode(r,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),i}function Ug(e){for(var t;e.hasNode(t=Yg.uniqueId("_root")););return t}var Wg=Zg;function Zg(e,t,n){let o={},i;n.forEach(r=>{let a=e.parent(r),s,l;for(;a;){if(s=e.parent(a),s?(l=o[s],o[s]=a):(l=i,i=a),l&&l!==a){t.setEdge(l,a);return}a=s}})}let Kg=wg,qg=xg,Qg=Lg,Jg=Xg,ev=Wg,tv=Ge.Graph,rn=Ce;var nv=Oa;function Oa(e,t){if(t&&typeof t.customOrder=="function"){t.customOrder(e,Oa);return}let n=rn.maxRank(e),o=Gi(e,rn.range(1,n+1),"inEdges"),i=Gi(e,rn.range(n-1,-1,-1),"outEdges"),r=Kg(e);if(Hi(e,r),t&&t.disableOptimalOrderHeuristic)return;let a=Number.POSITIVE_INFINITY,s;for(let l=0,u=0;u<4;++l,++u){ov(l%2?o:i,l%4>=2),r=rn.buildLayerMatrix(e);let c=qg(e,r);c<a&&(u=0,s=Object.assign({},r),a=c)}Hi(e,s)}function Gi(e,t,n){return t.map(function(o){return Jg(e,o,n)})}function ov(e,t){let n=new tv;e.forEach(function(o){let i=o.graph().root,r=Qg(o,i,n,t);r.vs.forEach((a,s)=>o.node(a).order=s),ev(o,n,r.vs)})}function Hi(e,t){Object.values(t).forEach(n=>n.forEach((o,i)=>e.node(o).order=i))}let iv=Ge.Graph,Ze=Ce;var rv={positionX:lv,findType1Conflicts:Ta,findType2Conflicts:$a,addConflict:zo,hasConflict:Pa,verticalAlignment:Da,horizontalCompaction:Aa,alignCoordinates:Ra,findSmallestWidthAlignment:Va,balance:za};function Ta(e,t){let n={};function o(i,r){let a=0,s=0,l=i.length,u=r[r.length-1];return r.forEach((c,d)=>{let f=av(e,c),p=f?e.node(f).order:l;(f||c===u)&&(r.slice(s,d+1).forEach(b=>{e.predecessors(b).forEach(y=>{let m=e.node(y),w=m.order;(w<a||p<w)&&!(m.dummy&&e.node(b).dummy)&&zo(n,y,b)})}),s=d+1,a=p)}),r}return t.length&&t.reduce(o),n}function $a(e,t){let n={};function o(r,a,s,l,u){let c;Ze.range(a,s).forEach(d=>{c=r[d],e.node(c).dummy&&e.predecessors(c).forEach(f=>{let p=e.node(f);p.dummy&&(p.order<l||p.order>u)&&zo(n,f,c)})})}function i(r,a){let s=-1,l,u=0;return a.forEach((c,d)=>{if(e.node(c).dummy==="border"){let f=e.predecessors(c);f.length&&(l=e.node(f[0]).order,o(a,u,d,s,l),u=d,s=l)}o(a,u,a.length,l,r.length)}),a}return t.length&&t.reduce(i),n}function av(e,t){if(e.node(t).dummy)return e.predecessors(t).find(n=>e.node(n).dummy)}function zo(e,t,n){if(t>n){let i=t;t=n,n=i}let o=e[t];o||(e[t]=o={}),o[n]=!0}function Pa(e,t,n){if(t>n){let o=t;t=n,n=o}return!!e[t]&&Object.hasOwn(e[t],n)}function Da(e,t,n,o){let i={},r={},a={};return t.forEach(s=>{s.forEach((l,u)=>{i[l]=l,r[l]=l,a[l]=u})}),t.forEach(s=>{let l=-1;s.forEach(u=>{let c=o(u);if(c.length){c=c.sort((f,p)=>a[f]-a[p]);let d=(c.length-1)/2;for(let f=Math.floor(d),p=Math.ceil(d);f<=p;++f){let b=c[f];r[u]===u&&l<a[b]&&!Pa(n,u,b)&&(r[b]=u,r[u]=i[u]=i[b],l=a[b])}}})}),{root:i,align:r}}function Aa(e,t,n,o,i){let r={},a=sv(e,t,n,i),s=i?"borderLeft":"borderRight";function l(d,f){let p=a.nodes(),b=p.pop(),y={};for(;b;)y[b]?d(b):(y[b]=!0,p.push(b),p=p.concat(f(b))),b=p.pop()}function u(d){r[d]=a.inEdges(d).reduce((f,p)=>Math.max(f,r[p.v]+a.edge(p)),0)}function c(d){let f=a.outEdges(d).reduce((b,y)=>Math.min(b,r[y.w]-a.edge(y)),Number.POSITIVE_INFINITY),p=e.node(d);f!==Number.POSITIVE_INFINITY&&p.borderType!==s&&(r[d]=Math.max(r[d],f))}return l(u,a.predecessors.bind(a)),l(c,a.successors.bind(a)),Object.keys(o).forEach(d=>r[d]=r[n[d]]),r}function sv(e,t,n,o){let i=new iv,r=e.graph(),a=uv(r.nodesep,r.edgesep,o);return t.forEach(s=>{let l;s.forEach(u=>{let c=n[u];if(i.setNode(c),l){var d=n[l],f=i.edge(d,c);i.setEdge(d,c,Math.max(a(e,u,l),f||0))}l=u})}),i}function Va(e,t){return Object.values(t).reduce((n,o)=>{let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;Object.entries(o).forEach(([s,l])=>{let u=cv(e,s)/2;i=Math.max(l+u,i),r=Math.min(l-u,r)});const a=i-r;return a<n[0]&&(n=[a,o]),n},[Number.POSITIVE_INFINITY,null])[1]}function Ra(e,t){let n=Object.values(t),o=Ze.applyWithChunking(Math.min,n),i=Ze.applyWithChunking(Math.max,n);["u","d"].forEach(r=>{["l","r"].forEach(a=>{let s=r+a,l=e[s];if(l===t)return;let u=Object.values(l),c=o-Ze.applyWithChunking(Math.min,u);a!=="l"&&(c=i-Ze.applyWithChunking(Math.max,u)),c&&(e[s]=Ze.mapValues(l,d=>d+c))})})}function za(e,t){return Ze.mapValues(e.ul,(n,o)=>{if(t)return e[t.toLowerCase()][o];{let i=Object.values(e).map(r=>r[o]).sort((r,a)=>r-a);return(i[1]+i[2])/2}})}function lv(e){let t=Ze.buildLayerMatrix(e),n=Object.assign(Ta(e,t),$a(e,t)),o={},i;["u","d"].forEach(a=>{i=a==="u"?t:Object.values(t).reverse(),["l","r"].forEach(s=>{s==="r"&&(i=i.map(d=>Object.values(d).reverse()));let l=(a==="u"?e.predecessors:e.successors).bind(e),u=Da(e,i,n,l),c=Aa(e,i,u.root,u.align,s==="r");s==="r"&&(c=Ze.mapValues(c,d=>-d)),o[a+s]=c})});let r=Va(e,o);return Ra(o,r),za(o,e.graph().align)}function uv(e,t,n){return(o,i,r)=>{let a=o.node(i),s=o.node(r),l=0,u;if(l+=a.width/2,Object.hasOwn(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=-a.width/2;break;case"r":u=a.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(a.dummy?t:e)/2,l+=(s.dummy?t:e)/2,l+=s.width/2,Object.hasOwn(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=s.width/2;break;case"r":u=-s.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function cv(e,t){return e.node(t).width}let Ba=Ce,dv=rv.positionX;var fv=hv;function hv(e){e=Ba.asNonCompoundGraph(e),pv(e),Object.entries(dv(e)).forEach(([t,n])=>e.node(t).x=n)}function pv(e){let t=Ba.buildLayerMatrix(e),n=e.graph().ranksep,o=0;t.forEach(i=>{const r=i.reduce((a,s)=>{const l=e.node(s).height;return a>l?a:l},0);i.forEach(a=>e.node(a).y=o+r/2),o+=r+n})}let Yi=Sp,Xi=Mp,gv=Jp,vv=Ce.normalizeRanks,mv=og,yv=Ce.removeEmptyRanks,ji=sg,_v=hg,Ui=gg,wv=nv,bv=fv,Ae=Ce,Ev=Ge.Graph;var xv=Sv;function Sv(e,t){let n=t&&t.debugTiming?Ae.time:Ae.notime;n("layout",()=>{let o=n("  buildLayoutGraph",()=>Dv(e));n("  runLayout",()=>Nv(o,n,t)),n("  updateInputGraph",()=>kv(e,o))})}function Nv(e,t,n){t("    makeSpaceForEdgeLabels",()=>Av(e)),t("    removeSelfEdges",()=>Yv(e)),t("    acyclic",()=>Yi.run(e)),t("    nestingGraph.run",()=>ji.run(e)),t("    rank",()=>gv(Ae.asNonCompoundGraph(e))),t("    injectEdgeLabelProxies",()=>Vv(e)),t("    removeEmptyRanks",()=>yv(e)),t("    nestingGraph.cleanup",()=>ji.cleanup(e)),t("    normalizeRanks",()=>vv(e)),t("    assignRankMinMax",()=>Rv(e)),t("    removeEdgeLabelProxies",()=>zv(e)),t("    normalize.run",()=>Xi.run(e)),t("    parentDummyChains",()=>mv(e)),t("    addBorderSegments",()=>_v(e)),t("    order",()=>wv(e,n)),t("    insertSelfEdges",()=>Xv(e)),t("    adjustCoordinateSystem",()=>Ui.adjust(e)),t("    position",()=>bv(e)),t("    positionSelfEdges",()=>jv(e)),t("    removeBorderNodes",()=>Hv(e)),t("    normalize.undo",()=>Xi.undo(e)),t("    fixupEdgeLabelCoords",()=>Fv(e)),t("    undoCoordinateSystem",()=>Ui.undo(e)),t("    translateGraph",()=>Bv(e)),t("    assignNodeIntersects",()=>Lv(e)),t("    reversePoints",()=>Gv(e)),t("    acyclic.undo",()=>Yi.undo(e))}function kv(e,t){e.nodes().forEach(n=>{let o=e.node(n),i=t.node(n);o&&(o.x=i.x,o.y=i.y,o.rank=i.rank,t.children(n).length&&(o.width=i.width,o.height=i.height))}),e.edges().forEach(n=>{let o=e.edge(n),i=t.edge(n);o.points=i.points,Object.hasOwn(i,"x")&&(o.x=i.x,o.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}let Cv=["nodesep","edgesep","ranksep","marginx","marginy"],Iv={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Mv=["acyclicer","ranker","rankdir","align"],Ov=["width","height"],Wi={width:0,height:0},Tv=["minlen","weight","width","height","labeloffset"],$v={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Pv=["labelpos"];function Dv(e){let t=new Ev({multigraph:!0,compound:!0}),n=Qn(e.graph());return t.setGraph(Object.assign({},Iv,qn(n,Cv),Ae.pick(n,Mv))),e.nodes().forEach(o=>{let i=Qn(e.node(o));const r=qn(i,Ov);Object.keys(Wi).forEach(a=>{r[a]===void 0&&(r[a]=Wi[a])}),t.setNode(o,r),t.setParent(o,e.parent(o))}),e.edges().forEach(o=>{let i=Qn(e.edge(o));t.setEdge(o,Object.assign({},$v,qn(i,Tv),Ae.pick(i,Pv)))}),t}function Av(e){let t=e.graph();t.ranksep/=2,e.edges().forEach(n=>{let o=e.edge(n);o.minlen*=2,o.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?o.width+=o.labeloffset:o.height+=o.labeloffset)})}function Vv(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.width&&n.height){let o=e.node(t.v),r={rank:(e.node(t.w).rank-o.rank)/2+o.rank,e:t};Ae.addDummyNode(e,"edge-proxy",r,"_ep")}})}function Rv(e){let t=0;e.nodes().forEach(n=>{let o=e.node(n);o.borderTop&&(o.minRank=e.node(o.borderTop).rank,o.maxRank=e.node(o.borderBottom).rank,t=Math.max(t,o.maxRank))}),e.graph().maxRank=t}function zv(e){e.nodes().forEach(t=>{let n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function Bv(e){let t=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,i=0,r=e.graph(),a=r.marginx||0,s=r.marginy||0;function l(u){let c=u.x,d=u.y,f=u.width,p=u.height;t=Math.min(t,c-f/2),n=Math.max(n,c+f/2),o=Math.min(o,d-p/2),i=Math.max(i,d+p/2)}e.nodes().forEach(u=>l(e.node(u))),e.edges().forEach(u=>{let c=e.edge(u);Object.hasOwn(c,"x")&&l(c)}),t-=a,o-=s,e.nodes().forEach(u=>{let c=e.node(u);c.x-=t,c.y-=o}),e.edges().forEach(u=>{let c=e.edge(u);c.points.forEach(d=>{d.x-=t,d.y-=o}),Object.hasOwn(c,"x")&&(c.x-=t),Object.hasOwn(c,"y")&&(c.y-=o)}),r.width=n-t+a,r.height=i-o+s}function Lv(e){e.edges().forEach(t=>{let n=e.edge(t),o=e.node(t.v),i=e.node(t.w),r,a;n.points?(r=n.points[0],a=n.points[n.points.length-1]):(n.points=[],r=i,a=o),n.points.unshift(Ae.intersectRect(o,r)),n.points.push(Ae.intersectRect(i,a))})}function Fv(e){e.edges().forEach(t=>{let n=e.edge(t);if(Object.hasOwn(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function Gv(e){e.edges().forEach(t=>{let n=e.edge(t);n.reversed&&n.points.reverse()})}function Hv(e){e.nodes().forEach(t=>{if(e.children(t).length){let n=e.node(t),o=e.node(n.borderTop),i=e.node(n.borderBottom),r=e.node(n.borderLeft[n.borderLeft.length-1]),a=e.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(a.x-r.x),n.height=Math.abs(i.y-o.y),n.x=r.x+n.width/2,n.y=o.y+n.height/2}}),e.nodes().forEach(t=>{e.node(t).dummy==="border"&&e.removeNode(t)})}function Yv(e){e.edges().forEach(t=>{if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function Xv(e){var t=Ae.buildLayerMatrix(e);t.forEach(n=>{var o=0;n.forEach((i,r)=>{var a=e.node(i);a.order=r+o,(a.selfEdges||[]).forEach(s=>{Ae.addDummyNode(e,"selfedge",{width:s.label.width,height:s.label.height,rank:a.rank,order:r+ ++o,e:s.e,label:s.label},"_se")}),delete a.selfEdges})})}function jv(e){e.nodes().forEach(t=>{var n=e.node(t);if(n.dummy==="selfedge"){var o=e.node(n.e.v),i=o.x+o.width/2,r=o.y,a=n.x-i,s=o.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*a/3,y:r-s},{x:i+5*a/6,y:r-s},{x:i+a,y:r},{x:i+5*a/6,y:r+s},{x:i+2*a/3,y:r+s}],n.label.x=n.x,n.label.y=n.y}})}function qn(e,t){return Ae.mapValues(Ae.pick(e,t),Number)}function Qn(e){var t={};return e&&Object.entries(e).forEach(([n,o])=>{typeof n=="string"&&(n=n.toLowerCase()),t[n]=o}),t}let Uv=Ce,Wv=Ge.Graph;var Zv={debugOrdering:Kv};function Kv(e){let t=Uv.buildLayerMatrix(e),n=new Wv({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(o=>{n.setNode(o,{label:o}),n.setParent(o,"layer"+e.node(o).rank)}),e.edges().forEach(o=>n.setEdge(o.v,o.w,{},o.name)),t.forEach((o,i)=>{let r="layer"+i;n.setNode(r,{rank:"same"}),o.reduce((a,s)=>(n.setEdge(a,s,{style:"invis"}),s))}),n}var qv="1.1.4",Qv={graphlib:Ge,layout:xv,debug:Zv,util:{time:Ce.time,notime:Ce.notime},version:qv};const Zi=ss(Qv),Jv=25,em=5,Ki=15,tm=we({__name:"CombinationDialog",props:{result:null,combination:null},setup(e){const t={x:0,y:0},n={width:7.5,height:7.5,borderWidth:3},o={width:2.5,height:2.5,borderWidth:0},i={width:70,height:20,borderWidth:1};function r(l){const u=[{id:"S",type:"start",position:t}],c=[];let d=0;function f(b,y){if(b.type==="term"){const m=(d++).toString();u.push({id:m,type:"component",data:{label:`${En.fit(b.children,e.result.componentType.prefixSymbols).toSimpleString(3)}${e.result.componentType.unit}`},position:t});for(const w of y)c.push({id:`e${w}-${m}`,source:w,target:m});return[m]}else if(b.type==="series"){let m=y;return b.children.forEach(w=>{const v=f(w,m);if(m.length>1&&v.length>1){const x=m,S=new Set(x.flatMap(R=>c.filter($=>$.source===R).map($=>$.target))),P=`j${d++}`;u.push({id:P,type:"junction",position:t});for(const R of m)for(const $ of S)c.splice(c.findIndex(j=>j.source===R&&j.target===$),1);for(const R of m)c.push({id:`e${R}-${P}`,source:R,target:P});for(const R of S)c.push({id:`e${P}-${R}`,source:P,target:R})}return m=v,v}),m}else if(b.type==="parallel")return b.children.flatMap(m=>f(m,y));return[]}return f(l,["S"]).forEach(b=>{c.push({id:`e${b}-E`,source:b,target:"E"})}),u.push({id:"E",type:"end",position:t}),{nodes:u,edges:c}}const a=re(()=>r(e.combination.nodes)),s=re(()=>{const l=new Zi.graphlib.Graph;l.setDefaultEdgeLabel(()=>({})),l.setGraph({rankdir:"LR",nodesep:em,ranksep:Jv});for(const u of a.value.nodes)switch(u.type){case"start":case"end":case"junction":{l.setNode(u.id,{width:n.width+Ki,height:n.height});break}case"component":{l.setNode(u.id,{label:u.data.label,width:i.width,height:i.height});break}}for(const u of a.value.edges)l.setEdge(u.source,u.target);return Zi.layout(l),a.value.nodes.map(u=>{const c=l.node(u.id);return{...u,position:{x:c.x-c.width/2+(u.type==="component"?0:Ki/2),y:c.y-c.height/2}}})});return(l,u)=>{const c=ge("v-card-text"),d=ge("v-spacer"),f=ge("v-btn"),p=ge("v-card-actions"),b=ge("v-card"),y=ge("v-dialog");return ie(),Le(y,null,{activator:Q(({props:m})=>[st(l.$slots,"activator",{props:m},void 0,!0)]),default:Q(({isActive:m})=>[H(b,null,{default:Q(()=>[H(c,{style:{height:"150px"}},{default:Q(()=>[H(V(oh),{nodes:s.value,edges:a.value.edges,"nodes-draggable":!1,"nodes-connectable":!1,"fit-view-on-init":""},{"node-start":Q(()=>[Me("div",{class:"node-terminal",style:Pe({width:n.width+"px",height:n.height+"px",borderWidth:n.borderWidth+"px"})},null,4),H(V(Ye),{class:"no-handle",type:"source",position:V(X).Right},null,8,["position"])]),"node-end":Q(()=>[Me("div",{class:"node-terminal",style:Pe({width:n.width+"px",height:n.height+"px",borderWidth:n.borderWidth+"px"})},null,4),H(V(Ye),{class:"no-handle",type:"target",position:V(X).Left},null,8,["position"])]),"node-junction":Q(()=>[Me("div",{class:"node-junction",style:Pe({width:o.width+"px",height:o.height+"px",borderWidth:o.borderWidth+"px"})},null,4),H(V(Ye),{class:"no-handle",type:"target",position:V(X).Left},null,8,["position"]),H(V(Ye),{class:"no-handle",type:"source",position:V(X).Right},null,8,["position"])]),"node-component":Q(({data:w})=>[Me("div",{class:"node-component",style:Pe({width:i.width+"px",height:i.height+"px",borderWidth:i.borderWidth+"px"})},Te(w.label),5),H(V(Ye),{class:"no-handle",type:"target",position:V(X).Left},null,8,["position"]),H(V(Ye),{class:"no-handle",type:"source",position:V(X).Right},null,8,["position"])]),_:1},8,["nodes","edges"])]),_:1}),H(c,null,{default:Q(()=>[rt(Te(e.combination.toString(e.result.componentType.prefixSymbols)),1)]),_:1}),H(p,null,{default:Q(()=>[H(d),H(f,{text:"éãã",onClick:w=>m.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:3})}}}),nm=is(tm,[["__scopeId","data-v-f62ff51a"]]),om=["onClick"],im=we({__name:"ResultTable",props:{results:null},setup(e){const t=le();function n(r,a){const s=r.calcValue(a.componentType.value);if(s===a.targetComponentValue)return"= æ­£ç¢º";const l=(s-a.targetComponentValue)/a.targetComponentValue*100;return Math.abs(l)<.001?l>0?"< +0.001":"< -0.001":(l>0?"+":"")+l.toFixed(3)}function o(r){return[{title:`${r.componentType.valueLabel} (${r.componentType.unit})`,value:"value"},{title:"èª¤å·®ç (%)",value:"error"},{title:"çµã¿åãã",value:"combination"}]}function i(r,a){return r.map(s=>{const l=s.calcValue(a.componentType.value);return{value:En.fit(l,a.componentType.prefixSymbols).toSimpleString(3),isBestValue:l===a.bestComponentValue,error:n(s,a),combinationText:s.toString(a.componentType.prefixSymbols),combination:s}})}return(r,a)=>{const s=ge("v-tab"),l=ge("v-tabs"),u=ge("v-data-table"),c=ge("v-tabs-window-item"),d=ge("v-tabs-window");return ie(),ce(ze,null,[H(l,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=f=>t.value=f),"align-tabs":"center","bg-color":"secondary"},{default:Q(()=>[(ie(!0),ce(ze,null,Ct(e.results,f=>(ie(),Le(s,{key:f.componentNumber,"prepend-icon":V(as)(f.finished,f.finishReason==="finishedAllCombination"?"mdi-check-all":f.finishReason==="aborted"?"mdi-progress-alert":"mdi-check","mdi-timer-sand","mdi-circle-medium")},{default:Q(()=>[rt(Te(f.componentNumber)+"æ¬ã®è§£ ",1)]),_:2},1032,["prepend-icon"]))),128))]),_:1},8,["modelValue"]),H(d,{modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=f=>t.value=f)},{default:Q(()=>[(ie(!0),ce(ze,null,Ct(e.results,f=>(ie(),Le(c,{key:f.componentNumber},{default:Q(()=>[H(u,{items:i(f.resultCombinations??[],f),headers:o(f),density:"compact",class:"result-table","no-data-text":"ã¾ã è¨ç®ããã¦ãã¾ãã","items-per-page-text":"ãã¼ã¸ãã¨ã®è¡¨ç¤ºæ°:","page-text":"å¨{2}åã®çµæ / {0}-{1}"},{item:Q(({item:p})=>[H(nm,{combination:p.combination,result:f},{activator:Q(({props:b})=>[Me("tr",Eo({ref_for:!0},b,{class:{"best-combination":p.isBestValue},onClick:y=>console.info(f)}),[Me("td",null,Te(p.value),1),Me("td",null,Te(p.error),1),Me("td",null,Te(p.combinationText),1)],16,om)]),_:2},1032,["combination","result"])]),_:2},1032,["items","headers"])]),_:2},1024))),128))]),_:1},8,["modelValue"])],64)}}});function rm(e){return new Worker("/tools/assets/worker-BU5vtjOi.js",{name:e==null?void 0:e.name})}const Jn=[{title:"æµæå¨ (Î©)",value:"resistor",unit:"Î©",valueLabel:"æµæå¤",prefixSymbols:["G","M","k","","m","Î¼"]},{title:"ã³ã³ãã³ãµ (F)",value:"capacitor",unit:"F",valueLabel:"éé»å®¹é",prefixSymbols:["","m","Î¼","n","p"]},{title:"ã¤ã³ãã¯ã¿ (H)",value:"inductor",unit:"H",valueLabel:"ã¤ã³ãã¯ã¿ã³ã¹",prefixSymbols:["","m","Î¼","n"]}],eo=[{title:"E1",value:"E1"},{title:"E3",value:"E3"},{title:"E6",value:"E6"},{title:"E12",value:"E12"},{title:"E24",value:"E24"},{title:"E48",value:"E48"},{title:"E96",value:"E96"},{title:"E192",value:"E192"}],to=[{title:"< 0.1%",value:.001},{title:"< 0.01%",value:1e-4},{title:"< 0.001%",value:1e-5},{title:"= 0.0%ï¼æ­£ç¢ºï¼",value:0},{title:"å¨æ¢ç´¢",value:void 0}],am={resistor:{componentTargetValue:1234,minValue:10,maxValue:1e6,excludedValuePlaceholder:1e3,excludedValues:[]},capacitor:{componentTargetValue:1234e-9,minValue:1e-12,maxValue:1,excludedValuePlaceholder:1e-6,excludedValues:[]},inductor:{componentTargetValue:1234e-7,minValue:1e-9,maxValue:1,excludedValuePlaceholder:1e-5,excludedValues:[]}},sm={key:0},lm={key:1},um={key:2},cm={key:3},dm={key:4},fm=Me("div",null,"è¨ç®ä¸­",-1),hm=Me("div",{class:"text-caption"},"ã¯ãªãã¯ã§ä¸­æ­¢",-1),pm=we({__name:"App",setup(e){const t=le([2,3,4,5].map(m=>({componentNumber:m,componentType:Jn[0],targetComponentValue:1234,series:Bo[eo[3].value],minValue:0,maxValue:0,excludedValues:[],targetErrorRate:to[2]}))),n=le(0),o=le(Jn[0]),i=le(am),r=re(()=>i.value[o.value.value]),a=le(eo[3]),s=le(to[2]),l=le(),u=le(),c=le(1e3),d=new rs(rm),f=re(()=>{if(!l.value)return 0;const m=t.value[n.value];return typeof m.currentCombination>"u"||typeof m.totalCombinations>"u"||m.totalCombinations===0?0:m.currentCombination/m.totalCombinations*100});async function p(){var w,v;l.value=!0;let m=0;for(const x of t.value)x.componentType=o.value,x.targetComponentValue=r.value.componentTargetValue,x.minValue=r.value.minValue,x.maxValue=r.value.maxValue,x.excludedValues=r.value.excludedValues,x.series=Bo[a.value.value],x.targetErrorRate=s.value,x.finished=void 0,x.finishReason=void 0,x.bestComponentValue=0,x.resultCombinations=[],x.totalCombinations=0,x.currentCombination=0;for(const x of t.value){if(u.value)break;for(n.value=m++,x.finished=!1,x.finishReason="calculating",await d.invoke({type:"initialize",value:x.targetComponentValue,componentType:x.componentType.value,componentNumber:x.componentNumber,series:[...x.series],minValue:x.minValue,maxValue:x.maxValue,excludedValues:[...x.excludedValues],progressBeacon:1e6});!u.value;){const S=await d.invoke({type:"invoke"});if(S.type!=="invoke"){x.finishReason="error";break}if(S.result){const P=S.result;if(x.currentCombination=P.current,x.totalCombinations=P.total,P.componentNodes){const R=new Oe(P.componentNodes);if(!((w=x.resultCombinations)!=null&&w.some($=>$.equals(R)))){(v=x.resultCombinations)==null||v.unshift(R),x.bestComponentValue=R.calcValue(x.componentType.value);const $=(x.bestComponentValue-x.targetComponentValue)/x.targetComponentValue;if(typeof x.targetErrorRate.value=="number"&&Math.abs($)<=x.targetErrorRate.value){x.finishReason="finishedByUnderErrorRate";break}}}}if(S.done){x.finishReason="finishedAllCombination";break}}u.value&&(x.finishReason="aborted"),x.finished=!0}u.value=!1,l.value=!1}function b(){[Se.required,Se.value,Se.notNegative,Se.notZero].every(m=>m(c.value.toString())===!0)&&!r.value.excludedValues.includes(c.value)&&r.value.excludedValues.push(c.value)}async function y(){l.value?u.value=!0:await p()}return(m,w)=>{const v=ge("v-select"),x=ge("v-col"),S=ge("v-row"),P=ge("v-combobox"),R=ge("v-card-text"),$=ge("v-btn"),j=ge("v-form"),U=ge("v-icon"),A=ge("v-list-item"),E=ge("v-list"),J=ge("v-spacer"),ee=ge("v-card-actions"),_=ge("v-card"),O=ge("v-dialog"),C=ge("v-progress-linear");return ie(),Le(ns,{"page-id":"electric/combination","toolbar-title":"ååç´ å­ çµã¿åããè¨ç®æ©"},{default:Q(()=>[H(S,null,{default:Q(()=>[H(x,{cols:"4"},{default:Q(()=>[H(v,{label:"ç´ å­ã®ç¨®é¡",density:"compact",variant:"underlined",modelValue:o.value,"onUpdate:modelValue":w[0]||(w[0]=M=>o.value=M),items:V(Jn),"hide-details":"","return-object":""},null,8,["modelValue","items"])]),_:1}),H(x,{cols:"8"},{default:Q(()=>[H(Zt,{value:r.value.componentTargetValue,"onUpdate:value":w[1]||(w[1]=M=>r.value.componentTargetValue=M),label:`æ±ãã${o.value.valueLabel}`,variant:"underlined",density:"compact",unit:o.value.unit,"fraction-digits":3,"prefix-symbols":o.value.prefixSymbols,rule:[V(Se).required,V(Se).value,V(Se).notNegative,V(Se).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1})]),_:1}),H(S,null,{default:Q(()=>[H(x,{cols:"4"},{default:Q(()=>[H(v,{label:"Eç³»å",density:"compact",variant:"underlined",modelValue:a.value,"onUpdate:modelValue":w[2]||(w[2]=M=>a.value=M),items:V(eo),"hide-details":"","return-object":""},null,8,["modelValue","items"])]),_:1}),H(x,{cols:"8"},{default:Q(()=>[H(O,{"max-width":"600"},{activator:Q(({props:M})=>[H(P,Eo(M,{multiple:"","model-value":r.value.excludedValues,label:`é¤å¤ãã${o.value.valueLabel}ï¼ãªãã·ã§ã³ï¼`,suffix:o.value.unit,density:"compact",variant:"underlined","hide-details":"",readonly:""}),null,16,["model-value","label","suffix"])]),default:Q(({isActive:M})=>[H(_,{title:`é¤å¤ãã${o.value.valueLabel}`},{default:Q(()=>[H(R,null,{default:Q(()=>[rt(" ç®æ¨ã®"+Te(o.value.valueLabel)+"ä»¥å¤ã«ããçµã¿åããã«ä½¿ç¨ããªã"+Te(o.value.valueLabel)+"ãè¤æ°æå®ã§ãã¾ãã ",1)]),_:1}),H(R,null,{default:Q(()=>[H(j,{onSubmit:es(b,["prevent"])},{default:Q(()=>[H(S,null,{default:Q(()=>[H(x,null,{default:Q(()=>[H(Zt,{value:c.value,"onUpdate:value":w[3]||(w[3]=T=>c.value=T),label:`é¤å¤ã®å¯¾è±¡ã«è¿½å ãã${o.value.valueLabel}`,variant:"underlined",density:"compact",unit:o.value.unit,"fraction-digits":3,"prefix-symbols":o.value.prefixSymbols,rule:[V(Se).required,V(Se).value,V(Se).notNegative,V(Se).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1}),H(x,{cols:"3"},{default:Q(()=>[H($,{color:"success",type:"submit",variant:"outlined",block:""},{default:Q(()=>[rt("è¿½å ")]),_:1})]),_:1}),H(x,{cols:"3"},{default:Q(()=>[H($,{variant:"outlined",block:"",onClick:w[4]||(w[4]=T=>r.value.excludedValues=[])},{default:Q(()=>[rt(" å¨ã¦ã¯ãªã¢ ")]),_:1})]),_:1})]),_:1})]),_:1}),H(E,{density:"compact","onClick:select":w[5]||(w[5]=T=>r.value.excludedValues=r.value.excludedValues.filter(D=>D!==T.id))},{default:Q(()=>[(ie(!0),ce(ze,null,Ct(r.value.excludedValues,(T,D)=>(ie(),Le(A,{key:D,value:T,slim:""},{prepend:Q(()=>[H(U,{icon:"mdi-close"})]),default:Q(()=>[rt(Te(V(En).fit(T,o.value.prefixSymbols))+Te(o.value.unit)+" ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1}),H(ee,null,{default:Q(()=>[H(J),H($,{text:"éãã",onClick:T=>M.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["title"])]),_:1})]),_:1})]),_:1}),H(S,null,{default:Q(()=>[H(x,{cols:"4"},{default:Q(()=>[H(Zt,{value:r.value.minValue,"onUpdate:value":w[6]||(w[6]=M=>r.value.minValue=M),label:`ä½¿ç¨ããæå°ã®${o.value.valueLabel}`,variant:"underlined",density:"compact",unit:o.value.unit,"fraction-digits":0,"prefix-symbols":o.value.prefixSymbols,rule:[V(Se).required,V(Se).value,V(Se).notNegative,V(Se).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1}),H(x,{cols:"4"},{default:Q(()=>[H(Zt,{value:r.value.maxValue,"onUpdate:value":w[7]||(w[7]=M=>r.value.maxValue=M),label:`ä½¿ç¨ããæå¤§ã®${o.value.valueLabel}`,variant:"underlined",density:"compact",unit:o.value.unit,"fraction-digits":0,"prefix-symbols":o.value.prefixSymbols,rule:[V(Se).required,V(Se).value,V(Se).notNegative,V(Se).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1}),H(x,{cols:"4"},{default:Q(()=>[H(v,{label:"è¨ç®ãçµããèª¤å·®ç",density:"compact",variant:"underlined",modelValue:s.value,"onUpdate:modelValue":w[8]||(w[8]=M=>s.value=M),items:V(to),"hide-details":"","return-object":""},null,8,["modelValue","items"])]),_:1})]),_:1}),H(S,null,{default:Q(()=>[H(x,{"align-self":"center"},{default:Q(()=>[H(C,{color:"light-blue",modelValue:f.value,"onUpdate:modelValue":w[9]||(w[9]=M=>f.value=M),height:"20",striped:l.value},{default:Q(()=>[l.value?(ie(),ce("strong",sm,"è¨ç®ä¸­... "+Te(f.value.toFixed(3))+"%",1)):t.value.some(M=>M.finishReason==="aborted")?(ie(),ce("strong",lm,"è¨ç®ãä¸­æ­¢ãã¾ãã")):t.value.some(M=>M.finishReason==="error")?(ie(),ce("strong",um," ã¨ã©ã¼ã«ããè¨ç®ãä¸­æ­¢ãã¾ãã ")):t.value.some(M=>M.finishReason==="finishedByUnderErrorRate")?(ie(),ce("strong",cm," è¨ç®ãå®äºãã¾ãã ")):t.value.every(M=>M.finishReason==="finishedAllCombination")?(ie(),ce("strong",dm," å¨æ¢ç´¢ãå®äºãã¾ãã ")):Be("",!0)]),_:1},8,["modelValue","striped"])]),_:1}),H(x,{cols:"4"},{default:Q(()=>[H($,{"prepend-icon":l.value?"mdi-timer-sand":"mdi-play",variant:l.value?"outlined":"flat",color:l.value?"error":"success",onClick:y,block:""},ts({_:2},[l.value?{name:"default",fn:Q(()=>[fm,hm]),key:"0"}:{name:"default",fn:Q(()=>[rt("è¨ç®éå§")]),key:"1"}]),1032,["prepend-icon","variant","color"])]),_:1})]),_:1}),H(S,null,{default:Q(()=>[H(x,null,{default:Q(()=>[H(im,{results:t.value},null,8,["results"])]),_:1})]),_:1})]),_:1})}}});os("#app",pm);
