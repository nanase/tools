var Ua=Object.defineProperty;var Za=(e,t,n)=>t in e?Ua(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ee=(e,t,n)=>Za(e,typeof t!="symbol"?t+"":t,n);import{d as _e,l as xe,j as ce,m as ae,n as et,p as ei,o as te,b as ue,q as lt,u as D,s as gt,v as ti,k as me,x as Ka,y as Ct,a as H,w as J,z as Wt,A as Qe,B as Tt,C as qa,D as ni,E as Qa,h as Me,t as Te,G as ze,F as Re,e as vt,H as Ae,I as oi,J as Ja,c as $e,K as xo,L as el,M as tl,N as pe,O as ri,Q as ln,r as ye,R as we,S as xt,T as nl,U as ol,V as rl,f as it,W as So,X as il,Y as ii,Z as ai,$ as al,a0 as ll,g as sl,_ as ul,i as cl}from"../tools-ToolAppBase.vue_vue_type_script_setup_true_lang-BJ6W5dVp.js";import{u as dl}from"../tools-index-6tSRU30t.js";import{l as xn,_ as Kt,o as Ne}from"../tools-SIValueInput.vue_vue_type_script_setup_true_lang-CvgRkyND.js";import{s as fl}from"../tools-object-BaSs9UKu.js";import{_ as hl}from"../tools-_plugin-vue_export-helper-DlAUqK2U.js";import"../tools-index-CwfruueO.js";const Fo={E1:[100],E3:[100,220,470],E6:[100,150,220,330,470,680],E12:[100,120,150,180,220,270,330,390,470,560,680,820],E24:[100,110,120,130,150,160,180,200,220,240,270,300,330,360,390,430,470,510,560,620,680,750,820,910],E48:[100,105,110,115,121,127,133,140,147,154,162,169,178,187,196,205,215,226,237,249,261,274,287,301,316,332,348,365,383,402,422,442,464,487,511,536,562,590,619,649,681,715,750,787,825,866,909,953],E96:[100,102,105,107,110,113,115,118,121,124,127,130,133,137,140,143,147,150,154,158,162,165,169,174,178,182,187,191,196,200,205,210,215,221,226,232,237,243,249,261,267,274,280,287,294,301,309,316,324,332,340,348,357,365,374,383,392,402,412,422,432,442,453,464,475,487,499,511,523,536,549,562,576,590,604,619,634,649,681,698,715,732,750,768,787,806,825,845,866,887,909,931,953,976],E192:[100,101,102,104,105,106,107,109,110,111,113,114,115,117,118,120,121,123,124,126,127,129,130,132,133,135,137,138,140,142,143,145,147,149,150,152,154,156,158,160,162,164,165,167,169,172,174,176,178,180,182,184,187,189,191,193,196,198,200,203,205,208,210,213,215,218,221,223,226,229,232,234,237,240,243,246,249,252,255,258,261,264,267,271,274,277,280,284,287,291,294,298,301,305,309,312,316,320,324,328,332,336,340,344,348,352,357,361,365,370,374,379,383,388,392,397,402,407,412,417,422,427,432,437,442,448,453,459,464,470,475,481,487,493,499,505,511,517,523,530,536,542,549,556,562,569,576,583,590,597,604,612,619,626,634,642,649,657,665,673,681,690,698,706,715,723,732,741,750,759,768,777,787,796,806,816,825,835,845,856,866,876,887,898,909,920,931,942,953,965,976,988]},$t=[{figure:null,name:"None",code:null,color:{hex:"#00000000",luster:!1},multiplier:null,tolerance:{percent:20,letter:"M"}},{figure:null,name:"Pink",code:"PK",color:{hex:"#ccceccff",luster:!1},multiplier:.001,tolerance:null},{figure:null,name:"Silver",code:"SR",color:{hex:"#ccceccff",luster:!0},multiplier:.01,tolerance:{percent:10,letter:"K"}},{figure:null,name:"Gold",code:"GD",color:{hex:"#cc9a34ff",luster:!0},multiplier:.1,tolerance:{percent:5,letter:"J"}},{figure:"0",name:"Black",code:"BK",color:{hex:"#0b0000ff",luster:!1},multiplier:1,tolerance:null},{figure:"1",name:"Brown",code:"BN",color:{hex:"#643234ff",luster:!1},multiplier:10,tolerance:{percent:1,letter:"F"}},{figure:"2",name:"Red",code:"RD",color:{hex:"#ff0000ff",luster:!1},multiplier:100,tolerance:{percent:2,letter:"G"}},{figure:"3",name:"Orange",code:"OG",color:{hex:"#fc6604ff",luster:!1},multiplier:1e3,tolerance:{percent:.05,letter:"W"}},{figure:"4",name:"Yellow",code:"YE",color:{hex:"#fcfe04ff",luster:!1},multiplier:1e4,tolerance:{percent:.02,letter:"P"}},{figure:"5",name:"Green",code:"GN",color:{hex:"#34ce34ff",luster:!1},multiplier:1e5,tolerance:{percent:.5,letter:"D"}},{figure:"6",name:"Blue",code:"BU",color:{hex:"#6466fcff",luster:!1},multiplier:1e6,tolerance:{percent:.25,letter:"C"}},{figure:"7",name:"Violet",code:"VT",color:{hex:"#cc66fcff",luster:!1},multiplier:1e7,tolerance:{percent:.1,letter:"B"}},{figure:"8",name:"Gray",code:"GY",color:{hex:"#949294ff",luster:!1},multiplier:1e8,tolerance:{percent:.01,letter:"L(A)"}},{figure:"9",name:"White",code:"WH",color:{hex:"#ffffffff",luster:!1},multiplier:1e9,tolerance:null}];function Go(e,t,n){const o=n==="4-band"?1:2,r=Math.floor(Math.log10(e))-o,i=Math.round(e/10**r);return[...(n==="4-band"?[Math.floor(i/10),i%10]:[Math.floor(i/100),i/10%10,i%10]).map(l=>$t[l+4]),$t.find(l=>l.multiplier===10**r)??$t[0],$t.find(l=>{var s;return((s=l.tolerance)==null?void 0:s.percent)===t})??$t[0]]}class Pe{constructor(t){Ee(this,"componentNodes");Ee(this,"nodes");this.componentNodes=structuredClone(t),this.nodes=Pe.generateSyntaxTree(t)}get numberOfTypes(){return this.componentNodes.filter(t=>typeof t=="object").map(t=>t.value).filter((t,n,o)=>o.indexOf(t)===n).length}equals(t){return Pe.equalsInternal(this.nodes,t.nodes)}toString(t=["T","G","M","k","","m","Î¼","n","p","f"],n=3){return Pe.toStringInternal(this.nodes,t,n)}calcValue(t){return t==="capacitor"?Pe.calcValueForCapacitorInternal(this.componentNodes):Pe.calcValueInternal(this.componentNodes)}static calcValue(t,n){return n==="capacitor"?Pe.calcValueForCapacitorInternal(t):Pe.calcValueInternal(t)}static equalsInternal(t,n){if(t.type!==n.type||t.children.length!==n.children.length)return!1;const o=[...t.children].sort(Pe.compareNodes),r=[...n.children].sort(Pe.compareNodes);return o.every((i,a)=>Pe.deepCompare(i,r[a]))}static compareNodes(t,n){return t.type==="term"&&n.type==="term"?t.children-n.children:t.type==="term"?-1:n.type==="term"?1:t.type.localeCompare(n.type)}static deepCompare(t,n){return t.type!==n.type?!1:t.type==="term"&&n.type==="term"?t.children===n.children:t.type!=="term"&&n.type!=="term"?Pe.equalsInternal(t,n):!1}static generateSyntaxTree(t){const n=[];for(let o=t.length-1;o>=0;o--){const r=t[o],i=[];if(r==="+"){const a=n.pop(),l=n.pop();a.type==="series"?i.push(...a.children):i.push(a),l.type==="series"?i.push(...l.children):i.push(l),n.push({type:"series",children:i})}else if(r==="|"){const a=n.pop(),l=n.pop();a.type==="parallel"?i.push(...a.children):i.push(a),l.type==="parallel"?i.push(...l.children):i.push(l),n.push({type:"parallel",children:i})}else n.push({type:"term",children:r.value})}if(n[0].type!=="term")return n[0];throw new Error("invalid nodes")}static toStringInternal(t,n,o){return t.children.map(r=>r.type==="term"?xn.fit(r.children,n).toSimpleString(o):`(${Pe.toStringInternal(r,n,o)})`).join(t.type==="series"?" + ":" | ")}static calcValueInternal(t){const n=[];for(let o=t.length-1;o>=0;o--){const r=t[o];if(r==="+"){const i=n.pop(),a=n.pop();n.push(i+a)}else if(r==="|"){const i=n.pop(),a=n.pop();n.push(i*a/(i+a))}else n.push(r.value)}return n[0]}static calcValueForCapacitorInternal(t){const n=[];for(let o=t.length-1;o>=0;o--){const r=t[o];if(r==="+"){const i=n.pop(),a=n.pop();n.push(i*a/(i+a))}else if(r==="|"){const i=n.pop(),a=n.pop();n.push(i+a)}else n.push(r.value)}return n[0]}}function Sn(e){return ri()?(ln(e),!0):!1}function Ze(e){return typeof e=="function"?e():D(e)}const pl=typeof window<"u"&&typeof document<"u",gl=e=>typeof e<"u",vl=Object.prototype.toString,ml=e=>vl.call(e)==="[object Object]",yl=()=>{};function wl(e,t){function n(...o){return new Promise((r,i)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(i)})}return n}const li=e=>e();function _l(e=li){const t=ce(!0);function n(){t.value=!1}function o(){t.value=!0}const r=(...i)=>{t.value&&e(...i)};return{isActive:nl(t),pause:n,resume:o,eventFilter:r}}function Ho(e,t=!1,n="Timeout"){return new Promise((o,r)=>{setTimeout(t?()=>r(n):o,e)})}function bl(e,t,n={}){const{eventFilter:o=li,...r}=n;return me(e,wl(o,t),r)}function Et(e,t,n={}){const{eventFilter:o,...r}=n,{eventFilter:i,pause:a,resume:l,isActive:s}=_l(o);return{stop:bl(e,t,{...r,eventFilter:i}),pause:a,resume:l,isActive:s}}function El(e,t={}){if(!xo(e))return el(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=tl(()=>({get(){return e.value[o]},set(r){var i;if((i=Ze(t.replaceRef))!=null?i:!0)if(Array.isArray(e.value)){const l=[...e.value];l[o]=r,e.value=l}else{const l={...e.value,[o]:r};Object.setPrototypeOf(l,Object.getPrototypeOf(e.value)),e.value=l}else e.value[o]=r}}));return n}function ro(e,t=!1){function n(d,{flush:p="sync",deep:f=!1,timeout:g,throwOnTimeout:_}={}){let w=null;const v=[new Promise(I=>{w=me(e,S=>{d(S)!==t&&(w==null||w(),I(S))},{flush:p,deep:f,immediate:!0})})];return g!=null&&v.push(Ho(g,_).then(()=>Ze(e)).finally(()=>w==null?void 0:w())),Promise.race(v)}function o(d,p){if(!xo(d))return n(S=>S===d,p);const{flush:f="sync",deep:g=!1,timeout:_,throwOnTimeout:w}=p??{};let E=null;const I=[new Promise(S=>{E=me([e,d],([A,R])=>{t!==(A===R)&&(E==null||E(),S(A))},{flush:f,deep:g,immediate:!0})})];return _!=null&&I.push(Ho(_,w).then(()=>Ze(e)).finally(()=>(E==null||E(),Ze(e)))),Promise.race(I)}function r(d){return n(p=>!!p,d)}function i(d){return o(null,d)}function a(d){return o(void 0,d)}function l(d){return n(Number.isNaN,d)}function s(d,p){return n(f=>{const g=Array.from(f);return g.includes(d)||g.includes(Ze(d))},p)}function u(d){return c(1,d)}function c(d=1,p){let f=-1;return n(()=>(f+=1,f>=d),p)}return Array.isArray(Ze(e))?{toMatch:n,toContains:s,changed:u,changedTimes:c,get not(){return ro(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:r,toBeNull:i,toBeNaN:l,toBeUndefined:a,changed:u,changedTimes:c,get not(){return ro(e,!t)}}}function io(e){return ro(e)}function xl(e){var t;const n=Ze(e);return(t=n==null?void 0:n.$el)!=null?t:n}const si=pl?window:void 0;function ui(...e){let t,n,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,r]=e,t=si):[t,n,o,r]=e,!t)return yl;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const i=[],a=()=>{i.forEach(c=>c()),i.length=0},l=(c,d,p,f)=>(c.addEventListener(d,p,f),()=>c.removeEventListener(d,p,f)),s=me(()=>[xl(t),Ze(r)],([c,d])=>{if(a(),!c)return;const p=ml(d)?{...d}:d;i.push(...n.flatMap(f=>o.map(g=>l(c,f,g,p))))},{immediate:!0,flush:"post"}),u=()=>{s(),a()};return Sn(u),u}function Sl(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Yo(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:r=si,eventName:i="keydown",passive:a=!1,dedupe:l=!1}=o,s=Sl(t);return ui(r,i,c=>{c.repeat&&Ze(l)||s(c)&&n(c)},a)}function Nl(e){return JSON.parse(JSON.stringify(e))}function zn(e,t,n,o={}){var r,i,a;const{clone:l=!1,passive:s=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:p}=o,f=Wt(),g=n||(f==null?void 0:f.emit)||((r=f==null?void 0:f.$emit)==null?void 0:r.bind(f))||((a=(i=f==null?void 0:f.proxy)==null?void 0:i.$emit)==null?void 0:a.bind(f==null?void 0:f.proxy));let _=u;t||(t="modelValue"),_=_||`update:${t.toString()}`;const w=I=>l?typeof l=="function"?l(I):Nl(I):I,E=()=>gl(e[t])?w(e[t]):d,v=I=>{p?p(I)&&g(_,I):g(_,I)};if(s){const I=E(),S=ce(I);let A=!1;return me(()=>e[t],R=>{A||(A=!0,S.value=w(R),Qe(()=>A=!1))}),me(S,R=>{!A&&(R!==e[t]||c)&&v(R)},{deep:c}),S}else return ae({get(){return E()},set(I){v(I)}})}var kl={value:()=>{}};function Nn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new sn(n)}function sn(e){this._=e}function Cl(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}sn.prototype=Nn.prototype={constructor:sn,on:function(e,t){var n=this._,o=Cl(e+"",n),r,i=-1,a=o.length;if(arguments.length<2){for(;++i<a;)if((r=(e=o[i]).type)&&(r=Il(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(r=(e=o[i]).type)n[r]=Xo(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Xo(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new sn(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function Il(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function Xo(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=kl,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var ao="http://www.w3.org/1999/xhtml";const jo={svg:"http://www.w3.org/2000/svg",xhtml:ao,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),jo.hasOwnProperty(t)?{space:jo[t],local:e}:e}function Ml(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ao&&t.documentElement.namespaceURI===ao?t.createElement(e):t.createElementNS(n,e)}}function Ol(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ci(e){var t=kn(e);return(t.local?Ol:Ml)(t)}function Tl(){}function No(e){return e==null?Tl:function(){return this.querySelector(e)}}function $l(e){typeof e!="function"&&(e=No(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,l=o[r]=new Array(a),s,u,c=0;c<a;++c)(s=i[c])&&(u=e.call(s,s.__data__,c,i))&&("__data__"in s&&(u.__data__=s.__data__),l[c]=u);return new Ve(o,this._parents)}function Pl(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Dl(){return[]}function di(e){return e==null?Dl:function(){return this.querySelectorAll(e)}}function Al(e){return function(){return Pl(e.apply(this,arguments))}}function Vl(e){typeof e=="function"?e=Al(e):e=di(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a=t[i],l=a.length,s,u=0;u<l;++u)(s=a[u])&&(o.push(e.call(s,s.__data__,u,a)),r.push(s));return new Ve(o,r)}function fi(e){return function(){return this.matches(e)}}function hi(e){return function(t){return t.matches(e)}}var Rl=Array.prototype.find;function zl(e){return function(){return Rl.call(this.children,e)}}function Bl(){return this.firstElementChild}function Ll(e){return this.select(e==null?Bl:zl(typeof e=="function"?e:hi(e)))}var Fl=Array.prototype.filter;function Gl(){return Array.from(this.children)}function Hl(e){return function(){return Fl.call(this.children,e)}}function Yl(e){return this.selectAll(e==null?Gl:Hl(typeof e=="function"?e:hi(e)))}function Xl(e){typeof e!="function"&&(e=fi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,l=o[r]=[],s,u=0;u<a;++u)(s=i[u])&&e.call(s,s.__data__,u,i)&&l.push(s);return new Ve(o,this._parents)}function pi(e){return new Array(e.length)}function jl(){return new Ve(this._enter||this._groups.map(pi),this._parents)}function fn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}fn.prototype={constructor:fn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Wl(e){return function(){return e}}function Ul(e,t,n,o,r,i){for(var a=0,l,s=t.length,u=i.length;a<u;++a)(l=t[a])?(l.__data__=i[a],o[a]=l):n[a]=new fn(e,i[a]);for(;a<s;++a)(l=t[a])&&(r[a]=l)}function Zl(e,t,n,o,r,i,a){var l,s,u=new Map,c=t.length,d=i.length,p=new Array(c),f;for(l=0;l<c;++l)(s=t[l])&&(p[l]=f=a.call(s,s.__data__,l,t)+"",u.has(f)?r[l]=s:u.set(f,s));for(l=0;l<d;++l)f=a.call(e,i[l],l,i)+"",(s=u.get(f))?(o[l]=s,s.__data__=i[l],u.delete(f)):n[l]=new fn(e,i[l]);for(l=0;l<c;++l)(s=t[l])&&u.get(p[l])===s&&(r[l]=s)}function Kl(e){return e.__data__}function ql(e,t){if(!arguments.length)return Array.from(this,Kl);var n=t?Zl:Ul,o=this._parents,r=this._groups;typeof e!="function"&&(e=Wl(e));for(var i=r.length,a=new Array(i),l=new Array(i),s=new Array(i),u=0;u<i;++u){var c=o[u],d=r[u],p=d.length,f=Ql(e.call(c,c&&c.__data__,u,o)),g=f.length,_=l[u]=new Array(g),w=a[u]=new Array(g),E=s[u]=new Array(p);n(c,d,_,w,E,f,t);for(var v=0,I=0,S,A;v<g;++v)if(S=_[v]){for(v>=I&&(I=v+1);!(A=w[I])&&++I<g;);S._next=A||null}}return a=new Ve(a,o),a._enter=l,a._exit=s,a}function Ql(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Jl(){return new Ve(this._exit||this._groups.map(pi),this._parents)}function es(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function ts(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),l=new Array(r),s=0;s<a;++s)for(var u=n[s],c=o[s],d=u.length,p=l[s]=new Array(d),f,g=0;g<d;++g)(f=u[g]||c[g])&&(p[g]=f);for(;s<r;++s)l[s]=n[s];return new Ve(l,this._parents)}function ns(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],a;--r>=0;)(a=o[r])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function os(e){e||(e=rs);function t(d,p){return d&&p?e(d.__data__,p.__data__):!d-!p}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a=n[i],l=a.length,s=r[i]=new Array(l),u,c=0;c<l;++c)(u=a[c])&&(s[c]=u);s.sort(t)}return new Ve(r,this._parents).order()}function rs(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function is(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function as(){return Array.from(this)}function ls(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null}function ss(){let e=0;for(const t of this)++e;return e}function us(){return!this.node()}function cs(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,a=r.length,l;i<a;++i)(l=r[i])&&e.call(l,l.__data__,i,r);return this}function ds(e){return function(){this.removeAttribute(e)}}function fs(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hs(e,t){return function(){this.setAttribute(e,t)}}function ps(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function gs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function vs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ms(e,t){var n=kn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?fs:ds:typeof t=="function"?n.local?vs:gs:n.local?ps:hs)(n,t))}function gi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ys(e){return function(){this.style.removeProperty(e)}}function ws(e,t,n){return function(){this.style.setProperty(e,t,n)}}function _s(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function bs(e,t,n){return arguments.length>1?this.each((t==null?ys:typeof t=="function"?_s:ws)(e,t,n??"")):It(this.node(),e)}function It(e,t){return e.style.getPropertyValue(t)||gi(e).getComputedStyle(e,null).getPropertyValue(t)}function Es(e){return function(){delete this[e]}}function xs(e,t){return function(){this[e]=t}}function Ss(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ns(e,t){return arguments.length>1?this.each((t==null?Es:typeof t=="function"?Ss:xs)(e,t)):this.node()[e]}function vi(e){return e.trim().split(/^|\s+/)}function ko(e){return e.classList||new mi(e)}function mi(e){this._node=e,this._names=vi(e.getAttribute("class")||"")}mi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function yi(e,t){for(var n=ko(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function wi(e,t){for(var n=ko(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function ks(e){return function(){yi(this,e)}}function Cs(e){return function(){wi(this,e)}}function Is(e,t){return function(){(t.apply(this,arguments)?yi:wi)(this,e)}}function Ms(e,t){var n=vi(e+"");if(arguments.length<2){for(var o=ko(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Is:t?ks:Cs)(n,t))}function Os(){this.textContent=""}function Ts(e){return function(){this.textContent=e}}function $s(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ps(e){return arguments.length?this.each(e==null?Os:(typeof e=="function"?$s:Ts)(e)):this.node().textContent}function Ds(){this.innerHTML=""}function As(e){return function(){this.innerHTML=e}}function Vs(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Rs(e){return arguments.length?this.each(e==null?Ds:(typeof e=="function"?Vs:As)(e)):this.node().innerHTML}function zs(){this.nextSibling&&this.parentNode.appendChild(this)}function Bs(){return this.each(zs)}function Ls(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fs(){return this.each(Ls)}function Gs(e){var t=typeof e=="function"?e:ci(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Hs(){return null}function Ys(e,t){var n=typeof e=="function"?e:ci(e),o=t==null?Hs:typeof t=="function"?t:No(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Xs(){var e=this.parentNode;e&&e.removeChild(this)}function js(){return this.each(Xs)}function Ws(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Us(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Zs(e){return this.select(e?Us:Ws)}function Ks(e){return arguments.length?this.property("__data__",e):this.node().__data__}function qs(e){return function(t){e.call(this,t,this.__data__)}}function Qs(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Js(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function eu(e,t,n){return function(){var o=this.__on,r,i=qs(t);if(o){for(var a=0,l=o.length;a<l;++a)if((r=o[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function tu(e,t,n){var o=Qs(e+""),r,i=o.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,c;s<u;++s)for(r=0,c=l[s];r<i;++r)if((a=o[r]).type===c.type&&a.name===c.name)return c.value}return}for(l=t?eu:Js,r=0;r<i;++r)this.each(l(o[r],t,n));return this}function _i(e,t,n){var o=gi(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function nu(e,t){return function(){return _i(this,e,t)}}function ou(e,t){return function(){return _i(this,e,t.apply(this,arguments))}}function ru(e,t){return this.each((typeof t=="function"?ou:nu)(e,t))}function*iu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,a;r<i;++r)(a=o[r])&&(yield a)}var bi=[null];function Ve(e,t){this._groups=e,this._parents=t}function Ut(){return new Ve([[document.documentElement]],bi)}function au(){return this}Ve.prototype=Ut.prototype={constructor:Ve,select:$l,selectAll:Vl,selectChild:Ll,selectChildren:Yl,filter:Xl,data:ql,enter:jl,exit:Jl,join:es,merge:ts,selection:au,order:ns,sort:os,call:is,nodes:as,node:ls,size:ss,empty:us,each:cs,attr:ms,style:bs,property:Ns,classed:Ms,text:Ps,html:Rs,raise:Bs,lower:Fs,append:Gs,insert:Ys,remove:js,clone:Zs,datum:Ks,on:tu,dispatch:ru,[Symbol.iterator]:iu};function Le(e){return typeof e=="string"?new Ve([[document.querySelector(e)]],[document.documentElement]):new Ve([[e]],bi)}function lu(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ye(e,t){if(e=lu(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const su={passive:!1},Ft={capture:!0,passive:!1};function Bn(e){e.stopImmediatePropagation()}function St(e){e.preventDefault(),e.stopImmediatePropagation()}function Ei(e){var t=e.document.documentElement,n=Le(e).on("dragstart.drag",St,Ft);"onselectstart"in t?n.on("selectstart.drag",St,Ft):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function xi(e,t){var n=e.document.documentElement,o=Le(e).on("dragstart.drag",null);t&&(o.on("click.drag",St,Ft),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const qt=e=>()=>e;function lo(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:a,y:l,dx:s,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}lo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function uu(e){return!e.ctrlKey&&!e.button}function cu(){return this.parentNode}function du(e,t){return t??{x:e.x,y:e.y}}function fu(){return navigator.maxTouchPoints||"ontouchstart"in this}function hu(){var e=uu,t=cu,n=du,o=fu,r={},i=Nn("start","drag","end"),a=0,l,s,u,c,d=0;function p(S){S.on("mousedown.drag",f).filter(o).on("touchstart.drag",w).on("touchmove.drag",E,su).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(S,A){if(!(c||!e.call(this,S,A))){var R=I(this,t.call(this,S,A),S,A,"mouse");R&&(Le(S.view).on("mousemove.drag",g,Ft).on("mouseup.drag",_,Ft),Ei(S.view),Bn(S),u=!1,l=S.clientX,s=S.clientY,R("start",S))}}function g(S){if(St(S),!u){var A=S.clientX-l,R=S.clientY-s;u=A*A+R*R>d}r.mouse("drag",S)}function _(S){Le(S.view).on("mousemove.drag mouseup.drag",null),xi(S.view,u),St(S),r.mouse("end",S)}function w(S,A){if(e.call(this,S,A)){var R=S.changedTouches,T=t.call(this,S,A),X=R.length,U,$;for(U=0;U<X;++U)($=I(this,T,S,A,R[U].identifier,R[U]))&&(Bn(S),$("start",S,R[U]))}}function E(S){var A=S.changedTouches,R=A.length,T,X;for(T=0;T<R;++T)(X=r[A[T].identifier])&&(St(S),X("drag",S,A[T]))}function v(S){var A=S.changedTouches,R=A.length,T,X;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),T=0;T<R;++T)(X=r[A[T].identifier])&&(Bn(S),X("end",S,A[T]))}function I(S,A,R,T,X,U){var $=i.copy(),b=Ye(U||R,A),ee,ne,m;if((m=n.call(S,new lo("beforestart",{sourceEvent:R,target:p,identifier:X,active:a,x:b[0],y:b[1],dx:0,dy:0,dispatch:$}),T))!=null)return ee=m.x-b[0]||0,ne=m.y-b[1]||0,function C(N,M,V){var P=b,B;switch(N){case"start":r[X]=C,B=a++;break;case"end":delete r[X],--a;case"drag":b=Ye(V||M,A),B=a;break}$.call(N,S,new lo(N,{sourceEvent:M,subject:m,target:p,identifier:X,active:B,x:b[0]+ee,y:b[1]+ne,dx:b[0]-P[0],dy:b[1]-P[1],dispatch:$}),T)}}return p.filter=function(S){return arguments.length?(e=typeof S=="function"?S:qt(!!S),p):e},p.container=function(S){return arguments.length?(t=typeof S=="function"?S:qt(S),p):t},p.subject=function(S){return arguments.length?(n=typeof S=="function"?S:qt(S),p):n},p.touchable=function(S){return arguments.length?(o=typeof S=="function"?S:qt(!!S),p):o},p.on=function(){var S=i.on.apply(i,arguments);return S===i?p:S},p.clickDistance=function(S){return arguments.length?(d=(S=+S)*S,p):Math.sqrt(d)},p}function Co(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Si(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Zt(){}var Gt=.7,hn=1/Gt,Nt="\\s*([+-]?\\d+)\\s*",Ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",je="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pu=/^#([0-9a-f]{3,8})$/,gu=new RegExp(`^rgb\\(${Nt},${Nt},${Nt}\\)$`),vu=new RegExp(`^rgb\\(${je},${je},${je}\\)$`),mu=new RegExp(`^rgba\\(${Nt},${Nt},${Nt},${Ht}\\)$`),yu=new RegExp(`^rgba\\(${je},${je},${je},${Ht}\\)$`),wu=new RegExp(`^hsl\\(${Ht},${je},${je}\\)$`),_u=new RegExp(`^hsla\\(${Ht},${je},${je},${Ht}\\)$`),Wo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Co(Zt,Yt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Uo,formatHex:Uo,formatHex8:bu,formatHsl:Eu,formatRgb:Zo,toString:Zo});function Uo(){return this.rgb().formatHex()}function bu(){return this.rgb().formatHex8()}function Eu(){return Ni(this).formatHsl()}function Zo(){return this.rgb().formatRgb()}function Yt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=pu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ko(t):n===3?new De(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Qt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Qt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=gu.exec(e))?new De(t[1],t[2],t[3],1):(t=vu.exec(e))?new De(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mu.exec(e))?Qt(t[1],t[2],t[3],t[4]):(t=yu.exec(e))?Qt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=wu.exec(e))?Jo(t[1],t[2]/100,t[3]/100,1):(t=_u.exec(e))?Jo(t[1],t[2]/100,t[3]/100,t[4]):Wo.hasOwnProperty(e)?Ko(Wo[e]):e==="transparent"?new De(NaN,NaN,NaN,0):null}function Ko(e){return new De(e>>16&255,e>>8&255,e&255,1)}function Qt(e,t,n,o){return o<=0&&(e=t=n=NaN),new De(e,t,n,o)}function xu(e){return e instanceof Zt||(e=Yt(e)),e?(e=e.rgb(),new De(e.r,e.g,e.b,e.opacity)):new De}function so(e,t,n,o){return arguments.length===1?xu(e):new De(e,t,n,o??1)}function De(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Co(De,so,Si(Zt,{brighter(e){return e=e==null?hn:Math.pow(hn,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Gt:Math.pow(Gt,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new De(ht(this.r),ht(this.g),ht(this.b),pn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qo,formatHex:qo,formatHex8:Su,formatRgb:Qo,toString:Qo}));function qo(){return`#${ft(this.r)}${ft(this.g)}${ft(this.b)}`}function Su(){return`#${ft(this.r)}${ft(this.g)}${ft(this.b)}${ft((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qo(){const e=pn(this.opacity);return`${e===1?"rgb(":"rgba("}${ht(this.r)}, ${ht(this.g)}, ${ht(this.b)}${e===1?")":`, ${e})`}`}function pn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ht(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ft(e){return e=ht(e),(e<16?"0":"")+e.toString(16)}function Jo(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Fe(e,t,n,o)}function Ni(e){if(e instanceof Fe)return new Fe(e.h,e.s,e.l,e.opacity);if(e instanceof Zt||(e=Yt(e)),!e)return new Fe;if(e instanceof Fe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,l=i-r,s=(i+r)/2;return l?(t===i?a=(n-o)/l+(n<o)*6:n===i?a=(o-t)/l+2:a=(t-n)/l+4,l/=s<.5?i+r:2-i-r,a*=60):l=s>0&&s<1?0:a,new Fe(a,l,s,e.opacity)}function Nu(e,t,n,o){return arguments.length===1?Ni(e):new Fe(e,t,n,o??1)}function Fe(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Co(Fe,Nu,Si(Zt,{brighter(e){return e=e==null?hn:Math.pow(hn,e),new Fe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Gt:Math.pow(Gt,e),new Fe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new De(Ln(e>=240?e-240:e+120,r,o),Ln(e,r,o),Ln(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new Fe(er(this.h),Jt(this.s),Jt(this.l),pn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=pn(this.opacity);return`${e===1?"hsl(":"hsla("}${er(this.h)}, ${Jt(this.s)*100}%, ${Jt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function er(e){return e=(e||0)%360,e<0?e+360:e}function Jt(e){return Math.max(0,Math.min(1,e||0))}function Ln(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ki=e=>()=>e;function ku(e,t){return function(n){return e+n*t}}function Cu(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Iu(e){return(e=+e)==1?Ci:function(t,n){return n-t?Cu(t,n,e):ki(isNaN(t)?n:t)}}function Ci(e,t){var n=t-e;return n?ku(e,n):ki(isNaN(e)?t:e)}const tr=function e(t){var n=Iu(t);function o(r,i){var a=n((r=so(r)).r,(i=so(i)).r),l=n(r.g,i.g),s=n(r.b,i.b),u=Ci(r.opacity,i.opacity);return function(c){return r.r=a(c),r.g=l(c),r.b=s(c),r.opacity=u(c),r+""}}return o.gamma=e,o}(1);function ot(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var uo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fn=new RegExp(uo.source,"g");function Mu(e){return function(){return e}}function Ou(e){return function(t){return e(t)+""}}function Tu(e,t){var n=uo.lastIndex=Fn.lastIndex=0,o,r,i,a=-1,l=[],s=[];for(e=e+"",t=t+"";(o=uo.exec(e))&&(r=Fn.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),l[a]?l[a]+=i:l[++a]=i),(o=o[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,s.push({i:a,x:ot(o,r)})),n=Fn.lastIndex;return n<t.length&&(i=t.slice(n),l[a]?l[a]+=i:l[++a]=i),l.length<2?s[0]?Ou(s[0].x):Mu(t):(t=s.length,function(u){for(var c=0,d;c<t;++c)l[(d=s[c]).i]=d.x(u);return l.join("")})}var nr=180/Math.PI,co={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ii(e,t,n,o,r,i){var a,l,s;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,s/=l),e*o<t*n&&(e=-e,t=-t,s=-s,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*nr,skewX:Math.atan(s)*nr,scaleX:a,scaleY:l}}var en;function $u(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?co:Ii(t.a,t.b,t.c,t.d,t.e,t.f)}function Pu(e){return e==null||(en||(en=document.createElementNS("http://www.w3.org/2000/svg","g")),en.setAttribute("transform",e),!(e=en.transform.baseVal.consolidate()))?co:(e=e.matrix,Ii(e.a,e.b,e.c,e.d,e.e,e.f))}function Mi(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,c,d,p,f,g){if(u!==d||c!==p){var _=f.push("translate(",null,t,null,n);g.push({i:_-4,x:ot(u,d)},{i:_-2,x:ot(c,p)})}else(d||p)&&f.push("translate("+d+t+p+n)}function a(u,c,d,p){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),p.push({i:d.push(r(d)+"rotate(",null,o)-2,x:ot(u,c)})):c&&d.push(r(d)+"rotate("+c+o)}function l(u,c,d,p){u!==c?p.push({i:d.push(r(d)+"skewX(",null,o)-2,x:ot(u,c)}):c&&d.push(r(d)+"skewX("+c+o)}function s(u,c,d,p,f,g){if(u!==d||c!==p){var _=f.push(r(f)+"scale(",null,",",null,")");g.push({i:_-4,x:ot(u,d)},{i:_-2,x:ot(c,p)})}else(d!==1||p!==1)&&f.push(r(f)+"scale("+d+","+p+")")}return function(u,c){var d=[],p=[];return u=e(u),c=e(c),i(u.translateX,u.translateY,c.translateX,c.translateY,d,p),a(u.rotate,c.rotate,d,p),l(u.skewX,c.skewX,d,p),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,p),u=c=null,function(f){for(var g=-1,_=p.length,w;++g<_;)d[(w=p[g]).i]=w.x(f);return d.join("")}}}var Du=Mi($u,"px, ","px)","deg)"),Au=Mi(Pu,", ",")",")"),Vu=1e-12;function or(e){return((e=Math.exp(e))+1/e)/2}function Ru(e){return((e=Math.exp(e))-1/e)/2}function zu(e){return((e=Math.exp(2*e))-1)/(e+1)}const Bu=function e(t,n,o){function r(i,a){var l=i[0],s=i[1],u=i[2],c=a[0],d=a[1],p=a[2],f=c-l,g=d-s,_=f*f+g*g,w,E;if(_<Vu)E=Math.log(p/u)/t,w=function(T){return[l+T*f,s+T*g,u*Math.exp(t*T*E)]};else{var v=Math.sqrt(_),I=(p*p-u*u+o*_)/(2*u*n*v),S=(p*p-u*u-o*_)/(2*p*n*v),A=Math.log(Math.sqrt(I*I+1)-I),R=Math.log(Math.sqrt(S*S+1)-S);E=(R-A)/t,w=function(T){var X=T*E,U=or(A),$=u/(n*v)*(U*zu(t*X+A)-Ru(A));return[l+$*f,s+$*g,u*U/or(t*X+A)]}}return w.duration=E*1e3*t/Math.SQRT2,w}return r.rho=function(i){var a=Math.max(.001,+i),l=a*a,s=l*l;return e(a,l,s)},r}(Math.SQRT2,2,4);var Mt=0,At=0,Pt=0,Oi=1e3,gn,Vt,vn=0,mt=0,Cn=0,Xt=typeof performance=="object"&&performance.now?performance:Date,Ti=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Io(){return mt||(Ti(Lu),mt=Xt.now()+Cn)}function Lu(){mt=0}function mn(){this._call=this._time=this._next=null}mn.prototype=$i.prototype={constructor:mn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Io():+n)+(t==null?0:+t),!this._next&&Vt!==this&&(Vt?Vt._next=this:gn=this,Vt=this),this._call=e,this._time=n,fo()},stop:function(){this._call&&(this._call=null,this._time=1/0,fo())}};function $i(e,t,n){var o=new mn;return o.restart(e,t,n),o}function Fu(){Io(),++Mt;for(var e=gn,t;e;)(t=mt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Mt}function rr(){mt=(vn=Xt.now())+Cn,Mt=At=0;try{Fu()}finally{Mt=0,Hu(),mt=0}}function Gu(){var e=Xt.now(),t=e-vn;t>Oi&&(Cn-=t,vn=e)}function Hu(){for(var e,t=gn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:gn=n);Vt=e,fo(o)}function fo(e){if(!Mt){At&&(At=clearTimeout(At));var t=e-mt;t>24?(e<1/0&&(At=setTimeout(rr,e-Xt.now()-Cn)),Pt&&(Pt=clearInterval(Pt))):(Pt||(vn=Xt.now(),Pt=setInterval(Gu,Oi)),Mt=1,Ti(rr))}}function ir(e,t,n){var o=new mn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Yu=Nn("start","end","cancel","interrupt"),Xu=[],Pi=0,ar=1,ho=2,un=3,lr=4,po=5,cn=6;function In(e,t,n,o,r,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;ju(e,n,{name:t,index:o,group:r,on:Yu,tween:Xu,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Pi})}function Mo(e,t){var n=Ge(e,t);if(n.state>Pi)throw new Error("too late; already scheduled");return n}function We(e,t){var n=Ge(e,t);if(n.state>un)throw new Error("too late; already running");return n}function Ge(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ju(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=$i(i,0,n.time);function i(u){n.state=ar,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,d,p,f;if(n.state!==ar)return s();for(c in o)if(f=o[c],f.name===n.name){if(f.state===un)return ir(a);f.state===lr?(f.state=cn,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[c]):+c<t&&(f.state=cn,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[c])}if(ir(function(){n.state===un&&(n.state=lr,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=ho,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ho){for(n.state=un,r=new Array(p=n.tween.length),c=0,d=-1;c<p;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=f);r.length=d+1}}function l(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=po,1),d=-1,p=r.length;++d<p;)r[d].call(e,c);n.state===po&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=cn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function dn(e,t){var n=e.__transition,o,r,i=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((o=n[a]).name!==t){i=!1;continue}r=o.state>ho&&o.state<po,o.state=cn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[a]}i&&delete e.__transition}}function Wu(e){return this.each(function(){dn(this,e)})}function Uu(e,t){var n,o;return function(){var r=We(this,e),i=r.tween;if(i!==n){o=n=i;for(var a=0,l=o.length;a<l;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}r.tween=o}}function Zu(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=We(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var l={name:t,value:n},s=0,u=r.length;s<u;++s)if(r[s].name===t){r[s]=l;break}s===u&&r.push(l)}i.tween=r}}function Ku(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Ge(this.node(),n).tween,r=0,i=o.length,a;r<i;++r)if((a=o[r]).name===e)return a.value;return null}return this.each((t==null?Uu:Zu)(n,e,t))}function Oo(e,t,n){var o=e._id;return e.each(function(){var r=We(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Ge(r,o).value[t]}}function Di(e,t){var n;return(typeof t=="number"?ot:t instanceof Yt?tr:(n=Yt(t))?(t=n,tr):Tu)(e,t)}function qu(e){return function(){this.removeAttribute(e)}}function Qu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ju(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttribute(e);return a===r?null:a===o?i:i=t(o=a,n)}}function ec(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===o?i:i=t(o=a,n)}}function tc(e,t,n){var o,r,i;return function(){var a,l=n(this),s;return l==null?void this.removeAttribute(e):(a=this.getAttribute(e),s=l+"",a===s?null:a===o&&s===r?i:(r=s,i=t(o=a,l)))}}function nc(e,t,n){var o,r,i;return function(){var a,l=n(this),s;return l==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),s=l+"",a===s?null:a===o&&s===r?i:(r=s,i=t(o=a,l)))}}function oc(e,t){var n=kn(e),o=n==="transform"?Au:Di;return this.attrTween(e,typeof t=="function"?(n.local?nc:tc)(n,o,Oo(this,"attr."+e,t)):t==null?(n.local?Qu:qu)(n):(n.local?ec:Ju)(n,o,t))}function rc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ic(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ac(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&ic(e,i)),n}return r._value=t,r}function lc(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&rc(e,i)),n}return r._value=t,r}function sc(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=kn(e);return this.tween(n,(o.local?ac:lc)(o,t))}function uc(e,t){return function(){Mo(this,e).delay=+t.apply(this,arguments)}}function cc(e,t){return t=+t,function(){Mo(this,e).delay=t}}function dc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?uc:cc)(t,e)):Ge(this.node(),t).delay}function fc(e,t){return function(){We(this,e).duration=+t.apply(this,arguments)}}function hc(e,t){return t=+t,function(){We(this,e).duration=t}}function pc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fc:hc)(t,e)):Ge(this.node(),t).duration}function gc(e,t){if(typeof t!="function")throw new Error;return function(){We(this,e).ease=t}}function vc(e){var t=this._id;return arguments.length?this.each(gc(t,e)):Ge(this.node(),t).ease}function mc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;We(this,e).ease=n}}function yc(e){if(typeof e!="function")throw new Error;return this.each(mc(this._id,e))}function wc(e){typeof e!="function"&&(e=fi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,l=o[r]=[],s,u=0;u<a;++u)(s=i[u])&&e.call(s,s.__data__,u,i)&&l.push(s);return new Je(o,this._parents,this._name,this._id)}function _c(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),l=0;l<i;++l)for(var s=t[l],u=n[l],c=s.length,d=a[l]=new Array(c),p,f=0;f<c;++f)(p=s[f]||u[f])&&(d[f]=p);for(;l<o;++l)a[l]=t[l];return new Je(a,this._parents,this._name,this._id)}function bc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ec(e,t,n){var o,r,i=bc(t)?Mo:We;return function(){var a=i(this,e),l=a.on;l!==o&&(r=(o=l).copy()).on(t,n),a.on=r}}function xc(e,t){var n=this._id;return arguments.length<2?Ge(this.node(),n).on.on(e):this.each(Ec(n,e,t))}function Sc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Nc(){return this.on("end.remove",Sc(this._id))}function kc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=No(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var l=o[a],s=l.length,u=i[a]=new Array(s),c,d,p=0;p<s;++p)(c=l[p])&&(d=e.call(c,c.__data__,p,l))&&("__data__"in c&&(d.__data__=c.__data__),u[p]=d,In(u[p],t,n,p,u,Ge(c,n)));return new Je(i,this._parents,t,n)}function Cc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=di(e));for(var o=this._groups,r=o.length,i=[],a=[],l=0;l<r;++l)for(var s=o[l],u=s.length,c,d=0;d<u;++d)if(c=s[d]){for(var p=e.call(c,c.__data__,d,s),f,g=Ge(c,n),_=0,w=p.length;_<w;++_)(f=p[_])&&In(f,t,n,_,p,g);i.push(p),a.push(c)}return new Je(i,a,t,n)}var Ic=Ut.prototype.constructor;function Mc(){return new Ic(this._groups,this._parents)}function Oc(e,t){var n,o,r;return function(){var i=It(this,e),a=(this.style.removeProperty(e),It(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}function Ai(e){return function(){this.style.removeProperty(e)}}function Tc(e,t,n){var o,r=n+"",i;return function(){var a=It(this,e);return a===r?null:a===o?i:i=t(o=a,n)}}function $c(e,t,n){var o,r,i;return function(){var a=It(this,e),l=n(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(e),It(this,e))),a===s?null:a===o&&s===r?i:(r=s,i=t(o=a,l))}}function Pc(e,t){var n,o,r,i="style."+t,a="end."+i,l;return function(){var s=We(this,e),u=s.on,c=s.value[i]==null?l||(l=Ai(t)):void 0;(u!==n||r!==c)&&(o=(n=u).copy()).on(a,r=c),s.on=o}}function Dc(e,t,n){var o=(e+="")=="transform"?Du:Di;return t==null?this.styleTween(e,Oc(e,o)).on("end.style."+e,Ai(e)):typeof t=="function"?this.styleTween(e,$c(e,o,Oo(this,"style."+e,t))).each(Pc(this._id,e)):this.styleTween(e,Tc(e,o,t),n).on("end.style."+e,null)}function Ac(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Vc(e,t,n){var o,r;function i(){var a=t.apply(this,arguments);return a!==r&&(o=(r=a)&&Ac(e,a,n)),o}return i._value=t,i}function Rc(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Vc(e,t,n??""))}function zc(e){return function(){this.textContent=e}}function Bc(e){return function(){var t=e(this);this.textContent=t??""}}function Lc(e){return this.tween("text",typeof e=="function"?Bc(Oo(this,"text",e)):zc(e==null?"":e+""))}function Fc(e){return function(t){this.textContent=e.call(this,t)}}function Gc(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Fc(r)),t}return o._value=e,o}function Hc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Gc(e))}function Yc(){for(var e=this._name,t=this._id,n=Vi(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],l=a.length,s,u=0;u<l;++u)if(s=a[u]){var c=Ge(s,t);In(s,e,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Je(o,this._parents,e,n)}function Xc(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,a){var l={value:a},s={value:function(){--r===0&&i()}};n.each(function(){var u=We(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(s)),u.on=t}),r===0&&i()})}var jc=0;function Je(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Vi(){return++jc}var Ue=Ut.prototype;Je.prototype={constructor:Je,select:kc,selectAll:Cc,selectChild:Ue.selectChild,selectChildren:Ue.selectChildren,filter:wc,merge:_c,selection:Mc,transition:Yc,call:Ue.call,nodes:Ue.nodes,node:Ue.node,size:Ue.size,empty:Ue.empty,each:Ue.each,on:xc,attr:oc,attrTween:sc,style:Dc,styleTween:Rc,text:Lc,textTween:Hc,remove:Nc,tween:Ku,delay:dc,duration:pc,ease:vc,easeVarying:yc,end:Xc,[Symbol.iterator]:Ue[Symbol.iterator]};function Wc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Uc={time:null,delay:0,duration:250,ease:Wc};function Zc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Kc(e){var t,n;e instanceof Je?(t=e._id,e=e._name):(t=Vi(),(n=Uc).time=Io(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],l=a.length,s,u=0;u<l;++u)(s=a[u])&&In(s,e,t,u,a,n||Zc(s,t));return new Je(o,this._parents,e,t)}Ut.prototype.interrupt=Wu;Ut.prototype.transition=Kc;const tn=e=>()=>e;function qc(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function qe(e,t,n){this.k=e,this.x=t,this.y=n}qe.prototype={constructor:qe,scale:function(e){return e===1?this:new qe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new qe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ot=new qe(1,0,0);qe.prototype;function Gn(e){e.stopImmediatePropagation()}function Dt(e){e.preventDefault(),e.stopImmediatePropagation()}function Qc(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Jc(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function sr(){return this.__zoom||Ot}function ed(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function td(){return navigator.maxTouchPoints||"ontouchstart"in this}function nd(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function od(){var e=Qc,t=Jc,n=nd,o=ed,r=td,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,s=Bu,u=Nn("start","zoom","end"),c,d,p,f=500,g=150,_=0,w=10;function E(m){m.property("__zoom",sr).on("wheel.zoom",X,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",$).filter(r).on("touchstart.zoom",b).on("touchmove.zoom",ee).on("touchend.zoom touchcancel.zoom",ne).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(m,C,N,M){var V=m.selection?m.selection():m;V.property("__zoom",sr),m!==V?A(m,C,N,M):V.interrupt().each(function(){R(this,arguments).event(M).start().zoom(null,typeof C=="function"?C.apply(this,arguments):C).end()})},E.scaleBy=function(m,C,N,M){E.scaleTo(m,function(){var V=this.__zoom.k,P=typeof C=="function"?C.apply(this,arguments):C;return V*P},N,M)},E.scaleTo=function(m,C,N,M){E.transform(m,function(){var V=t.apply(this,arguments),P=this.__zoom,B=N==null?S(V):typeof N=="function"?N.apply(this,arguments):N,G=P.invert(B),oe=typeof C=="function"?C.apply(this,arguments):C;return n(I(v(P,oe),B,G),V,a)},N,M)},E.translateBy=function(m,C,N,M){E.transform(m,function(){return n(this.__zoom.translate(typeof C=="function"?C.apply(this,arguments):C,typeof N=="function"?N.apply(this,arguments):N),t.apply(this,arguments),a)},null,M)},E.translateTo=function(m,C,N,M,V){E.transform(m,function(){var P=t.apply(this,arguments),B=this.__zoom,G=M==null?S(P):typeof M=="function"?M.apply(this,arguments):M;return n(Ot.translate(G[0],G[1]).scale(B.k).translate(typeof C=="function"?-C.apply(this,arguments):-C,typeof N=="function"?-N.apply(this,arguments):-N),P,a)},M,V)};function v(m,C){return C=Math.max(i[0],Math.min(i[1],C)),C===m.k?m:new qe(C,m.x,m.y)}function I(m,C,N){var M=C[0]-N[0]*m.k,V=C[1]-N[1]*m.k;return M===m.x&&V===m.y?m:new qe(m.k,M,V)}function S(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function A(m,C,N,M){m.on("start.zoom",function(){R(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(M).end()}).tween("zoom",function(){var V=this,P=arguments,B=R(V,P).event(M),G=t.apply(V,P),oe=N==null?S(G):typeof N=="function"?N.apply(V,P):N,j=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),L=V.__zoom,K=typeof C=="function"?C.apply(V,P):C,fe=s(L.invert(oe).concat(j/L.k),K.invert(oe).concat(j/K.k));return function(se){if(se===1)se=K;else{var he=fe(se),re=j/he[2];se=new qe(re,oe[0]-he[0]*re,oe[1]-he[1]*re)}B.zoom(null,se)}})}function R(m,C,N){return!N&&m.__zooming||new T(m,C)}function T(m,C){this.that=m,this.args=C,this.active=0,this.sourceEvent=null,this.extent=t.apply(m,C),this.taps=0}T.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,C){return this.mouse&&m!=="mouse"&&(this.mouse[1]=C.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=C.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=C.invert(this.touch1[0])),this.that.__zoom=C,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var C=Le(this.that).datum();u.call(m,this.that,new qc(m,{sourceEvent:this.sourceEvent,target:E,type:m,transform:this.that.__zoom,dispatch:u}),C)}};function X(m,...C){if(!e.apply(this,arguments))return;var N=R(this,C).event(m),M=this.__zoom,V=Math.max(i[0],Math.min(i[1],M.k*Math.pow(2,o.apply(this,arguments)))),P=Ye(m);if(N.wheel)(N.mouse[0][0]!==P[0]||N.mouse[0][1]!==P[1])&&(N.mouse[1]=M.invert(N.mouse[0]=P)),clearTimeout(N.wheel);else{if(M.k===V)return;N.mouse=[P,M.invert(P)],dn(this),N.start()}Dt(m),N.wheel=setTimeout(B,g),N.zoom("mouse",n(I(v(M,V),N.mouse[0],N.mouse[1]),N.extent,a));function B(){N.wheel=null,N.end()}}function U(m,...C){if(p||!e.apply(this,arguments))return;var N=m.currentTarget,M=R(this,C,!0).event(m),V=Le(m.view).on("mousemove.zoom",oe,!0).on("mouseup.zoom",j,!0),P=Ye(m,N),B=m.clientX,G=m.clientY;Ei(m.view),Gn(m),M.mouse=[P,this.__zoom.invert(P)],dn(this),M.start();function oe(L){if(Dt(L),!M.moved){var K=L.clientX-B,fe=L.clientY-G;M.moved=K*K+fe*fe>_}M.event(L).zoom("mouse",n(I(M.that.__zoom,M.mouse[0]=Ye(L,N),M.mouse[1]),M.extent,a))}function j(L){V.on("mousemove.zoom mouseup.zoom",null),xi(L.view,M.moved),Dt(L),M.event(L).end()}}function $(m,...C){if(e.apply(this,arguments)){var N=this.__zoom,M=Ye(m.changedTouches?m.changedTouches[0]:m,this),V=N.invert(M),P=N.k*(m.shiftKey?.5:2),B=n(I(v(N,P),M,V),t.apply(this,C),a);Dt(m),l>0?Le(this).transition().duration(l).call(A,B,M,m):Le(this).call(E.transform,B,M,m)}}function b(m,...C){if(e.apply(this,arguments)){var N=m.touches,M=N.length,V=R(this,C,m.changedTouches.length===M).event(m),P,B,G,oe;for(Gn(m),B=0;B<M;++B)G=N[B],oe=Ye(G,this),oe=[oe,this.__zoom.invert(oe),G.identifier],V.touch0?!V.touch1&&V.touch0[2]!==oe[2]&&(V.touch1=oe,V.taps=0):(V.touch0=oe,P=!0,V.taps=1+!!c);c&&(c=clearTimeout(c)),P&&(V.taps<2&&(d=oe[0],c=setTimeout(function(){c=null},f)),dn(this),V.start())}}function ee(m,...C){if(this.__zooming){var N=R(this,C).event(m),M=m.changedTouches,V=M.length,P,B,G,oe;for(Dt(m),P=0;P<V;++P)B=M[P],G=Ye(B,this),N.touch0&&N.touch0[2]===B.identifier?N.touch0[0]=G:N.touch1&&N.touch1[2]===B.identifier&&(N.touch1[0]=G);if(B=N.that.__zoom,N.touch1){var j=N.touch0[0],L=N.touch0[1],K=N.touch1[0],fe=N.touch1[1],se=(se=K[0]-j[0])*se+(se=K[1]-j[1])*se,he=(he=fe[0]-L[0])*he+(he=fe[1]-L[1])*he;B=v(B,Math.sqrt(se/he)),G=[(j[0]+K[0])/2,(j[1]+K[1])/2],oe=[(L[0]+fe[0])/2,(L[1]+fe[1])/2]}else if(N.touch0)G=N.touch0[0],oe=N.touch0[1];else return;N.zoom("touch",n(I(B,G,oe),N.extent,a))}}function ne(m,...C){if(this.__zooming){var N=R(this,C).event(m),M=m.changedTouches,V=M.length,P,B;for(Gn(m),p&&clearTimeout(p),p=setTimeout(function(){p=null},f),P=0;P<V;++P)B=M[P],N.touch0&&N.touch0[2]===B.identifier?delete N.touch0:N.touch1&&N.touch1[2]===B.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(B=Ye(B,this),Math.hypot(d[0]-B[0],d[1]-B[1])<w)){var G=Le(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return E.wheelDelta=function(m){return arguments.length?(o=typeof m=="function"?m:tn(+m),E):o},E.filter=function(m){return arguments.length?(e=typeof m=="function"?m:tn(!!m),E):e},E.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:tn(!!m),E):r},E.extent=function(m){return arguments.length?(t=typeof m=="function"?m:tn([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),E):t},E.scaleExtent=function(m){return arguments.length?(i[0]=+m[0],i[1]=+m[1],E):[i[0],i[1]]},E.translateExtent=function(m){return arguments.length?(a[0][0]=+m[0][0],a[1][0]=+m[1][0],a[0][1]=+m[0][1],a[1][1]=+m[1][1],E):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},E.constrain=function(m){return arguments.length?(n=m,E):n},E.duration=function(m){return arguments.length?(l=+m,E):l},E.interpolate=function(m){return arguments.length?(s=m,E):s},E.on=function(){var m=u.on.apply(u,arguments);return m===u?E:m},E.clickDistance=function(m){return arguments.length?(_=(m=+m)*m,E):Math.sqrt(_)},E.tapDistance=function(m){return arguments.length?(w=+m,E):w},E}var Y=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(Y||{}),To=(e=>(e.Partial="partial",e.Full="full",e))(To||{}),ct=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(ct||{}),yt=(e=>(e.Strict="strict",e.Loose="loose",e))(yt||{}),go=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(go||{}),Bt=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Bt||{});function vo(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,r=typeof(o==null?void 0:o.hasAttribute)=="function"?o.hasAttribute("contenteditable"):!1,i=typeof(o==null?void 0:o.closest)=="function"?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(o==null?void 0:o.nodeName)||r||!!i}function rd(e){return e.ctrlKey||e.metaKey||e.shiftKey}function ur(e,t,n,o){const r=t.split("+").map(i=>i.trim().toLowerCase());return r.length===1?e.toLowerCase()===t.toLowerCase():(o?n.delete(e.toLowerCase()):n.add(e.toLowerCase()),r.every((i,a)=>n.has(i)&&Array.from(n.values())[a]===r[a]))}function id(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=ad(n.code,e);return Array.isArray(e)?e.some(r=>ur(n[o],r,t,n.type==="keyup")):ur(n[o],e,t,n.type==="keyup")}}function ad(e,t){return typeof t=="string"?e===t?"code":"key":t.includes(e)?"code":"key"}function Lt(e,t){const n=xe(()=>pe(t==null?void 0:t.actInsideInputWithModifier)??!1),o=xe(()=>pe(t==null?void 0:t.target)??window),r=ce(pe(e)===!0);let i=!1;const a=new Set;let l=u(pe(e));me(()=>pe(e),(c,d)=>{typeof d=="boolean"&&typeof c!="boolean"&&s(),l=u(c)},{immediate:!0}),et(()=>{ui(window,["blur","contextmenu"],s)}),Yo((...c)=>l(...c),c=>{i=rd(c),!((!i||i&&!n.value)&&vo(c))&&(c.preventDefault(),r.value=!0)},{eventName:"keydown",target:o}),Yo((...c)=>l(...c),c=>{if(r.value){if((!i||i&&!n.value)&&vo(c))return;s()}},{eventName:"keyup",target:o});function s(){i=!1,a.clear(),r.value=!1}function u(c){return c===null?(s(),()=>!1):typeof c=="boolean"?(s(),r.value=c,()=>!1):Array.isArray(c)||typeof c=="string"?id(c,a):c}return r}const Ri="vue-flow__node-desc",zi="vue-flow__edge-desc",ld="vue-flow__aria-live",Bi=["Enter"," ","Escape"],kt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function mo(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function yo(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Mn(e){return{width:e.offsetWidth,height:e.offsetHeight}}function wt(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Li(e,t){return{x:wt(e.x,t[0][0],t[1][0]),y:wt(e.y,t[0][1],t[1][1])}}function cr(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function st(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function pt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!st(e)}function Rt(e){return pt(e)&&"computedPosition"in e}function nn(e){return!Number.isNaN(e)&&Number.isFinite(e)}function sd(e){return nn(e.width)&&nn(e.height)&&nn(e.x)&&nn(e.y)}function ud(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:xt({width:0,height:0}),computedPosition:xt({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:ke(e.data)?e.data:{},events:xt(ke(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function Fi(e,t,n){var o,r;const i={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(r=e.targetHandle)==null?void 0:r.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:ke(e.data)?e.data:{},events:xt(ke(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??i,e,{id:e.id.toString()})}function Gi(e,t,n,o){const r=typeof e=="string"?e:e.id,i=new Set,a=o==="source"?"target":"source";for(const l of n)l[a]===r&&i.add(l[o]);return t.filter(l=>i.has(l.id))}function cd(...e){if(e.length===3){const[i,a,l]=e;return Gi(i,a,l,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>st(i)&&i.source===o).map(i=>n.find(a=>pt(a)&&a.id===i.target))}function dd(...e){if(e.length===3){const[i,a,l]=e;return Gi(i,a,l,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>st(i)&&i.target===o).map(i=>n.find(a=>pt(a)&&a.id===i.source))}function Hi({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function fd(e,t){return t.some(n=>st(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Yi({x:e,y:t},{x:n,y:o,zoom:r}){return{x:e*r+n,y:t*r+o}}function yn({x:e,y:t},{x:n,y:o,zoom:r},i=!1,[a,l]=[1,1]){const s={x:(e-n)/r,y:(t-o)/r};return i?{x:a*Math.round(s.x/a),y:l*Math.round(s.y/l)}:s}function hd(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Xi({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function pd({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function ji(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=hd(t,Xi({...o.computedPosition,...o.dimensions}))}return pd(t)}function Wi(e,t,n={x:0,y:0,zoom:1},o=!1,r=!1){const i={...yn(t,n),width:t.width/n.zoom,height:t.height/n.zoom},a=[];for(const l of e){const{dimensions:s,selectable:u=!0,hidden:c=!1}=l,d=s.width??l.width??null,p=s.height??l.height??null;if(r&&!u||c)continue;const f=yo(i,mo(l)),g=d===null||p===null,_=o&&f>0,w=(d??0)*(p??0);(g||_||f>=w||l.dragging)&&a.push(l)}return a}function Ui(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function dr(e,t,n,o,r,i=.1,a={x:0,y:0}){const l=t/(e.width*(1+i)),s=n/(e.height*(1+i)),u=Math.min(l,s),c=wt(u,o,r),d=e.x+e.width/2,p=e.y+e.height/2,f=t/2-d*c+(a.x??0),g=n/2-p*c+(a.y??0);return{x:f,y:g,zoom:c}}function gd(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function Zi(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:Zi(n,t):!1}function jt(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function fr(e,t,n){return e<t?wt(Math.abs(e-t),1,t)/t:e>n?-wt(Math.abs(e-n),1,t)/t:0}function Ki(e,t,n=15,o=40){const r=fr(e.x,o,t.width-o)*n,i=fr(e.y,o,t.height-o)*n;return[r,i]}function Hn(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let r={};if(typeof t.style=="function"?r={...t.style(t)}:t.style&&(r={...t.style}),r.width=r.width??`${t.dimensions.width}px`,r.height=r.height??`${t.dimensions.height}px`,n>0)if(typeof r.width=="string"){const i=Number(r.width.replace("px",""));r.width=`${i+n}px`}else r.width+=n;if(o>0)if(typeof r.height=="string"){const i=Number(r.height.replace("px",""));r.height=`${i+o}px`}else r.height+=o;if(e.position.x<0){const i=Math.abs(e.position.x);if(t.position.x=t.position.x-i,typeof r.width=="string"){const a=Number(r.width.replace("px",""));r.width=`${a+i}px`}else r.width+=i;e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);if(t.position.y=t.position.y-i,typeof r.height=="string"){const a=Number(r.height.replace("px",""));r.height=`${a+i}px`}else r.height+=i;e.position.y=0}t.dimensions.width=Number(r.width.toString().replace("px","")),t.dimensions.height=Number(r.height.toString().replace("px","")),typeof t.style=="function"?t.style=i=>{const a=t.style;return{...a(i),...r}}:t.style={...t.style,...r}}}}function hr(e,t){var n,o;const r=e.filter(a=>a.type==="add"||a.type==="remove");for(const a of r)if(a.type==="add")t.findIndex(s=>s.id===a.item.id)===-1&&t.push(a.item);else if(a.type==="remove"){const l=t.findIndex(s=>s.id===a.id);l!==-1&&t.splice(l,1)}const i=t.map(a=>a.id);for(const a of t)for(const l of e)if(l.id===a.id)switch(l.type){case"select":a.selected=l.selected;break;case"position":if(Rt(a)&&(typeof l.position<"u"&&(a.position=l.position),typeof l.dragging<"u"&&(a.dragging=l.dragging),a.expandParent&&a.parentNode)){const s=t[i.indexOf(a.parentNode)];s&&Rt(s)&&Hn(a,s)}break;case"dimensions":if(Rt(a)&&(typeof l.dimensions<"u"&&(a.dimensions=l.dimensions),typeof l.updateStyle<"u"&&l.updateStyle&&(a.style={...a.style||{},width:`${(n=l.dimensions)==null?void 0:n.width}px`,height:`${(o=l.dimensions)==null?void 0:o.height}px`}),typeof l.resizing<"u"&&(a.resizing=l.resizing),a.expandParent&&a.parentNode)){const s=t[i.indexOf(a.parentNode)];s&&Rt(s)&&(!!s.dimensions.width&&!!s.dimensions.height?Hn(a,s):Qe(()=>{Hn(a,s)}))}break}return t}function nt(e,t){return{id:e,type:"select",selected:t}}function pr(e){return{item:e,type:"add"}}function gr(e){return{id:e,type:"remove"}}function vr(e,t,n,o,r){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:r||null,type:"remove"}}function rt(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const a=t.has(r);!(i.selected===void 0&&!a)&&i.selected!==a&&(n&&(i.selected=a),o.push(nt(i.id,a)))}return o}function F(e){const t=new Set;let n=!1;const o=()=>t.size>0;e&&(n=!0,t.add(e));const r=l=>{t.delete(l)};return{on:l=>{e&&n&&t.delete(e),t.add(l);const s=()=>{r(l),e&&n&&t.add(e)};return Sn(s),{off:s}},off:r,trigger:l=>Promise.all(Array.from(t).map(s=>s(l))),hasListeners:o,fns:t}}function mr(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function vd(e,t,n,o,r){var i,a;const l=[];for(const s of e)(s.selected||s.id===r)&&(!s.parentNode||!Zi(s,o))&&(s.draggable||t&&typeof s.draggable>"u")&&l.push(xt({id:s.id,position:s.position||{x:0,y:0},distance:{x:n.x-((i=s.computedPosition)==null?void 0:i.x)||0,y:n.y-((a=s.computedPosition)==null?void 0:a.y)||0},from:s.computedPosition,extent:s.extent,parentNode:s.parentNode,dimensions:s.dimensions,expandParent:s.expandParent}));return l}function Yn({id:e,dragItems:t,findNode:n}){const o=[];for(const r of t){const i=n(r.id);i&&o.push(i)}return[e?o.find(r=>r.id===e):o[0],o]}function qi(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function md(e,t,n){const[o,r,i,a]=typeof e!="string"?qi(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+a,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-r,n.computedPosition.y+n.dimensions.height-i]]:!1}function yd(e,t,n,o){let r=e.extent||n;if((r==="parent"||!Array.isArray(r)&&(r==null?void 0:r.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const i=md(r,e,o);i&&(r=i)}else t(new Oe(Ce.NODE_EXTENT_INVALID,e.id)),r=n;else if(Array.isArray(r)){const i=(o==null?void 0:o.computedPosition.x)||0,a=(o==null?void 0:o.computedPosition.y)||0;r=[[r[0][0]+i,r[0][1]+a],[r[1][0]+i,r[1][1]+a]]}else if(r!=="parent"&&(r!=null&&r.range)&&Array.isArray(r.range)){const[i,a,l,s]=qi(r.padding),u=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;r=[[r.range[0][0]+u+s,r.range[0][1]+c+i],[r.range[1][0]+u-a,r.range[1][1]+c-l]]}return r==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:r}function wd({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function $o(e,t,n,o,r){const i=wd(e.dimensions,yd(e,n,o,r)),a=Li(t,i);return{position:{x:a.x-((r==null?void 0:r.computedPosition.x)||0),y:a.y-((r==null?void 0:r.computedPosition.y)||0)},computedPosition:a}}function wn(e,t,n=Y.Left){const o=((t==null?void 0:t.x)??0)+e.computedPosition.x,r=((t==null?void 0:t.y)??0)+e.computedPosition.y,{width:i,height:a}=t??Ed(e);switch((t==null?void 0:t.position)??n){case Y.Top:return{x:o+i/2,y:r};case Y.Right:return{x:o+i,y:r+a/2};case Y.Bottom:return{x:o+i/2,y:r+a};case Y.Left:return{x:o,y:r+a/2}}}function yr(e=[],t){return e.length&&(t?e.find(n=>n.id===t):e[0])||null}function _d({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:a,height:l,viewport:s}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Xi({x:(0-s.x)/s.zoom,y:(0-s.y)/s.zoom,width:a/s.zoom,height:l/s.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),p=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*p)>0}function bd(e,t,n=!1){const o=typeof e.zIndex=="number";let r=o?e.zIndex:0;const i=t(e.source),a=t(e.target);return!i||!a?0:(n&&(r=o?e.zIndex:Math.max(i.computedPosition.z||0,a.computedPosition.z||0)),r)}var Ce=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Ce||{});const wr={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class Oe extends Error{constructor(t,...n){var o;super((o=wr[t])==null?void 0:o.call(wr,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function Po(e){return"clientX"in e}function at(e,t){var n,o;const r=Po(e),i=r?e.clientX:(n=e.touches)==null?void 0:n[0].clientX,a=r?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}}const _n=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Ed(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function Qi(){return{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}}function Xn(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function _r(e,t,n,o){const r=[];for(const i of t[n]||[])if(`${e.id}-${i.id}-${n}`!==o){const{x:a,y:l}=wn(e,i);r.push({id:i.id||null,type:n,nodeId:e.id,x:a,y:l})}return r}function xd(e,t,n,o,r,i){const{x:a,y:l}=at(e),u=t.elementsFromPoint(a,l).find(g=>g.classList.contains("vue-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const _=Do(void 0,u),w=u.getAttribute("data-handleid"),E=i({nodeId:g,id:w,type:_});if(E){const v=r.find(I=>I.nodeId===g&&I.type===_&&I.id===w);return{handle:{id:w,type:_,nodeId:g,x:(v==null?void 0:v.x)||n.x,y:(v==null?void 0:v.y)||n.y},validHandleResult:E}}}}let c=[],d=Number.POSITIVE_INFINITY;for(const g of r){const _=Math.sqrt((g.x-n.x)**2+(g.y-n.y)**2);if(_<=o){const w=i(g);_<=d&&(_<d?c=[{handle:g,validHandleResult:w}]:_===d&&c.push({handle:g,validHandleResult:w}),d=_)}}if(!c.length)return{handle:null,validHandleResult:Qi()};if(c.length===1)return c[0];const p=c.some(({validHandleResult:g})=>g.isValid),f=c.some(({handle:g})=>g.type==="target");return c.find(({handle:g,validHandleResult:_})=>f?g.type==="target":p?_.isValid:!0)||c[0]}function br(e,t,n,o,r,i,a,l,s,u,c){const d=i==="target",p=l.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:f,y:g}=at(e),_=l.elementFromPoint(f,g),w=_!=null&&_.classList.contains("vue-flow__handle")?_:p,E=Qi();if(w){E.handleDomNode=w;const v=Do(void 0,w),I=w.getAttribute("data-nodeid"),S=w.getAttribute("data-handleid"),A=w.classList.contains("connectable"),R=w.classList.contains("connectableend"),T={source:d?I:o,sourceHandle:d?S:r,target:d?o:I,targetHandle:d?r:S};E.connection=T,A&&R&&(n===yt.Strict?d&&v==="source"||!d&&v==="target":I!==o||S!==r)&&(E.isValid=a(T,{edges:s,nodes:u,sourceNode:c(T.source),targetNode:c(T.target)}),E.endHandle={nodeId:I,handleId:S,type:v,position:E.isValid?w.getAttribute("data-handlepos"):null})}return E}function Sd({nodes:e,nodeId:t,handleId:n,handleType:o}){const r=[];for(let i=0;i<e.length;i++){const a=e[i],{handleBounds:l}=a;let s=[],u=[];l&&(s=_r(a,l,"source",`${t}-${n}-${o}`),u=_r(a,l,"target",`${t}-${n}-${o}`)),r.push(...s,...u)}return r}function Do(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Nd(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const kd=["production","prod"];function On(e,...t){Ji()&&console.warn(`[Vue Flow]: ${e}`,...t)}function Ji(){return!kd.includes("production")}function Er(e,t,n,o){const r=t.querySelectorAll(`.vue-flow__handle${e}`);return Array.from(r).map(a=>{const l=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(l.left-n.left)/o,y:(l.top-n.top)/o,...Mn(a)}})}function wo(e,t,n,o,r,i=!1,a){r.value=!1,e.selected?(i||e.selected&&t)&&(o([e]),Qe(()=>{a.blur()})):n([e])}function ke(e){return typeof D(e)<"u"}function Cd(e,t,n,o){if(!e||!e.source||!e.target)return n(new Oe(Ce.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let r;return st(e)?r=e:r={...e,id:Hi(e)},r=Fi(r,void 0,o),fd(r,t)?!1:r}function Id(e,t,n,o,r,i){if(!t.source||!t.target)return i(new Oe(Ce.EDGE_INVALID,e.id)),!1;const a=o(e.id);if(!a)return i(new Oe(Ce.EDGE_NOT_FOUND,e.id)),!1;const{id:l,...s}=e,u={...s,id:r?Hi(t):l,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(a),1,u),u}function xr(e,t,n){const o={},r=[];for(let i=0;i<e.length;++i){const a=e[i];if(!pt(a)){n(new Oe(Ce.NODE_INVALID,a==null?void 0:a.id)||`[ID UNKNOWN|INDEX ${i}]`);continue}const l=ud(a,t(a.id),a.parentNode);a.parentNode&&(o[a.parentNode]=!0),r[i]=l}for(const i of r){const a=t(i.parentNode)||r.find(l=>l.id===i.parentNode);i.parentNode&&!a&&n(new Oe(Ce.NODE_MISSING_PARENT,i.id,i.parentNode)),(i.parentNode||o[i.id])&&(o[i.id]&&(i.isParent=!0),a&&(a.isParent=!0))}return r}function Sr(e,t){e.clear();for(const n of t){const{id:o,source:r,target:i,sourceHandle:a=null,targetHandle:l=null}=n,s=`${r}-source-${a}`,u=`${i}-target-${l}`,c=e.get(s)||new Map,d=e.get(u)||new Map,p=xt({edgeId:o,source:r,target:i,sourceHandle:a,targetHandle:l});e.set(s,c.set(`${i}-${l}`,p)),e.set(u,d.set(`${r}-${a}`,p))}}function Nr(e,t,n,o,r,i,a,l){const s=[];for(const u of e){const c=st(u)?u:Cd(u,l,r,i);if(!c)continue;const d=n(c.source),p=n(c.target);if(!d||!p){r(new Oe(Ce.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){r(new Oe(Ce.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!p){r(new Oe(Ce.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:l,nodes:a,sourceNode:d,targetNode:p})){r(new Oe(Ce.EDGE_INVALID,c.id));continue}const f=o(c.id);s.push({...Fi(c,f,i),sourceNode:d,targetNode:p})}return s}const kr=Symbol("vueFlow"),ea=Symbol("nodeId"),ta=Symbol("nodeRef"),Md=Symbol("edgeId"),Od=Symbol("edgeRef"),Tn=Symbol("slots");function na(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:r,nodes:i,nodeExtent:a,nodeDragThreshold:l,viewport:s,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:d,panBy:p,findNode:f,multiSelectionActive:g,nodesSelectionActive:_,selectNodesOnDrag:w,removeSelectedElements:E,addSelectedNodes:v,updateNodePositions:I,emits:S}=Se(),{onStart:A,onDrag:R,onStop:T,onClick:X,el:U,disabled:$,id:b,selectable:ee,dragHandle:ne}=e,m=ce(!1);let C=[],N,M=null,V={x:void 0,y:void 0},P={x:0,y:0},B=null,G=!1,oe=0,j=!1;const L=Pd(),K=({x:Z,y:Q})=>{V={x:Z,y:Q};let z=!1;if(C=C.map(h=>{const y={x:Z-h.distance.x,y:Q-h.distance.y};n.value&&(y.x=o.value[0]*Math.round(y.x/o.value[0]),y.y=o.value[1]*Math.round(y.y/o.value[1]));const{computedPosition:k}=$o(h,y,S.error,a.value,h.parentNode?f(h.parentNode):void 0);return z=z||h.position.x!==k.x||h.position.y!==k.y,h.position=k,h}),!!z&&(I(C,!0,!0),m.value=!0,B)){const[h,y]=Yn({id:b,dragItems:C,findNode:f});R({event:B,node:h,nodes:y})}},fe=()=>{if(!M)return;const[Z,Q]=Ki(P,M,c.value);if(Z!==0||Q!==0){const z={x:(V.x??0)-Z/s.value.zoom,y:(V.y??0)-Q/s.value.zoom};p({x:Z,y:Q})&&K(z)}oe=requestAnimationFrame(fe)},se=(Z,Q)=>{G=!0;const z=f(b);!w.value&&!g.value&&z&&(z.selected||E()),z&&pe(ee)&&w.value&&wo(z,g.value,v,E,_,!1,Q);const h=L(Z);if(V=h,C=vd(i.value,d.value,h,f,b),C.length){const[y,k]=Yn({id:b,dragItems:C,findNode:f});A({event:Z.sourceEvent,node:y,nodes:k})}},he=(Z,Q)=>{var z;Z.sourceEvent.type==="touchmove"&&Z.sourceEvent.touches.length>1||(l.value===0&&se(Z,Q),V=L(Z),M=((z=t.value)==null?void 0:z.getBoundingClientRect())||null,P=at(Z.sourceEvent,M))},re=(Z,Q)=>{const z=L(Z);if(!j&&G&&u.value&&(j=!0,fe()),!G){const h=z.xSnapped-(V.x??0),y=z.ySnapped-(V.y??0);Math.sqrt(h*h+y*y)>l.value&&se(Z,Q)}(V.x!==z.xSnapped||V.y!==z.ySnapped)&&C.length&&G&&(B=Z.sourceEvent,P=at(Z.sourceEvent,M),K(z))},le=Z=>{if(!m.value&&!g.value&&(X==null||X(Z.sourceEvent)),m.value=!1,j=!1,G=!1,V={x:void 0,y:void 0},cancelAnimationFrame(oe),C.length){I(C,!1,!1);const[Q,z]=Yn({id:b,dragItems:C,findNode:f});T({event:Z.sourceEvent,node:Q,nodes:z})}};return me([()=>pe($),U],([Z,Q],z,h)=>{if(Q){const y=Le(Q);Z||(N=hu().on("start",k=>he(k,Q)).on("drag",k=>re(k,Q)).on("end",k=>le(k)).filter(k=>{const x=k.target,O=pe(ne);return!k.button&&(!r.value||!mr(x,`.${r.value}`,Q)&&(!O||mr(x,O,Q)))}),y.call(N)),h(()=>{y.on(".drag",null),N&&(N.on("start",null),N.on("drag",null),N.on("end",null))})}}),m}function Td(){return{doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),updateStart:F(),update:F(),updateEnd:F()}}function $d(e,t){const n=Td();return n.doubleClick.on(o=>{var r,i;t.edgeDoubleClick(o),(i=(r=e.events)==null?void 0:r.doubleClick)==null||i.call(r,o)}),n.click.on(o=>{var r,i;t.edgeClick(o),(i=(r=e.events)==null?void 0:r.click)==null||i.call(r,o)}),n.mouseEnter.on(o=>{var r,i;t.edgeMouseEnter(o),(i=(r=e.events)==null?void 0:r.mouseEnter)==null||i.call(r,o)}),n.mouseMove.on(o=>{var r,i;t.edgeMouseMove(o),(i=(r=e.events)==null?void 0:r.mouseMove)==null||i.call(r,o)}),n.mouseLeave.on(o=>{var r,i;t.edgeMouseLeave(o),(i=(r=e.events)==null?void 0:r.mouseLeave)==null||i.call(r,o)}),n.contextMenu.on(o=>{var r,i;t.edgeContextMenu(o),(i=(r=e.events)==null?void 0:r.contextMenu)==null||i.call(r,o)}),n.updateStart.on(o=>{var r,i;t.edgeUpdateStart(o),(i=(r=e.events)==null?void 0:r.updateStart)==null||i.call(r,o)}),n.update.on(o=>{var r,i;t.edgeUpdate(o),(i=(r=e.events)==null?void 0:r.update)==null||i.call(r,o)}),n.updateEnd.on(o=>{var r,i;t.edgeUpdateEnd(o),(i=(r=e.events)==null?void 0:r.updateEnd)==null||i.call(r,o)}),Object.entries(n).reduce((o,[r,i])=>(o.emit[r]=i.trigger,o.on[r]=i.on,o),{emit:{},on:{}})}function Pd(){const{viewport:e,snapGrid:t,snapToGrid:n}=Se();return({sourceEvent:o})=>{const r=o.touches?o.touches[0].clientX:o.clientX,i=o.touches?o.touches[0].clientY:o.clientY,a={x:(r-e.value.x)/e.value.zoom,y:(i-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(a.x/t.value[0]):a.x,ySnapped:n.value?t.value[1]*Math.round(a.y/t.value[1]):a.y,...a}}}function on(){return!0}function oa({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:r,onEdgeUpdate:i,onEdgeUpdateEnd:a}){const{vueFlowRef:l,connectionMode:s,connectionRadius:u,connectOnClick:c,connectionClickStartHandle:d,nodesConnectable:p,autoPanOnConnect:f,autoPanSpeed:g,findNode:_,panBy:w,startConnection:E,updateConnection:v,endConnection:I,emits:S,viewport:A,edges:R,nodes:T,isValidConnection:X}=Se();let U=null,$=!1,b=null,ee=null;function ne(C){var N;const M=pe(n)==="target",V=Po(C),P=cr(C.target);if(V&&C.button===0||!V){let B=function(k){Q=at(k,le);const{handle:x,validHandleResult:O}=xd(k,P,yn(Q,A.value,!1,[1,1]),u.value,h,q=>br(k,q,s.value,pe(t),pe(e),M?"target":"source",j,P,R.value,T.value,_));if(L=x,z||(y(),z=!0),U=O.connection,$=O.isValid,b=O.handleDomNode,!($&&L&&(ee!=null&&ee.endHandle)&&O.endHandle&&ee.endHandle.type===O.endHandle.type&&ee.endHandle.nodeId===O.endHandle.nodeId&&ee.endHandle.handleId===O.endHandle.handleId)){if(v(L&&$?Yi({x:L.x,y:L.y},A.value):Q,O.endHandle,Nd(!!L,$)),ee=O,!L&&!$&&!b)return Xn(Z);U&&U.source!==U.target&&b&&(Xn(Z),Z=b,b.classList.add("connecting","vue-flow__handle-connecting"),b.classList.toggle("valid",$),b.classList.toggle("vue-flow__handle-valid",$))}},G=function(k){(L||b)&&U&&$&&(i?i(k,U):S.connect(U)),S.connectEnd(k),r&&(a==null||a(k)),Xn(Z),cancelAnimationFrame(K),I(k),z=!1,$=!1,U=null,b=null,P.removeEventListener("mousemove",B),P.removeEventListener("mouseup",G),P.removeEventListener("touchmove",B),P.removeEventListener("touchend",G)};const oe=_(pe(t));let j=pe(o)||X.value||on;!j&&oe&&(j=(M?oe.isValidSourcePos:oe.isValidTargetPos)||on);let L,K=0;const{x:fe,y:se}=at(C),he=P==null?void 0:P.elementFromPoint(fe,se),re=Do(pe(r),he),le=(N=l.value)==null?void 0:N.getBoundingClientRect();if(!le||!re)return;let Z,Q=at(C,le),z=!1;const h=Sd({nodes:T.value,nodeId:pe(t),handleId:pe(e),handleType:re}),y=()=>{if(!f.value)return;const[k,x]=Ki(Q,le,g.value);w({x:k,y:x}),K=requestAnimationFrame(y)};E({nodeId:pe(t),handleId:pe(e),type:re,position:(he==null?void 0:he.getAttribute("data-handlepos"))||Y.Top},{x:fe-le.left,y:se-le.top}),S.connectStart({event:C,nodeId:pe(t),handleId:pe(e),handleType:re}),P.addEventListener("mousemove",B),P.addEventListener("mouseup",G),P.addEventListener("touchmove",B),P.addEventListener("touchend",G)}}function m(C){if(!c.value)return;const N=pe(n)==="target";if(!d.value)S.clickConnectStart({event:C,nodeId:pe(t),handleId:pe(e)}),E({nodeId:pe(t),type:pe(n),handleId:pe(e)},void 0,!0);else{let M=pe(o)||X.value||on;const V=_(pe(t));if(!M&&V&&(M=(N?V.isValidSourcePos:V.isValidTargetPos)||on),V&&(typeof V.connectable>"u"?p.value:V.connectable)===!1)return;const P=cr(C.target),{connection:B,isValid:G}=br(C,{nodeId:pe(t),id:pe(e),type:pe(n)},s.value,d.value.nodeId,d.value.handleId||null,d.value.type,M,P,R.value,T.value,_),oe=B.source===B.target;G&&!oe&&S.connect(B),S.clickConnectEnd(C),I(C,!0)}}return{handlePointerDown:ne,handleClick:m}}function Dd(){return Tt(ea,"")}function ra(e){const t=e??Dd()??"",n=Tt(ta,ce(null)),{findNode:o,edges:r,emits:i}=Se(),a=o(t);return a||i.error(new Oe(Ce.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:a,parentNode:ae(()=>o(a.parentNode)),connectedEdges:ae(()=>Ui([a],r.value))}}function Ad(){return{doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),dragStart:F(),drag:F(),dragStop:F()}}function Vd(e,t){const n=Ad();return n.doubleClick.on(o=>{var r,i;t.nodeDoubleClick(o),(i=(r=e.events)==null?void 0:r.doubleClick)==null||i.call(r,o)}),n.click.on(o=>{var r,i;t.nodeClick(o),(i=(r=e.events)==null?void 0:r.click)==null||i.call(r,o)}),n.mouseEnter.on(o=>{var r,i;t.nodeMouseEnter(o),(i=(r=e.events)==null?void 0:r.mouseEnter)==null||i.call(r,o)}),n.mouseMove.on(o=>{var r,i;t.nodeMouseMove(o),(i=(r=e.events)==null?void 0:r.mouseMove)==null||i.call(r,o)}),n.mouseLeave.on(o=>{var r,i;t.nodeMouseLeave(o),(i=(r=e.events)==null?void 0:r.mouseLeave)==null||i.call(r,o)}),n.contextMenu.on(o=>{var r,i;t.nodeContextMenu(o),(i=(r=e.events)==null?void 0:r.contextMenu)==null||i.call(r,o)}),n.dragStart.on(o=>{var r,i;t.nodeDragStart(o),(i=(r=e.events)==null?void 0:r.dragStart)==null||i.call(r,o)}),n.drag.on(o=>{var r,i;t.nodeDrag(o),(i=(r=e.events)==null?void 0:r.drag)==null||i.call(r,o)}),n.dragStop.on(o=>{var r,i;t.nodeDragStop(o),(i=(r=e.events)==null?void 0:r.dragStop)==null||i.call(r,o)}),Object.entries(n).reduce((o,[r,i])=>(o.emit[r]=i.trigger,o.on[r]=i.on,o),{emit:{},on:{}})}function ia(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:r,snapToGrid:i,nodesDraggable:a,emits:l}=Se();return(s,u=!1)=>{const c=i.value?r.value[0]:5,d=i.value?r.value[1]:5,p=u?4:1,f=s.x*c*p,g=s.y*d*p,_=[];for(const w of e.value)if(w.draggable||a&&typeof w.draggable>"u"){const E={x:w.computedPosition.x+f,y:w.computedPosition.y+g},{computedPosition:v}=$o(w,E,l.error,t.value,w.parentNode?o(w.parentNode):void 0);_.push({id:w.id,position:v,from:w.position,distance:{x:s.x,y:s.y},dimensions:w.dimensions})}n(_,!0,!1)}}const jn=.1;function tt(){return On("Viewport not initialized yet."),Promise.resolve(!1)}const Rd={zoomIn:tt,zoomOut:tt,zoomTo:tt,fitView:tt,setCenter:tt,fitBounds:tt,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:tt,setTransform:tt,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function zd(e){function t(o,r){return new Promise(i=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleBy(Wn(e.d3Selection,r,()=>{i(!0)}),o):i(!1)})}function n(o,r,i,a){return new Promise(l=>{const{x:s,y:u}=Li({x:-o,y:-r},e.translateExtent),c=Ot.translate(-s,-u).scale(i);e.d3Selection&&e.d3Zoom?e.d3Zoom.transform(Wn(e.d3Selection,a,()=>{l(!0)}),c):l(!1)})}return ae(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:r=>t(1.2,r==null?void 0:r.duration),zoomOut:r=>t(1/1.2,r==null?void 0:r.duration),zoomTo:(r,i)=>new Promise(a=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleTo(Wn(e.d3Selection,i==null?void 0:i.duration,()=>{a(!0)}),r):a(!1)}),setViewport:(r,i)=>n(r.x,r.y,r.zoom,i==null?void 0:i.duration),setTransform:(r,i)=>n(r.x,r.y,r.zoom,i==null?void 0:i.duration),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(r={padding:jn,includeHiddenNodes:!1,duration:0})=>{var i,a;const l=[];for(const p of e.nodes)p.dimensions.width&&p.dimensions.height&&((r==null?void 0:r.includeHiddenNodes)||!p.hidden)&&(!((i=r.nodes)!=null&&i.length)||(a=r.nodes)!=null&&a.length&&r.nodes.includes(p.id))&&l.push(p);if(!l.length)return Promise.resolve(!1);const s=ji(l),{x:u,y:c,zoom:d}=dr(s,e.dimensions.width,e.dimensions.height,r.minZoom??e.minZoom,r.maxZoom??e.maxZoom,r.padding??jn,r.offset);return n(u,c,d,r==null?void 0:r.duration)},setCenter:(r,i,a)=>{const l=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:e.maxZoom,s=e.dimensions.width/2-r*l,u=e.dimensions.height/2-i*l;return n(s,u,l,a==null?void 0:a.duration)},fitBounds:(r,i={padding:jn})=>{const{x:a,y:l,zoom:s}=dr(r,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,i.padding);return n(a,l,s,i==null?void 0:i.duration)},project:r=>yn(r,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:a}=e.vueFlowRef.getBoundingClientRect(),l={x:r.x-i,y:r.y-a};return yn(l,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:a}=e.vueFlowRef.getBoundingClientRect(),l={x:r.x+i,y:r.y+a};return Yi(l,e.viewport)}return{x:0,y:0}}}:Rd)}function Wn(e,t=0,n){return e.transition().duration(t).on("end",n)}function Bd(e,t,n){const o=ti(!0);return o.run(()=>{const r=()=>{o.run(()=>{let _,w,E=!!(n.nodes.value.length||n.edges.value.length);_=Et([e.modelValue,()=>{var v,I;return(I=(v=e.modelValue)==null?void 0:v.value)==null?void 0:I.length}],([v])=>{v&&Array.isArray(v)&&(w==null||w.pause(),n.setElements(v),!w&&!E&&v.length?E=!0:w==null||w.resume())}),w=Et([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([v,I])=>{var S;(S=e.modelValue)!=null&&S.value&&Array.isArray(e.modelValue.value)&&(_==null||_.pause(),e.modelValue.value=[...v,...I],Qe(()=>{_==null||_.resume()}))},{immediate:E}),ln(()=>{_==null||_.stop(),w==null||w.stop()})})},i=()=>{o.run(()=>{let _,w,E=!!n.nodes.value.length;_=Et([e.nodes,()=>{var v,I;return(I=(v=e.nodes)==null?void 0:v.value)==null?void 0:I.length}],([v])=>{v&&Array.isArray(v)&&(w==null||w.pause(),n.setNodes(v),!w&&!E&&v.length?E=!0:w==null||w.resume())}),w=Et([n.nodes,()=>n.nodes.value.length],([v])=>{var I;(I=e.nodes)!=null&&I.value&&Array.isArray(e.nodes.value)&&(_==null||_.pause(),e.nodes.value=[...v],Qe(()=>{_==null||_.resume()}))},{immediate:E}),ln(()=>{_==null||_.stop(),w==null||w.stop()})})},a=()=>{o.run(()=>{let _,w,E=!!n.edges.value.length;_=Et([e.edges,()=>{var v,I;return(I=(v=e.edges)==null?void 0:v.value)==null?void 0:I.length}],([v])=>{v&&Array.isArray(v)&&(w==null||w.pause(),n.setEdges(v),!w&&!E&&v.length?E=!0:w==null||w.resume())}),w=Et([n.edges,()=>n.edges.value.length],([v])=>{var I;(I=e.edges)!=null&&I.value&&Array.isArray(e.edges.value)&&(_==null||_.pause(),e.edges.value=[...v],Qe(()=>{_==null||_.resume()}))},{immediate:E}),ln(()=>{_==null||_.stop(),w==null||w.stop()})})},l=()=>{o.run(()=>{me(()=>t.maxZoom,()=>{t.maxZoom&&ke(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},s=()=>{o.run(()=>{me(()=>t.minZoom,()=>{t.minZoom&&ke(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{me(()=>t.translateExtent,()=>{t.translateExtent&&ke(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{me(()=>t.nodeExtent,()=>{t.nodeExtent&&ke(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{o.run(()=>{me(()=>t.applyDefault,()=>{ke(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},p=()=>{o.run(()=>{const _=async w=>{let E=w;typeof t.autoConnect=="function"&&(E=await t.autoConnect(w)),E!==!1&&n.addEdges([E])};me(()=>t.autoConnect,()=>{ke(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),me(n.autoConnect,(w,E,v)=>{w?n.onConnect(_):n.hooks.value.connect.off(_),v(()=>{n.hooks.value.connect.off(_)})},{immediate:!0})})},f=()=>{const _=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const w of Object.keys(t)){const E=w;if(!_.includes(E)){const v=xe(()=>t[E]),I=n[E];xo(I)&&o.run(()=>{me(v,S=>{ke(S)&&(I.value=S)},{immediate:!0})})}}};(()=>{r(),i(),a(),s(),l(),u(),c(),d(),p(),f()})()}),()=>o.stop()}function Ld(){return{edgesChange:F(),nodesChange:F(),nodeDoubleClick:F(),nodeClick:F(),nodeMouseEnter:F(),nodeMouseMove:F(),nodeMouseLeave:F(),nodeContextMenu:F(),nodeDragStart:F(),nodeDrag:F(),nodeDragStop:F(),nodesInitialized:F(),miniMapNodeClick:F(),miniMapNodeDoubleClick:F(),miniMapNodeMouseEnter:F(),miniMapNodeMouseMove:F(),miniMapNodeMouseLeave:F(),connect:F(),connectStart:F(),connectEnd:F(),clickConnectStart:F(),clickConnectEnd:F(),paneReady:F(),init:F(),move:F(),moveStart:F(),moveEnd:F(),selectionDragStart:F(),selectionDrag:F(),selectionDragStop:F(),selectionContextMenu:F(),selectionStart:F(),selectionEnd:F(),viewportChangeStart:F(),viewportChange:F(),viewportChangeEnd:F(),paneScroll:F(),paneClick:F(),paneContextMenu:F(),paneMouseEnter:F(),paneMouseMove:F(),paneMouseLeave:F(),edgeContextMenu:F(),edgeMouseEnter:F(),edgeMouseMove:F(),edgeMouseLeave:F(),edgeDoubleClick:F(),edgeClick:F(),edgeUpdateStart:F(),edgeUpdate:F(),edgeUpdateEnd:F(),updateNodeInternals:F(),error:F(e=>On(e.message))}}function Fd(e,t){qa(()=>{for(const[n,o]of Object.entries(t.value)){const r=i=>{e(n,i)};o.fns.add(r),Sn(()=>{o.off(r)})}})}function aa(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:To.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Bt.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:ct.Bezier,style:{}},connectionMode:yt.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:_n()?"Meta":"Control",zoomActivationKeyCode:_n()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Ld(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const Gd=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function Hd(e,t,n){const o=zd(e),r=h=>{const y=h??[];e.hooks.updateNodeInternals.trigger(y)},i=h=>dd(h,e.nodes,e.edges),a=h=>cd(h,e.nodes,e.edges),l=h=>Ui(h,e.edges),s=({id:h,type:y,nodeId:k})=>{var x;return Array.from(((x=e.connectionLookup.get(`${k}-${y}-${h??null}`))==null?void 0:x.values())??[])},u=h=>{if(h)return t.value.get(h)},c=h=>{if(h)return n.value.get(h)},d=(h,y,k)=>{var x,O;const q=[];for(const W of h){const ie={id:W.id,type:"position",dragging:k,from:W.from};if(y&&(ie.position=W.position,W.parentNode)){const de=u(W.parentNode);ie.position={x:ie.position.x-(((x=de==null?void 0:de.computedPosition)==null?void 0:x.x)??0),y:ie.position.y-(((O=de==null?void 0:de.computedPosition)==null?void 0:O.y)??0)}}q.push(ie)}q!=null&&q.length&&e.hooks.nodesChange.trigger(q)},p=h=>{if(!e.vueFlowRef)return;const y=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!y)return;const k=window.getComputedStyle(y),{m22:x}=new window.DOMMatrixReadOnly(k.transform),O=[];for(let q=0;q<h.length;++q){const W=h[q],ie=u(W.id);if(ie){const de=Mn(W.nodeElement);if(!!(de.width&&de.height&&(ie.dimensions.width!==de.width||ie.dimensions.height!==de.height||W.forceUpdate))){const ve=W.nodeElement.getBoundingClientRect();ie.dimensions=de,ie.handleBounds.source=Er(".source",W.nodeElement,ve,x),ie.handleBounds.target=Er(".target",W.nodeElement,ve,x),O.push({id:ie.id,type:"dimensions",dimensions:de})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),O.length&&e.hooks.nodesChange.trigger(O)},f=(h,y)=>{const k=new Set,x=new Set;for(const W of h)pt(W)?k.add(W.id):st(W)&&x.add(W.id);const O=rt(t.value,k,!0),q=rt(n.value,x);if(e.multiSelectionActive){for(const W of k)O.push(nt(W,y));for(const W of x)q.push(nt(W,y))}O.length&&e.hooks.nodesChange.trigger(O),q.length&&e.hooks.edgesChange.trigger(q)},g=h=>{if(e.multiSelectionActive){const y=h.map(k=>nt(k.id,!0));e.hooks.nodesChange.trigger(y);return}e.hooks.nodesChange.trigger(rt(t.value,new Set(h.map(y=>y.id)),!0)),e.hooks.edgesChange.trigger(rt(n.value))},_=h=>{if(e.multiSelectionActive){const y=h.map(k=>nt(k.id,!0));e.hooks.edgesChange.trigger(y);return}e.hooks.edgesChange.trigger(rt(n.value,new Set(h.map(y=>y.id)))),e.hooks.nodesChange.trigger(rt(t.value,new Set,!0))},w=h=>{f(h,!0)},E=h=>{const k=(h||e.nodes).map(x=>(x.selected=!1,nt(x.id,!1)));e.hooks.nodesChange.trigger(k)},v=h=>{const k=(h||e.edges).map(x=>(x.selected=!1,nt(x.id,!1)));e.hooks.edgesChange.trigger(k)},I=h=>{if(!h||!h.length)return f([],!1);const y=h.reduce((k,x)=>{const O=nt(x.id,!1);return pt(x)?k.nodes.push(O):k.edges.push(O),k},{nodes:[],edges:[]});y.nodes.length&&e.hooks.nodesChange.trigger(y.nodes),y.edges.length&&e.hooks.edgesChange.trigger(y.edges)},S=h=>{var y;(y=e.d3Zoom)==null||y.scaleExtent([h,e.maxZoom]),e.minZoom=h},A=h=>{var y;(y=e.d3Zoom)==null||y.scaleExtent([e.minZoom,h]),e.maxZoom=h},R=h=>{var y;(y=e.d3Zoom)==null||y.translateExtent(h),e.translateExtent=h},T=h=>{e.nodeExtent=h,r()},X=h=>{var y;(y=e.d3Zoom)==null||y.clickDistance(h)},U=h=>{e.nodesDraggable=h,e.nodesConnectable=h,e.elementsSelectable=h},$=h=>{const y=h instanceof Function?h(e.nodes):h;!e.initialized&&!y.length||(e.nodes=xr(y,u,e.hooks.error.trigger))},b=h=>{const y=h instanceof Function?h(e.edges):h;if(!e.initialized&&!y.length)return;const k=Nr(y,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);Sr(e.connectionLookup,k),e.edges=k},ee=h=>{const y=h instanceof Function?h([...e.nodes,...e.edges]):h;!e.initialized&&!y.length||($(y.filter(pt)),b(y.filter(st)))},ne=h=>{let y=h instanceof Function?h(e.nodes):h;y=Array.isArray(y)?y:[y];const k=xr(y,u,e.hooks.error.trigger),x=[];for(const O of k)x.push(pr(O));x.length&&e.hooks.nodesChange.trigger(x)},m=h=>{let y=h instanceof Function?h(e.edges):h;y=Array.isArray(y)?y:[y];const k=Nr(y,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),x=[];for(const O of k)x.push(pr(O));x.length&&e.hooks.edgesChange.trigger(x)},C=(h,y=!0,k=!1)=>{const x=h instanceof Function?h(e.nodes):h,O=Array.isArray(x)?x:[x],q=[],W=[];function ie(ge){const ve=l(ge);for(const be of ve)(!ke(be.deletable)||be.deletable)&&W.push(vr(be.id,be.source,be.target,be.sourceHandle,be.targetHandle))}function de(ge){const ve=[];for(const be of e.nodes)be.parentNode===ge&&ve.push(be);if(ve.length){for(const be of ve)q.push(gr(be.id));y&&ie(ve);for(const be of ve)de(be.id)}}for(const ge of O){const ve=typeof ge=="string"?u(ge):ge;ve&&(ke(ve.deletable)&&!ve.deletable||(q.push(gr(ve.id)),y&&ie([ve]),k&&de(ve.id)))}W.length&&e.hooks.edgesChange.trigger(W),q.length&&e.hooks.nodesChange.trigger(q)},N=h=>{const y=h instanceof Function?h(e.edges):h,k=Array.isArray(y)?y:[y],x=[];for(const O of k){const q=typeof O=="string"?c(O):O;q&&(ke(q.deletable)&&!q.deletable||x.push(vr(typeof O=="string"?O:O.id,q.source,q.target,q.sourceHandle,q.targetHandle)))}e.hooks.edgesChange.trigger(x)},M=(h,y,k=!0)=>Id(h,y,e.edges,c,k,e.hooks.error.trigger),V=(h,y,k={replace:!1})=>{const x=c(h);if(!x)return;const O=typeof y=="function"?y(x):y;x.data=k.replace?O:{...x.data,...O}},P=h=>hr(h,e.nodes),B=h=>{const y=hr(h,e.edges);return Sr(e.connectionLookup,y),y},G=(h,y,k={replace:!1})=>{const x=u(h);if(!x)return;const O=typeof y=="function"?y(x):y;k.replace?e.nodes.splice(e.nodes.indexOf(x),1,O):Object.assign(x,O)},oe=(h,y,k={replace:!1})=>{const x=u(h);if(!x)return;const O=typeof y=="function"?y(x):y;x.data=k.replace?O:{...x.data,...O}},j=(h,y,k=!1)=>{k?e.connectionClickStartHandle=h:e.connectionStartHandle=h,e.connectionEndHandle=null,e.connectionStatus=null,y&&(e.connectionPosition=y)},L=(h,y=null,k=null)=>{e.connectionStartHandle&&(e.connectionPosition=h,e.connectionEndHandle=y,e.connectionStatus=k)},K=(h,y)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,y?e.connectionClickStartHandle=null:e.connectionStartHandle=null},fe=h=>{const y=sd(h),k=y?null:Rt(h)?h:u(h.id);return!y&&!k?[null,null,y]:[y?h:mo(k),k,y]},se=(h,y=!0,k=e.nodes)=>{const[x,O,q]=fe(h);if(!x)return[];const W=[];for(const ie of k||e.nodes){if(!q&&(ie.id===O.id||!ie.computedPosition))continue;const de=mo(ie),ge=yo(de,x);(y&&ge>0||ge>=Number(x.width)*Number(x.height))&&W.push(ie)}return W},he=(h,y,k=!0)=>{const[x]=fe(h);if(!x)return!1;const O=yo(x,y);return k&&O>0||O>=Number(x.width)*Number(x.height)},re=h=>{const{viewport:y,dimensions:k,d3Zoom:x,d3Selection:O,translateExtent:q}=e;if(!x||!O||!h.x&&!h.y)return!1;const W=Ot.translate(y.x+h.x,y.y+h.y).scale(y.zoom),ie=[[0,0],[k.width,k.height]],de=x.constrain()(W,ie,q),ge=e.viewport.x!==de.x||e.viewport.y!==de.y||e.viewport.zoom!==de.k;return x.transform(O,de),ge},le=h=>{const y=h instanceof Function?h(e):h,k=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];ke(y.defaultEdgeOptions)&&(e.defaultEdgeOptions=y.defaultEdgeOptions);const x=y.modelValue||y.nodes||y.edges?[]:void 0;x&&(y.modelValue&&x.push(...y.modelValue),y.nodes&&x.push(...y.nodes),y.edges&&x.push(...y.edges),ee(x));const O=()=>{ke(y.maxZoom)&&A(y.maxZoom),ke(y.minZoom)&&S(y.minZoom),ke(y.translateExtent)&&R(y.translateExtent)};for(const q of Object.keys(y)){const W=q,ie=y[W];![...Gd,...k].includes(W)&&ke(ie)&&(e[W]=ie)}io(()=>e.d3Zoom).not.toBeNull().then(O),e.initialized||(e.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:p,setElements:ee,setNodes:$,setEdges:b,addNodes:ne,addEdges:m,removeNodes:C,removeEdges:N,findNode:u,findEdge:c,updateEdge:M,updateEdgeData:V,updateNode:G,updateNodeData:oe,applyEdgeChanges:B,applyNodeChanges:P,addSelectedElements:w,addSelectedNodes:g,addSelectedEdges:_,setMinZoom:S,setMaxZoom:A,setTranslateExtent:R,setNodeExtent:T,setPaneClickDistance:X,removeSelectedElements:I,removeSelectedNodes:E,removeSelectedEdges:v,startConnection:j,updateConnection:L,endConnection:K,setInteractive:U,setState:le,getIntersectingNodes:se,getIncomers:i,getOutgoers:a,getConnectedEdges:l,getHandleConnections:s,isNodeIntersecting:he,panBy:re,fitView:h=>o.value.fitView(h),zoomIn:h=>o.value.zoomIn(h),zoomOut:h=>o.value.zoomOut(h),zoomTo:(h,y)=>o.value.zoomTo(h,y),setViewport:(h,y)=>o.value.setViewport(h,y),setTransform:(h,y)=>o.value.setTransform(h,y),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(h,y,k)=>o.value.setCenter(h,y,k),fitBounds:(h,y)=>o.value.fitBounds(h,y),project:h=>o.value.project(h),screenToFlowCoordinate:h=>o.value.screenToFlowCoordinate(h),flowToScreenCoordinate:h=>o.value.flowToScreenCoordinate(h),toObject:()=>{const h=[],y=[];for(const k of e.nodes){const{computedPosition:x,handleBounds:O,selected:q,dimensions:W,isParent:ie,resizing:de,dragging:ge,events:ve,...be}=k;h.push(be)}for(const k of e.edges){const{selected:x,sourceNode:O,targetNode:q,events:W,...ie}=k;y.push(ie)}return JSON.parse(JSON.stringify({nodes:h,edges:y,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:h=>new Promise(y=>{const{nodes:k,edges:x,position:O,zoom:q,viewport:W}=h;if(k&&$(k),x&&b(x),W!=null&&W.x&&(W!=null&&W.y)||O){const ie=(W==null?void 0:W.x)||O[0],de=(W==null?void 0:W.y)||O[1],ge=(W==null?void 0:W.zoom)||q||e.viewport.zoom;return io(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:ie,y:de,zoom:ge}).then(()=>{y(!0)})})}else y(!0)}),updateNodeInternals:r,viewportHelper:o,$reset:()=>{const h=aa();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const y=Ot.translate(h.defaultViewport.x??0,h.defaultViewport.y??0).scale(wt(h.defaultViewport.zoom??1,h.minZoom,h.maxZoom)),k=e.viewportRef.getBoundingClientRect(),x=[[0,0],[k.width,k.height]],O=e.d3Zoom.constrain()(y,x,h.translateExtent);e.d3Zoom.transform(e.d3Selection,O)}le(h)},$destroy:()=>{}}}const Yd=["data-id","data-handleid","data-nodeid","data-handlepos"],Xd={name:"Handle",compatConfig:{MODE:3}},Xe=_e({...Xd,props:{id:{default:null},type:{},position:{default:()=>Y.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=ni(e,["position","connectable","connectableStart","connectableEnd","id"]),o=xe(()=>n.type??"source"),r=xe(()=>n.isValidConnection??null),{connectionStartHandle:i,connectionClickStartHandle:a,connectionEndHandle:l,vueFlowRef:s,nodesConnectable:u,noDragClassName:c,noPanClassName:d}=Se(),{id:p,node:f,nodeEl:g,connectedEdges:_}=ra(),w=ce(),E=xe(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),v=xe(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),I=xe(()=>{var $,b,ee,ne,m,C;return(($=i.value)==null?void 0:$.nodeId)===p&&((b=i.value)==null?void 0:b.handleId)===e.id&&((ee=i.value)==null?void 0:ee.type)===o.value||((ne=l.value)==null?void 0:ne.nodeId)===p&&((m=l.value)==null?void 0:m.handleId)===e.id&&((C=l.value)==null?void 0:C.type)===o.value}),S=xe(()=>{var $,b,ee;return(($=a.value)==null?void 0:$.nodeId)===p&&((b=a.value)==null?void 0:b.handleId)===e.id&&((ee=a.value)==null?void 0:ee.type)===o.value}),{handlePointerDown:A,handleClick:R}=oa({nodeId:p,handleId:e.id,isValidConnection:r,type:o}),T=ae(()=>typeof e.connectable=="string"&&e.connectable==="single"?!_.value.some($=>{const b=$[`${o.value}Handle`];return $[o.value]!==p?!1:b?b===e.id:!0}):typeof e.connectable=="number"?_.value.filter($=>{const b=$[`${o.value}Handle`];return $[o.value]!==p?!1:b?b===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(f,_.value):ke(e.connectable)?e.connectable:u.value);et(()=>{var $;if(!f.dimensions.width||!f.dimensions.height)return;const b=($=f.handleBounds[o.value])==null?void 0:$.find(V=>V.id===e.id);if(!s.value||b)return;const ee=s.value.querySelector(".vue-flow__transformationpane");if(!g.value||!w.value||!ee||!e.id)return;const ne=g.value.getBoundingClientRect(),m=w.value.getBoundingClientRect(),C=window.getComputedStyle(ee),{m22:N}=new window.DOMMatrixReadOnly(C.transform),M={id:e.id,position:e.position,x:(m.left-ne.left)/N,y:(m.top-ne.top)/N,...Mn(w.value)};f.handleBounds[o.value]=[...f.handleBounds[o.value]??[],M]}),ei(()=>{const $=f.handleBounds[o.value];$&&(f.handleBounds[o.value]=$.filter(b=>b.id!==e.id))});function X($){const b=Po($);T.value&&E.value&&(b&&$.button===0||!b)&&A($)}function U($){!p||!a.value&&!E.value||T.value&&R($)}return t({handleClick:R,handlePointerDown:A,onClick:U,onPointerDown:X}),($,b)=>(te(),ue("div",{ref_key:"handle",ref:w,"data-id":`${D(p)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":D(p),"data-handlepos":$.position,class:gt(["vue-flow__handle",[`vue-flow__handle-${$.position}`,`vue-flow__handle-${e.id}`,D(c),D(d),o.value,{connectable:T.value,connecting:S.value,connectablestart:E.value,connectableend:v.value,connectionindicator:T.value&&(E.value&&!I.value||v.value&&I.value)}]]),onMousedown:X,onTouchstartPassive:X,onClick:U},[lt($.$slots,"default",{id:$.id})],42,Yd))}}),$n=function({sourcePosition:e=Y.Bottom,targetPosition:t=Y.Top,label:n,connectable:o=!0,isValidTargetPos:r,isValidSourcePos:i,data:a}){const l=a.label||n;return[we(Xe,{type:"target",position:t,connectable:o,isValidConnection:r}),typeof l!="string"&&l?we(l):we("div",{innerHTML:l}),we(Xe,{type:"source",position:e,connectable:o,isValidConnection:i})]};$n.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];$n.inheritAttrs=!1;$n.compatConfig={MODE:3};const jd=$n,Pn=function({targetPosition:e=Y.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:r}){const i=r.label||t;return[we(Xe,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof i!="string"&&i?we(i):we("div",{innerHTML:i})]};Pn.props=["targetPosition","label","isValidTargetPos","connectable","data"];Pn.inheritAttrs=!1;Pn.compatConfig={MODE:3};const Wd=Pn,Dn=function({sourcePosition:e=Y.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:r}){const i=r.label||t;return[typeof i!="string"&&i?we(i):we("div",{innerHTML:i}),we(Xe,{type:"source",position:e,connectable:n,isValidConnection:o})]};Dn.props=["sourcePosition","label","isValidSourcePos","connectable","data"];Dn.inheritAttrs=!1;Dn.compatConfig={MODE:3};const Ud=Dn,Zd=["transform"],Kd=["width","height","x","y","rx","ry"],qd=["y"],Qd={name:"EdgeText",compatConfig:{MODE:3}},Jd=_e({...Qd,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=ce({x:0,y:0,width:0,height:0}),n=ce(null),o=ae(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);et(r),me([()=>e.x,()=>e.y,n,()=>e.label],r);function r(){if(!n.value)return;const i=n.value.getBBox();(i.width!==t.value.width||i.height!==t.value.height)&&(t.value=i)}return(i,a)=>(te(),ue("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[i.labelShowBg?(te(),ue("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*i.labelBgPadding[0]}px`,height:`${t.value.height+2*i.labelBgPadding[1]}px`,x:-i.labelBgPadding[0],y:-i.labelBgPadding[1],style:Ae(i.labelBgStyle),rx:i.labelBgBorderRadius,ry:i.labelBgBorderRadius},null,12,Kd)):ze("",!0),Me("text",So(i.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:i.labelStyle}),[lt(i.$slots,"default",{},()=>[typeof i.label!="string"?(te(),$e(rl(i.label),{key:0})):(te(),ue(Re,{key:1},[it(Te(i.label),1)],64))])],16,qd)],8,Zd))}}),ef=["id","d","marker-end","marker-start"],tf=["d","stroke-width"],nf={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},An=_e({...nf,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},style:{},labelStyle:{},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=ni(e,["interactionWidth","labelShowBg"]),o=ce(null),r=ce(null),i=ce(null),a=ol();return t({pathEl:o,interactionEl:r,labelEl:i}),(l,s)=>(te(),ue(Re,null,[Me("path",{id:l.id,ref_key:"pathEl",ref:o,d:l.path,style:Ae(n.style),class:gt(["vue-flow__edge-path",D(a).class]),"marker-end":l.markerEnd,"marker-start":l.markerStart},null,14,ef),l.interactionWidth?(te(),ue("path",{key:0,ref_key:"interactionEl",ref:r,fill:"none",d:l.path,"stroke-width":l.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,tf)):ze("",!0),l.label&&l.labelX&&l.labelY?(te(),$e(Jd,{key:1,ref_key:"labelEl",ref:i,x:l.labelX,y:l.labelY,label:l.label,"label-show-bg":l.labelShowBg,"label-bg-style":l.labelBgStyle,"label-bg-padding":l.labelBgPadding,"label-bg-border-radius":l.labelBgBorderRadius,"label-style":l.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):ze("",!0)],64))}});function la({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,a=Math.abs(o-t)/2,l=o<t?o+a:o-a;return[i,l,r,a]}function sa({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:a,targetControlY:l}){const s=e*.125+r*.375+a*.375+n*.125,u=t*.125+i*.375+l*.375+o*.125,c=Math.abs(s-e),d=Math.abs(u-t);return[s,u,c,d]}function rn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Cr({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){let a,l;switch(e){case Y.Left:a=t-rn(t-o,i),l=n;break;case Y.Right:a=t+rn(o-t,i),l=n;break;case Y.Top:a=t,l=n-rn(n-r,i);break;case Y.Bottom:a=t,l=n+rn(r-n,i);break}return[a,l]}function ua(e){const{sourceX:t,sourceY:n,sourcePosition:o=Y.Bottom,targetX:r,targetY:i,targetPosition:a=Y.Top,curvature:l=.25}=e,[s,u]=Cr({pos:o,x1:t,y1:n,x2:r,y2:i,c:l}),[c,d]=Cr({pos:a,x1:r,y1:i,x2:t,y2:n,c:l}),[p,f,g,_]=sa({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:s,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${s},${u} ${c},${d} ${r},${i}`,p,f,g,_]}function Ir({pos:e,x1:t,y1:n,x2:o,y2:r}){let i,a;switch(e){case Y.Left:case Y.Right:i=.5*(t+o),a=n;break;case Y.Top:case Y.Bottom:i=t,a=.5*(n+r);break}return[i,a]}function ca(e){const{sourceX:t,sourceY:n,sourcePosition:o=Y.Bottom,targetX:r,targetY:i,targetPosition:a=Y.Top}=e,[l,s]=Ir({pos:o,x1:t,y1:n,x2:r,y2:i}),[u,c]=Ir({pos:a,x1:r,y1:i,x2:t,y2:n}),[d,p,f,g]=sa({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:l,sourceControlY:s,targetControlX:u,targetControlY:c});return[`M${t},${n} C${l},${s} ${u},${c} ${r},${i}`,d,p,f,g]}const Mr={[Y.Left]:{x:-1,y:0},[Y.Right]:{x:1,y:0},[Y.Top]:{x:0,y:-1},[Y.Bottom]:{x:0,y:1}};function of({source:e,sourcePosition:t=Y.Bottom,target:n}){return t===Y.Left||t===Y.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Or(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function rf({source:e,sourcePosition:t=Y.Bottom,target:n,targetPosition:o=Y.Top,center:r,offset:i}){const a=Mr[t],l=Mr[o],s={x:e.x+a.x*i,y:e.y+a.y*i},u={x:n.x+l.x*i,y:n.y+l.y*i},c=of({source:s,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",p=c[d];let f,g,_;const w={x:0,y:0},E={x:0,y:0},[v,I,S,A]=la({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*l[d]===-1){g=r.x??v,_=r.y??I;const T=[{x:g,y:s.y},{x:g,y:u.y}],X=[{x:s.x,y:_},{x:u.x,y:_}];a[d]===p?f=d==="x"?T:X:f=d==="x"?X:T}else{const T=[{x:s.x,y:u.y}],X=[{x:u.x,y:s.y}];if(d==="x"?f=a.x===p?X:T:f=a.y===p?T:X,t===o){const ne=Math.abs(e[d]-n[d]);if(ne<=i){const m=Math.min(i-1,i-ne);a[d]===p?w[d]=(s[d]>e[d]?-1:1)*m:E[d]=(u[d]>n[d]?-1:1)*m}}if(t!==o){const ne=d==="x"?"y":"x",m=a[d]===l[ne],C=s[ne]>u[ne],N=s[ne]<u[ne];(a[d]===1&&(!m&&C||m&&N)||a[d]!==1&&(!m&&N||m&&C))&&(f=d==="x"?T:X)}const U={x:s.x+w.x,y:s.y+w.y},$={x:u.x+E.x,y:u.y+E.y},b=Math.max(Math.abs(U.x-f[0].x),Math.abs($.x-f[0].x)),ee=Math.max(Math.abs(U.y-f[0].y),Math.abs($.y-f[0].y));b>=ee?(g=(U.x+$.x)/2,_=f[0].y):(g=f[0].x,_=(U.y+$.y)/2)}return[[e,{x:s.x+w.x,y:s.y+w.y},...f,{x:u.x+E.x,y:u.y+E.y},n],g,_,S,A]}function af(e,t,n,o){const r=Math.min(Or(e,t)/2,Or(t,n)/2,o),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${i+r*u},${a}Q ${i},${a} ${i},${a+r*c}`}const l=e.x<n.x?1:-1,s=e.y<n.y?-1:1;return`L ${i},${a+r*s}Q ${i},${a} ${i+r*l},${a}`}function _o(e){const{sourceX:t,sourceY:n,sourcePosition:o=Y.Bottom,targetX:r,targetY:i,targetPosition:a=Y.Top,borderRadius:l=5,centerX:s,centerY:u,offset:c=20}=e,[d,p,f,g,_]=rf({source:{x:t,y:n},sourcePosition:o,target:{x:r,y:i},targetPosition:a,center:{x:s,y:u},offset:c});return[d.reduce((E,v,I)=>{let S;return I>0&&I<d.length-1?S=af(d[I-1],v,d[I+1],l):S=`${I===0?"M":"L"}${v.x} ${v.y}`,E+=S,E},""),p,f,g,_]}function lf(e){const{sourceX:t,sourceY:n,targetX:o,targetY:r}=e,[i,a,l,s]=la({sourceX:t,sourceY:n,targetX:o,targetY:r});return[`M ${t},${n}L ${o},${r}`,i,a,l,s]}const sf=_e({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=lf(e);return we(An,{path:n,labelX:o,labelY:r,...t,...e})}}}),uf=sf,cf=_e({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=_o({...e,sourcePosition:e.sourcePosition??Y.Bottom,targetPosition:e.targetPosition??Y.Top});return we(An,{path:n,labelX:o,labelY:r,...t,...e})}}}),da=cf,df=_e({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>we(da,{...e,...t,borderRadius:0})}}),ff=df,hf=_e({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=ua({...e,sourcePosition:e.sourcePosition??Y.Bottom,targetPosition:e.targetPosition??Y.Top});return we(An,{path:n,labelX:o,labelY:r,...t,...e})}}}),pf=hf,gf=_e({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=ca({...e,sourcePosition:e.sourcePosition??Y.Bottom,targetPosition:e.targetPosition??Y.Top});return we(An,{path:n,labelX:o,labelY:r,...t,...e})}}}),vf=gf,mf={input:Ud,default:jd,output:Wd},yf={default:pf,straight:uf,step:ff,smoothstep:da,simplebezier:vf};function wf(e,t,n){const o=ae(()=>_=>t.value.get(_)),r=ae(()=>_=>n.value.get(_)),i=ae(()=>{const _={...yf,...e.edgeTypes},w=Object.keys(_);for(const E of e.edges)E.type&&!w.includes(E.type)&&(_[E.type]=E.type);return _}),a=ae(()=>{const _={...mf,...e.nodeTypes},w=Object.keys(_);for(const E of e.nodes)E.type&&!w.includes(E.type)&&(_[E.type]=E.type);return _}),l=ae(()=>e.onlyRenderVisibleElements?Wi(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),s=ae(()=>{if(e.onlyRenderVisibleElements){const _=[];for(const w of e.edges){const E=t.value.get(w.source),v=t.value.get(w.target);_d({sourcePos:E.computedPosition||{x:0,y:0},targetPos:v.computedPosition||{x:0,y:0},sourceWidth:E.dimensions.width,sourceHeight:E.dimensions.height,targetWidth:v.dimensions.width,targetHeight:v.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&_.push(w)}return _}return e.edges}),u=ae(()=>[...l.value,...s.value]),c=ae(()=>{const _=[];for(const w of e.nodes)w.selected&&_.push(w);return _}),d=ae(()=>{const _=[];for(const w of e.edges)w.selected&&_.push(w);return _}),p=ae(()=>[...c.value,...d.value]),f=ae(()=>{const _=[];for(const w of e.nodes)w.dimensions.width&&w.dimensions.height&&w.handleBounds!==void 0&&_.push(w);return _}),g=ae(()=>l.value.length>0&&f.value.length===l.value.length);return{getNode:o,getEdge:r,getElements:u,getEdgeTypes:i,getNodeTypes:a,getEdges:s,getNodes:l,getSelectedElements:p,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:f,areNodesInitialized:g}}class dt{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=Wt())==null?void 0:t.appContext.app,o=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??dt.instance;return dt.instance=o??new dt,n&&(n.config.globalProperties.$vueFlowStorage=dt.instance),dt.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=aa(),r=Qa(o),i={};for(const[p,f]of Object.entries(r.hooks)){const g=`on${p.charAt(0).toUpperCase()+p.slice(1)}`;i[g]=f.on}const a={};for(const[p,f]of Object.entries(r.hooks))a[p]=f.trigger;const l=ae(()=>{const p=new Map;for(const f of r.nodes)p.set(f.id,f);return p}),s=ae(()=>{const p=new Map;for(const f of r.edges)p.set(f.id,f);return p}),u=wf(r,l,s),c=Hd(r,l,s);c.setState({...r,...n});const d={...i,...u,...c,...El(r),nodeLookup:l,edgeLookup:s,emits:a,id:t,vueFlowVersion:"1.41.1",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function Se(e){const t=dt.getInstance(),n=ri(),o=typeof e=="object",r=o?e:{id:e},i=r.id,a=i??(n==null?void 0:n.vueFlowId);let l;if(n){const s=Tt(kr,null);typeof s<"u"&&s!==null&&(!a||s.id===a)&&(l=s)}if(l||a&&(l=t.get(a)),!l||a&&l.id!==a){const s=i??t.getId(),u=t.create(s,r);l=u,(n??ti(!0)).run(()=>{me(u.applyDefault,(d,p,f)=>{const g=w=>{u.applyNodeChanges(w)},_=w=>{u.applyEdgeChanges(w)};d?(u.onNodesChange(g),u.onEdgesChange(_)):(u.hooks.value.nodesChange.off(g),u.hooks.value.edgesChange.off(_)),f(()=>{u.hooks.value.nodesChange.off(g),u.hooks.value.edgesChange.off(_)})},{immediate:!0}),Sn(()=>{if(l){const d=t.get(l.id);d?d.$destroy():On(`No store instance found for id ${l.id} in storage.`)}})})}else o&&l.setState(r);if(n&&(Ct(kr,l),n.vueFlowId=l.id),o){const s=Wt();(s==null?void 0:s.type.name)!=="VueFlow"&&l.emits.error(new Oe(Ce.USEVUEFLOW_OPTIONS))}return l}function _f(e){const{emits:t,dimensions:n}=Se();let o;et(()=>{const r=e.value,i=()=>{if(!r)return;const a=Mn(r);(a.width===0||a.height===0)&&t.error(new Oe(Ce.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:a.width||500,height:a.height||500}};i(),window.addEventListener("resize",i),r&&(o=new ResizeObserver(()=>i()),o.observe(r)),oi(()=>{window.removeEventListener("resize",i),o&&r&&o.unobserve(r)})})}const bf={name:"UserSelection",compatConfig:{MODE:3}},Ef=_e({...bf,props:{userSelectionRect:{}},setup(e){return(t,n)=>(te(),ue("div",{class:"vue-flow__selection vue-flow__container",style:Ae({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),xf=["tabIndex"],Sf={name:"NodesSelection",compatConfig:{MODE:3}},Nf=_e({...Sf,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:r,disableKeyboardA11y:i,userSelectionActive:a}=Se(),l=ia(),s=ce(null),u=na({el:s,onStart(g){t.selectionDragStart(g)},onDrag(g){t.selectionDrag(g)},onStop(g){t.selectionDragStop(g)}});et(()=>{var g;i.value||(g=s.value)==null||g.focus({preventScroll:!0})});const c=ae(()=>ji(o.value)),d=ae(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function p(g){t.selectionContextMenu({event:g,nodes:o.value})}function f(g){i||kt[g.key]&&l({x:kt[g.key].x,y:kt[g.key].y},g.shiftKey)}return(g,_)=>!D(a)&&c.value.width&&c.value.height?(te(),ue("div",{key:0,class:gt(["vue-flow__nodesselection vue-flow__container",D(r)]),style:Ae({transform:`translate(${D(n).x}px,${D(n).y}px) scale(${D(n).zoom})`})},[Me("div",{ref_key:"el",ref:s,class:gt([{dragging:D(u)},"vue-flow__nodesselection-rect"]),style:Ae(d.value),tabIndex:D(i)?void 0:-1,onContextmenu:p,onKeydown:f},null,46,xf)],6)):ze("",!0)}});function kf(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Cf={name:"Pane",compatConfig:{MODE:3}},If=_e({...Cf,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:r,userSelectionActive:i,removeSelectedElements:a,panOnDrag:l,userSelectionRect:s,elementsSelectable:u,nodesSelectionActive:c,getSelectedEdges:d,getSelectedNodes:p,removeNodes:f,removeEdges:g,selectionMode:_,deleteKeyCode:w,multiSelectionKeyCode:E,multiSelectionActive:v,edgeLookup:I,nodeLookup:S}=Se(),A=ce(null),R=ce(0),T=ce(0),X=ce(),U=ce(new Map),$=xe(()=>u.value&&(e.isSelecting||i.value));let b=!1,ee=!1;const ne=Lt(w,{actInsideInputWithModifier:!1}),m=Lt(E);me(ne,j=>{j&&(f(p.value),g(d.value),c.value=!1)}),me(m,j=>{v.value=j});function C(j,L){return K=>{K.target===L&&(j==null||j(K))}}function N(){i.value=!1,s.value=null,R.value=0,T.value=0}function M(j){if(b){b=!1;return}r.paneClick(j),a(),c.value=!1}function V(j){var L;if(Array.isArray(l.value)&&((L=l.value)!=null&&L.includes(2))){j.preventDefault();return}r.paneContextMenu(j)}function P(j){r.paneScroll(j)}function B(j){var L,K,fe,se,he;if(X.value=(L=t.value)==null?void 0:L.getBoundingClientRect(),!u.value||!e.isSelecting||j.button!==0||j.target!==A.value||!X.value)return;(fe=(K=j.target)==null?void 0:K.setPointerCapture)==null||fe.call(K,j.pointerId);const{x:re,y:le}=kf(j,X.value);ee=!0,b=!1,U.value=new Map;for(const[Z,Q]of I.value)U.value.set(Q.source,((se=U.value.get(Q.source))==null?void 0:se.add(Z))||new Set([Z])),U.value.set(Q.target,((he=U.value.get(Q.target))==null?void 0:he.add(Z))||new Set([Z]));a(),s.value={width:0,height:0,startX:re,startY:le,x:re,y:le},r.selectionStart(j)}function G(j){if(!X.value||!s.value)return;b=!0;const{x:L,y:K}=at(j,X.value),{startX:fe=0,startY:se=0}=s.value,he={startX:fe,startY:se,x:L<fe?L:fe,y:K<se?K:se,width:Math.abs(L-fe),height:Math.abs(K-se)},re=Wi(n.value,he,o.value,_.value===To.Partial,!0),le=new Set,Z=new Set;for(const Q of re){Z.add(Q.id);const z=U.value.get(Q.id);if(z)for(const h of z)le.add(h)}if(R.value!==Z.size){R.value=Z.size;const Q=rt(S.value,Z,!0);r.nodesChange(Q)}if(T.value!==le.size){T.value=le.size;const Q=rt(I.value,le);r.edgesChange(Q)}s.value=he,i.value=!0,c.value=!1}function oe(j){var L;j.button!==0||!ee||((L=j.target)==null||L.releasePointerCapture(j.pointerId),!i.value&&s.value&&j.target===A.value&&M(j),R.value>0&&(c.value=!0),N(),r.selectionEnd(j),e.selectionKeyPressed&&(b=!1),ee=!1)}return(j,L)=>(te(),ue("div",{ref_key:"container",ref:A,class:gt(["vue-flow__pane vue-flow__container",{selection:j.isSelecting}]),onClick:L[0]||(L[0]=K=>$.value?void 0:C(M,A.value)(K)),onContextmenu:L[1]||(L[1]=K=>C(V,A.value)(K)),onWheelPassive:L[2]||(L[2]=K=>C(P,A.value)(K)),onPointerenter:L[3]||(L[3]=K=>$.value?void 0:D(r).paneMouseEnter(K)),onPointerdown:L[4]||(L[4]=K=>$.value?B(K):D(r).paneMouseMove(K)),onPointermove:L[5]||(L[5]=K=>$.value?G(K):D(r).paneMouseMove(K)),onPointerup:L[6]||(L[6]=K=>$.value?oe(K):void 0),onPointerleave:L[7]||(L[7]=K=>D(r).paneMouseLeave(K))},[lt(j.$slots,"default"),D(i)&&D(s)?(te(),$e(Ef,{key:0,"user-selection-rect":D(s)},null,8,["user-selection-rect"])):ze("",!0),D(c)&&D(p).length?(te(),$e(Nf,{key:1})):ze("",!0)],34))}}),Mf={name:"Transform",compatConfig:{MODE:3}},Of=_e({...Mf,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=Se(),r=ae(()=>n.value?!o.value:!1),i=ae(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(a,l)=>(te(),ue("div",{class:"vue-flow__transformationpane vue-flow__container",style:Ae({transform:i.value,opacity:r.value?0:void 0})},[lt(a.$slots,"default")],4))}}),Tf={name:"Viewport",compatConfig:{MODE:3}},$f=_e({...Tf,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:r,zoomActivationKeyCode:i,selectionKeyCode:a,panActivationKeyCode:l,panOnScroll:s,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:p,zoomOnPinch:f,zoomOnScroll:g,preventScrolling:_,noWheelClassName:w,noPanClassName:E,emits:v,connectionStartHandle:I,userSelectionActive:S,paneDragging:A,d3Zoom:R,d3Selection:T,d3ZoomHandler:X,viewport:U,viewportRef:$,paneClickDistance:b}=Se();_f($);const ee=ce(!1),ne=ce(!1);let m=null,C=!1,N=0,M={x:0,y:0,zoom:0};const V=Lt(l),P=Lt(a),B=Lt(i),G=xe(()=>!P.value&&(V.value||d.value)),oe=xe(()=>V.value||s.value),j=xe(()=>P.value||a.value===!0&&G.value!==!0);et(()=>{if(!$.value){On("Viewport element is missing");return}const re=$.value,le=re.getBoundingClientRect(),Z=od().clickDistance(b.value).scaleExtent([t.value,n.value]).translateExtent(r.value),Q=Le(re).call(Z),z=Q.on("wheel.zoom"),h=Ot.translate(o.value.x??0,o.value.y??0).scale(wt(o.value.zoom??1,t.value,n.value)),y=[[0,0],[le.width,le.height]],k=Z.constrain()(h,y,r.value);Z.transform(Q,k),Z.wheelDelta(K),R.value=Z,T.value=Q,X.value=z,U.value={x:k.x,y:k.y,zoom:k.k},Z.on("start",x=>{var O;if(!x.sourceEvent)return null;N=x.sourceEvent.button,ee.value=!0;const q=se(x.transform);((O=x.sourceEvent)==null?void 0:O.type)==="mousedown"&&(A.value=!0),M=q,v.viewportChangeStart(q),v.moveStart({event:x,flowTransform:q})}),Z.on("end",x=>{if(!x.sourceEvent)return null;if(ee.value=!1,A.value=!1,L(G.value,N??0)&&!C&&v.paneContextMenu(x.sourceEvent),C=!1,fe(M,x.transform)){const O=se(x.transform);M=O,v.viewportChangeEnd(O),v.moveEnd({event:x,flowTransform:O})}}),Z.filter(x=>{var O,q,W;const ie=B.value||g.value,de=f.value&&x.ctrlKey,ge=x.button;if((G.value===!0||Array.isArray(G.value)&&G.value.includes(1))&&ge===1&&x.type==="mousedown"&&((O=x.target)!=null&&O.closest(".vue-flow__node")||(q=x.target)!=null&&q.closest(".vue-flow__edge")))return!0;if(!G.value&&!ie&&!oe.value&&!p.value&&!f.value||S.value||!p.value&&x.type==="dblclick"||he(x,w.value)&&x.type==="wheel"||he(x,E.value)&&(x.type!=="wheel"||oe.value&&x.type==="wheel"&&!B.value)||!f.value&&x.ctrlKey&&x.type==="wheel"||!ie&&!oe.value&&!de&&x.type==="wheel")return!1;if(!f&&x.type==="touchstart"&&((W=x.touches)==null?void 0:W.length)>1)return x.preventDefault(),!1;if(!G.value&&(x.type==="mousedown"||x.type==="touchstart")||Array.isArray(G.value)&&!G.value.includes(ge)&&(x.type==="mousedown"||x.type==="touchstart"))return!1;const ve=Array.isArray(G.value)&&G.value.includes(ge)||!ge||ge<=1;return(!x.ctrlKey||x.type==="wheel")&&ve}),me([S,G],()=>{S.value&&!ee.value?Z.on("zoom",null):S.value||Z.on("zoom",x=>{U.value={x:x.transform.x,y:x.transform.y,zoom:x.transform.k};const O=se(x.transform);C=L(G.value,N??0),v.viewportChange(O),v.move({event:x,flowTransform:O})})},{immediate:!0}),me([S,oe,u,B,f,_,w],()=>{oe.value&&!B.value&&!S.value?Q.on("wheel.zoom",x=>{if(he(x,w.value))return!1;const O=B.value||g.value,q=f.value&&x.ctrlKey;if(!(!_.value||oe.value||O||q))return!1;x.preventDefault(),x.stopImmediatePropagation();const ie=Q.property("__zoom").k||1,de=_n();if(x.ctrlKey&&f.value&&de){const Xa=Ye(x),ja=K(x),Wa=ie*2**ja;Z.scaleTo(Q,Wa,Xa,x);return}const ge=x.deltaMode===1?20:1;let ve=u.value===Bt.Vertical?0:x.deltaX*ge,be=u.value===Bt.Horizontal?0:x.deltaY*ge;!de&&x.shiftKey&&u.value!==Bt.Vertical&&!ve&&be&&(ve=be,be=0),Z.translateBy(Q,-(ve/ie)*c.value,-(be/ie)*c.value);const bt=se(Q.property("__zoom"));m&&clearTimeout(m),ne.value?(v.move({event:x,flowTransform:bt}),v.viewportChange(bt),m=setTimeout(()=>{v.moveEnd({event:x,flowTransform:bt}),v.viewportChangeEnd(bt),ne.value=!1},150)):(ne.value=!0,v.moveStart({event:x,flowTransform:bt}),v.viewportChangeStart(bt))},{passive:!1}):typeof z<"u"&&Q.on("wheel.zoom",function(x,O){const q=!_.value&&x.type==="wheel"&&!x.ctrlKey,W=B.value||g.value,ie=f.value&&x.ctrlKey;if(!W&&!s.value&&!ie&&x.type==="wheel"||q||he(x,w.value))return null;x.preventDefault(),z.call(this,x,O)},{passive:!1})},{immediate:!0})});function L(re,le){return le===2&&Array.isArray(re)&&re.includes(2)}function K(re){const le=re.ctrlKey&&_n()?10:1;return-re.deltaY*(re.deltaMode===1?.05:re.deltaMode?1:.002)*le}function fe(re,le){return re.x!==le.x&&!Number.isNaN(le.x)||re.y!==le.y&&!Number.isNaN(le.y)||re.zoom!==le.k&&!Number.isNaN(le.k)}function se(re){return{x:re.x,y:re.y,zoom:re.k}}function he(re,le){return re.target.closest(`.${le}`)}return(re,le)=>(te(),ue("div",{ref_key:"viewportRef",ref:$,class:"vue-flow__viewport vue-flow__container"},[H(If,{"is-selecting":j.value,"selection-key-pressed":D(P),class:gt({connecting:!!D(I),dragging:D(A),draggable:D(d)===!0||Array.isArray(D(d))&&D(d).includes(0)})},{default:J(()=>[H(Of,null,{default:J(()=>[lt(re.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),Pf=["id"],Df=["id"],Af=["id"],Vf={name:"A11yDescriptions",compatConfig:{MODE:3}},Rf=_e({...Vf,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Se();return(r,i)=>(te(),ue(Re,null,[Me("div",{id:`${D(Ri)}-${D(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+Te(D(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Pf),Me("div",{id:`${D(zi)}-${D(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Df),D(n)?ze("",!0):(te(),ue("div",{key:0,id:`${D(ld)}-${D(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},Te(D(o)),9,Af))],64))}});function zf(){const e=Se();me(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function Bf(e,t,n){return n===Y.Left?e-t:n===Y.Right?e+t:e}function Lf(e,t,n){return n===Y.Top?e-t:n===Y.Bottom?e+t:e}const Ao=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=Y.Top,type:r}){return we("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${r}`,cx:Bf(t,e,o),cy:Lf(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};Ao.props=["radius","centerX","centerY","position","type"];Ao.compatConfig={MODE:3};const Tr=Ao,Ff=_e({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:r,emits:i,nodesSelectionActive:a,noPanClassName:l,getEdgeTypes:s,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:p,multiSelectionActive:f,disableKeyboardA11y:g,elementsSelectable:_,edgesUpdatable:w,edgesFocusable:E}=Se(),v=ae(()=>c(e.id)),I=$d(v.value,i),S=Tt(Tn),A=Wt(),R=ce(!1),T=ce(!1),X=ce(""),U=ce(null),$=ce("source"),b=ce(null),ee=xe(()=>typeof v.value.selectable>"u"?_.value:v.value.selectable),ne=xe(()=>typeof v.value.updatable>"u"?w.value:v.value.updatable),m=xe(()=>typeof v.value.focusable>"u"?E.value:v.value.focusable);Ct(Md,e.id),Ct(Od,b);const C=ae(()=>v.value.class instanceof Function?v.value.class(v.value):v.value.class),N=ae(()=>v.value.style instanceof Function?v.value.style(v.value):v.value.style),M=ae(()=>{const z=v.value.type||"default",h=S==null?void 0:S[`edge-${z}`];if(h)return h;let y=v.value.template??s.value[z];if(typeof y=="string"&&A){const k=Object.keys(A.appContext.components);k&&k.includes(z)&&(y=ye(z,!1))}return y&&typeof y!="string"?y:(i.error(new Oe(Ce.EDGE_TYPE_MISSING,y)),!1)}),{handlePointerDown:V}=oa({nodeId:X,handleId:U,type:$,isValidConnection:p,edgeUpdaterType:$,onEdgeUpdate:G,onEdgeUpdateEnd:oe});return()=>{const z=d(v.value.source),h=d(v.value.target),y="pathOptions"in v.value?v.value.pathOptions:{};if(!z&&!h)return i.error(new Oe(Ce.EDGE_SOURCE_TARGET_MISSING,v.value.id,v.value.source,v.value.target)),null;if(!z)return i.error(new Oe(Ce.EDGE_SOURCE_MISSING,v.value.id,v.value.source)),null;if(!h)return i.error(new Oe(Ce.EDGE_TARGET_MISSING,v.value.id,v.value.target)),null;if(!v.value||v.value.hidden||z.hidden||h.hidden)return null;let k;o.value===yt.Strict?k=z.handleBounds.source:k=[...z.handleBounds.source||[],...z.handleBounds.target||[]];const x=yr(k,v.value.sourceHandle);let O;o.value===yt.Strict?O=h.handleBounds.target:O=[...h.handleBounds.target||[],...h.handleBounds.source||[]];const q=yr(O,v.value.targetHandle),W=(x==null?void 0:x.position)||Y.Bottom,ie=(q==null?void 0:q.position)||Y.Top,{x:de,y:ge}=wn(z,x,W),{x:ve,y:be}=wn(h,q,ie);return v.value.sourceX=de,v.value.sourceY=ge,v.value.targetX=ve,v.value.targetY=be,we("g",{ref:b,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${M.value===!1?"default":v.value.type||"default"}`,l.value,C.value,{updating:R.value,selected:v.value.selected,animated:v.value.animated,inactive:!ee.value}],onClick:L,onContextmenu:K,onDblclick:fe,onMouseenter:se,onMousemove:he,onMouseleave:re,onKeyDown:m.value?Q:void 0,tabIndex:m.value?0:void 0,"aria-label":v.value.ariaLabel===null?void 0:v.value.ariaLabel||`Edge from ${v.value.source} to ${v.value.target}`,"aria-describedby":m.value?`${zi}-${t}`:void 0,role:m.value?"button":"img"},[T.value?null:we(M.value===!1?s.value.default:M.value,{id:e.id,sourceNode:z,targetNode:h,source:v.value.source,target:v.value.target,type:v.value.type,updatable:ne.value,selected:v.value.selected,animated:v.value.animated,label:v.value.label,labelStyle:v.value.labelStyle,labelShowBg:v.value.labelShowBg,labelBgStyle:v.value.labelBgStyle,labelBgPadding:v.value.labelBgPadding,labelBgBorderRadius:v.value.labelBgBorderRadius,data:v.value.data,events:{...v.value.events,...I.on},style:N.value,markerStart:`url('#${jt(v.value.markerStart,t)}')`,markerEnd:`url('#${jt(v.value.markerEnd,t)}')`,sourcePosition:W,targetPosition:ie,sourceX:de,sourceY:ge,targetX:ve,targetY:be,sourceHandleId:v.value.sourceHandle,targetHandleId:v.value.targetHandle,interactionWidth:v.value.interactionWidth,...y}),[ne.value==="source"||ne.value===!0?[we("g",{onMousedown:le,onMouseenter:P,onMouseout:B},we(Tr,{position:W,centerX:de,centerY:ge,radius:r.value,type:"source","data-type":"source"}))]:null,ne.value==="target"||ne.value===!0?[we("g",{onMousedown:Z,onMouseenter:P,onMouseout:B},we(Tr,{position:ie,centerX:ve,centerY:be,radius:r.value,type:"target","data-type":"target"}))]:null]])};function P(){R.value=!0}function B(){R.value=!1}function G(z,h){I.emit.update({event:z,edge:v.value,connection:h})}function oe(z){I.emit.updateEnd({event:z,edge:v.value}),T.value=!1}function j(z,h){z.button===0&&(T.value=!0,X.value=h?v.value.target:v.value.source,U.value=(h?v.value.targetHandle:v.value.sourceHandle)??"",$.value=h?"target":"source",I.emit.updateStart({event:z,edge:v.value}),V(z))}function L(z){var h;const y={event:z,edge:v.value};ee.value&&(a.value=!1,v.value.selected&&f.value?(u([v.value]),(h=b.value)==null||h.blur()):n([v.value])),I.emit.click(y)}function K(z){I.emit.contextMenu({event:z,edge:v.value})}function fe(z){I.emit.doubleClick({event:z,edge:v.value})}function se(z){I.emit.mouseEnter({event:z,edge:v.value})}function he(z){I.emit.mouseMove({event:z,edge:v.value})}function re(z){I.emit.mouseLeave({event:z,edge:v.value})}function le(z){j(z,!0)}function Z(z){j(z,!1)}function Q(z){var h;!g.value&&Bi.includes(z.key)&&ee.value&&(z.key==="Escape"?((h=b.value)==null||h.blur(),u([c(e.id)])):n([c(e.id)]))}}}),Gf=Ff,Hf={[Y.Left]:Y.Right,[Y.Right]:Y.Left,[Y.Top]:Y.Bottom,[Y.Bottom]:Y.Top},Yf=_e({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:r,connectionPosition:i,connectionLineType:a,connectionLineStyle:l,connectionLineOptions:s,connectionStatus:u,viewport:c,findNode:d}=Se(),p=(e=Tt(Tn))==null?void 0:e["connection-line"],f=ae(()=>{var v;return d((v=o.value)==null?void 0:v.nodeId)}),g=ae(()=>{var v;return d((v=r.value)==null?void 0:v.nodeId)??null}),_=ae(()=>({x:(i.value.x-c.value.x)/c.value.zoom,y:(i.value.y-c.value.y)/c.value.zoom})),w=ae(()=>s.value.markerStart?`url(#${jt(s.value.markerStart,t)})`:""),E=ae(()=>s.value.markerEnd?`url(#${jt(s.value.markerEnd,t)})`:"");return()=>{var v,I,S,A;if(!f.value||!o.value)return null;const R=o.value.handleId,T=o.value.type,X=f.value.handleBounds;let U=X==null?void 0:X[T];if(n.value===yt.Loose&&(U=U||(X==null?void 0:X[T==="source"?"target":"source"])),!U)return null;const $=(R?U.find(P=>P.id===R):U[0])??null,b=($==null?void 0:$.position)||Y.Top,{x:ee,y:ne}=wn(f.value,$,b);let m=null;g.value&&((v=r.value)!=null&&v.handleId)&&(n.value===yt.Strict?m=((I=g.value.handleBounds[T==="source"?"target":"source"])==null?void 0:I.find(P=>{var B;return P.id===((B=r.value)==null?void 0:B.handleId)}))||null:m=((S=[...g.value.handleBounds.source||[],...g.value.handleBounds.target||[]])==null?void 0:S.find(P=>{var B;return P.id===((B=r.value)==null?void 0:B.handleId)}))||null);const C=((A=r.value)==null?void 0:A.position)??(b?Hf[b]:null);if(!b||!C)return null;const N=a.value??s.value.type??ct.Bezier;let M="";const V={sourceX:ee,sourceY:ne,sourcePosition:b,targetX:_.value.x,targetY:_.value.y,targetPosition:C};return N===ct.Bezier?[M]=ua(V):N===ct.Step?[M]=_o({...V,borderRadius:0}):N===ct.SmoothStep?[M]=_o(V):N===ct.SimpleBezier?[M]=ca(V):M=`M${ee},${ne} ${_.value.x},${_.value.y}`,we("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},we("g",{class:"vue-flow__connection"},p?we(p,{sourceX:ee,sourceY:ne,sourcePosition:b,targetX:_.value.x,targetY:_.value.y,targetPosition:C,sourceNode:f.value,sourceHandle:$,targetNode:g.value,targetHandle:m,markerEnd:E.value,markerStart:w.value,connectionStatus:u.value}):we("path",{d:M,class:[s.value.class,u,"vue-flow__connection-path"],style:{...l.value,...s.value.style},"marker-end":E.value,"marker-start":w.value})))}}}),Xf=Yf,jf=["id","markerWidth","markerHeight","markerUnits","orient"],Wf={name:"MarkerType",compatConfig:{MODE:3}},Uf=_e({...Wf,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(te(),ue("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===D(go).ArrowClosed?(te(),ue("polyline",{key:0,style:Ae({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):ze("",!0),t.type===D(go).Arrow?(te(),ue("polyline",{key:1,style:Ae({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):ze("",!0)],8,jf))}}),Zf={class:"vue-flow__marker vue-flow__container"},Kf={name:"MarkerDefinitions",compatConfig:{MODE:3}},qf=_e({...Kf,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:r}=Se(),i=ae(()=>{const a=new Set,l=[],s=u=>{if(u){const c=jt(u,t);a.has(c)||(typeof u=="object"?l.push({...u,id:c,color:u.color||r.value}):l.push({id:c,color:r.value,type:u}),a.add(c))}};for(const u of[o.value.markerEnd,o.value.markerStart])s(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])s(c);return l.sort((u,c)=>u.id.localeCompare(c.id))});return(a,l)=>(te(),ue("svg",Zf,[Me("defs",null,[(te(!0),ue(Re,null,vt(i.value,s=>(te(),$e(Uf,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,"stroke-width":s.strokeWidth,orient:s.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),Qf={name:"Edges",compatConfig:{MODE:3}},Jf=_e({...Qf,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=Se();return(r,i)=>(te(),ue(Re,null,[H(qf),(te(!0),ue(Re,null,vt(D(n),a=>(te(),ue("svg",{key:a.id,class:"vue-flow__edges vue-flow__container",style:Ae({zIndex:D(bd)(a,D(t),D(o))})},[H(D(Gf),{id:a.id},null,8,["id"])],4))),128)),H(D(Xf))],64))}}),eh=_e({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:r,multiSelectionActive:i,emits:a,removeSelectedNodes:l,addSelectedNodes:s,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:p,elevateNodesOnSelect:f,disableKeyboardA11y:g,ariaLiveMessage:_,snapToGrid:w,snapGrid:E,nodeDragThreshold:v,nodesDraggable:I,elementsSelectable:S,nodesConnectable:A,nodesFocusable:R}=Se(),T=ce(null);Ct(ta,T),Ct(ea,e.id);const X=Tt(Tn),U=Wt(),$=ia(),{node:b,parentNode:ee}=ra(e.id),ne=xe(()=>typeof b.draggable>"u"?I.value:b.draggable),m=xe(()=>typeof b.selectable>"u"?S.value:b.selectable),C=xe(()=>typeof b.connectable>"u"?A.value:b.connectable),N=xe(()=>typeof b.focusable>"u"?R.value:b.focusable),M=xe(()=>!!b.dimensions.width&&!!b.dimensions.height),V=ae(()=>{const h=b.type||"default",y=X==null?void 0:X[`node-${h}`];if(y)return y;let k=b.template||d.value[h];if(typeof k=="string"&&U){const x=Object.keys(U.appContext.components);x&&x.includes(h)&&(k=ye(h,!1))}return k&&typeof k!="string"?k:(a.error(new Oe(Ce.NODE_TYPE_MISSING,k)),!1)}),{emit:P,on:B}=Vd(b,a),G=na({id:e.id,el:T,disabled:()=>!ne.value,selectable:m,dragHandle:()=>b.dragHandle,onStart(h){P.dragStart(h)},onDrag(h){P.drag(h)},onStop(h){P.dragStop(h)},onClick(h){Q(h)}}),oe=ae(()=>b.class instanceof Function?b.class(b):b.class),j=ae(()=>{const h=(b.style instanceof Function?b.style(b):b.style)||{},y=b.width instanceof Function?b.width(b):b.width,k=b.height instanceof Function?b.height(b):b.height;return!h.width&&y&&(h.width=typeof y=="string"?y:`${y}px`),!h.height&&k&&(h.height=typeof k=="string"?k:`${k}px`),h}),L=xe(()=>Number(b.zIndex??j.value.zIndex??0));return c(h=>{(h.includes(e.id)||!h.length)&&fe()}),et(()=>{me(()=>b.hidden,(h=!1,y,k)=>{!h&&T.value&&(e.resizeObserver.observe(T.value),k(()=>{T.value&&e.resizeObserver.unobserve(T.value)}))},{immediate:!0,flush:"post"})}),me([()=>b.type,()=>b.sourcePosition,()=>b.targetPosition],()=>{Qe(()=>{u([{id:e.id,nodeElement:T.value,forceUpdate:!0}])})}),me([()=>b.position.x,()=>b.position.y,()=>{var h;return(h=ee.value)==null?void 0:h.computedPosition.x},()=>{var h;return(h=ee.value)==null?void 0:h.computedPosition.y},()=>{var h;return(h=ee.value)==null?void 0:h.computedPosition.z},L,()=>b.selected,()=>b.dimensions.height,()=>b.dimensions.width,()=>{var h;return(h=ee.value)==null?void 0:h.dimensions.height},()=>{var h;return(h=ee.value)==null?void 0:h.dimensions.width}],([h,y,k,x,O,q])=>{const W={x:h,y,z:q+(f.value&&b.selected?1e3:0)};typeof k<"u"&&typeof x<"u"?b.computedPosition=gd({x:k,y:x,z:O},W):b.computedPosition=W},{flush:"post",immediate:!0}),me([()=>b.extent,p],([h,y],[k,x])=>{(h!==k||y!==x)&&K()}),b.extent==="parent"||typeof b.extent=="object"&&"range"in b.extent&&b.extent.range==="parent"?io(()=>M).toBe(!0).then(K):K(),()=>b.hidden?null:we("div",{ref:T,"data-id":b.id,class:["vue-flow__node",`vue-flow__node-${V.value===!1?"default":b.type||"default"}`,{[n.value]:ne.value,dragging:G==null?void 0:G.value,draggable:ne.value,selected:b.selected,selectable:m.value,parent:b.isParent},oe.value],style:{visibility:M.value?"visible":"hidden",zIndex:b.computedPosition.z??L.value,transform:`translate(${b.computedPosition.x}px,${b.computedPosition.y}px)`,pointerEvents:m.value||ne.value?"all":"none",...j.value},tabIndex:N.value?0:void 0,role:N.value?"button":void 0,"aria-describedby":g.value?void 0:`${Ri}-${t}`,"aria-label":b.ariaLabel,onMouseenter:se,onMousemove:he,onMouseleave:re,onContextmenu:le,onClick:Q,onDblclick:Z,onKeydown:z},[we(V.value===!1?d.value.default:V.value,{id:b.id,type:b.type,data:b.data,events:{...b.events,...B},selected:b.selected,resizing:b.resizing,dragging:G.value,connectable:C.value,position:b.computedPosition,dimensions:b.dimensions,isValidTargetPos:b.isValidTargetPos,isValidSourcePos:b.isValidSourcePos,parent:b.parentNode,parentNodeId:b.parentNode,zIndex:b.computedPosition.z??L.value,targetPosition:b.targetPosition,sourcePosition:b.sourcePosition,label:b.label,dragHandle:b.dragHandle,onUpdateNodeInternals:fe})]);function K(){const h=b.computedPosition;w.value&&(h.x=E.value[0]*Math.round(h.x/E.value[0]),h.y=E.value[1]*Math.round(h.y/E.value[1]));const{computedPosition:y,position:k}=$o(b,h,a.error,p.value,ee.value);(b.computedPosition.x!==y.x||b.computedPosition.y!==y.y)&&(b.computedPosition={...b.computedPosition,...y}),(b.position.x!==k.x||b.position.y!==k.y)&&(b.position=k)}function fe(){T.value&&u([{id:e.id,nodeElement:T.value,forceUpdate:!0}])}function se(h){G!=null&&G.value||P.mouseEnter({event:h,node:b})}function he(h){G!=null&&G.value||P.mouseMove({event:h,node:b})}function re(h){G!=null&&G.value||P.mouseLeave({event:h,node:b})}function le(h){return P.contextMenu({event:h,node:b})}function Z(h){return P.doubleClick({event:h,node:b})}function Q(h){m.value&&(!o.value||!ne.value||v.value>0)&&wo(b,i.value,s,l,r,!1,T.value),P.click({event:h,node:b})}function z(h){if(!(vo(h)||g.value))if(Bi.includes(h.key)&&m.value){const y=h.key==="Escape";wo(b,i.value,s,l,r,y,T.value)}else ne.value&&b.selected&&kt[h.key]&&(_.value=`Moved selected node ${h.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~b.position.x}, y: ${~~b.position.y}`,$({x:kt[h.key].x,y:kt[h.key].y},h.shiftKey))}}}),th=eh;function nh(e={includeHiddenNodes:!1}){const{nodes:t}=Se();return ae(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const oh={class:"vue-flow__nodes vue-flow__container"},rh={name:"Nodes",compatConfig:{MODE:3}},ih=_e({...rh,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=Se(),r=nh(),i=ce();return me(r,a=>{a&&Qe(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),et(()=>{i.value=new ResizeObserver(a=>{const l=a.map(s=>({id:s.target.getAttribute("data-id"),nodeElement:s.target,forceUpdate:!0}));Qe(()=>n(l))})}),oi(()=>{var a;return(a=i.value)==null?void 0:a.disconnect()}),(a,l)=>(te(),ue("div",oh,[i.value?(te(!0),ue(Re,{key:0},vt(D(t),(s,u,c,d)=>{const p=[s.id];if(d&&d.key===s.id&&Ja(d,p))return d;const f=(te(),$e(D(th),{id:s.id,key:s.id,"resize-observer":i.value},null,8,["id","resize-observer"]));return f.memo=p,f},l,0),128)):ze("",!0)]))}});function ah(){const{emits:e}=Se();et(()=>{if(Ji()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new Oe(Ce.MISSING_STYLES))}})}const lh=Me("div",{class:"vue-flow__edge-labels"},null,-1),sh={name:"VueFlow",compatConfig:{MODE:3}},uh=_e({...sh,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,r=Ka(),i=zn(o,"modelValue",n),a=zn(o,"nodes",n),l=zn(o,"edges",n),s=Se(o),u=Bd({modelValue:i,nodes:a,edges:l},o,s);return Fd(n,s.hooks),zf(),ah(),Ct(Tn,r),ei(()=>{u()}),t(s),(c,d)=>(te(),ue("div",{ref:D(s).vueFlowRef,class:"vue-flow"},[H($f,null,{default:J(()=>[H(Jf),lh,H(ih),lt(c.$slots,"zoom-pane")]),_:3}),lt(c.$slots,"default"),H(Rf)],512))}});var ch="\0",ut="\0",$r="";let dh=class{constructor(t){Ee(this,"_isDirected",!0);Ee(this,"_isMultigraph",!1);Ee(this,"_isCompound",!1);Ee(this,"_label");Ee(this,"_defaultNodeLabelFn",()=>{});Ee(this,"_defaultEdgeLabelFn",()=>{});Ee(this,"_nodes",{});Ee(this,"_in",{});Ee(this,"_preds",{});Ee(this,"_out",{});Ee(this,"_sucs",{});Ee(this,"_edgeObjs",{});Ee(this,"_edgeLabels",{});Ee(this,"_nodeCount",0);Ee(this,"_edgeCount",0);Ee(this,"_parent");Ee(this,"_children");t&&(this._isDirected=Object.hasOwn(t,"directed")?t.directed:!0,this._isMultigraph=Object.hasOwn(t,"multigraph")?t.multigraph:!1,this._isCompound=Object.hasOwn(t,"compound")?t.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[ut]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return this._defaultNodeLabelFn=t,typeof t!="function"&&(this._defaultNodeLabelFn=()=>t),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var t=this;return this.nodes().filter(n=>Object.keys(t._in[n]).length===0)}sinks(){var t=this;return this.nodes().filter(n=>Object.keys(t._out[n]).length===0)}setNodes(t,n){var o=arguments,r=this;return t.forEach(function(i){o.length>1?r.setNode(i,n):r.setNode(i)}),this}setNode(t,n){return Object.hasOwn(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=n),this):(this._nodes[t]=arguments.length>1?n:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=ut,this._children[t]={},this._children[ut][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}node(t){return this._nodes[t]}hasNode(t){return Object.hasOwn(this._nodes,t)}removeNode(t){var n=this;if(Object.hasOwn(this._nodes,t)){var o=r=>n.removeEdge(n._edgeObjs[r]);delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],this.children(t).forEach(function(r){n.setParent(r)}),delete this._children[t]),Object.keys(this._in[t]).forEach(o),delete this._in[t],delete this._preds[t],Object.keys(this._out[t]).forEach(o),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n===void 0)n=ut;else{n+="";for(var o=n;o!==void 0;o=this.parent(o))if(o===t)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");this.setNode(n)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=n,this._children[n][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var n=this._parent[t];if(n!==ut)return n}}children(t=ut){if(this._isCompound){var n=this._children[t];if(n)return Object.keys(n)}else{if(t===ut)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var n=this._preds[t];if(n)return Object.keys(n)}successors(t){var n=this._sucs[t];if(n)return Object.keys(n)}neighbors(t){var n=this.predecessors(t);if(n){const r=new Set(n);for(var o of this.successors(t))r.add(o);return Array.from(r.values())}}isLeaf(t){var n;return this.isDirected()?n=this.successors(t):n=this.neighbors(t),n.length===0}filterNodes(t){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var o=this;Object.entries(this._nodes).forEach(function([a,l]){t(a)&&n.setNode(a,l)}),Object.values(this._edgeObjs).forEach(function(a){n.hasNode(a.v)&&n.hasNode(a.w)&&n.setEdge(a,o.edge(a))});var r={};function i(a){var l=o.parent(a);return l===void 0||n.hasNode(l)?(r[a]=l,l):l in r?r[l]:i(l)}return this._isCompound&&n.nodes().forEach(a=>n.setParent(a,i(a))),n}setDefaultEdgeLabel(t){return this._defaultEdgeLabelFn=t,typeof t!="function"&&(this._defaultEdgeLabelFn=()=>t),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(t,n){var o=this,r=arguments;return t.reduce(function(i,a){return r.length>1?o.setEdge(i,a,n):o.setEdge(i,a),a}),this}setEdge(){var t,n,o,r,i=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(t=a.v,n=a.w,o=a.name,arguments.length===2&&(r=arguments[1],i=!0)):(t=a,n=arguments[1],o=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),t=""+t,n=""+n,o!==void 0&&(o=""+o);var l=zt(this._isDirected,t,n,o);if(Object.hasOwn(this._edgeLabels,l))return i&&(this._edgeLabels[l]=r),this;if(o!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(n),this._edgeLabels[l]=i?r:this._defaultEdgeLabelFn(t,n,o);var s=fh(this._isDirected,t,n,o);return t=s.v,n=s.w,Object.freeze(s),this._edgeObjs[l]=s,Pr(this._preds[n],t),Pr(this._sucs[t],n),this._in[n][l]=s,this._out[t][l]=s,this._edgeCount++,this}edge(t,n,o){var r=arguments.length===1?Un(this._isDirected,arguments[0]):zt(this._isDirected,t,n,o);return this._edgeLabels[r]}edgeAsObj(){const t=this.edge(...arguments);return typeof t!="object"?{label:t}:t}hasEdge(t,n,o){var r=arguments.length===1?Un(this._isDirected,arguments[0]):zt(this._isDirected,t,n,o);return Object.hasOwn(this._edgeLabels,r)}removeEdge(t,n,o){var r=arguments.length===1?Un(this._isDirected,arguments[0]):zt(this._isDirected,t,n,o),i=this._edgeObjs[r];return i&&(t=i.v,n=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],Dr(this._preds[n],t),Dr(this._sucs[t],n),delete this._in[n][r],delete this._out[t][r],this._edgeCount--),this}inEdges(t,n){var o=this._in[t];if(o){var r=Object.values(o);return n?r.filter(i=>i.v===n):r}}outEdges(t,n){var o=this._out[t];if(o){var r=Object.values(o);return n?r.filter(i=>i.w===n):r}}nodeEdges(t,n){var o=this.inEdges(t,n);if(o)return o.concat(this.outEdges(t,n))}};function Pr(e,t){e[t]?e[t]++:e[t]=1}function Dr(e,t){--e[t]||delete e[t]}function zt(e,t,n,o){var r=""+t,i=""+n;if(!e&&r>i){var a=r;r=i,i=a}return r+$r+i+$r+(o===void 0?ch:o)}function fh(e,t,n,o){var r=""+t,i=""+n;if(!e&&r>i){var a=r;r=i,i=a}var l={v:r,w:i};return o&&(l.name=o),l}function Un(e,t){return zt(e,t.v,t.w,t.name)}var Vo=dh,hh="2.2.4",ph={Graph:Vo,version:hh},gh=Vo,vh={write:mh,read:_h};function mh(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:yh(e),edges:wh(e)};return e.graph()!==void 0&&(t.value=structuredClone(e.graph())),t}function yh(e){return e.nodes().map(function(t){var n=e.node(t),o=e.parent(t),r={v:t};return n!==void 0&&(r.value=n),o!==void 0&&(r.parent=o),r})}function wh(e){return e.edges().map(function(t){var n=e.edge(t),o={v:t.v,w:t.w};return t.name!==void 0&&(o.name=t.name),n!==void 0&&(o.value=n),o})}function _h(e){var t=new gh(e.options).setGraph(e.value);return e.nodes.forEach(function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),e.edges.forEach(function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}var bh=Eh;function Eh(e){var t={},n=[],o;function r(i){Object.hasOwn(t,i)||(t[i]=!0,o.push(i),e.successors(i).forEach(r),e.predecessors(i).forEach(r))}return e.nodes().forEach(function(i){o=[],r(i),o.length&&n.push(o)}),n}let xh=class{constructor(){Ee(this,"_arr",[]);Ee(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(t){return t.key})}has(t){return Object.hasOwn(this._keyIndices,t)}priority(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(t,n){var o=this._keyIndices;if(t=String(t),!Object.hasOwn(o,t)){var r=this._arr,i=r.length;return o[t]=i,r.push({key:t,priority:n}),this._decrease(i),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key}decrease(t,n){var o=this._keyIndices[t];if(n>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[o].priority+" New: "+n);this._arr[o].priority=n,this._decrease(o)}_heapify(t){var n=this._arr,o=2*t,r=o+1,i=t;o<n.length&&(i=n[o].priority<n[i].priority?o:i,r<n.length&&(i=n[r].priority<n[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))}_decrease(t){for(var n=this._arr,o=n[t].priority,r;t!==0&&(r=t>>1,!(n[r].priority<o));)this._swap(t,r),t=r}_swap(t,n){var o=this._arr,r=this._keyIndices,i=o[t],a=o[n];o[t]=a,o[n]=i,r[a.key]=t,r[i.key]=n}};var fa=xh,Sh=fa,ha=kh,Nh=()=>1;function kh(e,t,n,o){return Ch(e,String(t),n||Nh,o||function(r){return e.outEdges(r)})}function Ch(e,t,n,o){var r={},i=new Sh,a,l,s=function(u){var c=u.v!==a?u.v:u.w,d=r[c],p=n(u),f=l.distance+p;if(p<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+u+" Weight: "+p);f<d.distance&&(d.distance=f,d.predecessor=a,i.decrease(c,f))};for(e.nodes().forEach(function(u){var c=u===t?0:Number.POSITIVE_INFINITY;r[u]={distance:c},i.add(u,c)});i.size()>0&&(a=i.removeMin(),l=r[a],l.distance!==Number.POSITIVE_INFINITY);)o(a).forEach(s);return r}var Ih=ha,Mh=Oh;function Oh(e,t,n){return e.nodes().reduce(function(o,r){return o[r]=Ih(e,r,t,n),o},{})}var pa=Th;function Th(e){var t=0,n=[],o={},r=[];function i(a){var l=o[a]={onStack:!0,lowlink:t,index:t++};if(n.push(a),e.successors(a).forEach(function(c){Object.hasOwn(o,c)?o[c].onStack&&(l.lowlink=Math.min(l.lowlink,o[c].index)):(i(c),l.lowlink=Math.min(l.lowlink,o[c].lowlink))}),l.lowlink===l.index){var s=[],u;do u=n.pop(),o[u].onStack=!1,s.push(u);while(a!==u);r.push(s)}}return e.nodes().forEach(function(a){Object.hasOwn(o,a)||i(a)}),r}var $h=pa,Ph=Dh;function Dh(e){return $h(e).filter(function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})}var Ah=Rh,Vh=()=>1;function Rh(e,t,n){return zh(e,t||Vh,n||function(o){return e.outEdges(o)})}function zh(e,t,n){var o={},r=e.nodes();return r.forEach(function(i){o[i]={},o[i][i]={distance:0},r.forEach(function(a){i!==a&&(o[i][a]={distance:Number.POSITIVE_INFINITY})}),n(i).forEach(function(a){var l=a.v===i?a.w:a.v,s=t(a);o[i][l]={distance:s,predecessor:i}})}),r.forEach(function(i){var a=o[i];r.forEach(function(l){var s=o[l];r.forEach(function(u){var c=s[i],d=a[u],p=s[u],f=c.distance+d.distance;f<p.distance&&(p.distance=f,p.predecessor=d.predecessor)})})}),o}function ga(e){var t={},n={},o=[];function r(i){if(Object.hasOwn(n,i))throw new bo;Object.hasOwn(t,i)||(n[i]=!0,t[i]=!0,e.predecessors(i).forEach(r),delete n[i],o.push(i))}if(e.sinks().forEach(r),Object.keys(t).length!==e.nodeCount())throw new bo;return o}class bo extends Error{constructor(){super(...arguments)}}var va=ga;ga.CycleException=bo;var Ar=va,Bh=Lh;function Lh(e){try{Ar(e)}catch(t){if(t instanceof Ar.CycleException)return!1;throw t}return!0}var ma=Fh;function Fh(e,t,n){Array.isArray(t)||(t=[t]);var o=e.isDirected()?l=>e.successors(l):l=>e.neighbors(l),r=n==="post"?Gh:Hh,i=[],a={};return t.forEach(l=>{if(!e.hasNode(l))throw new Error("Graph does not have node: "+l);r(l,o,a,i)}),i}function Gh(e,t,n,o){for(var r=[[e,!1]];r.length>0;){var i=r.pop();i[1]?o.push(i[0]):Object.hasOwn(n,i[0])||(n[i[0]]=!0,r.push([i[0],!0]),ya(t(i[0]),a=>r.push([a,!1])))}}function Hh(e,t,n,o){for(var r=[e];r.length>0;){var i=r.pop();Object.hasOwn(n,i)||(n[i]=!0,o.push(i),ya(t(i),a=>r.push(a)))}}function ya(e,t){for(var n=e.length;n--;)t(e[n],n,e);return e}var Yh=ma,Xh=jh;function jh(e,t){return Yh(e,t,"post")}var Wh=ma,Uh=Zh;function Zh(e,t){return Wh(e,t,"pre")}var Kh=Vo,qh=fa,Qh=Jh;function Jh(e,t){var n=new Kh,o={},r=new qh,i;function a(s){var u=s.v===i?s.w:s.v,c=r.priority(u);if(c!==void 0){var d=t(s);d<c&&(o[u]=i,r.decrease(u,d))}}if(e.nodeCount()===0)return n;e.nodes().forEach(function(s){r.add(s,Number.POSITIVE_INFINITY),n.setNode(s)}),r.decrease(e.nodes()[0],0);for(var l=!1;r.size()>0;){if(i=r.removeMin(),Object.hasOwn(o,i))n.setEdge(i,o[i]);else{if(l)throw new Error("Input graph is not connected: "+e);l=!0}e.nodeEdges(i).forEach(a)}return n}var ep={components:bh,dijkstra:ha,dijkstraAll:Mh,findCycles:Ph,floydWarshall:Ah,isAcyclic:Bh,postorder:Xh,preorder:Uh,prim:Qh,tarjan:pa,topsort:va},Vr=ph,He={Graph:Vr.Graph,json:vh,alg:ep,version:Vr.version};let tp=class{constructor(){let t={};t._next=t._prev=t,this._sentinel=t}dequeue(){let t=this._sentinel,n=t._prev;if(n!==t)return Rr(n),n}enqueue(t){let n=this._sentinel;t._prev&&t._next&&Rr(t),t._next=n._next,n._next._prev=t,n._next=t,t._prev=n}toString(){let t=[],n=this._sentinel,o=n._prev;for(;o!==n;)t.push(JSON.stringify(o,np)),o=o._prev;return"["+t.join(", ")+"]"}};function Rr(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function np(e,t){if(e!=="_next"&&e!=="_prev")return t}var op=tp;let rp=He.Graph,ip=op;var ap=sp;let lp=()=>1;function sp(e,t){if(e.nodeCount()<=1)return[];let n=cp(e,t||lp);return up(n.graph,n.buckets,n.zeroIdx).flatMap(r=>e.outEdges(r.v,r.w))}function up(e,t,n){let o=[],r=t[t.length-1],i=t[0],a;for(;e.nodeCount();){for(;a=i.dequeue();)Zn(e,t,n,a);for(;a=r.dequeue();)Zn(e,t,n,a);if(e.nodeCount()){for(let l=t.length-2;l>0;--l)if(a=t[l].dequeue(),a){o=o.concat(Zn(e,t,n,a,!0));break}}}return o}function Zn(e,t,n,o,r){let i=r?[]:void 0;return e.inEdges(o.v).forEach(a=>{let l=e.edge(a),s=e.node(a.v);r&&i.push({v:a.v,w:a.w}),s.out-=l,Eo(t,n,s)}),e.outEdges(o.v).forEach(a=>{let l=e.edge(a),s=a.w,u=e.node(s);u.in-=l,Eo(t,n,u)}),e.removeNode(o.v),i}function cp(e,t){let n=new rp,o=0,r=0;e.nodes().forEach(l=>{n.setNode(l,{v:l,in:0,out:0})}),e.edges().forEach(l=>{let s=n.edge(l.v,l.w)||0,u=t(l),c=s+u;n.setEdge(l.v,l.w,c),r=Math.max(r,n.node(l.v).out+=u),o=Math.max(o,n.node(l.w).in+=u)});let i=dp(r+o+3).map(()=>new ip),a=o+1;return n.nodes().forEach(l=>{Eo(i,a,n.node(l))}),{graph:n,buckets:i,zeroIdx:a}}function Eo(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}function dp(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}let wa=He.Graph;var Ie={addBorderNode:_p,addDummyNode:_a,applyWithChunking:Vn,asNonCompoundGraph:hp,buildLayerMatrix:mp,intersectRect:vp,mapValues:Cp,maxRank:Ea,normalizeRanks:yp,notime:Sp,partition:Ep,pick:kp,predecessorWeights:gp,range:Sa,removeEmptyRanks:wp,simplify:fp,successorWeights:pp,time:xp,uniqueId:xa,zipObject:Ro};function _a(e,t,n,o){let r;do r=xa(o);while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r}function fp(e){let t=new wa().setGraph(e.graph());return e.nodes().forEach(n=>t.setNode(n,e.node(n))),e.edges().forEach(n=>{let o=t.edge(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+r.weight,minlen:Math.max(o.minlen,r.minlen)})}),t}function hp(e){let t=new wa({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{e.children(n).length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdge(n,e.edge(n))}),t}function pp(e){let t=e.nodes().map(n=>{let o={};return e.outEdges(n).forEach(r=>{o[r.w]=(o[r.w]||0)+e.edge(r).weight}),o});return Ro(e.nodes(),t)}function gp(e){let t=e.nodes().map(n=>{let o={};return e.inEdges(n).forEach(r=>{o[r.v]=(o[r.v]||0)+e.edge(r).weight}),o});return Ro(e.nodes(),t)}function vp(e,t){let n=e.x,o=e.y,r=t.x-n,i=t.y-o,a=e.width/2,l=e.height/2;if(!r&&!i)throw new Error("Not possible to find intersection inside of the rectangle");let s,u;return Math.abs(i)*a>Math.abs(r)*l?(i<0&&(l=-l),s=l*r/i,u=l):(r<0&&(a=-a),s=a,u=a*i/r),{x:n+s,y:o+u}}function mp(e){let t=Sa(Ea(e)+1).map(()=>[]);return e.nodes().forEach(n=>{let o=e.node(n),r=o.rank;r!==void 0&&(t[r][o.order]=n)}),t}function yp(e){let t=e.nodes().map(o=>{let r=e.node(o).rank;return r===void 0?Number.MAX_VALUE:r}),n=Vn(Math.min,t);e.nodes().forEach(o=>{let r=e.node(o);Object.hasOwn(r,"rank")&&(r.rank-=n)})}function wp(e){let t=e.nodes().map(a=>e.node(a).rank),n=Vn(Math.min,t),o=[];e.nodes().forEach(a=>{let l=e.node(a).rank-n;o[l]||(o[l]=[]),o[l].push(a)});let r=0,i=e.graph().nodeRankFactor;Array.from(o).forEach((a,l)=>{a===void 0&&l%i!==0?--r:a!==void 0&&r&&a.forEach(s=>e.node(s).rank+=r)})}function _p(e,t,n,o){let r={width:0,height:0};return arguments.length>=4&&(r.rank=n,r.order=o),_a(e,"border",r,t)}function bp(e,t=ba){const n=[];for(let o=0;o<e.length;o+=t){const r=e.slice(o,o+t);n.push(r)}return n}const ba=65535;function Vn(e,t){if(t.length>ba){const n=bp(t);return e.apply(null,n.map(o=>e.apply(null,o)))}else return e.apply(null,t)}function Ea(e){const n=e.nodes().map(o=>{let r=e.node(o).rank;return r===void 0?Number.MIN_VALUE:r});return Vn(Math.max,n)}function Ep(e,t){let n={lhs:[],rhs:[]};return e.forEach(o=>{t(o)?n.lhs.push(o):n.rhs.push(o)}),n}function xp(e,t){let n=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-n)+"ms")}}function Sp(e,t){return t()}let Np=0;function xa(e){var t=++Np;return toString(e)+t}function Sa(e,t,n=1){t==null&&(t=e,e=0);let o=i=>i<t;n<0&&(o=i=>t<i);const r=[];for(let i=e;o(i);i+=n)r.push(i);return r}function kp(e,t){const n={};for(const o of t)e[o]!==void 0&&(n[o]=e[o]);return n}function Cp(e,t){let n=t;return typeof t=="string"&&(n=o=>o[t]),Object.entries(e).reduce((o,[r,i])=>(o[r]=n(i,r),o),{})}function Ro(e,t){return e.reduce((n,o,r)=>(n[o]=t[r],n),{})}let Ip=ap,Mp=Ie.uniqueId;var Op={run:Tp,undo:Pp};function Tp(e){(e.graph().acyclicer==="greedy"?Ip(e,n(e)):$p(e)).forEach(o=>{let r=e.edge(o);e.removeEdge(o),r.forwardName=o.name,r.reversed=!0,e.setEdge(o.w,o.v,r,Mp("rev"))});function n(o){return r=>o.edge(r).weight}}function $p(e){let t=[],n={},o={};function r(i){Object.hasOwn(o,i)||(o[i]=!0,n[i]=!0,e.outEdges(i).forEach(a=>{Object.hasOwn(n,a.w)?t.push(a):r(a.w)}),delete n[i])}return e.nodes().forEach(r),t}function Pp(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.reversed){e.removeEdge(t);let o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}})}let Dp=Ie;var Ap={run:Vp,undo:zp};function Vp(e){e.graph().dummyChains=[],e.edges().forEach(t=>Rp(e,t))}function Rp(e,t){let n=t.v,o=e.node(n).rank,r=t.w,i=e.node(r).rank,a=t.name,l=e.edge(t),s=l.labelRank;if(i===o+1)return;e.removeEdge(t);let u,c,d;for(d=0,++o;o<i;++d,++o)l.points=[],c={width:0,height:0,edgeLabel:l,edgeObj:t,rank:o},u=Dp.addDummyNode(e,"edge",c,"_d"),o===s&&(c.width=l.width,c.height=l.height,c.dummy="edge-label",c.labelpos=l.labelpos),e.setEdge(n,u,{weight:l.weight},a),d===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,r,{weight:l.weight},a)}function zp(e){e.graph().dummyChains.forEach(t=>{let n=e.node(t),o=n.edgeLabel,r;for(e.setEdge(n.edgeObj,o);n.dummy;)r=e.successors(t)[0],e.removeNode(t),o.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),t=r,n=e.node(t)})}const{applyWithChunking:Bp}=Ie;var Rn={longestPath:Lp,slack:Fp};function Lp(e){var t={};function n(o){var r=e.node(o);if(Object.hasOwn(t,o))return r.rank;t[o]=!0;let i=e.outEdges(o).map(l=>l==null?Number.POSITIVE_INFINITY:n(l.w)-e.edge(l).minlen);var a=Bp(Math.min,i);return a===Number.POSITIVE_INFINITY&&(a=0),r.rank=a}e.sources().forEach(n)}function Fp(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Gp=He.Graph,bn=Rn.slack,Na=Hp;function Hp(e){var t=new Gp({directed:!1}),n=e.nodes()[0],o=e.nodeCount();t.setNode(n,{});for(var r,i;Yp(t,e)<o;)r=Xp(t,e),i=t.hasNode(r.v)?bn(e,r):-bn(e,r),jp(t,e,i);return t}function Yp(e,t){function n(o){t.nodeEdges(o).forEach(r=>{var i=r.v,a=o===i?r.w:i;!e.hasNode(a)&&!bn(t,r)&&(e.setNode(a,{}),e.setEdge(o,a,{}),n(a))})}return e.nodes().forEach(n),e.nodeCount()}function Xp(e,t){return t.edges().reduce((o,r)=>{let i=Number.POSITIVE_INFINITY;return e.hasNode(r.v)!==e.hasNode(r.w)&&(i=bn(t,r)),i<o[0]?[i,r]:o},[Number.POSITIVE_INFINITY,null])[1]}function jp(e,t,n){e.nodes().forEach(o=>t.node(o).rank+=n)}var Wp=Na,zr=Rn.slack,Up=Rn.longestPath,Zp=He.alg.preorder,Kp=He.alg.postorder,qp=Ie.simplify,Qp=_t;_t.initLowLimValues=Bo;_t.initCutValues=zo;_t.calcCutValue=ka;_t.leaveEdge=Ia;_t.enterEdge=Ma;_t.exchangeEdges=Oa;function _t(e){e=qp(e),Up(e);var t=Wp(e);Bo(t),zo(t,e);for(var n,o;n=Ia(t);)o=Ma(t,e,n),Oa(t,e,n,o)}function zo(e,t){var n=Kp(e,e.nodes());n=n.slice(0,n.length-1),n.forEach(o=>Jp(e,t,o))}function Jp(e,t,n){var o=e.node(n),r=o.parent;e.edge(n,r).cutvalue=ka(e,t,n)}function ka(e,t,n){var o=e.node(n),r=o.parent,i=!0,a=t.edge(n,r),l=0;return a||(i=!1,a=t.edge(r,n)),l=a.weight,t.nodeEdges(n).forEach(s=>{var u=s.v===n,c=u?s.w:s.v;if(c!==r){var d=u===i,p=t.edge(s).weight;if(l+=d?p:-p,tg(e,n,c)){var f=e.edge(n,c).cutvalue;l+=d?-f:f}}}),l}function Bo(e,t){arguments.length<2&&(t=e.nodes()[0]),Ca(e,{},1,t)}function Ca(e,t,n,o,r){var i=n,a=e.node(o);return t[o]=!0,e.neighbors(o).forEach(l=>{Object.hasOwn(t,l)||(n=Ca(e,t,n,l,o))}),a.low=i,a.lim=n++,r?a.parent=r:delete a.parent,n}function Ia(e){return e.edges().find(t=>e.edge(t).cutvalue<0)}function Ma(e,t,n){var o=n.v,r=n.w;t.hasEdge(o,r)||(o=n.w,r=n.v);var i=e.node(o),a=e.node(r),l=i,s=!1;i.lim>a.lim&&(l=a,s=!0);var u=t.edges().filter(c=>s===Br(e,e.node(c.v),l)&&s!==Br(e,e.node(c.w),l));return u.reduce((c,d)=>zr(t,d)<zr(t,c)?d:c)}function Oa(e,t,n,o){var r=n.v,i=n.w;e.removeEdge(r,i),e.setEdge(o.v,o.w,{}),Bo(e),zo(e,t),eg(e,t)}function eg(e,t){var n=e.nodes().find(r=>!t.node(r).parent),o=Zp(e,n);o=o.slice(1),o.forEach(r=>{var i=e.node(r).parent,a=t.edge(r,i),l=!1;a||(a=t.edge(i,r),l=!0),t.node(r).rank=t.node(i).rank+(l?a.minlen:-a.minlen)})}function tg(e,t,n){return e.hasEdge(t,n)}function Br(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var ng=Rn,Ta=ng.longestPath,og=Na,rg=Qp,ig=ag;function ag(e){switch(e.graph().ranker){case"network-simplex":Lr(e);break;case"tight-tree":sg(e);break;case"longest-path":lg(e);break;default:Lr(e)}}var lg=Ta;function sg(e){Ta(e),og(e)}function Lr(e){rg(e)}var ug=cg;function cg(e){let t=fg(e);e.graph().dummyChains.forEach(n=>{let o=e.node(n),r=o.edgeObj,i=dg(e,t,r.v,r.w),a=i.path,l=i.lca,s=0,u=a[s],c=!0;for(;n!==r.w;){if(o=e.node(n),c){for(;(u=a[s])!==l&&e.node(u).maxRank<o.rank;)s++;u===l&&(c=!1)}if(!c){for(;s<a.length-1&&e.node(u=a[s+1]).minRank<=o.rank;)s++;u=a[s]}e.setParent(n,u),n=e.successors(n)[0]}})}function dg(e,t,n,o){let r=[],i=[],a=Math.min(t[n].low,t[o].low),l=Math.max(t[n].lim,t[o].lim),s,u;s=n;do s=e.parent(s),r.push(s);while(s&&(t[s].low>a||l>t[s].lim));for(u=s,s=o;(s=e.parent(s))!==u;)i.push(s);return{path:r.concat(i.reverse()),lca:u}}function fg(e){let t={},n=0;function o(r){let i=n;e.children(r).forEach(o),t[r]={low:i,lim:n++}}return e.children().forEach(o),t}let En=Ie;var hg={run:pg,cleanup:mg};function pg(e){let t=En.addDummyNode(e,"root",{},"_root"),n=gg(e),o=Object.values(n),r=En.applyWithChunking(Math.max,o)-1,i=2*r+1;e.graph().nestingRoot=t,e.edges().forEach(l=>e.edge(l).minlen*=i);let a=vg(e)+1;e.children().forEach(l=>$a(e,t,i,a,r,n,l)),e.graph().nodeRankFactor=i}function $a(e,t,n,o,r,i,a){let l=e.children(a);if(!l.length){a!==t&&e.setEdge(t,a,{weight:0,minlen:n});return}let s=En.addBorderNode(e,"_bt"),u=En.addBorderNode(e,"_bb"),c=e.node(a);e.setParent(s,a),c.borderTop=s,e.setParent(u,a),c.borderBottom=u,l.forEach(d=>{$a(e,t,n,o,r,i,d);let p=e.node(d),f=p.borderTop?p.borderTop:d,g=p.borderBottom?p.borderBottom:d,_=p.borderTop?o:2*o,w=f!==g?1:r-i[a]+1;e.setEdge(s,f,{weight:_,minlen:w,nestingEdge:!0}),e.setEdge(g,u,{weight:_,minlen:w,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,s,{weight:0,minlen:r+i[a]})}function gg(e){var t={};function n(o,r){var i=e.children(o);i&&i.length&&i.forEach(a=>n(a,r+1)),t[o]=r}return e.children().forEach(o=>n(o,1)),t}function vg(e){return e.edges().reduce((t,n)=>t+e.edge(n).weight,0)}function mg(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{var o=e.edge(n);o.nestingEdge&&e.removeEdge(n)})}let yg=Ie;var wg=_g;function _g(e){function t(n){let o=e.children(n),r=e.node(n);if(o.length&&o.forEach(t),Object.hasOwn(r,"minRank")){r.borderLeft=[],r.borderRight=[];for(let i=r.minRank,a=r.maxRank+1;i<a;++i)Fr(e,"borderLeft","_bl",n,r,i),Fr(e,"borderRight","_br",n,r,i)}}e.children().forEach(t)}function Fr(e,t,n,o,r,i){let a={width:0,height:0,rank:i,borderType:t},l=r[t][i-1],s=yg.addDummyNode(e,"border",a,n);r[t][i]=s,e.setParent(s,o),l&&e.setEdge(l,s,{weight:1})}var bg={adjust:Eg,undo:xg};function Eg(e){let t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Pa(e)}function xg(e){let t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&Sg(e),(t==="lr"||t==="rl")&&(Ng(e),Pa(e))}function Pa(e){e.nodes().forEach(t=>Gr(e.node(t))),e.edges().forEach(t=>Gr(e.edge(t)))}function Gr(e){let t=e.width;e.width=e.height,e.height=t}function Sg(e){e.nodes().forEach(t=>Kn(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(Kn),Object.hasOwn(n,"y")&&Kn(n)})}function Kn(e){e.y=-e.y}function Ng(e){e.nodes().forEach(t=>qn(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(qn),Object.hasOwn(n,"x")&&qn(n)})}function qn(e){let t=e.x;e.x=e.y,e.y=t}let Hr=Ie;var kg=Cg;function Cg(e){let t={},n=e.nodes().filter(s=>!e.children(s).length),o=n.map(s=>e.node(s).rank),r=Hr.applyWithChunking(Math.max,o),i=Hr.range(r+1).map(()=>[]);function a(s){if(t[s])return;t[s]=!0;let u=e.node(s);i[u.rank].push(s),e.successors(s).forEach(a)}return n.sort((s,u)=>e.node(s).rank-e.node(u).rank).forEach(a),i}let Ig=Ie.zipObject;var Mg=Og;function Og(e,t){let n=0;for(let o=1;o<t.length;++o)n+=Tg(e,t[o-1],t[o]);return n}function Tg(e,t,n){let o=Ig(n,n.map((u,c)=>c)),r=t.flatMap(u=>e.outEdges(u).map(c=>({pos:o[c.w],weight:e.edge(c).weight})).sort((c,d)=>c.pos-d.pos)),i=1;for(;i<n.length;)i<<=1;let a=2*i-1;i-=1;let l=new Array(a).fill(0),s=0;return r.forEach(u=>{let c=u.pos+i;l[c]+=u.weight;let d=0;for(;c>0;)c%2&&(d+=l[c+1]),c=c-1>>1,l[c]+=u.weight;s+=u.weight*d}),s}var $g=Pg;function Pg(e,t=[]){return t.map(n=>{let o=e.inEdges(n);if(o.length){let r=o.reduce((i,a)=>{let l=e.edge(a),s=e.node(a.v);return{sum:i.sum+l.weight*s.order,weight:i.weight+l.weight}},{sum:0,weight:0});return{v:n,barycenter:r.sum/r.weight,weight:r.weight}}else return{v:n}})}let Dg=Ie;var Ag=Vg;function Vg(e,t){let n={};e.forEach((r,i)=>{let a=n[r.v]={indegree:0,in:[],out:[],vs:[r.v],i};r.barycenter!==void 0&&(a.barycenter=r.barycenter,a.weight=r.weight)}),t.edges().forEach(r=>{let i=n[r.v],a=n[r.w];i!==void 0&&a!==void 0&&(a.indegree++,i.out.push(n[r.w]))});let o=Object.values(n).filter(r=>!r.indegree);return Rg(o)}function Rg(e){let t=[];function n(r){return i=>{i.merged||(i.barycenter===void 0||r.barycenter===void 0||i.barycenter>=r.barycenter)&&zg(r,i)}}function o(r){return i=>{i.in.push(r),--i.indegree===0&&e.push(i)}}for(;e.length;){let r=e.pop();t.push(r),r.in.reverse().forEach(n(r)),r.out.forEach(o(r))}return t.filter(r=>!r.merged).map(r=>Dg.pick(r,["vs","i","barycenter","weight"]))}function zg(e,t){let n=0,o=0;e.weight&&(n+=e.barycenter*e.weight,o+=e.weight),t.weight&&(n+=t.barycenter*t.weight,o+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/o,e.weight=o,e.i=Math.min(t.i,e.i),t.merged=!0}let Bg=Ie;var Lg=Fg;function Fg(e,t){let n=Bg.partition(e,c=>Object.hasOwn(c,"barycenter")),o=n.lhs,r=n.rhs.sort((c,d)=>d.i-c.i),i=[],a=0,l=0,s=0;o.sort(Gg(!!t)),s=Yr(i,r,s),o.forEach(c=>{s+=c.vs.length,i.push(c.vs),a+=c.barycenter*c.weight,l+=c.weight,s=Yr(i,r,s)});let u={vs:i.flat(!0)};return l&&(u.barycenter=a/l,u.weight=l),u}function Yr(e,t,n){let o;for(;t.length&&(o=t[t.length-1]).i<=n;)t.pop(),e.push(o.vs),n++;return n}function Gg(e){return(t,n)=>t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}let Hg=$g,Yg=Ag,Xg=Lg;var jg=Da;function Da(e,t,n,o){let r=e.children(t),i=e.node(t),a=i?i.borderLeft:void 0,l=i?i.borderRight:void 0,s={};a&&(r=r.filter(p=>p!==a&&p!==l));let u=Hg(e,r);u.forEach(p=>{if(e.children(p.v).length){let f=Da(e,p.v,n,o);s[p.v]=f,Object.hasOwn(f,"barycenter")&&Ug(p,f)}});let c=Yg(u,n);Wg(c,s);let d=Xg(c,o);if(a&&(d.vs=[a,d.vs,l].flat(!0),e.predecessors(a).length)){let p=e.node(e.predecessors(a)[0]),f=e.node(e.predecessors(l)[0]);Object.hasOwn(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+p.order+f.order)/(d.weight+2),d.weight+=2}return d}function Wg(e,t){e.forEach(n=>{n.vs=n.vs.flatMap(o=>t[o]?t[o].vs:o)})}function Ug(e,t){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)}let Zg=He.Graph,Kg=Ie;var qg=Qg;function Qg(e,t,n){let o=Jg(e),r=new Zg({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(i=>e.node(i));return e.nodes().forEach(i=>{let a=e.node(i),l=e.parent(i);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(r.setNode(i),r.setParent(i,l||o),e[n](i).forEach(s=>{let u=s.v===i?s.w:s.v,c=r.edge(u,i),d=c!==void 0?c.weight:0;r.setEdge(u,i,{weight:e.edge(s).weight+d})}),Object.hasOwn(a,"minRank")&&r.setNode(i,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),r}function Jg(e){for(var t;e.hasNode(t=Kg.uniqueId("_root")););return t}var ev=tv;function tv(e,t,n){let o={},r;n.forEach(i=>{let a=e.parent(i),l,s;for(;a;){if(l=e.parent(a),l?(s=o[l],o[l]=a):(s=r,r=a),s&&s!==a){t.setEdge(s,a);return}a=l}})}let nv=kg,ov=Mg,rv=jg,iv=qg,av=ev,lv=He.Graph,an=Ie;var sv=Aa;function Aa(e,t){if(t&&typeof t.customOrder=="function"){t.customOrder(e,Aa);return}let n=an.maxRank(e),o=Xr(e,an.range(1,n+1),"inEdges"),r=Xr(e,an.range(n-1,-1,-1),"outEdges"),i=nv(e);if(jr(e,i),t&&t.disableOptimalOrderHeuristic)return;let a=Number.POSITIVE_INFINITY,l;for(let s=0,u=0;u<4;++s,++u){uv(s%2?o:r,s%4>=2),i=an.buildLayerMatrix(e);let c=ov(e,i);c<a&&(u=0,l=Object.assign({},i),a=c)}jr(e,l)}function Xr(e,t,n){return t.map(function(o){return iv(e,o,n)})}function uv(e,t){let n=new lv;e.forEach(function(o){let r=o.graph().root,i=rv(o,r,n,t);i.vs.forEach((a,l)=>o.node(a).order=l),av(o,n,i.vs)})}function jr(e,t){Object.values(t).forEach(n=>n.forEach((o,r)=>e.node(o).order=r))}let cv=He.Graph,Ke=Ie;var dv={positionX:pv,findType1Conflicts:Va,findType2Conflicts:Ra,addConflict:Lo,hasConflict:za,verticalAlignment:Ba,horizontalCompaction:La,alignCoordinates:Ga,findSmallestWidthAlignment:Fa,balance:Ha};function Va(e,t){let n={};function o(r,i){let a=0,l=0,s=r.length,u=i[i.length-1];return i.forEach((c,d)=>{let p=fv(e,c),f=p?e.node(p).order:s;(p||c===u)&&(i.slice(l,d+1).forEach(g=>{e.predecessors(g).forEach(_=>{let w=e.node(_),E=w.order;(E<a||f<E)&&!(w.dummy&&e.node(g).dummy)&&Lo(n,_,g)})}),l=d+1,a=f)}),i}return t.length&&t.reduce(o),n}function Ra(e,t){let n={};function o(i,a,l,s,u){let c;Ke.range(a,l).forEach(d=>{c=i[d],e.node(c).dummy&&e.predecessors(c).forEach(p=>{let f=e.node(p);f.dummy&&(f.order<s||f.order>u)&&Lo(n,p,c)})})}function r(i,a){let l=-1,s,u=0;return a.forEach((c,d)=>{if(e.node(c).dummy==="border"){let p=e.predecessors(c);p.length&&(s=e.node(p[0]).order,o(a,u,d,l,s),u=d,l=s)}o(a,u,a.length,s,i.length)}),a}return t.length&&t.reduce(r),n}function fv(e,t){if(e.node(t).dummy)return e.predecessors(t).find(n=>e.node(n).dummy)}function Lo(e,t,n){if(t>n){let r=t;t=n,n=r}let o=e[t];o||(e[t]=o={}),o[n]=!0}function za(e,t,n){if(t>n){let o=t;t=n,n=o}return!!e[t]&&Object.hasOwn(e[t],n)}function Ba(e,t,n,o){let r={},i={},a={};return t.forEach(l=>{l.forEach((s,u)=>{r[s]=s,i[s]=s,a[s]=u})}),t.forEach(l=>{let s=-1;l.forEach(u=>{let c=o(u);if(c.length){c=c.sort((p,f)=>a[p]-a[f]);let d=(c.length-1)/2;for(let p=Math.floor(d),f=Math.ceil(d);p<=f;++p){let g=c[p];i[u]===u&&s<a[g]&&!za(n,u,g)&&(i[g]=u,i[u]=r[u]=r[g],s=a[g])}}})}),{root:r,align:i}}function La(e,t,n,o,r){let i={},a=hv(e,t,n,r),l=r?"borderLeft":"borderRight";function s(d,p){let f=a.nodes(),g=f.pop(),_={};for(;g;)_[g]?d(g):(_[g]=!0,f.push(g),f=f.concat(p(g))),g=f.pop()}function u(d){i[d]=a.inEdges(d).reduce((p,f)=>Math.max(p,i[f.v]+a.edge(f)),0)}function c(d){let p=a.outEdges(d).reduce((g,_)=>Math.min(g,i[_.w]-a.edge(_)),Number.POSITIVE_INFINITY),f=e.node(d);p!==Number.POSITIVE_INFINITY&&f.borderType!==l&&(i[d]=Math.max(i[d],p))}return s(u,a.predecessors.bind(a)),s(c,a.successors.bind(a)),Object.keys(o).forEach(d=>i[d]=i[n[d]]),i}function hv(e,t,n,o){let r=new cv,i=e.graph(),a=gv(i.nodesep,i.edgesep,o);return t.forEach(l=>{let s;l.forEach(u=>{let c=n[u];if(r.setNode(c),s){var d=n[s],p=r.edge(d,c);r.setEdge(d,c,Math.max(a(e,u,s),p||0))}s=u})}),r}function Fa(e,t){return Object.values(t).reduce((n,o)=>{let r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;Object.entries(o).forEach(([l,s])=>{let u=vv(e,l)/2;r=Math.max(s+u,r),i=Math.min(s-u,i)});const a=r-i;return a<n[0]&&(n=[a,o]),n},[Number.POSITIVE_INFINITY,null])[1]}function Ga(e,t){let n=Object.values(t),o=Ke.applyWithChunking(Math.min,n),r=Ke.applyWithChunking(Math.max,n);["u","d"].forEach(i=>{["l","r"].forEach(a=>{let l=i+a,s=e[l];if(s===t)return;let u=Object.values(s),c=o-Ke.applyWithChunking(Math.min,u);a!=="l"&&(c=r-Ke.applyWithChunking(Math.max,u)),c&&(e[l]=Ke.mapValues(s,d=>d+c))})})}function Ha(e,t){return Ke.mapValues(e.ul,(n,o)=>{if(t)return e[t.toLowerCase()][o];{let r=Object.values(e).map(i=>i[o]).sort((i,a)=>i-a);return(r[1]+r[2])/2}})}function pv(e){let t=Ke.buildLayerMatrix(e),n=Object.assign(Va(e,t),Ra(e,t)),o={},r;["u","d"].forEach(a=>{r=a==="u"?t:Object.values(t).reverse(),["l","r"].forEach(l=>{l==="r"&&(r=r.map(d=>Object.values(d).reverse()));let s=(a==="u"?e.predecessors:e.successors).bind(e),u=Ba(e,r,n,s),c=La(e,r,u.root,u.align,l==="r");l==="r"&&(c=Ke.mapValues(c,d=>-d)),o[a+l]=c})});let i=Fa(e,o);return Ga(o,i),Ha(o,e.graph().align)}function gv(e,t,n){return(o,r,i)=>{let a=o.node(r),l=o.node(i),s=0,u;if(s+=a.width/2,Object.hasOwn(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=-a.width/2;break;case"r":u=a.width/2;break}if(u&&(s+=n?u:-u),u=0,s+=(a.dummy?t:e)/2,s+=(l.dummy?t:e)/2,s+=l.width/2,Object.hasOwn(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":u=l.width/2;break;case"r":u=-l.width/2;break}return u&&(s+=n?u:-u),u=0,s}}function vv(e,t){return e.node(t).width}let Ya=Ie,mv=dv.positionX;var yv=wv;function wv(e){e=Ya.asNonCompoundGraph(e),_v(e),Object.entries(mv(e)).forEach(([t,n])=>e.node(t).x=n)}function _v(e){let t=Ya.buildLayerMatrix(e),n=e.graph().ranksep,o=0;t.forEach(r=>{const i=r.reduce((a,l)=>{const s=e.node(l).height;return a>s?a:s},0);r.forEach(a=>e.node(a).y=o+i/2),o+=i+n})}let Wr=Op,Ur=Ap,bv=ig,Ev=Ie.normalizeRanks,xv=ug,Sv=Ie.removeEmptyRanks,Zr=hg,Nv=wg,Kr=bg,kv=sv,Cv=yv,Be=Ie,Iv=He.Graph;var Mv=Ov;function Ov(e,t){let n=t&&t.debugTiming?Be.time:Be.notime;n("layout",()=>{let o=n("  buildLayoutGraph",()=>Lv(e));n("  runLayout",()=>Tv(o,n,t)),n("  updateInputGraph",()=>$v(e,o))})}function Tv(e,t,n){t("    makeSpaceForEdgeLabels",()=>Fv(e)),t("    removeSelfEdges",()=>Kv(e)),t("    acyclic",()=>Wr.run(e)),t("    nestingGraph.run",()=>Zr.run(e)),t("    rank",()=>bv(Be.asNonCompoundGraph(e))),t("    injectEdgeLabelProxies",()=>Gv(e)),t("    removeEmptyRanks",()=>Sv(e)),t("    nestingGraph.cleanup",()=>Zr.cleanup(e)),t("    normalizeRanks",()=>Ev(e)),t("    assignRankMinMax",()=>Hv(e)),t("    removeEdgeLabelProxies",()=>Yv(e)),t("    normalize.run",()=>Ur.run(e)),t("    parentDummyChains",()=>xv(e)),t("    addBorderSegments",()=>Nv(e)),t("    order",()=>kv(e,n)),t("    insertSelfEdges",()=>qv(e)),t("    adjustCoordinateSystem",()=>Kr.adjust(e)),t("    position",()=>Cv(e)),t("    positionSelfEdges",()=>Qv(e)),t("    removeBorderNodes",()=>Zv(e)),t("    normalize.undo",()=>Ur.undo(e)),t("    fixupEdgeLabelCoords",()=>Wv(e)),t("    undoCoordinateSystem",()=>Kr.undo(e)),t("    translateGraph",()=>Xv(e)),t("    assignNodeIntersects",()=>jv(e)),t("    reversePoints",()=>Uv(e)),t("    acyclic.undo",()=>Wr.undo(e))}function $v(e,t){e.nodes().forEach(n=>{let o=e.node(n),r=t.node(n);o&&(o.x=r.x,o.y=r.y,o.rank=r.rank,t.children(n).length&&(o.width=r.width,o.height=r.height))}),e.edges().forEach(n=>{let o=e.edge(n),r=t.edge(n);o.points=r.points,Object.hasOwn(r,"x")&&(o.x=r.x,o.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}let Pv=["nodesep","edgesep","ranksep","marginx","marginy"],Dv={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Av=["acyclicer","ranker","rankdir","align"],Vv=["width","height"],qr={width:0,height:0},Rv=["minlen","weight","width","height","labeloffset"],zv={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Bv=["labelpos"];function Lv(e){let t=new Iv({multigraph:!0,compound:!0}),n=Jn(e.graph());return t.setGraph(Object.assign({},Dv,Qn(n,Pv),Be.pick(n,Av))),e.nodes().forEach(o=>{let r=Jn(e.node(o));const i=Qn(r,Vv);Object.keys(qr).forEach(a=>{i[a]===void 0&&(i[a]=qr[a])}),t.setNode(o,i),t.setParent(o,e.parent(o))}),e.edges().forEach(o=>{let r=Jn(e.edge(o));t.setEdge(o,Object.assign({},zv,Qn(r,Rv),Be.pick(r,Bv)))}),t}function Fv(e){let t=e.graph();t.ranksep/=2,e.edges().forEach(n=>{let o=e.edge(n);o.minlen*=2,o.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?o.width+=o.labeloffset:o.height+=o.labeloffset)})}function Gv(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.width&&n.height){let o=e.node(t.v),i={rank:(e.node(t.w).rank-o.rank)/2+o.rank,e:t};Be.addDummyNode(e,"edge-proxy",i,"_ep")}})}function Hv(e){let t=0;e.nodes().forEach(n=>{let o=e.node(n);o.borderTop&&(o.minRank=e.node(o.borderTop).rank,o.maxRank=e.node(o.borderBottom).rank,t=Math.max(t,o.maxRank))}),e.graph().maxRank=t}function Yv(e){e.nodes().forEach(t=>{let n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function Xv(e){let t=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,r=0,i=e.graph(),a=i.marginx||0,l=i.marginy||0;function s(u){let c=u.x,d=u.y,p=u.width,f=u.height;t=Math.min(t,c-p/2),n=Math.max(n,c+p/2),o=Math.min(o,d-f/2),r=Math.max(r,d+f/2)}e.nodes().forEach(u=>s(e.node(u))),e.edges().forEach(u=>{let c=e.edge(u);Object.hasOwn(c,"x")&&s(c)}),t-=a,o-=l,e.nodes().forEach(u=>{let c=e.node(u);c.x-=t,c.y-=o}),e.edges().forEach(u=>{let c=e.edge(u);c.points.forEach(d=>{d.x-=t,d.y-=o}),Object.hasOwn(c,"x")&&(c.x-=t),Object.hasOwn(c,"y")&&(c.y-=o)}),i.width=n-t+a,i.height=r-o+l}function jv(e){e.edges().forEach(t=>{let n=e.edge(t),o=e.node(t.v),r=e.node(t.w),i,a;n.points?(i=n.points[0],a=n.points[n.points.length-1]):(n.points=[],i=r,a=o),n.points.unshift(Be.intersectRect(o,i)),n.points.push(Be.intersectRect(r,a))})}function Wv(e){e.edges().forEach(t=>{let n=e.edge(t);if(Object.hasOwn(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function Uv(e){e.edges().forEach(t=>{let n=e.edge(t);n.reversed&&n.points.reverse()})}function Zv(e){e.nodes().forEach(t=>{if(e.children(t).length){let n=e.node(t),o=e.node(n.borderTop),r=e.node(n.borderBottom),i=e.node(n.borderLeft[n.borderLeft.length-1]),a=e.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(a.x-i.x),n.height=Math.abs(r.y-o.y),n.x=i.x+n.width/2,n.y=o.y+n.height/2}}),e.nodes().forEach(t=>{e.node(t).dummy==="border"&&e.removeNode(t)})}function Kv(e){e.edges().forEach(t=>{if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function qv(e){var t=Be.buildLayerMatrix(e);t.forEach(n=>{var o=0;n.forEach((r,i)=>{var a=e.node(r);a.order=i+o,(a.selfEdges||[]).forEach(l=>{Be.addDummyNode(e,"selfedge",{width:l.label.width,height:l.label.height,rank:a.rank,order:i+ ++o,e:l.e,label:l.label},"_se")}),delete a.selfEdges})})}function Qv(e){e.nodes().forEach(t=>{var n=e.node(t);if(n.dummy==="selfedge"){var o=e.node(n.e.v),r=o.x+o.width/2,i=o.y,a=n.x-r,l=o.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*a/3,y:i-l},{x:r+5*a/6,y:i-l},{x:r+a,y:i},{x:r+5*a/6,y:i+l},{x:r+2*a/3,y:i+l}],n.label.x=n.x,n.label.y=n.y}})}function Qn(e,t){return Be.mapValues(Be.pick(e,t),Number)}function Jn(e){var t={};return e&&Object.entries(e).forEach(([n,o])=>{typeof n=="string"&&(n=n.toLowerCase()),t[n]=o}),t}let Jv=Ie,em=He.Graph;var tm={debugOrdering:nm};function nm(e){let t=Jv.buildLayerMatrix(e),n=new em({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(o=>{n.setNode(o,{label:o}),n.setParent(o,"layer"+e.node(o).rank)}),e.edges().forEach(o=>n.setEdge(o.v,o.w,{},o.name)),t.forEach((o,r)=>{let i="layer"+r;n.setNode(i,{rank:"same"}),o.reduce((a,l)=>(n.setEdge(a,l,{style:"invis"}),l))}),n}var om="1.1.4",rm={graphlib:He,layout:Mv,debug:tm,util:{time:Ie.time,notime:Ie.notime},version:om};const Qr=il(rm),im=_e({__name:"AxialLeadBar",props:ii({color:null,luster:{type:Boolean}},{luster:!1}),setup(e){return ai(t=>({"57d50bcd":t.color})),(t,n)=>(te(),ue("div",{class:gt(["axial-lead-bar",{luster:t.luster}])},null,2))}}),am={class:"axial-lead"},lm={class:"label"},eo=_e({__name:"AxialLead",props:ii({text:null,color:null,colorCodes:null,barsAlign:null,barWidth:null,separatorWidth:null},{text:"",color:"white",barsAlign:"center",barWidth:8,separatorWidth:4}),setup(e){return ai(t=>({"7000277e":t.color})),(t,n)=>(te(),ue("div",am,[Me("div",lm,Te(t.text),1),Me("div",{class:"bar-container",style:Ae({justifyContent:t.barsAlign})},[(te(!0),ue(Re,null,vt(t.colorCodes,(o,r)=>(te(),$e(im,{key:r,color:o.color.hex,luster:o.color.luster,style:Ae({width:t.barWidth+"px",margin:`0 ${t.separatorWidth}px`})},null,8,["color","luster","style"]))),128))],4)]))}}),sm=25,um=5,Jr=15,cm=_e({__name:"CombinationDialog",props:{result:null,combination:null},setup(e){const t={x:0,y:0},n={width:7.5,height:7.5,borderWidth:3},o={width:2.5,height:2.5,borderWidth:0},r={width:70,height:20,borderWidth:1};function i(s){const u=[{id:"S",type:"start",position:t}],c=[];let d=0;function p(g,_){if(g.type==="term"){const w=(d++).toString();u.push({id:w,type:"component",data:{value:g.children,label:`${xn.fit(g.children,e.result.componentType.prefixSymbols).toSimpleString(3)}${e.result.componentType.unit}`},position:t});for(const E of _)c.push({id:`e${E}-${w}`,source:E,target:w});return[w]}else if(g.type==="series"){let w=_;return g.children.forEach(E=>{const v=p(E,w);if(w.length>1&&v.length>1){const I=w,S=new Set(I.flatMap(R=>c.filter(T=>T.source===R).map(T=>T.target))),A=`j${d++}`;u.push({id:A,type:"junction",position:t});for(const R of w)for(const T of S)c.splice(c.findIndex(X=>X.source===R&&X.target===T),1);for(const R of w)c.push({id:`e${R}-${A}`,source:R,target:A});for(const R of S)c.push({id:`e${A}-${R}`,source:A,target:R})}return w=v,v}),w}else if(g.type==="parallel")return g.children.flatMap(w=>p(w,_));return[]}return p(s,["S"]).forEach(g=>{c.push({id:`e${g}-E`,source:g,target:"E"})}),u.push({id:"E",type:"end",position:t}),{nodes:u,edges:c}}const a=ae(()=>i(e.combination.nodes)),l=ae(()=>{const s=new Qr.graphlib.Graph;s.setDefaultEdgeLabel(()=>({})),s.setGraph({rankdir:"LR",nodesep:um,ranksep:sm});for(const u of a.value.nodes)switch(u.type){case"start":case"end":case"junction":{s.setNode(u.id,{width:n.width+Jr,height:n.height});break}case"component":{s.setNode(u.id,{label:u.data.label,width:r.width,height:r.height});break}}for(const u of a.value.edges)s.setEdge(u.source,u.target);return Qr.layout(s),a.value.nodes.map(u=>{const c=s.node(u.id);return{...u,position:{x:c.x-c.width/2+(u.type==="component"?0:Jr/2),y:c.y-c.height/2}}})});return(s,u)=>{const c=ye("v-card-text"),d=ye("v-spacer"),p=ye("v-btn"),f=ye("v-card-actions"),g=ye("v-card"),_=ye("v-dialog");return te(),$e(_,{style:{"max-width":"600px"}},{activator:J(({props:w})=>[lt(s.$slots,"activator",{props:w},void 0,!0)]),default:J(({isActive:w})=>[H(g,null,{default:J(()=>[H(c,{style:{height:"150px"}},{default:J(()=>[H(D(uh),{nodes:l.value,edges:a.value.edges,"nodes-draggable":!1,"nodes-connectable":!1,"fit-view-on-init":""},{"node-start":J(()=>[Me("div",{class:"node-terminal",style:Ae({width:n.width+"px",height:n.height+"px",borderWidth:n.borderWidth+"px"})},null,4),H(D(Xe),{class:"no-handle",type:"source",position:D(Y).Right},null,8,["position"])]),"node-end":J(()=>[Me("div",{class:"node-terminal",style:Ae({width:n.width+"px",height:n.height+"px",borderWidth:n.borderWidth+"px"})},null,4),H(D(Xe),{class:"no-handle",type:"target",position:D(Y).Left},null,8,["position"])]),"node-junction":J(()=>[Me("div",{class:"node-junction",style:Ae({width:o.width+"px",height:o.height+"px",borderWidth:o.borderWidth+"px"})},null,4),H(D(Xe),{class:"no-handle",type:"target",position:D(Y).Left},null,8,["position"]),H(D(Xe),{class:"no-handle",type:"source",position:D(Y).Right},null,8,["position"])]),"node-component":J(({data:E})=>[e.result.componentType.value==="resistor"?(te(),$e(eo,{key:0,text:E.label,color:"#fbddc9",barsAlign:"right",colorCodes:D(Go)(E.value,5,"4-band"),barWidth:4,separatorWidth:1,style:{color:"black",width:"70px",height:"15px","font-size":"50%",margin:"2px",padding:"0 5px"}},null,8,["text","colorCodes"])):e.result.componentType.value==="capacitor"?(te(),$e(eo,{key:1,text:E.label,color:"#111111",style:{color:"white",width:"70px",height:"15px","font-size":"50%",margin:"2px",padding:"0 5px"}},null,8,["text"])):e.result.componentType.value==="inductor"?(te(),$e(eo,{key:2,text:E.label,color:"#68b697",barsAlign:"right",colorCodes:D(Go)(E.value*1e6,10,"4-band"),barWidth:4,separatorWidth:1,style:{color:"black",width:"70px",height:"15px","font-size":"50%",margin:"2px",padding:"0 5px"}},null,8,["text","colorCodes"])):ze("",!0),H(D(Xe),{class:"no-handle",type:"target",position:D(Y).Left},null,8,["position"]),H(D(Xe),{class:"no-handle",type:"source",position:D(Y).Right},null,8,["position"])]),_:1},8,["nodes","edges"])]),_:1}),H(c,null,{default:J(()=>[it(" çµã¿åããå¼: "+Te(e.combination.toString(e.result.componentType.prefixSymbols)),1)]),_:1}),H(f,null,{default:J(()=>[H(d),H(p,{text:"éãã",onClick:E=>w.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:3})}}}),dm=hl(cm,[["__scopeId","data-v-2355a23f"]]),fm=["onClick"],hm=_e({__name:"ResultTable",props:{results:null},setup(e){const t=ce();function n(i,a){const l=i.calcValue(a.componentType.value);if(l===a.targetComponentValue)return"= æ­£ç¢º";const s=(l-a.targetComponentValue)/a.targetComponentValue*100;return Math.abs(s)<.001?s>0?"< +0.001":"< -0.001":(s>0?"+":"")+s.toFixed(3)}function o(i){return[{title:`${i.componentType.valueLabel} (${i.componentType.unit})`,value:"value"},{title:"èª¤å·®ç (%)",value:"error"},{title:"çµã¿åãã",value:"combination"},{title:"ç´ å­ã®ç¨®é¡æ°",value:"numberOfTypes"}]}function r(i,a){return i.map(l=>{const s=l.calcValue(a.componentType.value);return{value:xn.fit(s,a.componentType.prefixSymbols).toSimpleString(3),isBestValue:s===a.bestComponentValue,error:n(l,a),combinationText:l.toString(a.componentType.prefixSymbols),numberOfTypes:l.numberOfTypes,combination:l}})}return(i,a)=>{const l=ye("v-tab"),s=ye("v-tabs"),u=ye("v-data-table"),c=ye("v-tabs-window-item"),d=ye("v-tabs-window");return te(),ue(Re,null,[H(s,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=p=>t.value=p),"align-tabs":"center","bg-color":"secondary"},{default:J(()=>[(te(!0),ue(Re,null,vt(e.results,p=>(te(),$e(l,{key:p.componentNumber,"prepend-icon":D(fl)(p.finished,p.finishReason==="finishedAllCombination"?"mdi-check-all":p.finishReason==="aborted"?"mdi-progress-alert":"mdi-check","mdi-timer-sand","mdi-circle-medium")},{default:J(()=>[it(Te(p.componentNumber)+"æ¬ã®è§£ ",1)]),_:2},1032,["prepend-icon"]))),128))]),_:1},8,["modelValue"]),H(d,{modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=p=>t.value=p)},{default:J(()=>[(te(!0),ue(Re,null,vt(e.results,p=>(te(),$e(c,{key:p.componentNumber},{default:J(()=>[H(u,{items:r(p.resultCombinations??[],p),headers:o(p),density:"compact",class:"result-table","no-data-text":"ã¾ã è¨ç®ããã¦ãã¾ãã","items-per-page-text":"ãã¼ã¸ãã¨ã®è¡¨ç¤ºæ°:","page-text":"å¨{2}åã®çµæ / {0}-{1}"},{item:J(({item:f})=>[H(dm,{combination:f.combination,result:p},{activator:J(({props:g})=>[Me("tr",So({ref_for:!0},g,{class:["calculated",{"best-combination":f.isBestValue}],onClick:_=>console.info(p)}),[Me("td",null,Te(f.value),1),Me("td",null,Te(f.error),1),Me("td",null,Te(f.combinationText),1),Me("td",null,Te(f.numberOfTypes),1)],16,fm)]),_:2},1032,["combination","result"])]),_:2},1032,["items","headers"])]),_:2},1024))),128))]),_:1},8,["modelValue"])],64)}}});function pm(e){return new Worker("/tools/assets/worker-DQ86OVcp.js",{name:e==null?void 0:e.name})}const to=[{title:"æµæå¨ (Î©)",value:"resistor",unit:"Î©",valueLabel:"æµæå¤",prefixSymbols:["G","M","k","","m","Î¼"]},{title:"ã³ã³ãã³ãµ (F)",value:"capacitor",unit:"F",valueLabel:"éé»å®¹é",prefixSymbols:["","m","Î¼","n","p"]},{title:"ã¤ã³ãã¯ã¿ (H)",value:"inductor",unit:"H",valueLabel:"ã¤ã³ãã¯ã¿ã³ã¹",prefixSymbols:["","m","Î¼","n"]}],no=[{title:"E1",value:"E1"},{title:"E3",value:"E3"},{title:"E6",value:"E6"},{title:"E12",value:"E12"},{title:"E24",value:"E24"},{title:"E48",value:"E48"},{title:"E96",value:"E96"},{title:"E192",value:"E192"}],oo=[{title:"< 0.1%",value:.001},{title:"< 0.01%",value:1e-4},{title:"< 0.001%",value:1e-5},{title:"= 0.0%ï¼æ­£ç¢ºï¼",value:0},{title:"å¨æ¢ç´¢",value:void 0}],gm={resistor:{componentTargetValue:1234,minValue:10,maxValue:1e6,excludedValuePlaceholder:1e3,excludedValues:[]},capacitor:{componentTargetValue:1234e-9,minValue:1e-12,maxValue:1,excludedValuePlaceholder:1e-6,excludedValues:[]},inductor:{componentTargetValue:1234e-7,minValue:1e-9,maxValue:1,excludedValuePlaceholder:1e-5,excludedValues:[]}},vm={key:0},mm={key:1},ym={key:2},wm={key:3},_m={key:4},bm=_e({__name:"App",setup(e){const t=ce([2,3,4,5].map(f=>({componentNumber:f,componentType:to[0],targetComponentValue:1234,series:Fo[no[3].value],minValue:0,maxValue:0,excludedValues:[],targetErrorRate:oo[2],worker:dl(new pm)}))),n=ce(to[0]),o=ce(gm),r=ae(()=>o.value[n.value.value]),i=ce(no[3]),a=ce(oo[2]),l=ae(()=>t.value.some(f=>f.finishReason==="calculating")),s=ce(),u=ce(1e3),c=ae(()=>{if(!l.value)return 0;const f=t.value.reduce((_,w)=>_+(w.totalCombinations??0),0),g=t.value.reduce((_,w)=>_+(w.currentCombination??0),0);return f===0?0:g/f*100});for(const f of t.value)me(()=>f.worker.data,g=>{var _,w;if(g.result){const E=g.result;if({current:f.currentCombination,total:f.totalCombinations}=E,E.componentNodes){const v=new Pe(al(E.componentNodes));if(!((_=f.resultCombinations)!=null&&_.some(I=>I.equals(v)))){(w=f.resultCombinations)==null||w.unshift(v),f.bestComponentValue=v.calcValue(f.componentType.value);const I=(f.bestComponentValue-f.targetComponentValue)/f.targetComponentValue;if(typeof f.targetErrorRate.value=="number"&&Math.abs(I)<=f.targetErrorRate.value){f.finishReason="finishedByUnderErrorRate",f.finished=!0;return}}}}if(g.done){f.finishReason="finishedAllCombination",f.finished=!0;return}s.value?(f.finishReason="aborted",f.finished=!0):f.worker.post({type:"invoke"})});function d(){[Ne.required,Ne.value,Ne.notNegative,Ne.notZero].every(f=>f(u.value.toString())===!0)&&!r.value.excludedValues.includes(u.value)&&r.value.excludedValues.push(u.value)}function p(){if(l.value)s.value=!0;else{s.value=!1;for(const f of t.value)f.componentType=n.value,f.targetComponentValue=r.value.componentTargetValue,f.minValue=r.value.minValue,f.maxValue=r.value.maxValue,f.excludedValues=r.value.excludedValues,f.series=Fo[i.value.value],f.targetErrorRate=a.value,f.finished=!1,f.finishReason="calculating",f.bestComponentValue=0,f.resultCombinations=[],f.totalCombinations=0,f.currentCombination=0,f.worker.post({type:"initialize",value:f.targetComponentValue,componentType:f.componentType.value,componentNumber:f.componentNumber,series:[...f.series],minValue:f.minValue,maxValue:f.maxValue,excludedValues:[...f.excludedValues],progressBeacon:1e6}),f.worker.post({type:"invoke"})}}return(f,g)=>{const _=ye("v-select"),w=ye("v-col"),E=ye("v-row"),v=ye("v-combobox"),I=ye("v-card-text"),S=ye("v-btn"),A=ye("v-form"),R=ye("v-icon"),T=ye("v-list-item"),X=ye("v-list"),U=ye("v-spacer"),$=ye("v-card-actions"),b=ye("v-card"),ee=ye("v-dialog"),ne=ye("v-progress-linear");return te(),$e(ul,{"page-id":"electric/combination","toolbar-title":"ååç´ å­ çµã¿åããè¨ç®æ©"},{default:J(()=>[H(E,null,{default:J(()=>[H(w,{cols:"4"},{default:J(()=>[H(_,{label:"ç´ å­ã®ç¨®é¡",density:"compact",variant:"underlined",modelValue:n.value,"onUpdate:modelValue":g[0]||(g[0]=m=>n.value=m),items:D(to),"hide-details":"","return-object":""},null,8,["modelValue","items"])]),_:1}),H(w,{cols:"8"},{default:J(()=>[H(Kt,{value:r.value.componentTargetValue,"onUpdate:value":g[1]||(g[1]=m=>r.value.componentTargetValue=m),label:`æ±ãã${n.value.valueLabel}`,variant:"underlined",density:"compact",unit:n.value.unit,"fraction-digits":3,"prefix-symbols":n.value.prefixSymbols,rule:[D(Ne).required,D(Ne).value,D(Ne).notNegative,D(Ne).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1})]),_:1}),H(E,null,{default:J(()=>[H(w,{cols:"4"},{default:J(()=>[H(_,{label:"Eç³»å",density:"compact",variant:"underlined",modelValue:i.value,"onUpdate:modelValue":g[2]||(g[2]=m=>i.value=m),items:D(no),"hide-details":"","return-object":""},null,8,["modelValue","items"])]),_:1}),H(w,{cols:"8"},{default:J(()=>[H(ee,{"max-width":"600"},{activator:J(({props:m})=>[H(v,So(m,{multiple:"","model-value":r.value.excludedValues,label:`é¤å¤ãã${n.value.valueLabel}ï¼ãªãã·ã§ã³ï¼`,suffix:n.value.unit,density:"compact",variant:"underlined","hide-details":"",readonly:""}),null,16,["model-value","label","suffix"])]),default:J(({isActive:m})=>[H(b,{title:`é¤å¤ãã${n.value.valueLabel}`},{default:J(()=>[H(I,null,{default:J(()=>[it(" ç®æ¨ã®"+Te(n.value.valueLabel)+"ä»¥å¤ã«ããçµã¿åããã«ä½¿ç¨ããªã"+Te(n.value.valueLabel)+"ãè¤æ°æå®ã§ãã¾ãã ",1)]),_:1}),H(I,null,{default:J(()=>[H(A,{onSubmit:ll(d,["prevent"])},{default:J(()=>[H(E,null,{default:J(()=>[H(w,null,{default:J(()=>[H(Kt,{value:u.value,"onUpdate:value":g[3]||(g[3]=C=>u.value=C),label:`é¤å¤ã®å¯¾è±¡ã«è¿½å ãã${n.value.valueLabel}`,variant:"underlined",density:"compact",unit:n.value.unit,"fraction-digits":3,"prefix-symbols":n.value.prefixSymbols,rule:[D(Ne).required,D(Ne).value,D(Ne).notNegative,D(Ne).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1}),H(w,{cols:"3"},{default:J(()=>[H(S,{color:"success",type:"submit",variant:"outlined",block:""},{default:J(()=>g[10]||(g[10]=[it("è¿½å ")])),_:1})]),_:1}),H(w,{cols:"3"},{default:J(()=>[H(S,{variant:"outlined",block:"",onClick:g[4]||(g[4]=C=>r.value.excludedValues=[])},{default:J(()=>g[11]||(g[11]=[it(" å¨ã¦ã¯ãªã¢ ")])),_:1})]),_:1})]),_:1})]),_:1}),H(X,{density:"compact","onClick:select":g[5]||(g[5]=C=>r.value.excludedValues=r.value.excludedValues.filter(N=>N!==C.id))},{default:J(()=>[(te(!0),ue(Re,null,vt(r.value.excludedValues,(C,N)=>(te(),$e(T,{key:N,value:C,slim:""},{prepend:J(()=>[H(R,{icon:"mdi-close"})]),default:J(()=>[it(Te(D(xn).fit(C,n.value.prefixSymbols))+Te(n.value.unit)+" ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1}),H($,null,{default:J(()=>[H(U),H(S,{text:"éãã",onClick:C=>m.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["title"])]),_:1})]),_:1})]),_:1}),H(E,null,{default:J(()=>[H(w,{cols:"4"},{default:J(()=>[H(Kt,{value:r.value.minValue,"onUpdate:value":g[6]||(g[6]=m=>r.value.minValue=m),label:`ä½¿ç¨ããæå°ã®${n.value.valueLabel}`,variant:"underlined",density:"compact",unit:n.value.unit,"fraction-digits":0,"prefix-symbols":n.value.prefixSymbols,rule:[D(Ne).required,D(Ne).value,D(Ne).notNegative,D(Ne).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1}),H(w,{cols:"4"},{default:J(()=>[H(Kt,{value:r.value.maxValue,"onUpdate:value":g[7]||(g[7]=m=>r.value.maxValue=m),label:`ä½¿ç¨ããæå¤§ã®${n.value.valueLabel}`,variant:"underlined",density:"compact",unit:n.value.unit,"fraction-digits":0,"prefix-symbols":n.value.prefixSymbols,rule:[D(Ne).required,D(Ne).value,D(Ne).notNegative,D(Ne).notZero],"hide-details":""},null,8,["value","label","unit","prefix-symbols","rule"])]),_:1}),H(w,{cols:"4"},{default:J(()=>[H(_,{label:"è¨ç®ãçµããèª¤å·®ç",density:"compact",variant:"underlined",modelValue:a.value,"onUpdate:modelValue":g[8]||(g[8]=m=>a.value=m),items:D(oo),"hide-details":"","return-object":""},null,8,["modelValue","items"])]),_:1})]),_:1}),H(E,null,{default:J(()=>[H(w,{"align-self":"center"},{default:J(()=>[H(ne,{color:"light-blue",modelValue:c.value,"onUpdate:modelValue":g[9]||(g[9]=m=>c.value=m),height:"20",striped:l.value},{default:J(()=>[l.value?(te(),ue("strong",vm,"è¨ç®ä¸­... "+Te(c.value.toFixed(3))+"%",1)):t.value.some(m=>m.finishReason==="aborted")?(te(),ue("strong",mm,"è¨ç®ãä¸­æ­¢ãã¾ãã")):t.value.some(m=>m.finishReason==="error")?(te(),ue("strong",ym," ã¨ã©ã¼ã«ããè¨ç®ãä¸­æ­¢ãã¾ãã ")):t.value.some(m=>m.finishReason==="finishedByUnderErrorRate")?(te(),ue("strong",wm," è¨ç®ãå®äºãã¾ãã ")):t.value.every(m=>m.finishReason==="finishedAllCombination")?(te(),ue("strong",_m," å¨æ¢ç´¢ãå®äºãã¾ãã ")):ze("",!0)]),_:1},8,["modelValue","striped"])]),_:1}),H(w,{cols:"4"},{default:J(()=>[H(S,{"prepend-icon":l.value?"mdi-timer-sand":"mdi-play",variant:l.value?"outlined":"flat",color:l.value?"error":"success",onClick:p,block:""},sl({_:2},[l.value?{name:"default",fn:J(()=>[g[12]||(g[12]=Me("div",null,"è¨ç®ä¸­",-1)),g[13]||(g[13]=Me("div",{class:"text-caption"},"ã¯ãªãã¯ã§ä¸­æ­¢",-1))]),key:"0"}:{name:"default",fn:J(()=>[g[14]||(g[14]=it("è¨ç®éå§"))]),key:"1"}]),1032,["prepend-icon","variant","color"])]),_:1})]),_:1}),H(E,null,{default:J(()=>[H(w,null,{default:J(()=>[H(hm,{results:t.value},null,8,["results"])]),_:1})]),_:1})]),_:1})}}});cl("#app",bm);
