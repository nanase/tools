var E=Object.defineProperty;var j=(u,p,f)=>p in u?E(u,p,{enumerable:!0,configurable:!0,writable:!0,value:f}):u[p]=f;var k=(u,p,f)=>j(u,typeof p!="symbol"?p+"":p,f);(function(){"use strict";var u=Object.defineProperty,p=(s,e,t)=>e in s?u(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,f=(s,e,t)=>p(s,e+"",t);function*S(s,e){const t=s.length,r=Array(e).fill(0);for(;;){yield r.map(n=>s[n]);let o=e-1;for(;o>=0&&(r[o]++,!(r[o]<t));)r[o]=0,o--;if(o<0)break}}const x={symbol:"",exponent:0},m=[{symbol:"Q",exponent:30},{symbol:"R",exponent:27},{symbol:"Y",exponent:24},{symbol:"Z",exponent:21},{symbol:"E",exponent:18},{symbol:"P",exponent:15},{symbol:"T",exponent:12},{symbol:"G",exponent:9},{symbol:"M",exponent:6},{symbol:"k",exponent:3},{symbol:"h",exponent:2},{symbol:"da",exponent:1},x,{symbol:"d",exponent:-1},{symbol:"c",exponent:-2},{symbol:"m",exponent:-3},{symbol:"μ",exponent:-6},{symbol:"u",exponent:-6},{symbol:"n",exponent:-9},{symbol:"p",exponent:-12},{symbol:"f",exponent:-15},{symbol:"a",exponent:-18},{symbol:"z",exponent:-21},{symbol:"y",exponent:-24},{symbol:"r",exponent:-27},{symbol:"q",exponent:-30}],N=class a{constructor(e,t){this.fraction=e,this.prefix=t}get actualValue(){return this.fraction*10**this.prefix.exponent}toString(){return`${this.fraction}${this.prefix.symbol}`}toSimpleString(e){return`${Number(this.fraction.toFixed(e))}${this.prefix.symbol}`}toFixed(e){return`${this.fraction.toFixed(e)}${this.prefix.symbol}`}static getPrefixSymbols(e){return m.filter(t=>t.exponent%(e?1:3)===0).map(t=>t.symbol)}static test(e){return a.siValuePattern.test(e??"")}static parse(e){const t=a.siValuePattern.exec(e??"");if(t==null)return new a(Number.NaN,x);const r=Number.parseFloat(t[1]),o=m.find(n=>n.symbol===t[2]);return new a(r,o)}static fit(e,t){if(!Number.isFinite(e)&&t.length===0)return new a(e,x);if(e!==0){const r=Math.sign(e);e=Math.abs(e);const o=t.map(n=>{const l=a.getPrefix(n),c=e*10**-l.exponent,b=Math.abs(c-500);return{prefix:l,practicalValue:c,rank:b}}).sort((n,l)=>n.rank-l.rank);return new a(o[0].practicalValue*r,o[0].prefix)}else return new a(0,x)}static fitBy(e,t){const r=a.getPrefix(t);if(!Number.isFinite(e))return new a(e,r);const o=Math.sign(e);e=Math.abs(e);const n=e*10**-r.exponent;return new a(n*o,r)}static getPrefix(e){const t=m.find(r=>r.symbol===e);if(!t)throw new Error(`Prefix symbol '${e}' is not defined.`);return t}static successor(e,t){const r=a.getPrefix(e),o=m.filter(l=>l.exponent>r.exponent&&l.exponent%(t?1:3)===0);if(o.length===0)return e;const n=o.slice(-1)[0];return o.filter(l=>l.exponent===n.exponent)[0].symbol}static predecessor(e,t){const r=a.getPrefix(e),o=m.filter(n=>n.exponent<r.exponent&&n.exponent%(t?1:3)===0);return o.length===0?e:o[0].symbol}};f(N,"siValuePattern",/^([+-]?(?:[0-9]*\.)?[0-9]+)([QRYZEPTGMkmuμnpfazyrq]?)$/);let F=N;function*d(s){s.length===1&&(yield[s[0]]);for(let e=1;e<s.length;e++){const t=s.slice(0,e),r=s.slice(e);for(const o of d(t))for(const n of d(r))yield["+",...o,...n];for(const o of d(r))for(const n of d(t))yield["|",...n,...o]}}function*$(s,e,t){for(let r=e;r<=t;r*=10)for(const o of s){const n=o*r/100;e<=n&&n<=t&&(yield n)}}function*T(s,e,t,r,o,n,l,c){l=l??[];const b=[...$(r,o,n)].filter(h=>h!==s&&!l.includes(h)).sort((h,y)=>Math.abs(h-s)-Math.abs(y-s)),w=Array.from({length:t},()=>({value:0})),M=[...d(w)],P=b.length**t*M.length;let I=0,g=0;for(const h of S(b,t)){h.forEach((y,v)=>{w[v].value=y});for(const y of M){const v=i.calcValue(y,e);g++,Math.abs(I-s)>=Math.abs(v-s)&&(I=v,yield{combination:new i(y),total:P,current:g}),c&&g%c===0&&(yield{total:P,current:g})}}}class i{constructor(e){k(this,"componentNodes");k(this,"nodes");this.componentNodes=structuredClone(e),this.nodes=i.generateSyntaxTree(e)}get numberOfTypes(){return this.componentNodes.filter(e=>typeof e=="object").map(e=>e.value).filter((e,t,r)=>r.indexOf(e)===t).length}equals(e){return i.equalsInternal(this.nodes,e.nodes)}toString(e=["T","G","M","k","","m","μ","n","p","f"],t=3){return i.toStringInternal(this.nodes,e,t)}calcValue(e){return e==="capacitor"?i.calcValueForCapacitorInternal(this.componentNodes):i.calcValueInternal(this.componentNodes)}static calcValue(e,t){return t==="capacitor"?i.calcValueForCapacitorInternal(e):i.calcValueInternal(e)}static equalsInternal(e,t){if(e.type!==t.type||e.children.length!==t.children.length)return!1;const r=[...e.children].sort(i.compareNodes),o=[...t.children].sort(i.compareNodes);return r.every((n,l)=>i.deepCompare(n,o[l]))}static compareNodes(e,t){return e.type==="term"&&t.type==="term"?e.children-t.children:e.type==="term"?-1:t.type==="term"?1:e.type.localeCompare(t.type)}static deepCompare(e,t){return e.type!==t.type?!1:e.type==="term"&&t.type==="term"?e.children===t.children:e.type!=="term"&&t.type!=="term"?i.equalsInternal(e,t):!1}static generateSyntaxTree(e){const t=[];for(let r=e.length-1;r>=0;r--){const o=e[r],n=[];if(o==="+"){const l=t.pop(),c=t.pop();l.type==="series"?n.push(...l.children):n.push(l),c.type==="series"?n.push(...c.children):n.push(c),t.push({type:"series",children:n})}else if(o==="|"){const l=t.pop(),c=t.pop();l.type==="parallel"?n.push(...l.children):n.push(l),c.type==="parallel"?n.push(...c.children):n.push(c),t.push({type:"parallel",children:n})}else t.push({type:"term",children:o.value})}if(t[0].type!=="term")return t[0];throw new Error("invalid nodes")}static toStringInternal(e,t,r){return e.children.map(o=>o.type==="term"?F.fit(o.children,t).toSimpleString(r):`(${i.toStringInternal(o,t,r)})`).join(e.type==="series"?" + ":" | ")}static calcValueInternal(e){const t=[];for(let r=e.length-1;r>=0;r--){const o=e[r];if(o==="+"){const n=t.pop(),l=t.pop();t.push(n+l)}else if(o==="|"){const n=t.pop(),l=t.pop();t.push(n*l/(n+l))}else t.push(o.value)}return t[0]}static calcValueForCapacitorInternal(e){const t=[];for(let r=e.length-1;r>=0;r--){const o=e[r];if(o==="+"){const n=t.pop(),l=t.pop();t.push(n*l/(n+l))}else if(o==="|"){const n=t.pop(),l=t.pop();t.push(n+l)}else t.push(o.value)}return t[0]}}let V=null;self.addEventListener("message",s=>{switch(s.data.type){case"initialize":{self.postMessage(q(s.data));break}case"invoke":{self.postMessage(z(s.data));break}}});function q(s){return V=T(s.value,s.componentType,s.componentNumber,s.series,s.minValue,s.maxValue,s.excludedValues,s.progressBeacon),console.info("[worker] initialized"),{type:"initialize"}}function z(s){var t;if(!V)return{type:"invoke",done:!1};const e=V.next();return{type:"invoke",done:e.done??!1,result:e.value?{componentNodes:(t=e.value.combination)==null?void 0:t.componentNodes,total:e.value.total,current:e.value.current}:void 0}}})();
