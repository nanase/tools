import{m as v,a4 as d,a5 as h,k,j as p,z as y,n as O,a6 as W,a7 as S,a8 as w}from"./tools-ToolAppBase.vue_vue_type_script_setup_true_lang-Btv-3mZf.js";const m=S?window:void 0;function R(t){var n;const o=d(t);return(n=o==null?void 0:o.$el)!=null?n:o}function z(){const t=p(!1),n=y();return n&&O(()=>{t.value=!0},n),t}function A(t){const n=z();return v(()=>(n.value,!!t()))}function E(t,n,o={}){const{window:u=m,...r}=o;let e;const i=A(()=>u&&"MutationObserver"in u),l=()=>{e&&(e.disconnect(),e=void 0)},s=v(()=>{const a=d(t),c=(Array.isArray(a)?a:[a]).map(R).filter(h);return new Set(c)}),M=k(()=>s.value,a=>{l(),i.value&&a.size&&(e=new MutationObserver(n),a.forEach(c=>e.observe(c,r)))},{immediate:!0,flush:"post"}),b=()=>e==null?void 0:e.takeRecords(),f=()=>{M(),l()};return w(f),{isSupported:i,stop:f,takeRecords:b}}function j(t,n,o){const{window:u=m}={},r=p(null),e=W(),i=(...s)=>{e.value&&e.value.postMessage(...s)},l=function(){e.value&&e.value.terminate()};return u&&(typeof t=="string"?e.value=new Worker(t,n):typeof t=="function"?e.value=t():e.value=t,e.value.onmessage=s=>{r.value=s.data},w(()=>{e.value&&e.value.terminate()})),{data:r,post:i,terminate:l,worker:e}}export{E as a,j as u};
